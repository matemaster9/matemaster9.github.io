<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>SpringBoot</title>
      <link href="posts/33757.html"/>
      <url>posts/33757.html</url>
      
        <content type="html"><![CDATA[<p style="font-size: 28px">å†™åœ¨å‰é¢</p><p>SpringBoot é¢„æƒ³å­¦ä¹ å¾é€”ï¼š</p><ol><li>è®¤çŸ¥ã€äº†è§£<ul><li>çŸ¥æ™“ spring boot æ˜¯ä»€ä¹ˆï¼Ÿæ¨ªå‘æ‹“å±•æŠ€æœ¯å¹¿åº¦ï¼Œäº†è§£webåç«¯æŠ€æœ¯ï¼</li><li>spring æ¡†æ¶çš„æ ¸å¿ƒæ¦‚å¿µï¼šIOCå®¹å™¨ã€ AOPåˆ‡é¢</li><li>Spring ã€ SpringMVC ã€ SpringBoot ä¸ºä»€ä¹ˆå‡ºç°ï¼Ÿ</li></ul></li><li>å­¦ä¹  SpringBoot åŸºæœ¬çŸ¥è¯†ï¼ˆå­¦è¯­æ³•ã€å­¦ç”¨æ³•ï¼‰<ul><li>çœ‹æ­å»º demo è§†é¢‘ï¼Œèƒ½å¤Ÿå¿«é€Ÿå»ºç«‹ç®€å•demo</li><li>çœ‹å®˜æ–¹æ–‡æ¡£ <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/">spring-boot-docs</a></li><li>çœ‹ä¹¦ï¼šSpring5å®æˆ˜ã€ SpringBootå®æˆ˜</li><li>æ€»ç»“ã€å†™çŸ¥è¯†ç‚¹åšå®¢</li></ul></li><li>å±€éƒ¨ç»ƒä¹ ã€å°å‹å®æˆ˜ã€æ­ç¯å¢ƒ<ul><li>é’ˆå¯¹æ¯ä¸ªå°çŸ¥è¯†ç‚¹ï¼Œçœ‹å®˜æ–¹ç¤ºä¾‹ï¼Œè‡ªå·±ç¼–ç </li><li>æ¯ä¸€éƒ¨åˆ†å¯ä»¥æ­å»º å°demo <a href="https://github.com/matemaster9/MasterStudio">GitHubä»“åº“</a></li><li>ç»§ç»­å†™åšå®¢ è®°å½•å‘ğŸ•³</li></ul></li><li>å¼€æºé¡¹ç›®ç»ƒä¹  <a href="https://el-admin.vip/">eladmin</a><ul><li>ç©è½¬ï¼ˆå¸Œæœ›è‡ªå·±å°†æ¥å¼€æºç©è½¬ï¼ï¼‰æ‰€éœ€è¦çš„è®¡ç®—æœºåŸºç¡€çŸ¥è¯†</li><li>å¸Œæœ›æˆ‘å¯ä»¥åœ¨æ­¤å¼€æºé¡¹ç›®ä¹‹ä¸Š diy æˆ–è€…æœªæ¥å¯ä»¥è®¾è®¡å‡º å¼€æºé¡¹ç›® <a href="https://github.com/">elmaster</a></li></ul></li><li>èœé€¼çš„æˆ‘å¸Œæœ›æœªæ¥å¯ä»¥é€ è½®å­ï¼Œå†™å¼€æºé¡¹ç›®ï¼æˆä¸ºå¤§ç‰›ï¼ï¼ˆæ¥è‡ªèœé¸Ÿçš„æ¢¦æƒ³ï¼‰</li></ol><h1 id="springåŸºç¡€"><a href="#springåŸºç¡€" class="headerlink" title="springåŸºç¡€"></a>springåŸºç¡€</h1><h2 id="IOC"><a href="#IOC" class="headerlink" title="IOC"></a>IOC</h2><p>é¦–å…ˆå±•ç¤ºä¸€å¼  spring æ¡†æ¶çš„ç»“æ„å›¾ï¼Œæ¥è§£é‡Š spring çš„ä¸»è¦ä½œç”¨ï¼š</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210520090337.png"><p>ApplicationContext:ä½œä¸ºæœ€ä¸»è¦çš„ springå®¹å™¨ï¼Œæœ‰ç€ä¸¤ä¸ªå®ç°ç±»ï¼š</p><ul><li>ClassPathXmlApplicationContext: ä»ç±»åŠ è½½è·¯å¾„ä¸‹æœç´¢é…ç½®æ–‡ä»¶ï¼Œå¹¶æ ¹æ®é…ç½®æ–‡ä»¶æ¥åˆ›å»ºSpringå®¹å™¨ã€‚</li><li>FileSystemXmlApplicationContext: ä»æ–‡ä»¶ç³»ç»Ÿçš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ä¸‹å»æœç´¢é…ç½®æ–‡ä»¶ï¼Œå¹¶æ ¹æ®é…ç½®æ–‡ä»¶æ¥åˆ›å»ºSpringå®¹å™¨ã€‚</li></ul><p>é¦–å…ˆéœ€è¦äº†è§£ä¸€ä¸ªå«åšï¼šâ€œä¾èµ–æ³¨å…¥â€ çš„æ¦‚å¿µã€‚å› ä¸ºJavaç¨‹åºé€šè¿‡ springå®¹å™¨æ¥ç®¡ç†è®¿é—®å®¹å™¨ä¸­çš„beanï¼Œå¹¶ä¸”ä»åŸæ¥çš„ â€œä¸»åŠ¨åˆ›å»ºä¾èµ–å¯¹è±¡â€ åˆ° ç°åœ¨ â€œè¢«åŠ¨çš„ç”±springå®¹å™¨å°†ç”Ÿæˆçš„ä¾èµ–å¯¹è±¡æ³¨å…¥åˆ°è°ƒç”¨è€…ä¸­â€ã€‚</p><p>è‡³äº IOC å’Œ DI ä¹‹é—´çš„æ¦‚å¿µåŒºåˆ«ï¼Œä¸»è¦æ˜¯ä»ä¸åŒçš„è§’åº¦æ¥è§£é‡Šè¿™ç§ä¾èµ–å…³ç³»çš„äº§ç”Ÿæ–¹å¼ã€‚ IOC ï¼šä»ä¾èµ–å¯¹è±¡çš„è·å–æ–¹å¼ï¼Œç”±ä¸»åŠ¨å˜è¢«åŠ¨ã€‚ DI ï¼š ä»springå®¹å™¨çš„è§’åº¦æ¥çœ‹ï¼Œä¾èµ–å¯¹è±¡æ˜¯å®¹å™¨æ³¨å…¥åˆ°è°ƒç”¨è€…ã€‚</p><p>ä¾èµ–æ³¨å…¥çš„ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>è®¾å€¼æ³¨å…¥ï¼šåˆ©ç”¨è°ƒç”¨è€…çš„ setter æ–¹æ³•</li><li>æ„é€ æ³¨å…¥ï¼šåˆ©ç”¨è°ƒç”¨è€…çš„ æ„é€  æ–¹æ³•</li></ul><p>è®¾å€¼æ³¨å…¥ï¼ˆä¸»ï¼‰ï¼šè®©ä¾èµ–æ³¨å…¥æ›´åŠ æ˜æ˜¾ã€ç®€å•ï¼Œå¹¶ä¸”åœ¨ä¾èµ–å¯é€‰çš„æƒ…å†µä¸‹ï¼Œå‡å°‘äº†æ„é€ å™¨çš„è‡ƒè‚¿ã€‚</p><p>æ„é€ æ³¨å…¥ï¼ˆè¾…ï¼‰ï¼šå¯ä»¥æ§åˆ¶ä¾èµ–æ³¨å…¥çš„ä¼˜å…ˆçº§é¡ºåºï¼Œå¯¹äºä¾èµ–å…³ç³»ä¸å˜çš„beanæœ‰ç”¨ï¼Œå¹¶ä¸”å› ä¸ºåªè¦ç»„ä»¶åˆ›é€ è€…æ‰å¯ä»¥è§„å®šä¾èµ–å…³ç³»ï¼Œæ‰€ä»¥å¯¹è°ƒç”¨è€…é»‘ç›’ï¼Œä¿è¯é«˜å†…èšã€‚</p><p><b style="font-size: 27px">Dependency Injection</b></p><p>ç±»ä¼¼äºä¸‹é¢çš„æ–¹å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠä¾èµ–çš„ç±»ï¼šCollaborator æ³¨å…¥åˆ° ExampleBean</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleBean</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Collaborator1</span> collaborator1<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Collaborator2</span> collaborator2<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">ExampleBean</span><span class="token punctuation">(</span><span class="token class-name">Collaborator1</span> collaborator1<span class="token punctuation">,</span> <span class="token class-name">Collaborator2</span> collaborator2<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>collaborator1 <span class="token operator">=</span> collaborator1<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>collaborator2 <span class="token operator">=</span> collaborator2<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“ç„¶ï¼Œä¸Šé¢çš„æ­¥éª¤æˆ‘ä»¬åªæ˜¯å•çº¯åœ°åœ¨ç±»ä¸Šé¢å®Œæˆäº†æ³¨å…¥ï¼Œä½†æ˜¯ springå®¹å™¨ä¸çŸ¥é“è¿™ä¸€æŒ‡ä»¤ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é…ç½®å…ƒæ•°æ®ã€‚åœ¨ä¼ ç»Ÿçš„é…ç½®æ–¹å¼ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¸‰ç§æ–¹å¼</p><ol><li>æŒ‰ç…§beançš„idæ¥é…ç½®</li></ol><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>exampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>cn.matemaster.ExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>collaborator1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>collaborator2<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token comment">&lt;!--ç­‰ä»·å†™æ³•&lt;constructor-arg&gt;&lt;ref bean = "collaborator2"/&gt;&lt;/constructor-arg&gt;--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>collaborator1<span class="token punctuation">"</span></span> <span class="token attr-name">class</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>cn.matemaster.Collaborator1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>collaborator2<span class="token punctuation">"</span></span> <span class="token attr-name">class</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>cn.matemaster.Collaborator2<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>æŒ‰ç…§æ„é€ å‡½æ•°çš„å‚æ•°ç±»å‹æ¥é…ç½®</li></ol><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>exampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>cn.matemaster.ExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">type</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>cn.matemaster.Collaborator1<span class="token punctuation">"</span></span> <span class="token attr-name">value</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>xxx<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">type</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>cn.matemaster.Collaborator2<span class="token punctuation">"</span></span> <span class="token attr-name">value</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>xxx<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>æŒ‰ç…§æ„é€ å‚æ•°çš„ç´¢å¼•æ¥é…ç½®ï¼Œä»¥0å¼€å§‹</li></ol><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>exampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>cn.matemaster.ExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">index</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">value</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>xxx<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">index</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name">value</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>xxx<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li>æŒ‰ç…§æ„é€ å‚æ•°çš„å½¢å‚åç§°æ¥é…ç½®</li></ol><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>exampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>cn.matemaster.ExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>collaborator1<span class="token punctuation">"</span></span> <span class="token attr-name">value</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>xxx<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>collaborator2<span class="token punctuation">"</span></span> <span class="token attr-name">value</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>xxx<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>é‚£ä¹ˆæˆ‘ä»¬åœ¨çœ‹çœ‹è®¾ç½®æ³¨å…¥æ—¶ï¼Œå¦‚ä½•åˆ›å»ºç±»ï¼Œé…ç½®å…ƒæ•°æ®</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleBean</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">AnotherBean</span> beanOne<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">YetAnotherBean</span> beanTwo<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanOne</span><span class="token punctuation">(</span><span class="token class-name">AnotherBean</span> beanOne<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>beanOne <span class="token operator">=</span> beanOne<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanTwo</span><span class="token punctuation">(</span><span class="token class-name">YetAnotherBean</span> beanTwo<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>beanTwo <span class="token operator">=</span> beanTwo<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setIntegerProperty</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>i <span class="token operator">=</span> i<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é…ç½®å…ƒæ•°æ®</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>exampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.ExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- setter injection using the nested ref element --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanOne<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anotherExampleBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- setter injection using the neater ref attribute --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beanTwo<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>yetAnotherBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>integerProperty<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>anotherExampleBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.AnotherBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>yetAnotherBean<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>examples.YetAnotherBean<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>springå®¹å™¨åˆ›å»ºbeançš„ä¸‰ç§æ–¹å¼ï¼š</p><ul><li>æ„é€ å™¨åˆ›å»ºbeanå®ä¾‹</li><li>é™æ€å·¥å‚æ–¹æ³•åˆ›å»ºbeanå®ä¾‹</li><li>å®ä¾‹å·¥å‚æ–¹æ³•åˆ›å»ºbeanå®ä¾‹</li></ul><p>springå­˜åœ¨è‡ªåŠ¨è¢«æ ‡è¯†ä¸ºbeançš„åŸºæœ¬æ³¨è§£ï¼š@Componentã€@Controllerã€@Serviceã€@Repository</p><p>springå®¹å™¨çš„é¢„è§ˆï¼š</p><ol><li>å¦‚ä½•é…ç½®å…ƒæ•°æ®ï¼Ÿå…ƒæ•°æ®çš„ä½œç”¨ï¼Ÿ</li><li>å¦‚ä½•åˆå§‹åŒ–springå®¹å™¨ï¼Ÿ</li><li>å¦‚ä½•ä½¿ç”¨springå®¹å™¨ï¼Ÿ</li></ol><p>é’ˆå¯¹ï¼ˆ1ï¼‰å› ä¸ºä»¥å‰éƒ½æ˜¯xmlé…ç½®å…ƒæ•°æ®ï¼Œè´¼çƒ¦ã€‚ç°åœ¨ spring boot é‡‡å–çº¦å®šå¤§äºé…ç½®çš„ç”¨æ³•ï¼Œæˆ‘ä»¬å°±éœ€è¦å¤šä½¿ç”¨å‡ ä¸ªä¸å«å¸¸ç”¨çš„beanæ³¨è§£ï¼Œå°±å¯ä»¥é…ç½®ç›¸å…³çš„bean</p><p>é’ˆå¯¹ï¼ˆ2ï¼‰ä»¥å‰éƒ½æ˜¯ SpringContext æ¥å£çš„å®ç°ç±»å–è¯»å–é…ç½®çš„å…ƒæ•°æ®æ¥åˆ›å»ºå®ç°ç±»çš„å®ä¾‹ï¼Œç°åœ¨ springbootè‡ªåŠ¨å®Œæˆåˆå§‹åŒ–ï¼</p><p>é’ˆå¯¹ï¼ˆ3ï¼‰å¯ä»¥ä½¿ç”¨ SpringContext æ¥å£çš„å®ç°ç±»è·å–å®¹å™¨å®ä¾‹ã€‚</p><p>ä¸‹é¢åœ¨spring bootä¸­è·å–å¯¹åº”çš„å®¹å™¨å®ä¾‹ï¼Œå¹¶ä¸”åˆ©ç”¨å®¹å™¨è·å–å®¹å™¨ä¸­çš„bean-&gt;car</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoApplication</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">ConfigurableApplicationContext</span> run <span class="token operator">=</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">DemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Car</span> car <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Car</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        car<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é¢å‘åˆ‡é¢ç¼–ç¨‹ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Aspect</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JImplAspect</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution (* cn.matemaster.demo.bean.Car.print())"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"demo()"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åœ¨è¿™é‡Œæ’å…¥ä»£ç ï¼yyds"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="font-size:27px">Javaé…ç½®ç±»</b></p><p>åœ¨ä½¿ç”¨Javaç±»æ¥æ³¨è§£ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°@Configurationæ³¨è§£ï¼Œå¹¶ä¸”ä½¿ç”¨@Beanæ¥æ ‡æ³¨æ¯ä¸€ä¸ªé…ç½®é¡¹ã€‚æ¯ä¸€ä¸ªbeançš„idå°†ä¸æ–¹æ³•åä¿æŒä¸€è‡´</p><p>æ¯”å¦‚åœ¨å¼€æºé¡¹ç›®eladminä¸­å…³äºwebmvcçš„é…ç½®ï¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableWebMvc</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfigurerAdapter</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>    <span class="token comment">/** æ–‡ä»¶é…ç½® */</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">FileProperties</span> properties<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">ConfigurerAdapter</span><span class="token punctuation">(</span><span class="token class-name">FileProperties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>properties <span class="token operator">=</span> properties<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">CorsFilter</span> <span class="token function">corsFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">UrlBasedCorsConfigurationSource</span> source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlBasedCorsConfigurationSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">CorsConfiguration</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CorsConfiguration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        config<span class="token punctuation">.</span><span class="token function">setAllowCredentials</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        config<span class="token punctuation">.</span><span class="token function">addAllowedOrigin</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        config<span class="token punctuation">.</span><span class="token function">addAllowedHeader</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        config<span class="token punctuation">.</span><span class="token function">addAllowedMethod</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        source<span class="token punctuation">.</span><span class="token function">registerCorsConfiguration</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CorsFilter</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configureMessageConverters</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HttpMessageConverter</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> converters<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// ä½¿ç”¨ fastjson åºåˆ—åŒ–ï¼Œä¼šå¯¼è‡´ @JsonIgnore å¤±æ•ˆï¼Œå¯ä»¥ä½¿ç”¨ @JSONField(serialize = false) æ›¿æ¢</span>        <span class="token class-name">FastJsonHttpMessageConverter</span> converter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FastJsonHttpMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MediaType</span><span class="token punctuation">&gt;</span></span> supportMediaTypeList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        supportMediaTypeList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MediaType</span><span class="token punctuation">.</span>APPLICATION_JSON_UTF8<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">FastJsonConfig</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FastJsonConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        config<span class="token punctuation">.</span><span class="token function">setDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        config<span class="token punctuation">.</span><span class="token function">setSerializerFeatures</span><span class="token punctuation">(</span><span class="token class-name">SerializerFeature<span class="token punctuation">.</span>DisableCircularReferenceDetect</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        converter<span class="token punctuation">.</span><span class="token function">setFastJsonConfig</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>        converter<span class="token punctuation">.</span><span class="token function">setSupportedMediaTypes</span><span class="token punctuation">(</span>supportMediaTypeList<span class="token punctuation">)</span><span class="token punctuation">;</span>        converter<span class="token punctuation">.</span><span class="token function">setDefaultCharset</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">;</span>        converters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>converter<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è™½ç„¶ä½¿ç”¨Javaé…ç½®ç±»ï¼Œä¸šåŠ¡é€»è¾‘å¾ˆæ¸…æ™°ï¼Œä½†æ˜¯é…ç½®é¡¹å°†ä¼šéå¸¸åˆ†æ•£ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸åŒçš„é…ç½®ç±»åœ¨ä¸åŒçš„åŒ…ä¸‹ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨æŸ¥è¯¢è‡ªå·±çš„é…ç½®ä¿¡æ¯æ—¶å°±ä¼šå‡ºç°æ‰¾ä¸åˆ°çš„æƒ…å†µï¼Œä¸ºäº†é¿å…ã€‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ ¹é…ç½®ç±»ï¼Œå¹¶ä¸”å°†å…¶ä»–åˆ†æ•£çš„é…ç½®ç±»å…¨éƒ¨å¯¼å…¥åˆ°æ ¹é…ç½®ç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">OtherConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RootConfig</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><h2 id="ä¾èµ–ç®¡ç†"><a href="#ä¾èµ–ç®¡ç†" class="headerlink" title="ä¾èµ–ç®¡ç†"></a>ä¾èµ–ç®¡ç†</h2><p><code>Springboot</code>çš„ä¾èµ–ç®¡ç†æ˜¯ä¾æ®ä¸€ç³»åˆ—çš„<strong>åœºæ™¯å¯åŠ¨å™¨</strong>ï¼Œè€Œç®¡ç†è¿™äº›å¯åŠ¨å™¨ç‰ˆæœ¬çš„å°±æ˜¯ä¸‹é¢çš„pomçˆ¶é¡¹ç›®</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.10.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“ç„¶å®˜æ–¹ä¹Ÿæä¾›äº†ä¸ä½¿ç”¨<code>spring-boot-starter-parent</code>çš„æ–¹å¼ï¼Œè¿™é‡Œæš‚æ—¶ä¸å­¦ï¼</p><p><code>&lt;parent&gt;</code>æ ‡ç­¾ç®¡ç†äº†æ‰€æœ‰å¯åŠ¨å™¨ï¼Œæ‰€åŸºäºçš„spring bootç‰ˆæœ¬ã€‚å‡è®¾ç°åœ¨å¼€å‘webé¡¹ç›®ï¼Œæˆ‘ä»¬å¯¼å…¥ç›¸å…³çš„å¯åŠ¨å™¨</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--Spring boot Webä¾èµ–--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡åœºæ™¯å¯åŠ¨å™¨spring bootè‡ªåŠ¨å¯¼å…¥ä¸webç›¸å…³çš„æ‰€æœ‰ä¾èµ–ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®ä¾èµ–ä¼ é€’æ€§æ‰¾çš„è¯¥spring bootç‰ˆæœ¬ä¸‹æ‰€å…³è”çš„webä¾èµ–ç‰ˆæœ¬</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>æ‰€å…³è”çš„ç‰ˆæœ¬<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>ä¸€èˆ¬æƒ…å†µä¸‹å®˜æ–¹çš„å¯åŠ¨å™¨ç‰ˆæœ¬å‘½åæ–¹å¼ä¸ºï¼š</li></ul><p><code>spring-boot-starter-officalxxx</code></p><ul><li>è‡ªå®šä¹‰çš„å¯åŠ¨å™¨å‘½åæ–¹å¼ä¸ºï¼š</li></ul><p><code>thirdpartyproject-sring-boot-starter</code></p><p>å½“ç„¶åœºæ™¯å¯åŠ¨å™¨å¼•å…¥çš„ä¾èµ–ç‰ˆæœ¬æœ‰æ—¶å€™å¯èƒ½ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç‰ˆæœ¬ï¼Œä¸ºäº†å¯ä»¥ä½¿ç”¨è‡ªå·±çš„ä¾èµ–ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸Šé¢<code>spring-boot-dependencies</code>çš„<code>properties</code>æ ‡ç­¾ä¸‹çš„keyå–å®šä¹‰è‡ªå·±çš„ç‰ˆæœ¬ï¼Œ<strong>æ³¨æ„ç‰ˆæœ¬å…¼å®¹çš„é—®é¢˜</strong>ã€‚ä¸¾ä¸ªæ —å­ï¼šæˆ‘ç°åœ¨æƒ³ä½¿ç”¨è‡ªå·±çš„MySQLç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯å¯åŠ¨å™¨è‡ªå¸¦çš„ç‰ˆæœ¬ï¼Œæˆ‘å°±æŒ‰ç…§ä¸Šé¢çš„æç¤ºæ‰¾åˆ°keyï¼Œç„¶åæ”¹æˆè‡ªå·±æƒ³è¦çš„ç‰ˆæœ¬ã€‚å°†8.0.21æ”¹ä¸º5.1.13</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--åœ¨å¯¹åº”çš„pom.xmlä¸­ä¿®æ”¹--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mysql.version</span><span class="token punctuation">&gt;</span></span>5.1.13<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mysql.version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å®˜æ–¹æä¾›äº†ä¸€ä¸ªå…³äºmavençš„æ’ä»¶ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨<code>spring-boot-starter-parent</code>é¡¹ç›®æ—¶ï¼Œå¯ä»¥ç›´æ¥å¯¼å…¥è¿™ä¸ªæ’ä»¶ä¾èµ–ï¼Œå°†æˆ‘ä»¬æœªæ¥çš„spring booté¡¹ç›®æ‰“åŒ…æˆjaræ–‡ä»¶ <strong>æ‰“åŒ…æ’ä»¶</strong></p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è‡ªåŠ¨é…ç½®"><a href="#è‡ªåŠ¨é…ç½®" class="headerlink" title="è‡ªåŠ¨é…ç½®"></a>è‡ªåŠ¨é…ç½®</h2><p>æˆ‘ä»¬ä»¥<code>spring-boot-starter-web</code>ä¸ºä¾‹ï¼Œwebå¯åŠ¨å™¨æ˜¯å¦‚ä½•å®Œæˆï¼Œä¾èµ–å¯¼å…¥ä»¥åŠè‡ªåŠ¨è£…é…çš„ä»»åŠ¡ï¼Ÿ</p><p>Structuring Your Codeï¼ˆå®˜æ–¹æ–‡æ¡£ï¼‰</p><p>å»ºè®®æˆ‘ä»¬åº”è¯¥å°†ä»£ç éƒ½æ”¾åœ¨ä¸»ç±»çš„åŒçº§å­åŒ…ä¸‹ã€‚å› ä¸ºè¢«<code>@SpringBootApplication</code>æ³¨è§£çš„ä¸»ç±»ï¼Œè¯¥æ³¨è§£èµ‹äºˆäº†ä¸€ç§è‡ªåŠ¨æ‰«æçš„åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼</p><p>@SpringBootApplication</p><ul><li>@SpringBootConfiguration</li><li>@EnableAutoConfiguration</li><li>@ComponentScan</li></ul><p>å›åˆ°ä¸Šé¢è®²çš„åŒ…æ‰«æï¼Œæ‰€æœ‰åœ¨ä¸»ç±»çš„åŒçº§å­åŒ…ä¸‹éƒ½å¯ä»¥é»˜è®¤è¢«æ‰«æåˆ°ã€‚å½“ç„¶å®˜æ–¹ä¹Ÿä¸æ˜¯è¯´ä¸è®²ç†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰æ‰«æçš„è·¯å¾„ï¼š</p><p>â‘ ä½¿ç”¨scanBasePackagesæ–¹æ³•</p><p><strong>@SpringBootApplication(scanBasePackages = â€œåŒ…è·¯å¾„â€)</strong></p><p>â‘¡å› ä¸ºè¿™æ˜¯ä¸ªç»„åˆæ³¨è§£ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨ä¸Šé¢ä¸‰ä¸ªæ³¨è§£ä»£æ›¿è¿™ä¸ªæ³¨è§£ï¼Œå¹¶ä¸”åˆ©ç”¨@ComponentScanè‡ªå®šä¹‰è·¯å¾„</p><p><strong>@ComponentScan(â€œåŒ…è·¯å¾„â€)</strong></p><p>å®˜æ–¹å»ºè®®çš„ç»“æ„</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">com +- example     +- myapplication         +- Application.java         |         +- customer         |   +- Customer.java         |   +- CustomerController.java         |   +- CustomerService.java         |   +- CustomerRepository.java         |         +- order             +- Order.java             +- OrderController.java             +- OrderService.java             +- OrderRepository.java<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>@EnableAutoConfiguration</code>ï¼š<strong>å®Œæˆè‡ªåŠ¨é…ç½®ä»»åŠ¡</strong>ï¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@AutoConfigurationPackage</span><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableAutoConfiguration</span> <span class="token punctuation">{</span>    <span class="token class-name">String</span> ENABLED_OVERRIDE_PROPERTY <span class="token operator">=</span> <span class="token string">"spring.boot.enableautoconfiguration"</span><span class="token punctuation">;</span>    <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">exclude</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>   <span class="token comment">// æŒ‰ç±»å‹æ’é™¤</span>    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">excludeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// æŒ‰åç§°æ’é™¤</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…³äºé…ç½®å±æ€§çš„é»˜è®¤å€¼ï¼Œä»¥åŠå¦‚ä½•ä¿®æ”¹é…ç½®çš„å€¼ï¼Ÿ</p><p>ä¸€èˆ¬æƒ…å†µé…ç½®å±æ€§éƒ½ä¼šæœ‰æ‹¥æœ‰è€…ï¼Œä¹Ÿå°±æ˜¯é…ç½®å±æ€§ç»‘å®šçš„Javaç±»ã€‚éœ€è¦äº†è§£çš„å°±æ˜¯å¦‚ä½•å°†é…ç½®å±æ€§ç»‘å®šåˆ°ç±»ä¸Šï¼Œä»¥åŠæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ç›¸å…³çš„é…ç½®å±æ€§ï¼</p><p>å¯åŠ¨å™¨æ˜¯æŒ‰éœ€åŠ è½½æ‰€æœ‰é…ç½®é¡¹ï¼š</p><ol><li>æŒ‰ç…§æˆ‘ä»¬å¼•å…¥çš„starteråŠ è½½ç›¸å…³çš„é…ç½®</li><li>spring bootæ‰€æœ‰å…³äºè‡ªåŠ¨é…ç½®çš„åŠŸèƒ½éƒ½åœ¨åŒ…ï¼šspring-boot-autoconfigure</li></ol><h2 id="åº•å±‚æ³¨è§£"><a href="#åº•å±‚æ³¨è§£" class="headerlink" title="åº•å±‚æ³¨è§£"></a>åº•å±‚æ³¨è§£</h2><p><code>@Configuration</code>é…ç½®æ³¨è§£ï¼Œè¢«æ³¨è§£çš„ç±»å°†æˆä¸ºé…ç½®ç±»ï¼Œå®ƒä¸»è¦å­˜åœ¨ä¸¤ç§æ¨¡å¼ï¼š</p><ul><li>Full mode (proxyBeanMethods = true)</li><li>Lite mode (proxyBeanMethods = false)</li></ul><p>Full modeä¸‹ï¼Œspring bootå°†ä¼šå°†æ­¤IOCå®¹å™¨ä¸­æ˜¯å¦å­˜åœ¨è¯¥ç»„ä»¶ï¼Œå¦‚æœå­˜åœ¨å°±ä¼šè¿”å›è¯¥ç»„ä»¶ï¼Œä¿æŒå•åˆ—</p><p>Lite modeä¸‹ï¼Œspring bootå°†è·³è¿‡æ£€æŸ¥ç¯èŠ‚ï¼Œä¸åœ¨ä¿æŒå•åˆ—</p><p><strong>@Configuration</strong>å‘Šè¯‰spring bootæ­¤ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œç›¸å½“äºé…ç½®æ–‡ä»¶</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Pet</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">User</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"matemaster"</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Pet</span> <span class="token function">tomcat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æè¿°ä¸€ä¸ªå¯¹è±¡ä¸ºç»„ä»¶çš„æ³¨è§£ï¼š</p><p>@Beanã€@Componentã€@Controllerã€@Serviceã€@Repository</p><p>ç»„ä»¶æ‰«æä»¥åŠå¯¼å…¥ï¼š</p><p>@Componentã€@Import</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">ch<span class="token punctuation">.</span>qos<span class="token punctuation">.</span>logback<span class="token punctuation">.</span>core<span class="token punctuation">.</span>db<span class="token punctuation">.</span></span><span class="token class-name">DBHelper</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Pet</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">User</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Import</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">DBHelper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"MateMaster"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"matemaster"</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">Pet</span> <span class="token function">tomcat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token string">"tom"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>@Import</code>ä¸ºspring bootå¯¼å…¥ç»„ä»¶ï¼Œå®ƒæ¥å—classç±»å‹çš„æ•°ç»„æ¥å®¹çº³ç»„ä»¶ï¼š</p><p><strong>@Import({User.class, DBHelper.class})</strong></p><p>@Importè®©spring bootè°ƒç”¨Userã€DBhelperçš„<strong>æ— å‚æ„é€ å™¨</strong>å»åˆ›å»ºç»„ä»¶å¯¹è±¡ï¼ŒåŠ å…¥åˆ°å®¹å™¨ä¸­</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>demo</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Pet</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">User</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>demo<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">MyConfig</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ConfigurableApplicationContext</span><span class="token punctuation">;</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoApplication</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">ConfigurableApplicationContext</span> run <span class="token operator">=</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">DemoApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> beanNamesForType <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">getBeanNamesForType</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> beanNamesForType<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">/*console: *cn.matemaster.demo.bean.User *MateMaster * */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>@Conditional</code>å½“æ»¡è¶³å…¶æ¡ä»¶æ—¶ï¼Œåˆ™è¿›è¡Œç»„ä»¶æ³¨å…¥ã€‚ä»–ä½œä¸ºæ ¹æ³¨è§£è¿˜å­˜åœ¨ä¸€ç³»åˆ—çš„<strong>æ‹“å±•æ³¨è§£</strong></p><p><strong>æ ¸å¿ƒï¼šæŒ‰æ¡ä»¶æ³¨å…¥</strong></p><p>å› ä¸ºspring bootä¸»è¦æ˜¯çº¦å®šå¤§äºé…ç½®ï¼Œä½†æ˜¯ä¹Ÿæ˜¯æ”¯æŒé…ç½®çš„ã€‚æ‰€ä»¥æˆ‘ä»¬ä¾æ—§å¯ä»¥ä½¿ç”¨xmlæ¥é…ç½®æˆ‘ä»¬çš„ç»„ä»¶ï¼Œé‚£ä¹ˆå¦‚ä½•æ¥ä½¿ç”¨xmlé…ç½®ï¼Ÿ</p><p><code>@ImportResource</code>è§£å†³xmlé…ç½®ç»„ä»¶çš„é—®é¢˜ï¼š</p><p>**@ImportResource(â€œclasspath: beans.xmlâ€)**ã€‚beans.xmlåˆ©ç”¨xmlæ–¹å¼é…ç½®äº†ä¸€äº›ç»„ä»¶ï¼Œæˆ‘ä»¬é€šè¿‡ä½¿ç”¨è¯¥æ³¨è§£å®Œæˆç»„ä»¶æ³¨å…¥å®¹å™¨çš„ä»»åŠ¡ï¼</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨<code>application.yml</code>é…ç½®æ–‡ä»¶ï¼Œæ¥å®Œæˆå¯¹spring bootå±æ€§çš„é…ç½®ä»»åŠ¡ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è·å–ä¸Šé¢é…ç½®æ–‡ä»¶çš„å†…å®¹ï¼Ÿ</p><p>ç­”ï¼š<code>@ConfigurationProperties</code>æ³¨è§£å°±å¯ä»¥è¯»å–åˆ°é…ç½®æ–‡ä»¶é‡Œé¢çš„å†…å®¹ï¼Œä¾‹å¦‚ <strong>@ConfigurationProperties(prefix = â€œå±æ€§å‰ç¼€â€)</strong></p><p><code>application.yml</code>çš„å†…å®¹ï¼š</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">mycar</span><span class="token punctuation">:</span>  <span class="token key atrule">brand</span><span class="token punctuation">:</span> HW  <span class="token key atrule">price</span><span class="token punctuation">:</span> <span class="token number">1000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>â‘  @Component + @ConfigurationProperties(prefix = â€œå±æ€§å‰ç¼€â€)</p><p>åœ¨ç»„ä»¶ç±»ä¸Šï¼Œå…ˆå°†ç±»æ³¨å†Œä¸ºspringç»„ä»¶ï¼Œç„¶åè¯¥ç»„ä»¶å°±å¯ä»¥ä½¿ç”¨@ConfigurationPropertiesçš„åŠŸèƒ½</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"mycar"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â‘¡ @EnableConfigurationProperties(é…ç½®ç±».class) + @ConfigurationProperties(prefix = â€œå±æ€§å‰ç¼€â€)</p><p>åœ¨é…ç½®ç±»ä¸Šï¼Œå…ˆå°†éœ€è¦å¼€å¯å±æ€§é…ç½®çš„ç±»å¼€å¯ï¼Œç„¶åå†ä½¿ç”¨@ConfigurationPropertiesçš„åŠŸèƒ½ã€‚ä¸€èˆ¬é€‚åˆç¬¬ä¸‰æ–¹ä¸æ˜¯springçš„ç»„ä»¶</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">Car</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfig</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"mycar"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Car</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œæ¥æµ‹è¯•caræ‰€æ‹¥æœ‰çš„é»˜è®¤å€¼ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebController</span> <span class="token punctuation">{</span>    <span class="token class-name">Car</span> car<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">public</span> <span class="token class-name">WebController</span><span class="token punctuation">(</span><span class="token class-name">Car</span> car<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>car <span class="token operator">=</span> car<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/car"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Car</span> <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> car<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">// æµè§ˆå™¨çš„è¾“å‡º: {brand = HW, price = 1000}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œç®€å•æä¸€ä¸‹<code>@RestController</code>å®ƒæ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼š@Controller + @Responcebodyã€‚</p><ul><li>@Controllerï¼šå°†Javaç±»è®¾ç½®ä¸ºæ§åˆ¶å™¨</li><li>@Responcebodyï¼šåç«¯ä¸åœ¨å°†æ•°æ®ä¼ ç»™ä¸€ä¸ªæ¨¡å‹ï¼Œå†ä¼ é€’ç»™è§†å›¾ã€‚è€Œæ˜¯ç›´æ¥è¿”å›ç»™æµè§ˆå™¨å®ä½“ã€‚</li></ul><h2 id="è‡ªåŠ¨é‡å¯"><a href="#è‡ªåŠ¨é‡å¯" class="headerlink" title="è‡ªåŠ¨é‡å¯"></a>è‡ªåŠ¨é‡å¯</h2><p>å½“æˆ‘ä»¬åœ¨ç¼–å†™spring booté¡¹ç›®çš„æ—¶å€™ï¼Œå› ä¸ºå±€éƒ¨ä¿®æ”¹äº†ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªåŠ¨é‡å¯çš„åŠŸèƒ½æ¥æ›´æ–°é¡¹ç›®ã€‚</p><p>é¦–å…ˆå°±æ˜¯å¼•å…¥<code>dev-tools</code></p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¼å…¥<code>dev-tools</code>ä¹‹åï¼Œä¸‹æ¬¡ä¿®æ”¹ä»£ç çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥<code>crtl+f9</code>å³å¯é‡æ–°æ›´æ–°</p><h1 id="æ ¸å¿ƒåŠŸèƒ½"><a href="#æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="æ ¸å¿ƒåŠŸèƒ½"></a>æ ¸å¿ƒåŠŸèƒ½</h1><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><p>ä¸»è¦åˆ†ä¸ºä¸¤ç§é…ç½®æ–‡ä»¶çš„å½¢å¼ï¼š<code>application.properties</code>å’Œ<code>application.yml</code></p><p><strong>ymlé€‚åˆä»¥æ•°æ®ä¸ºä¸­å¿ƒçš„é…ç½®æ–‡ä»¶</strong></p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8000</span><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">freemarker</span><span class="token punctuation">:</span>    <span class="token key atrule">check-template-location</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev  <span class="token key atrule">jackson</span><span class="token punctuation">:</span>    <span class="token key atrule">time-zone</span><span class="token punctuation">:</span> GMT+8  <span class="token key atrule">data</span><span class="token punctuation">:</span>    <span class="token key atrule">redis</span><span class="token punctuation">:</span>      <span class="token key atrule">repositories</span><span class="token punctuation">:</span>        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token comment">#é…ç½® Jpa</span>  <span class="token key atrule">jpa</span><span class="token punctuation">:</span>    <span class="token key atrule">properties</span><span class="token punctuation">:</span>      <span class="token key atrule">hibernate</span><span class="token punctuation">:</span>        <span class="token key atrule">ddl-auto</span><span class="token punctuation">:</span> none        <span class="token key atrule">dialect</span><span class="token punctuation">:</span> org.hibernate.dialect.MySQL5InnoDBDialect    <span class="token key atrule">open-in-view</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">redis</span><span class="token punctuation">:</span>    <span class="token comment">#æ•°æ®åº“ç´¢å¼•</span>    <span class="token key atrule">database</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>REDIS_DB<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">}</span>    <span class="token key atrule">host</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>REDIS_HOST<span class="token punctuation">:</span>127.0.0.1<span class="token punctuation">}</span>    <span class="token key atrule">port</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>REDIS_PORT<span class="token punctuation">:</span><span class="token number">6379</span><span class="token punctuation">}</span>    <span class="token key atrule">password</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>REDIS_PWD<span class="token punctuation">:</span><span class="token punctuation">}</span>    <span class="token comment">#è¿æ¥è¶…æ—¶æ—¶é—´</span>    <span class="token key atrule">timeout</span><span class="token punctuation">:</span> <span class="token number">5000</span><span class="token key atrule">task</span><span class="token punctuation">:</span>  <span class="token key atrule">pool</span><span class="token punctuation">:</span>    <span class="token comment"># æ ¸å¿ƒçº¿ç¨‹æ± å¤§å°</span>    <span class="token key atrule">core-pool-size</span><span class="token punctuation">:</span> <span class="token number">10</span>    <span class="token comment"># æœ€å¤§çº¿ç¨‹æ•°</span>    <span class="token key atrule">max-pool-size</span><span class="token punctuation">:</span> <span class="token number">30</span>    <span class="token comment"># æ´»è·ƒæ—¶é—´</span>    <span class="token key atrule">keep-alive-seconds</span><span class="token punctuation">:</span> <span class="token number">60</span>    <span class="token comment"># é˜Ÿåˆ—å®¹é‡</span>    <span class="token key atrule">queue-capacity</span><span class="token punctuation">:</span> <span class="token number">50</span><span class="token comment">#ä¸ƒç‰›äº‘</span><span class="token key atrule">qiniu</span><span class="token punctuation">:</span>  <span class="token comment"># æ–‡ä»¶å¤§å° /M</span>  <span class="token key atrule">max-size</span><span class="token punctuation">:</span> <span class="token number">15</span><span class="token comment">#é‚®ç®±éªŒè¯ç æœ‰æ•ˆæ—¶é—´/ç§’</span><span class="token key atrule">code</span><span class="token punctuation">:</span>  <span class="token key atrule">expiration</span><span class="token punctuation">:</span> <span class="token number">300</span><span class="token comment">#å¯†ç åŠ å¯†ä¼ è¾“ï¼Œå‰ç«¯å…¬é’¥åŠ å¯†ï¼Œåç«¯ç§é’¥è§£å¯†</span><span class="token key atrule">rsa</span><span class="token punctuation">:</span>  <span class="token key atrule">private_key</span><span class="token punctuation">:</span> xxxxx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬åœ¨å®šä¹‰é…ç½®ç±»æ—¶ï¼Œä¸ºäº†æ–¹ä¾¿å¯ä»¥å¼•å…¥ä¸€ä¸ªè‡ªåŠ¨é…ç½®æç¤ºæ’ä»¶<code>spring-boot-configuration-processor</code></p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--æ‰“åŒ…æ—¶è·³è¿‡è¯¥æ’ä»¶--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludes</span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">&gt;</span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludes</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="webå¼€å‘"><a href="#webå¼€å‘" class="headerlink" title="webå¼€å‘"></a>webå¼€å‘</h2><h3 id="å®˜æ–¹æ–‡æ¡£webæè¿°"><a href="#å®˜æ–¹æ–‡æ¡£webæè¿°" class="headerlink" title="å®˜æ–¹æ–‡æ¡£webæè¿°"></a>å®˜æ–¹æ–‡æ¡£webæè¿°</h3><p>ä¸¤ä¸ªwebå¼€å‘åœºæ™¯ï¼š<code>spring-boot-starter-web</code>å’Œ<code>spring-boot-starter-webflux</code>ã€‚ä¸€èˆ¬ä¼šwebåº”ç”¨å’Œå“åº”å¼webåº”ç”¨ã€‚</p><p><b style="font-size:28px">Spring MVC Auto-configuration</b></p><hr><p><b style="font-size:24px">spring mvcçš„é»˜è®¤é…ç½®</b></p><p>Spring Boot provides auto-configuration for Spring MVC that works well with most applications.</p><p><strong>é»˜è®¤æ”¯æŒè‡ªåŠ¨é…ç½®æœåŠ¡</strong></p><p>The auto-configuration adds the following features on top of Springâ€™s defaults:</p><ul><li>Inclusion of <code>ContentNegotiatingViewResolver</code> and <code>BeanNameViewResolver</code> beans. <strong>â€œæ”¯æŒå†…å®¹åå•†è§†å›¾è§£æå™¨ã€BeanNameè§†å›¾è§£æå™¨â€</strong></li><li>Support for serving static resources, including support for WebJars (covered <a href="https://docs.spring.io/spring-boot/docs/2.2.10.RELEASE/reference/html/spring-boot-features.html#boot-features-spring-mvc-static-content">later in this document</a>)). <strong>â€œæ”¯æŒé™æ€èµ„æºâ€</strong></li><li>Automatic registration of <code>Converter</code>, <code>GenericConverter</code>, and <code>Formatter</code> beans. <strong>â€œè‡ªåŠ¨æ³¨å†ŒConverterã€GenericConverterã€Formatterçš„beanâ€</strong></li><li>Support for <code>HttpMessageConverters</code> (covered <a href="https://docs.spring.io/spring-boot/docs/2.2.10.RELEASE/reference/html/spring-boot-features.html#boot-features-spring-mvc-message-converters">later in this document</a>).</li><li>Automatic registration of <code>MessageCodesResolver</code> (covered <a href="https://docs.spring.io/spring-boot/docs/2.2.10.RELEASE/reference/html/spring-boot-features.html#boot-features-spring-message-codes">later in this document</a>).<strong>â€œå›½é™…åŒ–â€</strong></li><li>Static <code>index.html</code> support. <strong>â€œç³»ç»Ÿä¸»é¡µâ€</strong></li><li>Custom <code>Favicon</code> support (covered <a href="https://docs.spring.io/spring-boot/docs/2.2.10.RELEASE/reference/html/spring-boot-features.html#boot-features-spring-mvc-favicon">later in this document</a>).</li><li>Automatic use of a <code>ConfigurableWebBindingInitializer</code> bean (covered <a href="https://docs.spring.io/spring-boot/docs/2.2.10.RELEASE/reference/html/spring-boot-features.html#boot-features-spring-mvc-web-binding-initializer">later in this document</a>).</li></ul><p><strong>å®šåˆ¶åŒ–æ“ä½œï¼š</strong></p><p>If you want to keep those Spring Boot MVC customizations and make more <a href="https://docs.spring.io/spring/docs/5.2.9.RELEASE/spring-framework-reference/web.html#mvc">MVC customizations</a> (interceptors, formatters, view controllers, and other features), you can add your own <code>@Configuration</code> class of type <code>WebMvcConfigurer</code> but <strong>without</strong> <code>@EnableWebMvc</code>. <strong>â€œä½¿ç”¨@Confiruration + WebMvcConfigurerè‡ªå®šä¹‰è§„åˆ™â€</strong></p><p>If you want to provide custom instances of <code>RequestMappingHandlerMapping</code>, <code>RequestMappingHandlerAdapter</code>, or <code>ExceptionHandlerExceptionResolver</code>, and still keep the Spring Boot MVC customizations, you can declare a bean of type <code>WebMvcRegistrations</code> and use it to provide custom instances of those components. <strong>â€œä½¿ç”¨WebMvcRegistrationsä¿®æ”¹é»˜è®¤åº•å±‚ç»„ä»¶â€</strong></p><p>If you want to take complete control of Spring MVC, you can add your own <code>@Configuration</code> annotated with <code>@EnableWebMvc</code>, or alternatively add your own <code>@Configuration</code>-annotated <code>DelegatingWebMvcConfiguration</code> as described in the Javadoc of <code>@EnableWebMvc</code>. <strong>â€œä½¿ç”¨@Configuration + @EnableWebMvc + DelegatingWebMvcConfigurationå…¨é¢æ§åˆ¶mvcâ€</strong></p><hr><p><b style="font-size:24px">å®ç°é™æ€èµ„æºçš„è‡ªåŠ¨é…ç½®ï¼Œä»¥åŠè‡ªå®šä¹‰è®¿é—®è·¯å¾„åŠèµ„æºç›®å½•è·¯å¾„</b></p><p>å­¦ä¹ ç›®æ ‡ï¼š</p><ol><li>é…ç½®é™æ€èµ„æºçš„å­˜å‚¨è·¯å¾„</li><li>å®šä¹‰è®¿é—®é™æ€èµ„æºçš„å‰ç¼€</li><li>ç†Ÿç»ƒå®˜æ–¹ç»™å‡ºçš„é»˜è®¤è‡ªåŠ¨é…ç½®æ–¹å¼</li><li>äº†è§£å…³äºwebjarsçŸ¥è¯†</li></ol><p style="color: red;">æºç ä¸­å®šä¹‰èµ„æºè·¯å¾„çš„é™æ€æ•°ç»„ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> CLASSPATH_RESOURCE_LOCATIONS <span class="token operator">=</span>     <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">"classpath:/META-INF/resources/"</span><span class="token punctuation">,</span> <span class="token string">"classpath:/resources/"</span><span class="token punctuation">,</span> <span class="token string">"classpath:/static/"</span><span class="token punctuation">,</span> <span class="token string">"classpath:/public/"</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åœ¨<code>application.yml</code>é…ç½®è·¯å¾„åŠè®¿é—®å‰ç¼€</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token comment">#è‡ªå®šä¹‰é™æ€èµ„æºè®¿é—®å‰ç¼€ï¼Œä»¥åŠé™æ€èµ„æºç›®å½•</span><span class="token key atrule">spring</span><span class="token punctuation">:</span>   <span class="token key atrule">mvc</span><span class="token punctuation">:</span>    <span class="token key atrule">static-path-pattern</span><span class="token punctuation">:</span> /diy/<span class="token important">**</span>  <span class="token key atrule">web</span><span class="token punctuation">:</span>    <span class="token key atrule">resources</span><span class="token punctuation">:</span>      <span class="token key atrule">static-locations</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>classpath<span class="token punctuation">:</span>/diy/<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p style="color: red;">é™æ€èµ„æºå­˜æ”¾ä½ç½®ï¼š</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210510123142.png"><p>åœ¨webå¼€å‘ä¸­ï¼Œä¸ºäº†æ–¹ä¾¿èµ„æºçš„ç»Ÿä¸€ç®¡ç†ï¼Œæˆ‘ä»¬å°†å‰ç«¯çš„èµ„æºæ–‡ä»¶(css,js)ç­‰æ–‡ä»¶<strong>ä»¥jaråŒ…çš„å½¢å¼å¯¼å…¥åˆ°mavené¡¹ç›®ä¸­ï¼šWebJars: web libraries in jars</strong></p><p>webjarçš„èµ„æºä½ç½®ï¼š<a href="https://www.webjars.org/">WebJars - Web Libraries in Jars</a></p><hr><p><strong>å…³äºç³»ç»Ÿæ¬¢è¿é¡µé¢ä»¥åŠç½‘ç«™çš„å›¾æ ‡èµ„æºçš„è‡ªåŠ¨é…ç½®</strong></p><p>æˆ‘ä»¬å¯ä»¥åœ¨å®˜æ–¹æŒ‡å®šçš„é»˜è®¤è·¯å¾„ä¸‹å­˜æ”¾ç›¸åº”çš„<code>index.html</code>å’Œ<code>favicon.ico</code>å®ƒä»¬å°±ä¼šè‡ªåŠ¨è¢«é…ç½®ä¸ºå¯¹åº”çš„æ¬¢è¿é¡µé¢å’Œå›¾æ ‡ã€‚å½“ç„¶æˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨<strong>æ§åˆ¶å™¨ï¼‹è§†å›¾</strong>çš„æ–¹å¼ã€‚æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªä¸»é¡µæ¬¢è¿é¡µé¢çš„æ§åˆ¶å™¨ï¼Œå¹¶ä¸”ç¼–å†™ç›¸å¯¹äºçš„<code>index.ftl</code>æ¨¡æ¿ã€‚é‚£ä¹ˆåœ¨è®¿é—®ä¸»é¡µæ—¶ï¼Œspring bootè‡ªåŠ¨ä¼šè§£æç›¸å…³è”çš„é¡µé¢ï¼</p><hr><p><b style="font-size:24px">resté£æ ¼çš„è¯·æ±‚å¤„ç†ï¼šï¼ˆé€‚ç”¨äºè¡¨å•ï¼‰</b></p><p>åœ¨å¤„ç†httpè¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬ä¼šç¼–å†™ä¸€ç³»åˆ—çš„æ§åˆ¶å™¨æ¥æ‹¦æˆªå¤„ç†è¯·æ±‚ã€‚æ­¤æ—¶å°±éœ€è¦ä½¿ç”¨ä¸‹é¢çš„æ³¨è§£ï¼š</p><ul><li>@RequestMapping(value = â€œè¯·æ±‚è·¯å¾„â€, method = â€œè¯·æ±‚æ–¹å¼â€)</li><li>@xxxMapping(â€œè¯·æ±‚è·¯å¾„â€) eg: @GetMapping(â€œ/testâ€)</li></ul><p>resté£æ ¼ä¸‹ï¼Œæˆ‘ä»¬å°†ä»¥æ•°æ®èµ„æºä¸ºæ ¸å¿ƒï¼ˆurlï¼‰ï¼Œæ¯”å¦‚æˆ‘ä»¬è¯·æ±‚çš„è·¯å¾„ç»Ÿä¸€ä¸º **â€/testâ€**ï¼Œå¹¶ä¸”æ”¯æŒ getã€putã€deleteã€postã€‚ <strong>è¿™æ ·å°±å¯ä»¥ä¸“æ³¨äºè¯·æ±‚æ–¹å¼ï¼Œç»Ÿä¸€äº†è¯·æ±‚è·¯å¾„ï¼</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/user"</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token string">"delete"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token annotation punctuation">@DeleteMapping</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬åœ¨htmlé¡µé¢æˆ–è€…æ˜¯æ¨¡æ¿å¼•æ“ä¸­å®šä¹‰è¡¨å•æ—¶ï¼Œå› ä¸ºè¡¨å•é»˜è®¤è‡³æ”¯æŒä¸¤ç§è¯·æ±‚æ–¹å¼ï¼šgetã€putã€‚æ‰€ä»¥æˆ‘ä»¬è‹¥æ˜¯æƒ³ä»è¡¨å•å‘å‡ºå…¶ä»–çš„è¯·æ±‚ï¼šdeleteã€postå°±éœ€è¦è¿™ä¹ˆåšï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>put<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>_method<span class="token punctuation">"</span></span> <span class="token attr-name">value</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>delete<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ­¤æ—¶è¡¨å•å¯ä»¥å‘å‡ºdeleteè¯·æ±‚ï¼å…³äºè¿™ä¹ˆåšçš„åº•å±‚åŸç†æš‚æ—¶ä¸åšæ·±å…¥äº†è§£ã€‚å…¶å®è¿™é‡Œè¿˜å¯ä»¥è‡ªå®šä¹‰inputä¸­çš„<code>name = "_diy"</code>ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">HiddenHttpMethodFilter</span> <span class="token function">hiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token class-name">HiddenHttpMethodFilter</span> methodFilter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    methodFilter<span class="token punctuation">.</span><span class="token function">setMethodParam</span><span class="token punctuation">(</span><span class="token string">"_diy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> methodFilter<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“ç„¶äº†æœ€æœ€æœ€é‡è¦çš„å°±æ˜¯ï¼šè¡¨å•çš„reståŠŸèƒ½é»˜è®¤æ˜¯ä¸å¼€å¯çš„ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨é…ç½®å¼€å¯è¿™é¡¹åŠŸèƒ½ï¼</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token comment">#å¼€å¯é¡µé¢è¡¨å•çš„ReståŠŸèƒ½</span><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>    <span class="token key atrule">hiddenmethod</span><span class="token punctuation">:</span>      <span class="token key atrule">filter</span><span class="token punctuation">:</span>        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ°æ­¤éƒ½æ˜¯é’ˆå¯¹è¡¨å•çš„httpè¯·æ±‚ï¼ˆå› ä¸ºè¡¨å•é»˜è®¤åªå­˜åœ¨ä¸¤ç§è¯·æ±‚æ–¹å¼ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬åšäº›å˜åŒ–ï¼‰ï¼Œ<strong>å¯¹äºä¸€äº›å¯ä»¥ç›´æ¥å‘é€ç›¸åº”è¯·æ±‚çš„å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦é…ç½®filter</strong></p><hr><p><b style="font-size:24px">è¯·æ±‚å¤„ç†æ³¨è§£çš„ä½¿ç”¨</b></p><p><code>@PathVariable</code>ï¼šæ­¤æ³¨è§£å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä»urlè·å–å˜é‡çš„å€¼ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/car/{id}"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">Car</span> <span class="token function">getCarById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>id <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>         <span class="token keyword">return</span> car<span class="token punctuation">;</span>    <span class="token keyword">else</span>         <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>@RequestHeader</code>ï¼šç”¨äºè·å–httpè¯·æ±‚å¤´çš„å†…å®¹</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">printHeader</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">"User-Agent"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> userAgent<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userAgent<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><code>@RequestParam</code>ï¼šå°†httpè¯·æ±‚å‚æ•°ç»‘å®šåˆ°æ§åˆ¶å™¨æ–¹æ³•ä¸Š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">printParams</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å½“æˆ‘ä»¬ä»¥<a href="https://localhost8080/user?name=matemaster&amp;age=23%E7%9A%84url%E8%AE%BF%E9%97%AE%E6%97%B6%EF%BC%8C%E5%90%8E%E5%8F%B0%E4%BC%9A%E8%87%AA%E5%8A%A8%E6%89%93%E5%8D%B0param%E7%BB%91%E5%AE%9A%E7%9A%84%E5%8F%82%E6%95%B0%EF%BC%9A%60%7Bname=matemaster">https://localhost8080/user?name=matemaster&amp;age=23çš„urlè®¿é—®æ—¶ï¼Œåå°ä¼šè‡ªåŠ¨æ‰“å°paramç»‘å®šçš„å‚æ•°ï¼š`{name=matemaster</a>, age=23}`</p><p><code>@CookieValue</code>ï¼šè·å–æµè§ˆå™¨çš„cookieä¿¡æ¯</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/cookie"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">printCookieInfo</span><span class="token punctuation">(</span><span class="token annotation punctuation">@CookieValue</span><span class="token punctuation">(</span><span class="token string">"Idea-27e61da4"</span><span class="token punctuation">)</span> <span class="token class-name">Cookie</span> cookie<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cookieåç§°ï¼š"</span><span class="token operator">+</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">"cookieå€¼ï¼š"</span><span class="token operator">+</span>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><code>@RequestBody</code>ï¼šè·å–httpè¯·æ±‚ä½“</p><p><code>@MatrixVariable</code>ï¼šè·å–urlä¸­çš„çŸ©é˜µå˜é‡</p><p>çŸ©é˜µå˜é‡ï¼šlocalhost:8080/matrix/user;name=matemaster;age=23.è¿™é‡Œçš„nameå’Œageå°±æ˜¯çŸ©é˜µå˜é‡</p><p><strong>ä½†æ˜¯é»˜è®¤æƒ…å†µä¸‹ï¼ŒçŸ©é˜µå˜é‡æ˜¯è¢«ç¦ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡ä¿®<code>WebMvcConfigurer</code>æ¥å£ä¸­çš„configurePathMatchæ–¹æ³•ï¼Œä»¥å¯ç”¨çŸ©é˜µå˜é‡</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configurePathMatch</span><span class="token punctuation">(</span><span class="token class-name">PathMatchConfigurer</span> configurer<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">UrlPathHelper</span> helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlPathHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        helper<span class="token punctuation">.</span><span class="token function">setRemoveSemicolonContent</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        configurer<span class="token punctuation">.</span><span class="token function">setUrlPathHelper</span><span class="token punctuation">(</span>helper<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨æ§åˆ¶å™¨æ–¹æ³•ä¸­ï¼Œä½¿ç”¨çŸ©é˜µå˜é‡æ³¨è§£ã€‚å› ä¸ºçŸ©é˜µå˜é‡çš„ä½¿ç”¨ä¾æ‰˜äºè·¯å¾„å˜é‡ï¼Œæ‰€ä»¥è¿™é‡ŒåŠ å…¥äº†pathè·¯å¾„å˜é‡</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/matrix/{path}"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">printMatrix</span><span class="token punctuation">(</span><span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span>                        <span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> age<span class="token punctuation">,</span>                        <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">,</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è·¯å¾„å˜é‡çš„åŠ å…¥å¦å¤–ä¸€ä¸ªä½œç”¨å°±æ˜¯ç”¨äºè§£å†³<strong>æ­§ä¹‰é—®é¢˜</strong>ã€‚å‡è®¾ç°åœ¨urlè¯·æ±‚è·¯å¾„å­˜åœ¨è¿™æ ·çš„æƒ…å†µ<code>localhost:8080/matrix/usr;name=matemaster;age=23/car;brand=Ferrari;age=112</code>ã€‚å› ä¸ºageå­˜åœ¨ä¸åŒçš„ç±»ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ç›´æ¥ä½¿ç”¨çŸ©é˜µå˜é‡æŒ‡å®šå–ageæ—¶ï¼Œå°±ä¼šæ­§ä¹‰ã€‚<strong>æ‰€ä»¥è¿™é‡Œå¯ä»¥æŒ‡å®šæ˜¯é‚£ä¸ªè·¯å¾„å˜é‡ä¸‹çš„ageçŸ©é˜µå˜é‡</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/matrix/{usr}/{car}"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"age"</span><span class="token punctuation">,</span>pathVar <span class="token operator">=</span> <span class="token string">"usr"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> usrAge<span class="token punctuation">,</span>                  <span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"age"</span><span class="token punctuation">,</span>pathVar <span class="token operator">=</span> <span class="token string">"car"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> carAge<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>usrAge<span class="token operator">+</span>carAge<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p><b style="font-size:24px">å¸¸ç”¨åŠŸèƒ½</b></p><p><b style="font-size:20px">1. è·¯å¾„åŒ¹é…å’Œå†…å®¹åå•†</b></p><p>è·¯å¾„åŒ¹é…ï¼šspring bootæ ¹æ®httpè¯·æ±‚é“¾æ¥æ¥å°†ä»–åŒ¹é…ç»™ç›¸å¯¹åº”çš„<code>@xxxMapping</code>æ³¨è§£æ˜ å°„çš„<code>Controller</code>æ–¹æ³•ï¼Œæ¥æ­£ç¡®å¤„ç†è¯·æ±‚ã€‚</p><p>å†…å®¹åå•†ï¼šä¸€ä»½ç‰¹å®šçš„æ–‡ä»¶ç§°ä¸ºä¸€é¡¹èµ„æºã€‚å½“å®¢æˆ·ç«¯è·å–èµ„æºçš„æ—¶å€™ï¼Œä¼šä½¿ç”¨å…¶å¯¹åº”çš„ URL å‘é€è¯·æ±‚ã€‚æœåŠ¡å™¨é€šè¿‡è¿™ä¸ª URL æ¥é€‰æ‹©å®ƒæŒ‡å‘çš„èµ„æºçš„æŸä¸€å˜ä½“â€”â€”æ¯ä¸€ä¸ªå˜ä½“ç§°ä¸ºä¸€ç§å±•ç°å½¢å¼â€”â€”ç„¶åå°†è¿™ä¸ªé€‰å®šçš„å±•ç°å½¢å¼è¿”å›ç»™å®¢æˆ·ç«¯ã€‚æ•´ä¸ªèµ„æºï¼Œè¿åŒå®ƒçš„å„ç§å±•ç°å½¢å¼ï¼Œå…±äº«ä¸€ä¸ªç‰¹å®šçš„ URL ã€‚å½“ä¸€é¡¹èµ„æºè¢«è®¿é—®çš„æ—¶å€™ï¼Œç‰¹å®šå±•ç°å½¢å¼çš„é€‰å–æ˜¯é€šè¿‡å†…å®¹åå•†æœºåˆ¶æ¥å†³å®šçš„ï¼Œå¹¶ä¸”å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´å­˜åœ¨å¤šç§åå•†æ–¹å¼ã€‚</p><p>å› ä¸º spring boot é»˜è®¤ç¦ç”¨äº† â€åç¼€åŒ¹é…â€œ é‡‡å– â€å†…å®¹åå•†â€œ çš„æ–¹å¼ï¼Œæ‰€ä»¥ç±»ä¼¼è¿™æ ·çš„è¯·æ±‚<code>"GET /projects/spring-boot.json"</code>ï¼Œå°±ä¸ä¼šè¢«æ˜ å°„åˆ° <code>@GetMapping("/projects/spring-boot")</code>æ˜ å°„çš„æ§åˆ¶å™¨æ–¹æ³•ä¸Šã€‚</p><p>è™½ç„¶ç¦ç”¨äº† åç¼€åŒ¹é… ï¼Œä½†æ˜¯å¯¹äº â€ä¸èƒ½å‘é€Acceptçš„æµè§ˆå™¨â€œ ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å– <strong>â€å‚æ•°æŸ¥è¯¢â€œ</strong> çš„æ–¹å¼è§£å†³ã€‚æ¯”å¦‚è¿™æ ·çš„é“¾æ¥ï¼š <code>"GET /projects/spring-boot?format=json"</code>å°±å¯ä»¥è¢«æ˜ å°„åˆ° <code>@GetMapping("/projects/spring-boot")</code>æ˜ å°„çš„æ§åˆ¶å™¨æ–¹æ³•</p><p>ä¸ºäº†èƒ½è®© spring boot å¼€å¯ä¸Šé¢çš„å‚æ•°æŸ¥è¯¢åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œé…ç½®</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>    <span class="token key atrule">contentnegotiation</span><span class="token punctuation">:</span>      <span class="token key atrule">favor-parameter</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>      <span class="token comment"># å¼€å¯ query parameter åŠŸèƒ½</span>      <span class="token key atrule">parameter-name</span><span class="token punctuation">:</span> myparam    <span class="token comment"># å®šä¹‰å‚æ•°æŸ¥è¯¢çš„åç§°ï¼ˆæ¯”å¦‚ä¸Šé¢çš„format = json---&gt; myparam = jsonï¼‰</span>      <span class="token key atrule">media-types</span><span class="token punctuation">:</span> text/markdown <span class="token comment"># é¢å¤–å¢åŠ è¿”å›èµ„æºçš„æ ¼å¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p><b style="font-size:27px">Spring HATEOAS</b></p><p><code>hypermedia as the engine of application state</code>ï¼šå‡è½»å®¢æˆ·ç«¯ç¡¬ç¼–ç è¯·æ±‚çš„ç—›è‹¦ã€‚</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-hateoas<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ä¹‹å‰spring5å®æˆ˜å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬äº†è§£åˆ°ä¸€ç§ä¸ºæ•´ä¸ªtacoåˆ—è¡¨æ·»åŠ è¶…é“¾æ¥çš„ä¸€ç§æ–¹æ³•ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/recent"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">Resources</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Resource</span><span class="token punctuation">&lt;</span><span class="token class-name">Taco</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">recentTacos</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">PageRequest</span> page <span class="token operator">=</span> <span class="token class-name">PageRequest</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token class-name">Sort</span><span class="token punctuation">.</span><span class="token function">by</span><span class="token punctuation">(</span><span class="token string">"createdAt"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">descending</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Taco</span><span class="token punctuation">&gt;</span></span> tacos <span class="token operator">=</span> tacoRepo<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/**å°†tacoåˆ—è¡¨æ‰“åŒ…æˆèµ„æºé›†åˆ*/</span>    <span class="token class-name">Resources</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Resource</span><span class="token punctuation">&lt;</span><span class="token class-name">Taco</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> recentResources <span class="token operator">=</span>         <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>tacos<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/**ä¸ºtacoèµ„æºé›†åˆæ·»åŠ è¶…é“¾æ¥*/</span>    recentResources<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>        <span class="token keyword">new</span> <span class="token class-name">Link</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/design/recent"</span><span class="token punctuation">,</span> <span class="token string">"recents"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> recentResources<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™é‡Œæ·»åŠ çš„è¶…é“¾æ¥ä¾æ—§æ˜¯ç¡¬ç¼–ç ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨spring hateoasä¸­çš„é“¾æ¥æ„é€ è€…ï¼š<strong>ControllerLinkBuilder</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">recentResources<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>    <span class="token class-name">ControllerLinkBuilder</span><span class="token punctuation">.</span><span class="token function">linkTo</span><span class="token punctuation">(</span><span class="token class-name">DesignTacoController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>     <span class="token punctuation">.</span><span class="token function">slash</span><span class="token punctuation">(</span><span class="token string">"recent"</span><span class="token punctuation">)</span>     <span class="token punctuation">.</span><span class="token function">withRel</span><span class="token punctuation">(</span><span class="token string">"reccents"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ–è€…æ˜¯è¿™æ ·çš„æ¶ˆé™¤ç¡¬ç¼–ç æ–¹å¼ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">recentResources<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>    <span class="token class-name">ControllerLinkBuilder</span><span class="token punctuation">.</span><span class="token function">linkTo</span><span class="token punctuation">(</span><span class="token function">methodOn</span><span class="token punctuation">(</span><span class="token class-name">DesignTacoController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">recentTacos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token punctuation">.</span><span class="token function">withRel</span><span class="token punctuation">(</span><span class="token string">"recents"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç»¼ä¸Šæ‰€è¿°ï¼šæˆ‘ä»¬å°±è§£å†³äº†ä¸ºèµ„æºé›†åˆæ·»åŠ è¶…é“¾æ¥çš„é—®é¢˜ï¼Œä½†æ˜¯èµ„æºé›†åˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ å¦‚ä½•æ·»åŠ è¶…é“¾æ¥ï¼Ÿ</strong></p><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¸åœ¨æ˜¯ä»¥<code>Resources.wrap(tacos)</code>çš„æ–¹å¼åˆ›å»ºèµ„æºé›†åˆã€‚</p><p>æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªæ—¢å¯ä»¥å­˜å‚¨tacoå¯¹è±¡æ•°æ®åˆå¯ä»¥æºå¸¦é“¾æ¥çš„èµ„æºç±»ï¼š<code>TacoResource</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TacoResource</span> <span class="token keyword">extends</span> <span class="token class-name">ResourceSupport</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Getter</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Getter</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Date</span> createdAt<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Getter</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Ingredient</span><span class="token punctuation">&gt;</span></span> ingredients<span class="token punctuation">;</span>            <span class="token keyword">public</span> <span class="token class-name">TacoResource</span><span class="token punctuation">(</span><span class="token class-name">Taco</span> taco<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> taco<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>createdAt <span class="token operator">=</span> taco<span class="token punctuation">.</span><span class="token function">getCreatedAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>ingredients <span class="token operator">=</span> taco<span class="token punctuation">.</span><span class="token function">getIngredients</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½¢å¼ä¸Šæ¥çœ‹ï¼Œè¿™ä¸ª<code>TacoResource</code>ä¸<code>Taco</code>æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½†æ˜¯å› ä¸º<code>TacoResource</code>ç»§æ‰¿äº†<code>ResourceSupport</code>ç±»ï¼Œé‚£ä¹ˆä»–å°†è‡ªåŠ¨ä¼šæœ‰ä¸€ä¸ªLinkå¯¹è±¡åˆ—è¡¨å’Œç®¡ç†é“¾æ¥åˆ—è¡¨çš„æ–¹æ³•ã€‚</p><p>ä¸ºäº†é¦–å…ˆTaco-&gt;TacoResourceçš„è½¬æ¢ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªèµ„æºè£…é…å™¨ï¼Œå°†Tacoçš„èµ„æºè£…é…åˆ°TacoResourceã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TacoResourceAssembler</span>     <span class="token keyword">extends</span> <span class="token class-name">ResourceAssmblerSupport</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Taco</span><span class="token punctuation">,</span> <span class="token class-name">TacoResource</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name">TacoResourceAssembler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">DesignTacoController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">TacoResource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token class-name">TacoResource</span> <span class="token function">instantiateResource</span><span class="token punctuation">(</span><span class="token class-name">Taco</span> taco<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TacoResource</span><span class="token punctuation">(</span>taco<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>            <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">TacoResource</span> <span class="token function">toResource</span><span class="token punctuation">(</span><span class="token class-name">Taco</span> taco<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">createdResourceWithId</span><span class="token punctuation">(</span>taco<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> taco<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>toResource(Taco)</code>å¼ºåˆ¶é‡å†™ï¼Œå¯¹äº<code>instantiateResource(Taco)</code>æ–¹æ³•æ˜¯å¯é€‰çš„ã€‚å¦‚æœåœ¨TacoResourceæœ‰é»˜è®¤æ„é€ å™¨æ—¶ã€‚</p><p><strong>ç»è¿‡ä¸Šé¢çš„åŠªåŠ›ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥å¾—åˆ°ç±»ä¼¼ä¸‹é¢çš„jsonæ–‡ä»¶</strong></p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>    <span class="token property">"_embedded"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"tacoResourceList"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Veg-out"</span><span class="token punctuation">,</span>            <span class="token property">"createdAt"</span><span class="token operator">:</span> <span class="token string">"2018-01-31T20:15:53.219+0000"</span><span class="token punctuation">,</span>            <span class="token property">"ingredient"</span><span class="token operator">:</span> <span class="token punctuation">[</span>                <span class="token punctuation">{</span>                    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Flour Tortilla"</span><span class="token punctuation">,</span>                    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"WRAP"</span><span class="token punctuation">,</span>                    <span class="token property">"_links"</span><span class="token operator">:</span> <span class="token punctuation">{</span>                        <span class="token property">"self"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"href"</span><span class="token operator">:</span> <span class="token string">"http://localhost:8080/ingredients/FLOTO"</span><span class="token punctuation">}</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>            <span class="token punctuation">]</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token property">"_links"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"recents"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"href"</span><span class="token operator">:</span> <span class="token string">"http://localhost:8080/design/recent"</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åŸå§‹çš„tacoResourceListåç§°å…¶å®æ˜¯æ¥è‡ªäºæˆ‘ä»¬ç¬¬ä¸€æ¬¡å°è¯•åˆ›å»ºèµ„æºé›†åˆæ—¶ï¼ŒList&lt;TacoResource&gt;åˆ›å»ºå‡ºæ¥çš„ï¼Œä½†æ˜¯å‡è®¾æˆ‘ä»¬çš„TacoResourceåç§°ï¼Œæ”¹å˜äº†ï¼Œé‚£ä¹ˆæ‰€æœ‰ä¸ä¹‹ç›¸å…³çš„jsonå­—æ®µéƒ½ä¼šå‡ºé—®é¢˜ï¼Œæ‰€ä»¥ä¸ºäº†è§£è€¦ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>@Relation</code>æ³¨è§£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Relation</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"taco"</span><span class="token punctuation">,</span> collection <span class="token operator">=</span> <span class="token string">"tacos"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TacoResource</span> <span class="token keyword">extends</span> <span class="token class-name">ResourceSupport</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™æ ·å¾—åˆ°çš„json</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>    <span class="token property">"_embedded"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"tacos"</span><span class="token operator">:</span> <span class="token punctuation">[</span>...<span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p><b style="font-size:25px">ä½¿ç”¨Spring Data Restå®šä¹‰åº”ç”¨çš„API</b></p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-rest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸ºæœ‰æ—¶å€™è‡ªå·±ç¼–å†™æ§åˆ¶å™¨çš„ç«¯ç‚¹å¯èƒ½ä¼šä¸Spring Data RESTåˆ›å»ºçš„ç«¯ç‚¹å†²çªï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é…ç½®ä¸­è®¾ç½®restçš„ç«¯ç‚¹è·¯å¾„</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">data</span><span class="token punctuation">:</span>    <span class="token key atrule">rest</span><span class="token punctuation">:</span>      <span class="token key atrule">base-path</span><span class="token punctuation">:</span> /api<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>curl http://localhost:8080/api</code> æŸ¥çœ‹ Spring Data REST è‡ªåŠ¨åˆ›å»ºçš„ç«¯ç‚¹ï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>    <span class="token property">"_links"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"orders"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"href"</span><span class="token operator">:</span> <span class="token string">"http://localhost:8080/api/orders"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"ingredients"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"href"</span><span class="token operator">:</span> <span class="token string">"http://localhost:8080/api/ingredients"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"tacoes"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"href"</span><span class="token operator">:</span> <span class="token string">"http://localhost:8080/api/tacoes{?page,size,sort}"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"users"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"href"</span><span class="token operator">:</span> <span class="token string">"http://localhost:8080/api/users"</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token property">"profile"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"href"</span><span class="token operator">:</span> <span class="token string">"http://localhost:8080/api/profile"</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬ä»è‡ªåŠ¨åˆ›å»ºçš„ç«¯ç‚¹é“¾æ¥æ¥çœ‹ï¼ŒSprig Data Repository åœ¨åˆ›å»ºç«¯ç‚¹çš„æ—¶å€™æ˜¯æ ¹æ®å®ä½“ç±»çš„å¤æ•°å½¢å¼å‘½åé“¾æ¥çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸€ä¸ªå¼€æ§åˆ¶å™¨åœ¨è‡ªå®šä¹‰ç«¯ç‚¹æ—¶ï¼Œæƒ³è®©tacoä½¿ç”¨tacosï¼Œä½†æ˜¯ç”±äºå¤æ•°å½¢å¼tacoesä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæˆ‘æƒ³è‡ªå·±è¯¥å‘½åï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åœ¨å¯¹åº”çš„å®ä½“ç±»ä¸Šä½¿ç”¨<code>@RestResource</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@ResrResource</span><span class="token punctuation">(</span>rel <span class="token operator">=</span> <span class="token string">"tacos"</span><span class="token punctuation">,</span> path <span class="token operator">=</span> <span class="token string">"tacos"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Taoc</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™æ · Sprig Data Repository åœ¨åˆ›å»ºç«¯ç‚¹çš„æ—¶å€™ï¼Œé“¾æ¥å°±ä¼šæ˜¯è¿™æ ·</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token property">"tacos"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"href"</span><span class="token operator">:</span> <span class="token string">"http://localhost:8080/api/tacos{?page,size,sort}"</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¦‚æœéœ€è¦å®šä¹‰è‡ªå·±çš„ç«¯ç‚¹ï¼Œå¹¶ä¸”è‡ªå®šä¹‰çš„ç«¯ç‚¹å¯ä»¥åœ¨æ‹¥æœ‰ Sprig Data Repository åˆ›å»ºç«¯ç‚¹çš„ç›¸åŒå‰ç¼€ï¼Œæ¯”å¦‚ï¼šapiã€‚é‚£ä¹ˆå¯ä»¥ä½¿ç”¨<code>@RepositoryRestController</code>è¿™æ ·å®šä¹‰çš„æ§åˆ¶å™¨ï¼Œè®¿é—®è¯·æ±‚è·¯å¾„ä¸ä¸Šé¢è‡ªåŠ¨å®šä¹‰çš„ç«¯ç‚¹å­˜åœ¨ç›¸åŒçš„å‰ç¼€ã€‚</p><p><b style="color: red">ä¸Šé¢çš„å™è¿°éƒ½æ˜¯ä¸ºäº†åˆ›å»ºrestçš„apiï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±ä»‹ç»å¦‚ä½•æ¶ˆè´¹è¿™äº›api</b></p><hr><p>springåº”ç”¨å­˜åœ¨å¤šç§æ¶ˆè´¹apiçš„æ–¹å¼ï¼š</p><ul><li>RestTempalte</li><li>Traverson</li><li>Webclient</li></ul><p><b style="color:blue">å­¦ä¹ RestTemplateå¦‚ä½•æ¶ˆè´¹è¿™äº›api</b></p><ol><li>åœ¨éœ€è¦çš„åœ°æ–¹ç›´æ¥åˆ›å»ºå®ä¾‹</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">RestTempalte</span> template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>å¯ä»¥ä»¥beançš„å½¢å¼æ³¨å…¥åˆ°éœ€è¦ä½¿ç”¨çš„åœ°æ–¹</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">restTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æœ‰äº†è¿™ä¸ªæ¨¡æ¿å®ä¾‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ¨¡æ¿çš„æ“ä½œæ¥æ¶ˆè´¹restçš„apiã€‚ä¸»è¦ä»¥ï¼ˆPUTã€GETã€DELETEã€POSTï¼‰</p><p>æˆ‘ä»¬é¦–å…ˆå°è¯•ä»restçš„apiè·å–èµ„æºï¼ˆGET èµ„æºï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Ingredient</span> <span class="token function">getIngredientById</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> template<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/ingredients/{id}"</span><span class="token punctuation">,</span>                                <span class="token class-name">Ingredient</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œåˆ©ç”¨çš„æ˜¯æ¨¡æ¿çš„<code>getForObject</code>æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åˆ©ç”¨apiå–è·å–å¯¹åº”çš„å¯¹è±¡</p><p>å½“ç„¶ç±»ä¼¼äº<code>getForObject</code>å­˜åœ¨å¤šç§é‡è½½å½¢å¼ï¼š</p><p>ä½¿ç”¨Stringä½œä¸ºURLæ ¼å¼ï¼Œä½¿ç”¨MapæŒ‡æ˜å‚æ•°</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Ingredient</span> <span class="token function">getIngredientById</span><span class="token punctuation">(</span>string id<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> hashMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    hashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> template<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/ingredients/{id}"</span><span class="token punctuation">,</span>                                <span class="token class-name">Ingredient</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>hashMap<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨java.net.URIä½œä¸ºURLæ ¼å¼ï¼Œä¸æ”¯æŒå‚æ•°åŒ–çš„URL</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Ingredient</span> <span class="token function">getIngredientById</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> hashMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    hashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">URI</span> url <span class="token operator">=</span> <span class="token class-name">UriComponentBuilder</span>        <span class="token punctuation">.</span><span class="token function">fromHttpUrl</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/ingredients/{id}"</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">bulid</span><span class="token punctuation">(</span>hashmap<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> template<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token class-name">Ingredient</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>äº†è§£äº†<code>getForObject</code>å¤šç§é‡è½½å½¢å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>getForEntity</code>è·å–å“åº”å®ä½“ã€‚ä»–æœ‰ç€ç±»ä¼¼çš„å‚æ•°é‡è½½æ–¹å¼</p><p>æ¥ä¸‹æ¥å°è¯•å¦‚ä½•æ‰¹é‡ï¼ˆPUT èµ„æºï¼‰</p><p>ä¸ºäº†HTTPçš„PUTè¯·æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¨¡æ¿çš„putæ–¹æ³•ï¼Œä»–æœ‰ç€ç±»ä¼¼çš„é‡è½½æ–¹å¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Ingredient</span> ing<span class="token punctuation">)</span> <span class="token punctuation">{</span>    template<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/ingredients/{id}"</span><span class="token punctuation">,</span>                ing<span class="token punctuation">,</span>                ing<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ç€å°è¯•ï¼ˆDELETE èµ„æºï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">del</span><span class="token punctuation">(</span><span class="token class-name">Ingredient</span> ing<span class="token punctuation">)</span> <span class="token punctuation">{</span>    template<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/ingredients/{id}"</span><span class="token punctuation">,</span> ing<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ¥ç€å°è¯•ï¼ˆPOST èµ„æºï¼‰</p><p>postå­˜åœ¨ä¸‰ç§æ–¹å¼ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">postForObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">postForEntoty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">postForLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><b style="color:blue">å­¦ä¹ Traversonå¯¼èˆªrest api</b></p><p>éå†APIçš„å…³ç³»åæ¥æ¶ˆè´¹api</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Traverson</span> <span class="token keyword">to</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Traverson</span><span class="token punctuation">(</span>    URI<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/api"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">MediaTypes</span><span class="token punctuation">.</span>HAL_JSON<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥ä»¥beançš„å½¢å¼æ³¨å…¥åˆ°éœ€è¦ä½¿ç”¨çš„åœ°æ–¹</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">Traverson</span> <span class="token function">traversOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Traverson</span><span class="token punctuation">(</span>URI<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/api"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">MediaTypes</span><span class="token punctuation">.</span>HAL_JSON<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æœ‰äº† <code>Traverson</code> å®ä¾‹æˆ‘ä»¬å°±å¯ä»¥å°†å®¢æˆ·ç«¯å¯¼èˆªåˆ°å¯¹åº”çš„é“¾æ¥å…³ç³»åä¸‹ã€‚</p><hr><h3 id="Webçš„å°demo"><a href="#Webçš„å°demo" class="headerlink" title="Webçš„å°demo"></a>Webçš„å°demo</h3><hr><p>è¿™é‡Œç®€å•çš„åšä¸€ä¸ªspring bootçš„webmvcçš„demo ğŸ‘‰<a href="https://gitee.com/matemaster/master-depository/tree/master/spring/demoweb">å®Œæ•´çš„demoä»£ç </a></p><p>å…³äºå¦‚ä½•åˆå§‹åŒ–springbootæ­å»ºå°±ä¸å†èµ˜è¿°ã€æˆ‘ä»¬å…ˆä»æ•°æ®åº“çš„æ­å»ºå’Œè¿æ¥åšèµ·</p><ol><li>æ­å»ºwebç›¸å…³çš„spring bootåº”ç”¨åœºæ™¯</li></ol><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210518235401.png"></p><ol start="2"><li>åœ¨spring bootä¸­é…ç½®æ•°æ®æºçš„ç›¸å…³ä¿¡æ¯</li></ol><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210518235537.png"></p><ol start="3"><li>åœ¨ä¸Šé¢é…ç½®çš„sqlä½ç½®ï¼Œç¼–å†™æ•°æ®åº“ç›¸å…³çš„sqlè„šæœ¬</li></ol><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210518235723.png"></p><ol start="4"><li>ä¸šåŠ¡é€»è¾‘ä»£ç çš„è®¾è®¡</li></ol><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210519082129.png"></p><p>å…³äºé¢†åŸŸå¯¹è±¡ï¼šUsrå’ŒResult</p><p>Resultå°†ä¼šå­˜å‚¨sqlè¯­å¥æ‰§è¡Œçš„ç»“æœï¼ŒUsrå°±æ˜¯å…·ä½“çš„ä¿¡æ¯å­˜å‚¨å¯¹è±¡</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@Entity</span><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"tb_usr"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Usr</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Id</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"name"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"password"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Getter</span><span class="token annotation punctuation">@Setter</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Result</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">HttpStatus</span> code<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Usr</span> usr<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬åˆ©ç”¨JPAæŠ€æœ¯è‡ªåŠ¨ç”Ÿæˆç®€å•ä¸šåŠ¡é€»è¾‘å®ç°çš„å¥½å¤„ï¼Œæ ¹æ®IDæŸ¥æ‰¾å¯¹åº”çš„Usrå¯¹è±¡</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UsrRepository</span> <span class="token keyword">extends</span> <span class="token class-name">CrudRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Usr</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="5"><li>åˆ©ç”¨restæ¶ˆè´¹ä¸Šé¢è®¾è®¡çš„apiç«¯å£</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> template<span class="token punctuation">;</span><span class="token annotation punctuation">@Autowired</span><span class="token keyword">public</span> <span class="token class-name">RestTest</span><span class="token punctuation">(</span><span class="token class-name">RestTemplateBuilder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>template <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/usr"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">getUsr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Usr</span> usr <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/{id}"</span><span class="token punctuation">,</span> <span class="token class-name">Usr</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Result</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>usr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        result<span class="token punctuation">.</span><span class="token function">setUsr</span><span class="token punctuation">(</span>usr<span class="token punctuation">)</span><span class="token punctuation">;</span>        result<span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span>OK<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Spring-Data"><a href="#Spring-Data" class="headerlink" title="Spring Data"></a>Spring Data</h2><p><b style="color:red">JPA</b></p><p>JPAçš„é¢„å¤‡çŸ¥è¯†ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210527173231.svg"></p><p>JPAå¼€å‘ç¯å¢ƒçš„æ­å»ºï¼š</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.hibernate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hibernate-entitymanager<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${entitymanager.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${mysql.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ1ï¼‰å‡†å¤‡æ•°æ®åº“ schema.sqlå’Œdata.sql</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> databse demo_web<span class="token punctuation">;</span><span class="token keyword">use</span> demo_web<span class="token punctuation">;</span><span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> tb_usr <span class="token punctuation">;</span><span class="token keyword">create</span> <span class="token keyword">table</span> tb_usr<span class="token punctuation">(</span>                       id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">,</span>                       name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                       password <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> tb_usr<span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'JackMa'</span><span class="token punctuation">,</span><span class="token string">'123456'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>       <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'RichardYu'</span><span class="token punctuation">,</span><span class="token string">'098765'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ2ï¼‰å®šä¹‰ä¸æ•°æ®åº“å¯¹åº”çš„å®ä½“ç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Entity</span><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"tb_usr"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Usr</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Id</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"name"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"password"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ3ï¼‰é…ç½®æŒä¹…åŒ–å•å…ƒ</p><p>é…ç½®æ–‡ä»¶çš„æ ‡å‡†è·¯å¾„ï¼š<code>META-INF/persistence.xml</code></p><p>è¿™é‡Œé…ç½®çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†è¯´æ˜æŒä¹…åŒ–æ‰€éœ€è¦çš„æ•°æ®åº“ä¿¡æ¯ï¼š</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--JPA provider--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>provider</span><span class="token punctuation">&gt;</span></span>org.hibernate.jpa.HibernatePersistenceProvider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>provider</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--entity class--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>cn.matemaster.entity.Usr<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--é…ç½®æŒä¹…åŒ–å•å…ƒ--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>persistence_unit</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>diy<span class="token punctuation">"</span></span> <span class="token attr-name">transaction-type</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>RESOURCE_LOCAL<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>javax.persistence.jdbc.driver<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.mysql.cj.jdbc.Driver<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>javax.persistence.jdbc.url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbc:mysql://db_name<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>javax.persistence.jdbc.user<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>javax.persistence.jdbc.password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mysql_password<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>hibernate.show_sql<span class="token punctuation">"</span></span> <span class="token attr-name">value</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>hibernate.format_sql<span class="token punctuation">"</span></span> <span class="token attr-name">value</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token comment">&lt;!--auto create table : update ? create--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>hibernate.hbm2ddl.auto<span class="token punctuation">"</span></span> <span class="token attr-name">value</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>update<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>persistence_unit</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ4ï¼‰ä½¿ç”¨JPAæ“ä½œæ•°æ®åº“çš„æ­¥éª¤</p><ul><li>åˆ›å»ºå®ä½“ç®¡ç†å™¨å·¥å‚</li><li>ä½¿ç”¨å·¥å‚åˆ›å»ºå®ä½“ç®¡ç†å™¨</li><li>è·å–äº‹åŠ¡ï¼Œå¹¶ä¸”å¼€å¯äº‹åŠ¡</li><li>CRUDæ“ä½œ</li><li>æäº¤äº‹åŠ¡</li><li>å…³é—­èµ„æº</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> persistenceUnit <span class="token operator">=</span> <span class="token string">"diy"</span><span class="token punctuation">;</span><span class="token class-name">EntityManagerFactory</span> factory <span class="token operator">=</span> <span class="token class-name">Persistence</span><span class="token punctuation">.</span><span class="token function">createEntityManagerFactory</span><span class="token punctuation">(</span>persistenceUnit<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">EntityManager</span> entityManager <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createEntityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">EntityTransaction</span> transaction <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">getTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>transaction<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å¢</span>entityManager<span class="token punctuation">.</span><span class="token function">persist</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Usr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// æŸ¥ã€æ”¹</span><span class="token class-name">Usr</span> usr <span class="token operator">=</span> entityManager<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">Usr</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>usr<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>entityManager<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>usr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åˆ </span>entityManager<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>usr<span class="token punctuation">)</span><span class="token punctuation">;</span>transaction<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>entityManager<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸‰ä¸ªé‡è¦çš„å¯¹è±¡ï¼šEntityManagerFactory ã€EntityManager ã€EntityTransaction<br>EntityManagerï¼šå¢åˆ æ”¹æŸ¥çš„APIæ“ä½œè€…ã€‚<br>EntityTransactionï¼šè´Ÿè´£äº‹åŠ¡çš„å¼€å¯ã€æäº¤ã€å›æ»š</p><p>åœ¨spring data jpaä¸‹çš„æ“ä½œæ•°æ®åº“ï¼š</p><p>spring data jpa æ˜¯åŸºäºjpaçš„åŸºç¡€ä¹‹ä¸Šï¼Œè®©ç”¨æˆ·ä¸“æ³¨äºDAOå±‚æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥å°†æ³¨æ„åŠ›æ”¾åœ¨DAOæ¥å£çš„å­¦ä¹ ä¸Šé¢ã€‚</p><p>è¿™é‡Œç®€å•äº†è§£ä¸€ä¸‹åœ¨spring dataä¸‹å¦‚ä½•å®Œæˆä¸Šé¢åŸå§‹jpaçš„é…ç½®æ“ä½œï¼š</p><ol><li>é…ç½®æ•°æ®æº</li><li>é…ç½® EntityManagerFactory Beanå®ä¾‹ï¼ˆæ•°æ®åº“æ“ä½œå¯¹è±¡ï¼‰</li><li>é…ç½® EntityTransaction Beanå®ä¾‹ï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰</li><li>é…ç½®JPAä¸­å…¼å®¹äº†hibernateæ¡†æ¶çš„æ“ä½œ</li></ol><p>spring data jpa ä¸­é‡è¦çš„æ“ä½œæ¥å£</p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210527190954.svg"></p><p>é€šè¿‡è‡ªå®šä¹‰å®ä½“ç±»çš„æ“ä½œæ¥å£å®ç°ç®€å•çš„å¢åˆ æ”¹æŸ¥ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UsrRepository</span> <span class="token keyword">extends</span> <span class="token class-name">JpaRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Usr</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>spring data jpa å®ç°æŸ¥è¯¢çš„å‡ ç§å¸¸ç”¨æ–¹å¼ï¼š</p><ul><li>åˆ©ç”¨çˆ¶æ¥å£æ–¹æ³•</li><li>æŒ‰ç…§jpaå‘½åè§„åˆ™</li><li>åˆ©ç”¨JPQL</li><li>ç›´æ¥åˆ©ç”¨æœ¬åœ°SQLï¼ˆå¤æ‚æŸ¥è¯¢å®ç°ï¼‰</li><li>åŠ¨æ€æŸ¥è¯¢çš„æ–¹å¼ï¼ˆå¤æ‚åŠ¨æ€æŸ¥è¯¢å®ç°ï¼‰</li></ul><ol><li>åˆ©ç”¨çˆ¶æ¥å£æ–¹æ³•ï¼ˆcrudï¼‰</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**è‡ªå®šä¹‰DAOæ¥å£*/</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UsrRepository</span> <span class="token keyword">extends</span> <span class="token class-name">JpaRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Usr</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment">/**æµ‹è¯•åˆ©ç”¨è¯¥æ¥å£å¢åˆ æ”¹æŸ¥*/</span><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">daoUsr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Usr</span> mate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Usr</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">"Master"</span><span class="token punctuation">,</span> <span class="token string">"12345378"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    usrRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>mate<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// usrRepository.deleteById(4);</span>    <span class="token class-name">Usr</span> jMaster <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Usr</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">"JMaster"</span><span class="token punctuation">,</span> <span class="token string">"09876542"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    usrRepository<span class="token punctuation">.</span><span class="token function">saveAndFlush</span><span class="token punctuation">(</span>jMaster<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Usr</span><span class="token punctuation">&gt;</span></span> all <span class="token operator">=</span> usrRepository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Usr</span> usr <span class="token operator">:</span> all<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>usr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>JPAæ–¹æ³•å‘½åè§„èŒƒï¼Œä»¥åŠè‡ªåŠ¨æ˜ å°„æˆçš„SQLè¯­å¥ï¼š</li></ol><table><thead><tr><th>Keyword</th><th>Sample</th><th>SQL</th></tr></thead><tbody><tr><td><code>And</code></td><td><code>findByLastnameAndFirstname</code></td><td><code>â€¦ where x.lastname = ?1 and x.firstname = ?2</code></td></tr><tr><td><code>Or</code></td><td><code>findByLastnameOrFirstname</code></td><td><code>â€¦ where x.lastname = ?1 or x.firstname = ?2</code></td></tr><tr><td><code>Is,Equals</code></td><td><code>findByFirstname</code>,<code>findByFirstnameIs</code>,<code>findByFirstnameEquals</code></td><td><code>â€¦ where x.firstname = ?1</code></td></tr><tr><td><code>Between</code></td><td><code>findByStartDateBetween</code></td><td><code>â€¦ where x.startDate between ?1 and ?2</code></td></tr><tr><td><code>LessThan</code></td><td><code>findByAgeLessThan</code></td><td><code>â€¦ where x.age &lt; ?1</code></td></tr><tr><td><code>LessThanEqual</code></td><td><code>findByAgeLessThanEqual</code></td><td><code>â€¦ where x.age &lt;= ?1</code></td></tr><tr><td><code>GreaterThan</code></td><td><code>findByAgeGreaterThan</code></td><td><code>â€¦ where x.age &gt; ?1</code></td></tr><tr><td><code>GreaterThanEqual</code></td><td><code>findByAgeGreaterThanEqual</code></td><td><code>â€¦ where x.age &gt;= ?1</code></td></tr><tr><td><code>After</code></td><td><code>findByStartDateAfter</code></td><td><code>â€¦ where x.startDate &gt; ?1</code></td></tr><tr><td><code>Before</code></td><td><code>findByStartDateBefore</code></td><td><code>â€¦ where x.startDate &lt; ?1</code></td></tr><tr><td><code>IsNull</code></td><td><code>findByAgeIsNull</code></td><td><code>â€¦ where x.age is null</code></td></tr><tr><td><code>IsNotNull,NotNull</code></td><td><code>findByAge(Is)NotNull</code></td><td><code>â€¦ where x.age not null</code></td></tr><tr><td><code>Like</code></td><td><code>findByFirstnameLike</code></td><td><code>â€¦ where x.firstname like ?1</code></td></tr><tr><td><code>NotLike</code></td><td><code>findByFirstnameNotLike</code></td><td><code>â€¦ where x.firstname not like ?1</code></td></tr><tr><td><code>StartingWith</code></td><td><code>findByFirstnameStartingWith</code></td><td><code>â€¦ where x.firstname like ?1</code>(parameter bound with appended <code>%</code>)</td></tr><tr><td><code>EndingWith</code></td><td><code>findByFirstnameEndingWith</code></td><td><code>â€¦ where x.firstname like ?1</code>(parameter bound with prepended <code>%</code>)</td></tr><tr><td><code>Containing</code></td><td><code>findByFirstnameContaining</code></td><td><code>â€¦ where x.firstname like ?1</code>(parameter bound wrapped in <code>%</code>)</td></tr><tr><td><code>OrderBy</code></td><td><code>findByAgeOrderByLastnameDesc</code></td><td><code>â€¦ where x.age = ?1 order by x.lastname desc</code></td></tr><tr><td><code>Not</code></td><td><code>findByLastnameNot</code></td><td><code>â€¦ where x.lastname &lt;&gt; ?1</code></td></tr><tr><td><code>In</code></td><td><code>findByAgeIn(Collection&lt;Age&gt; ages)</code></td><td><code>â€¦ where x.age in ?1</code></td></tr><tr><td><code>NotIn</code></td><td><code>findByAgeNotIn(Collection&lt;Age&gt; ages)</code></td><td><code>â€¦ where x.age not in ?1</code></td></tr><tr><td><code>True</code></td><td><code>findByActiveTrue()</code></td><td><code>â€¦ where x.active = true</code></td></tr><tr><td><code>False</code></td><td><code>findByActiveFalse()</code></td><td><code>â€¦ where x.active = false</code></td></tr><tr><td><code>IgnoreCase</code></td><td><code>findByFirstnameIgnoreCase</code></td><td><code>â€¦ where UPPER(x.firstame) = UPPER(?1)</code></td></tr></tbody></table><ol start="3"><li>JPQLï¼ˆä¸“æ³¨é¢å‘å¯¹è±¡ç¼–å†™â€œSQLâ€ï¼‰</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UsrRepository</span> <span class="token keyword">extends</span> <span class="token class-name">JpaRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Usr</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>        <span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">"from Usr where Usr.id = ?1"</span><span class="token punctuation">)</span>    <span class="token class-name">Usr</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">"from Usr where Usr .id = :id"</span><span class="token punctuation">)</span>    <span class="token class-name">Usr</span> <span class="token function">query1</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li>åˆ©ç”¨æœ¬åœ°SQLï¼Œå®ç°å¤æ‚æŸ¥è¯¢</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**åªæŸ¥è¯¢ï¼Œä¸ä¿®æ”¹*/</span><span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"select d.* from sys_dept d, sys_roles_depts r where "</span> <span class="token operator">+</span>        <span class="token string">"d.dept_id = r.dept_id and r.role_id = ?1"</span><span class="token punctuation">,</span> nativeQuery <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dept</span><span class="token punctuation">&gt;</span></span> <span class="token function">findByRoleId</span><span class="token punctuation">(</span><span class="token class-name">Long</span> roleId<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/**ä¿®æ”¹æ•°æ®åº“æ•°æ®*/</span><span class="token annotation punctuation">@Modifying</span><span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">" update sys_dept set sub_count = ?1 where dept_id = ?2 "</span><span class="token punctuation">,</span>nativeQuery <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token keyword">void</span> <span class="token function">updateSubCntById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> count<span class="token punctuation">,</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="5"><li>åŠ¨æ€æŸ¥è¯¢</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dynamicUsr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    usrRepository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Specification</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Usr</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token class-name">Predicate</span> <span class="token function">toPredicate</span><span class="token punctuation">(</span><span class="token class-name">Root</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Usr</span><span class="token punctuation">&gt;</span></span> r<span class="token punctuation">,</span> <span class="token class-name">CriteriaQuery</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> q<span class="token punctuation">,</span> <span class="token class-name">CriteriaBuilder</span> cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Spring Data Jpaå¤šè¡¨æ“ä½œï¼š</p><p>ï¼ˆ1ï¼‰ç¡®å®šè¡¨ä¸è¡¨ä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼ˆä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šï¼‰</p><p>ï¼ˆ2ï¼‰åœ¨å®ä½“ç±»ä¹‹é—´æè¿°å®ä½“ä¹‹é—´çš„å…³ç³»</p><p>ï¼ˆ3ï¼‰é…ç½®å®ä½“ç±»å’Œæ•°æ®è¡¨ä¹‹é—´çš„æ˜ å°„å…³ç³»</p><p><code>@OneToOne</code>ã€<code>@OneToMany</code>ã€<code>@ManyToMany</code></p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210530203455.png"></p><p>é¦–å…ˆå®šä¹‰å¯¼å¸ˆå’Œå­¦ç”Ÿä¹‹é—´çš„ä¸€å¯¹å¤šå…³ç³»ï¼š</p><ul><li>å¯¼å¸ˆç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@Entity</span><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"tb_tutor"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tutor</span> <span class="token punctuation">{</span>    <span class="token comment">// æŒä¹…åŒ–ä¿¡æ¯(ä¸æ•°æ®åº“è¡¨çš„æ˜ å°„)</span>    <span class="token annotation punctuation">@Id</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"name"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token comment">// è¡¨ä¹‹é—´çš„å…³ç³»å®šä¹‰</span>    <span class="token annotation punctuation">@OneToMany</span><span class="token punctuation">(</span>mappedBy <span class="token operator">=</span> <span class="token string">"tutor"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> students <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å­¦ç”Ÿç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Entity</span><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"tb_student"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>    <span class="token comment">// æŒä¹…åŒ–ä¿¡æ¯(ä¸æ•°æ®åº“è¡¨çš„æ˜ å°„)</span>    <span class="token annotation punctuation">@Id</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"name"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"tutor_id"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> tutorId<span class="token punctuation">;</span>    <span class="token comment">// è¡¨ä¹‹é—´çš„å…³ç³»å®šä¹‰</span>    <span class="token annotation punctuation">@ManyToOne</span>    <span class="token annotation punctuation">@JoinColumn</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"tutor_id"</span><span class="token punctuation">,</span>referencedColumnName <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Tutor</span> tutor<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶æ¬¡å†çœ‹å­¦ç”Ÿå’Œè¯¾ç¨‹ä¹‹é—´çš„å¤šå¯¹å¤šå…³ç³»ï¼š</p><ul><li>å­¦ç”Ÿç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Entity</span><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"tb_student"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Id</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"name"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"tutor_id"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> tutorId<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ManyToMany</span><span class="token punctuation">(</span>mappedBy <span class="token operator">=</span> <span class="token string">"students"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Course</span><span class="token punctuation">&gt;</span></span> courses <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>è¯¾ç¨‹ç±»</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@Entity</span><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"tb_course"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Course</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Id</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"name"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token annotation punctuation">@ManyToMany</span>    <span class="token annotation punctuation">@JoinTable</span><span class="token punctuation">(</span>            name <span class="token operator">=</span> <span class="token string">"tb_sc"</span><span class="token punctuation">,</span>            joinColumns <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@JoinColumn</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"cid"</span><span class="token punctuation">,</span>referencedColumnName <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>            inverseJoinColumns <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token annotation punctuation">@JoinColumn</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"sid"</span><span class="token punctuation">,</span>referencedColumnName <span class="token operator">=</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">}</span>    <span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> students <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸ºä¸­é—´è¡¨tb_scæ˜¯ä¸ºäº†è¡¨ç¤ºå­¦ç”Ÿå’Œè¯¾ç¨‹ä¹‹é—´çš„å…³ç³»è€Œå­˜åœ¨çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦ä¸“é—¨åˆ›å»ºå®ä½“ç±»å»å®ŒæˆæŒä¹…åŒ–ã€‚</p><h2 id="Spring-Security"><a href="#Spring-Security" class="headerlink" title="Spring Security"></a>Spring Security</h2><p>è®¤è¯æˆæƒæ¨¡å‹ï¼š</p><p>è®¤è¯ï¼šæ˜¯å¯¹äºè®¿é—®ç³»ç»Ÿç”¨æˆ·çš„åˆæ³•æ€§ã€‚æˆæƒï¼šåœ¨è®¤è¯é€šè¿‡ä¹‹åï¼Œæ§åˆ¶ç”¨æˆ·è®¿é—®ä¸åŒèµ„æºã€‚</p><p>æˆæƒçš„æ•°æ®æ¨¡å‹ï¼š</p><p>ä¸»ä½“ï¼ˆUsrï¼‰ï¼šä¸€èˆ¬å¤šæ˜¯ç”¨æˆ·</p><p>èµ„æºï¼ˆResourceï¼‰ï¼šåŒ…æ‹¬ä¸€äº›åŠŸèƒ½èµ„æºå’Œæ•°æ®èµ„æºï¼ˆæ•°æ®åº“ä¸­çš„ä¿¡æ¯ï¼‰</p><p>æƒé™ï¼ˆpermissionï¼‰ï¼šæ§åˆ¶ç”¨æˆ·èƒ½å¤Ÿè®¿é—®å“ªäº›èµ„æºï¼Œä¸èƒ½è®¿é—®å“ªäº›èµ„æº</p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210601111917.svg"></p><p><code>RBAC</code>æˆæƒæ¨¡å‹ï¼š</p><p>ï¼ˆ1ï¼‰åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶</p><p>ï¼ˆ2ï¼‰åŸºäºèµ„æºçš„è®¿é—®æ§åˆ¶</p><p>ç¬¬ä¸€ç§åœ¨è¿›è¡Œè®¿é—®åŠŸèƒ½æ—¶ï¼Œé¦–å…ˆéªŒè¯å®ƒæ˜¯å¦æ˜¯æ‹¥æœ‰è¯¥æƒé™çš„è§’è‰²ï¼Œä»¥è§’è‰²ä¸ºéªŒè¯æ ¸å¿ƒã€‚ç¬¬äºŒç§åœ¨è¿›è¡Œè®¿é—®åŠŸèƒ½æ—¶ï¼Œé¦–å…ˆéªŒè¯å®ƒæ˜¯å¦æ‹¥æœ‰è¯¥èµ„æºè®¿é—®çš„æƒé™ï¼Œä»¥èµ„æºè®¿é—®æƒé™æ ‡è¯†ä¸ºæ ¸å¿ƒã€‚</p><p>springbootä¸­å…³äºsecurityçš„è¿ç”¨ï¼š</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨å¼•å…¥ä¾èµ–ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å¼€å¯springbootæä¾›çš„securityæœåŠ¡ï¼šé€šå¸¸æ˜¯ä½¿ç”¨ä¸€ä¸ªé…ç½®ç±»ä»¥å®ç°æ¥ä¸‹æ¥çš„è®¤è¯æˆæƒæ“ä½œã€‚</p><p>åœ¨ä¸‹é¢çš„é…ç½®ç±»ä¸­æˆ‘ä»¬å¯ä»¥å®Œæˆä¸‰ä»¶äº‹æƒ…ï¼š</p><ol><li>å…³äºç”¨æˆ·çš„ä¿¡æ¯æœåŠ¡ï¼ˆUserDetailsServiceï¼‰ï¼šæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„é‡è¦æ¥å£</li><li>å¯†ç çš„ç¼–ç æ–¹å¼ï¼ˆPasswordEncoderï¼‰</li><li>webè¯·æ±‚çš„æ‹¦æˆªæœºåˆ¶ï¼ˆconfigure(HttpSecurity httpSecurity)ï¼‰</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token comment">// @EnableWebSecurity:å¼€å¯securityæœåŠ¡</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebSecurity</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">PasswordEncoder</span> <span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span>http<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>spring-security-è®¤è¯è¿‡ç¨‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210605205318.svg"></p><p> spring-security-æˆæƒï¼š</p><p>ï¼ˆ1ï¼‰webæˆæƒ</p><p>ï¼ˆ2ï¼‰æ–¹æ³•æˆæƒ</p><p>webæˆæƒä¸»è¦æ—¶åˆ©ç”¨springsecurityä¸­çš„é…ç½®ç±»å®ç°ç›¸åº”çš„æ¥å£æ‹¦æˆª</p><p>æ–¹æ³•æˆæƒåˆ™ä¸»è¦å‘ç”Ÿåœ¨æ§åˆ¶å™¨ä¸Šï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableWebSecurity</span><span class="token comment">// å¼€å¯æ–¹æ³•æˆæƒï¼š@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringSecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><h2 id="å¼‚æ­¥åŒ–æ¶ˆæ¯å¤„ç†"><a href="#å¼‚æ­¥åŒ–æ¶ˆæ¯å¤„ç†" class="headerlink" title="å¼‚æ­¥åŒ–æ¶ˆæ¯å¤„ç†"></a>å¼‚æ­¥åŒ–æ¶ˆæ¯å¤„ç†</h2><p>ä¸‰ç§å¼‚æ­¥åŒ–æ¶ˆæ¯å¤„ç†æŠ€æœ¯æ ˆï¼šJMSã€RabbitMQã€</p><p><strong>æˆ‘ä»¬ä¸»è¦èšç„¦äºå¦‚ä½•ä½¿ç”¨æ¶ˆæ¯ä¸­é—´ä»¶å‘é€æ¶ˆæ¯å’Œæ¥å—æ¶ˆæ¯</strong></p><hr><p><b style="color:red">JMS</b></p><p>springå¯¹äºJMSæŠ€æœ¯çš„æ”¯æŒæ˜¯<code>JmsTemplate</code>ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¯¥ç±»å®ç°å‘é€æ¶ˆæ¯å’Œæ¥å—æ¶ˆæ¯</p><p>å…³äºartmeisæ¶ˆæ¯ä»£ç†çš„é…ç½®</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">artemis</span><span class="token punctuation">:</span>    <span class="token key atrule">host</span><span class="token punctuation">:</span> www.matemaster.cn    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>    <span class="token key atrule">user</span><span class="token punctuation">:</span> matemaster    <span class="token key atrule">password</span><span class="token punctuation">:</span> Mashimaro980<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨spring bootä¸­åº”ç”¨JMSæŠ€æœ¯æ ˆ</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-artemis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥éœ€è¦äº†è§£å…³äº<code>JmsTemplate</code>ä¸­å‘é€æ¶ˆæ¯çš„api</p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210517155618.png"></p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210517155622.png"></p><p>å…³äº<code>send</code>å’Œ<code>convertAndSend</code>ä¹‹é—´çš„åŒºåˆ«å°±åœ¨äºï¼ŒMessageå¯¹è±¡å®ä¾‹ï¼Œä¸€ä¸ªå‘ç”Ÿåœ¨å°å‰ä¸€ä¸ªå‘ç”Ÿåœ¨å¹•åï¼ä¼˜ç¼ºç‚¹æ˜¾è€Œæ˜“è§ï¼šsendå¯ä»¥å®šä¹‰Messsageå¯¹è±¡çš„å±æ€§å’Œæ¶ˆæ¯å¤´ï¼Œè€ŒconvertAndSendå‡å°‘äº†Messageå¯¹è±¡çš„ç”Ÿæˆï¼Œä½†æ˜¯éœ€è¦å€ŸåŠ©<code>MessagePostProcessor</code>æ¥å¤„ç†åæœŸå¯¹äºMessageå¯¹è±¡çš„å±æ€§å’Œæ¶ˆæ¯å¤´ï¼</p><p><strong>æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹sendåœ¨å…·ä½“ä¸šåŠ¡ä¸­çš„åº”ç”¨</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JmsOrderMessagingService</span> <span class="token keyword">implements</span> <span class="token class-name">OrderMessagingService</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name">JmsTemplate</span> jms<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">public</span> <span class="token class-name">JmsOrderMessagingService</span><span class="token punctuation">(</span><span class="token class-name">JmsTemplate</span> jms<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>jms <span class="token operator">=</span> jms<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">/**è¿™é‡Œsendæ–¹æ³•ç±»lambdaå®ç°çš„æ˜¯MessageCreatoræ¥å£*/</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendOrder</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>        jms<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>session <span class="token operator">-&gt;</span> session<span class="token punctuation">.</span><span class="token function">createObjectMessage</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸ºåœ¨è¿™é‡Œå¹¶æ²¡æœ‰ä¼ å…¥ç›®çš„åœ°å‚æ•°ï¼ˆDestinationå®ä¾‹ï¼‰ï¼Œæ‰€ä»¥æ¶ˆæ¯å°±ä¼šè¢«è·¯ç”±åˆ°é»˜è®¤ç›®çš„åœ°ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åˆ©ç”¨é…ç½®æ¥è®¾å®šé»˜è®¤çš„ç›®çš„åœ°</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">jms</span><span class="token punctuation">:</span>    <span class="token key atrule">template</span><span class="token punctuation">:</span>      <span class="token key atrule">default-destination</span><span class="token punctuation">:</span> matemaster.default.queue<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ç›®çš„åœ°ä½œä¸ºbeanæ³¨å…¥åˆ°spring bootçš„å®¹å™¨å½“ä¸­</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">Destination</span> <span class="token function">messageQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ActiveMQQueue</span><span class="token punctuation">(</span><span class="token string">"matemaster.default.queue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>é™¤äº†é»˜è®¤çš„ç›®çš„åœ°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­ç¡¬ç¼–ç è®¾ç½®ç›®çš„åœ°</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JmsOrderMessagingService</span> <span class="token keyword">implements</span> <span class="token class-name">OrderMessagingService</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name">JmsTemplate</span> jms<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Destination</span> mq<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">public</span> <span class="token class-name">JmsOrderMessagingService</span><span class="token punctuation">(</span><span class="token class-name">JmsTemplate</span> jms<span class="token punctuation">,</span> <span class="token class-name">Destination</span> mq<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>jms <span class="token operator">=</span> jms<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>des <span class="token operator">=</span> mq<span class="token punctuation">;</span>    <span class="token punctuation">}</span>            <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendOrder</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>        jms<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mq<span class="token punctuation">,</span>session <span class="token operator">-&gt;</span> session<span class="token punctuation">.</span><span class="token function">createObjectMessage</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æ˜¯ç›´æ¥ä¼ å…¥ç›®çš„åœ°çš„åç§°ä»¥å®ç°è®¾ç½®ç›®çš„åœ°</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendOrder</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>    jms<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"mq"</span><span class="token punctuation">,</span>session <span class="token operator">-&gt;</span> session<span class="token punctuation">.</span><span class="token function">createObjectMessage</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹convertAndSendåœ¨å…·ä½“ä¸šåŠ¡ä¸­çš„åº”ç”¨</strong></p><p>å› ä¸ºè¿™é‡Œåœ¨æ–¹æ³•çš„åº•å±‚ä¸­ï¼Œå¤šäº†ä¸€ä¸ªç±»å‹çš„è½¬æ¢ï¼šé¢†åŸŸå¯¹è±¡===&gt;Messageå¯¹è±¡ï¼Œè¿™é‡Œæ¶‰åŠä¸€ä¸ªæ¥å£ï¼š<code>MessageConvert</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MessageConverter</span> <span class="token punctuation">{</span>    <span class="token class-name">Message</span> <span class="token function">toMessage</span><span class="token punctuation">(</span><span class="token class-name">Object</span> var1<span class="token punctuation">,</span> <span class="token class-name">Session</span> var2<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JMSException</span><span class="token punctuation">,</span> <span class="token class-name">MessageConversionException</span><span class="token punctuation">;</span>    <span class="token class-name">Object</span> <span class="token function">fromMessage</span><span class="token punctuation">(</span><span class="token class-name">Message</span> var1<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JMSException</span><span class="token punctuation">,</span> <span class="token class-name">MessageConversionException</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨springæ¡†æ¶ä¸­å·²ç»æä¾›äº†è¯¥æ¥å£çš„å®ç°ç±»ï¼šæ¥å£è½¬æ¢å™¨</p><ul><li>MappingJson2MessageConverter</li><li>MarshallingMessageConverter</li><li>MessagingMessageConverter</li><li>SimpleMessageConverter</li></ul><p>å¦‚æœæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¯¹äºçš„æ¥å£è½¬æ¢å™¨ï¼Œåªéœ€è¦ä»¥Beançš„å½¢å¼æ³¨å…¥åˆ°å®¹å™¨ä¸­å³å¯ã€‚æ¯”å¦‚ä¸‹é¢çš„è½¬æ¢å™¨ï¼Œå°±å¯ä»¥è‡ªåŠ¨å°†Orderé¢†åŸŸå¯¹è±¡ï¼Œè½¬ä¸ºå¯¹åº”çš„Messageå¯¹è±¡</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">MappingJson2MessageConverter</span> <span class="token function">messageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">MappingJson2MessageConverter</span> mc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MappingJson2MessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    mc<span class="token punctuation">.</span><span class="token function">setTypeIdPropertyName</span><span class="token punctuation">(</span><span class="token string">"_typeId"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"order"</span><span class="token punctuation">,</span> <span class="token class-name">Order</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    mc<span class="token punctuation">.</span><span class="token function">setTypeIdMappings</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> mc<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸ºè½¬æ¢å™¨å°†å¯¹è±¡è½¬æ¢ä¸ºMessageå¯¹è±¡ï¼Œæ˜¯åœ¨åå°è‡ªåŠ¨å®Œæˆçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸èƒ½å¤Ÿåƒsendé‚£æ ·ç›´æ¥åœ¨æ–¹æ³•å‚æ•°ä¸­å®šä¹‰æœ‰å…³Messageå¯¹è±¡çš„ä¿¡æ¯ï¼Œä½†æ˜¯è¿˜å¯ä»¥åˆ©ç”¨MessagePostProcessoråšå…³äºMessageå¯¹è±¡çš„å¤„ç†ï¼</p><ol><li>åœ¨sendä¸­å®šä¹‰Messageå¯¹è±¡çš„å±æ€§ </li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendOrder</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>    jsm<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"matemaster.diy.queue"</span><span class="token punctuation">,</span>             session <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>                 <span class="token class-name">Message</span> msg <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createObjectMessage</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>                 msg<span class="token punctuation">.</span><span class="token function">setStringProperty</span><span class="token punctuation">(</span><span class="token string">"X_ORDER_SOURCE"</span><span class="token punctuation">,</span> <span class="token string">"WEB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…ç”Ÿæˆäº†Messageå¯¹è±¡ï¼Œè¿˜å®šä¹‰äº†ä¸€ä¸ªå±æ€§ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨convertAndSendæ–¹æ³•ä¸­å®ç°åŒæ ·çš„æ“ä½œ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendOrder</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>    jsm<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"matemaster.diy.queue"</span><span class="token punctuation">,</span> order<span class="token punctuation">,</span>              message <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>                 <span class="token class-name">Message</span> msg <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">createObjectMessage</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token keyword">return</span> message<span class="token punctuation">;</span>             <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color:blue">è‡³æ­¤ï¼šå…³äºå¦‚ä½•ä½¿ç”¨JMSå‘é€æ¶ˆæ¯ç®€è¿°å®Œæ¯•ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦äº†è§£çš„å°±æ˜¯å¦‚ä½•æ¥å—JMSæ¶ˆæ¯ï¼Ÿ</b></p><p>æ¥å—æ¶ˆæ¯å­˜åœ¨ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>pullï¼šè¯·æ±‚æ¶ˆæ¯ï¼Œä¼šç­‰å¾…æ¶ˆæ¯åˆ°è¾¾ä½ç½®</li><li>pushï¼šåœ¨æ¶ˆæ¯å¯ç”¨æ—¶ï¼Œæ¥å—æ¶ˆæ¯</li></ul><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210517190203.png"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JmsOrderReceiver</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">JmsTemplate</span> jms<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">MessageConverter</span> converter<span class="token punctuation">;</span>        <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">public</span> <span class="token class-name">JmsOrderReceiver</span><span class="token punctuation">(</span><span class="token class-name">JmsTemplate</span> jms<span class="token punctuation">,</span> <span class="token class-name">MessageConverter</span> converter<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>jms <span class="token operator">=</span> jms<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>converter <span class="token operator">=</span> converter<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/**è·å–é»˜è®¤ç›®çš„åœ°çš„ä¿¡æ¯ï¼Œå¹¶ä¸”è½¬æ¢æˆOrderå¯¹è±¡*/</span>    <span class="token keyword">public</span> <span class="token class-name">Order</span> <span class="token function">receiveOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Message</span> msg <span class="token operator">=</span> jms<span class="token punctuation">.</span><span class="token function">receive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Order</span><span class="token punctuation">)</span> converter<span class="token punctuation">.</span><span class="token function">fromMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨receiveAndConvertæ–¹æ³•å®ç°è‡ªåŠ¨è½¬æ¢</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Order</span> <span class="token function">receiveOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Order</span><span class="token punctuation">)</span> jms<span class="token punctuation">.</span><span class="token function">receiveAndConvert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæƒ³è¦å®ç°pushæ¨¡å¼ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€ä¸ªç›‘å¬å™¨ï¼Œæ¥æ£€æµ‹å½“å‰æ¶ˆæ¯æ˜¯å¦å¯ç”¨</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@JmsListener</span><span class="token punctuation">(</span>destination <span class="token operator">=</span> <span class="token string">"matemaster.diy.queue"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">receiveOrder</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å¸¦æœ‰<code>@JmsListener</code>æ³¨è§£çš„æ–¹æ³•å°†ä¼šè¢«æ³¨å†Œä¸ºä¸€ä¸ªJMSæ¶ˆæ¯ç›‘å¬å™¨ï¼Œä»–ä¼šè‡ªåŠ¨è·å–æ¶ˆæ¯ä¸­çš„è½½è·ä½œä¸ºå‚æ•°orderä¼ å…¥åˆ°æ–¹æ³•ä¸­å»ï¼</p><p><b style="color:blue">è‡³æ­¤ï¼šJMSæŠ€æœ¯æ ˆç®€è¿°å®Œæ¯•ï¼Œæ¥ä¸‹æ¥å°†ä¼šç»§ç»­å­¦ä¹ RabbitMQ</b></p><hr><p><b style="color:red">RabbitMQ</b></p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210517190207.png"></p><p>ç”±ä¸Šå›¾å¯ç”¨çœ‹å‡ºï¼Œåœ¨RabbitMQä¸­ï¼ŒExchangeå’Œrouting keyã€bindingæ˜¯è·¯ç”±åˆ°æ¶ˆæ¯é˜Ÿåˆ—çš„å…³é”®ï¼</p><p>Exchangeå¤§æ¦‚å­˜åœ¨å…­ç§ç±»å‹ï¼š</p><ul><li>Default</li><li>Direct</li><li>Topic</li><li>Fanout</li><li>Headers</li><li>Dead letter</li></ul><p>åœ¨spring bootä¸­åº”ç”¨RabbitMQæŠ€æœ¯æ ˆ</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-amqp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å…³äºRabbitMQä»£ç†çš„é…ç½®</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>    <span class="token key atrule">addresses</span><span class="token punctuation">:</span> rabbit.matemaster.cn    <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">5673</span>    <span class="token key atrule">username</span><span class="token punctuation">:</span> rabbitweb    <span class="token key atrule">password</span><span class="token punctuation">:</span> xxxxxx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œä¹Ÿèšç„¦äºRabbitMQå¦‚ä½•å‘é€æ¶ˆæ¯å’Œæ¥æ”¶æ¶ˆæ¯</p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210517191343.png"></p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210517191710.png"></p><p>RabbitMQå‘é€æ¶ˆæ¯çš„æ–¹å¼ä¸JMSåŸºæœ¬ä¸€è‡´ï¼Œåªæ˜¯å¯¹äºRabbitMQ Exchange ä»–éœ€è¦æ ¹æ®æ¶ˆæ¯çš„ routing key å–å°†æ¶ˆæ¯è·¯ç”±åˆ°æŒ‡å®šçš„é˜Ÿåˆ—ä¸­ã€‚<strong>å¦å¤–ä¸€ä¸ªè¦ç‚¹å°±æ˜¯ï¼š</strong>RabbitMQå­˜åœ¨é»˜è®¤çš„æ¶ˆæ¯è½¬æ¢å™¨ã€‚æˆ‘ä»¬å¯ç”¨ä½¿ç”¨<code>getMessageConverter()</code>æ–¹æ³•è·å–åˆ°é»˜è®¤çš„è½¬æ¢å™¨ï¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Service</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitOrderMessagingService</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">RabbitTemplate</span> rabbit<span class="token punctuation">;</span>        <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">public</span> <span class="token class-name">RabbitOrderMessagingService</span><span class="token punctuation">(</span><span class="token class-name">RabbitTemplate</span> rabbit<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>rabbit <span class="token operator">=</span> rabbit<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendOrder</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// RabbitMQæä¾›çš„é»˜è®¤æ¶ˆæ¯è½¬æ¢å™¨</span>        <span class="token class-name">MessageConverter</span> converter <span class="token operator">=</span> rabbit<span class="token punctuation">.</span><span class="token function">getMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">MessageProperties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Message</span> msg <span class="token operator">=</span> converter<span class="token punctuation">.</span><span class="token function">toMessage</span><span class="token punctuation">(</span>order<span class="token punctuation">,</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span>        rabbit<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå‘é€å‡ºå»çš„msgå°†ä¼šé‡‡å–é»˜è®¤çš„ Exchange å’Œ routing key ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®çš„æ–¹å¼å»è®¾å®šé»˜è®¤</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>    <span class="token key atrule">template</span><span class="token punctuation">:</span>      <span class="token key atrule">exchange</span><span class="token punctuation">:</span> rabbit.matemaster.exchange      <span class="token key atrule">routing-key</span><span class="token punctuation">:</span> routing.key<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŒæ ·çš„æˆ‘ä»¬å¯ç”¨ä½¿ç”¨convertAndSendæ¥ç®€åŒ–å‘é€æ“ä½œ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendOrder</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>    rabbit<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span><span class="token string">"matemaster.diy.queue"</span><span class="token punctuation">,</span> order<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢æåˆ°è¿‡RabbitMQå¯ä»¥æä¾›çš„é»˜è®¤æ¶ˆæ¯è½¬æ¢å™¨ã€‚åœ¨springä¸­ä¹Ÿä¸ºRabbitTemplateæä¾›äº†å¤šç§æ¶ˆæ¯è½¬æ¢å™¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼å–æ›¿æ¢æ‰RabbitMQæä¾›çš„é»˜è®¤æ¶ˆæ¯è½¬æ¢å™¨ã€‚</p><p>springä¸­ä¸ºRabbitTemplateæä¾›çš„æ¶ˆæ¯è½¬æ¢å™¨ï¼š</p><ul><li>Jackson2JsonMessageConverter</li><li>MarshallingMessageConverter</li><li>SerializerMessageConverter</li><li>SimpleMessageConverter</li><li>ContentTypeDelegatingMessageConverter</li><li>MessagingMessageConverter</li></ul><p>æ›¿æ¢é»˜è®¤æ¶ˆæ¯è½¬æ¢å™¨çš„ä»£ç </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">MessageConverter</span> <span class="token function">messageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonMessageConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å°†Jackson2JsonMessageConverterå¯¹è±¡å®ä¾‹ï¼Œä»¥beanæ³¨å…¥åˆ°spring bootå®¹å™¨ä¸­ï¼Œspring bootå°†ä¼šå®Œæˆæ›¿æ¢å·¥ä½œï¼</p><p>ç±»ä¼¼æˆ‘ä»¬åœ¨RabbitMQä¸­ä½¿ç”¨å¸¦æœ‰MessagePostProcessorå¯¹æ¶ˆæ¯å¯¹è±¡åšåç»­å¤„ç†ï¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendOrder</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>    rabbit<span class="token punctuation">.</span><span class="token function">convertAndSend</span><span class="token punctuation">(</span>order<span class="token punctuation">,</span>                         message <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>                             <span class="token class-name">MessageProperties</span> pro <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">getMessageProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                             pro<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"X_ORDER_SOURCE"</span><span class="token punctuation">,</span> <span class="token string">"WEB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                             <span class="token keyword">return</span> message<span class="token punctuation">;</span>                         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color:blue">è‡³æ­¤ï¼šå…³äºå¦‚ä½•ä½¿ç”¨RabbitMQå‘é€æ¶ˆæ¯ç®€è¿°å®Œæ¯•ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦äº†è§£çš„å°±æ˜¯å¦‚ä½•æ¥å—RabbitMQæ¶ˆæ¯ï¼Ÿ</b></p><p>ä¸JMSç›¸ä¼¼ï¼ŒRabbitMQä¹Ÿæœ‰ä¸¤ç§æ¥å—æ¶ˆæ¯çš„æ–¹æ¡ˆï¼š</p><ul><li>ä½¿ç”¨RabbitTemplateä»é˜Ÿåˆ—ä¸­æ‹‰å–æ¶ˆæ¯</li><li>å°†æ¶ˆæ¯æ¨é€åˆ°å¸¦æœ‰@RabbitListeneræ³¨è§£çš„æ–¹æ³•</li></ul><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210517194546.png"></p><p>RabbitMQæ¥å—æ¶ˆæ¯ä¹Ÿæ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šï¼Œéƒ½æ˜¯æ¥å—æ¶ˆæ¯ç„¶åå¯¹æ¶ˆæ¯åšä¸šåŠ¡å¤„ç†ï¼ˆè·å–æ¶ˆæ¯å¤´ã€è½¬æ¢å¯¹è±¡ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥å¯ä»¥é€šè¿‡é…ç½®çš„æ–¹å¼ï¼Œå†³å®šæ‹‰å–ç­‰å¾…çš„è¶…æ—¶æ—¶é—´ï¼š</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>    <span class="token key atrule">template</span><span class="token punctuation">:</span>      <span class="token key atrule">receive-timeout</span><span class="token punctuation">:</span> <span class="token number">3000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹äºRabbitMQçš„æ¶ˆæ¯è½¬æ¢ï¼Œéœ€è¦ä¸€ä¸ªParameterizedTypeReferenceå‚æ•°ã€‚å¹¶ä¸”ä½¿ç”¨è¿™ä¸ªå‚æ•°æ—¶ï¼Œæ¶ˆæ¯è½¬åŒ–å™¨<strong>å¿…é¡»è¦å®ç°è¿™ä¸ªæ¥å£ï¼šSmartMessageConverterã€‚è€Œç›®å‰åªæœ‰Jackson2JsonMessageConverterå®ç°äº†</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Order</span> <span class="token function">receiveOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> rabbit<span class="token punctuation">.</span><span class="token function">receiveAndConvert</span><span class="token punctuation">(</span><span class="token string">"matemaster.diy.queue"</span><span class="token punctuation">,</span>                    <span class="token keyword">new</span> <span class="token class-name">ParameterizedTypeReference</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ¥ä¸‹æ¥éœ€è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨@RabbitListeneræ³¨è§£çš„æ–¹æ³•</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RabbitListener</span><span class="token punctuation">(</span>destination <span class="token operator">=</span> <span class="token string">"matemaster.diy.queue"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">dispalyOrder</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color:blue">è‡³æ­¤ï¼šRabbitMQæŠ€æœ¯æ ˆç®€è¿°å®Œæ¯•ï¼Œç¼–ç¨‹æ¨¡å‹åŸºæœ¬ä¸JMSä¿æŒä¸€è‡´ï¼Œæ¥ä¸‹æ¥éœ€è¦äº†è§£çš„æ˜¯Kafka</b></p><hr><p><b style="color:red">Kafka</b></p><h2 id="JSON-Web-Token"><a href="#JSON-Web-Token" class="headerlink" title="JSON Web Token"></a>JSON Web Token</h2><p>è®¤è¯æµç¨‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210526150348.svg"></p><p>JSON Web Tokençš„ç»“æ„ï¼š</p><ul><li>Header</li><li>Playload</li><li>Signature</li></ul><p>ä»¤ç‰Œçš„æ ¼å¼ï¼š<code>token: Header.Playload.Signature</code></p><p>Headerï¼ˆæ ‡å¤´ï¼‰çš„ç»„æˆï¼šä»¤ç‰Œçš„ç±»å‹ã€ä½¿ç”¨çš„ç­¾åç®—æ³•ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„æ ‡å¤´çš„JSONå¯¹è±¡â€”â€”æ˜æ–‡ï¼Œåé¢ä¼šä½¿ç”¨Base64è¿›è¡Œç¼–ç </p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>    <span class="token property">"alg"</span><span class="token operator">:</span> <span class="token string">"HS256"</span><span class="token punctuation">,</span>    <span class="token property">"typ"</span><span class="token operator">:</span> <span class="token string">"JWT"</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>PLayloadï¼ˆæœ‰æ•ˆè´Ÿè½½ï¼‰ï¼šå…¶ä¸­åŒ…å«äº†å…³äºæœ‰å…³å®ä½“çš„åŠæ›¿ä»–æ•°æ®çš„å£°æ˜ï¼Œåé¢ä¼šä½¿ç”¨Base64è¿›è¡Œç¼–ç ã€‚</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>    <span class="token property">"sub"</span><span class="token operator">:</span> <span class="token string">"1234567890"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"MateMaster"</span><span class="token punctuation">,</span>    <span class="token property">"admin"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Signatureï¼ˆç­¾åï¼‰ï¼šç­¾åçš„ç”Ÿæˆï¼Œæ˜¯åˆ©ç”¨å‰é¢å·²ç»ç¼–ç çš„Headerå’ŒPlayloadåŸºç¡€ä¹‹ä¸Šï¼ŒåŠ ä¸Šæˆ‘ä»¬æä¾›çš„å¯†é’¥ï¼Œä½¿ç”¨ä¸Šé¢å¤´éƒ¨å£°æ˜çš„ç­¾åç®—æ³•è¿›è¡Œç­¾åç”Ÿæˆï¼</p><ul><li>Base64(Header)</li><li>Base64(PLayload)</li><li>secret</li></ul><p>JSON Web Tokenåœ¨Javaç¨‹åºä¸­çš„è¿ç”¨ï¼š</p><ol><li>å¯¼å…¥ä¾èµ–</li></ol><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.auth0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>java-jwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${jwt.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>åˆ©ç”¨JWTçš„apiè¿›è¡Œå…³äºtokençš„æ“ä½œ</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span> token <span class="token operator">=</span> JWT<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">withHeader</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">withClaim</span><span class="token punctuation">(</span><span class="token string">"userId"</span><span class="token punctuation">,</span> <span class="token number">1998</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">withClaim</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token string">"MateMaster"</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">withExpiresAt</span><span class="token punctuation">(</span>calendar<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token class-name">Algorithm</span><span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span>secret<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ†åˆ«åˆ©ç”¨ä¸€ç³»åˆ—çš„withæ–¹æ³•å¯¹Header.Playload.Signatureè¿›è¡Œè®¾ç½®</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">JWTVerifier</span> verifier <span class="token operator">=</span> JWT<span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token class-name">Algorithm</span><span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span>secret<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">DecodedJWT</span> decodedJWT <span class="token operator">=</span> verifier<span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è§£å¯†tokenå¹¶ä¸”è·å–tokenä¸­çš„ç›¸å…³ä¿¡æ¯</p><p>å°†ä¸Šé¢çš„æ“ä½œåŒ…è£…æˆä¸€ä¸ªå·¥å…·ç±»ï¼ˆåŒ…å«tokençš„ç”Ÿæˆå’ŒéªŒè¯ï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JWTUtil</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> SECRET <span class="token operator">=</span> <span class="token string">"@#^&amp;*(*&amp;^%$CBAOVB"</span><span class="token punctuation">;</span>        <span class="token comment">/**mapåŒ…å«äº†playloadçš„å…¨éƒ¨å†…å®¹*/</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">generateToken</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">JWTCreator<span class="token punctuation">.</span>Builder</span> builder <span class="token operator">=</span> JWT<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>            builder<span class="token punctuation">.</span><span class="token function">withClaim</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Calendar</span> calendar <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        calendar<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DATE<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Date</span> date <span class="token operator">=</span> calendar<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        builder<span class="token punctuation">.</span><span class="token function">withExpiresAt</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> builder<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token class-name">Algorithm</span><span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span>SECRET<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/**ä¸»è¦éªŒè¯tokenæ˜¯å¦è¿‡æœŸ*/</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">verify</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span>        JWT<span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token class-name">Algorithm</span><span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span>SECRET<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/**è·å–tokençš„æ˜æ–‡ä¿¡æ¯åŠç¼–ç ä¿¡æ¯*/</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">DecodedJWT</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token class-name">String</span> token<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> JWT<span class="token punctuation">.</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token class-name">Algorithm</span><span class="token punctuation">.</span><span class="token function">HMAC256</span><span class="token punctuation">(</span>SECRET<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">verify</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Swagger2"><a href="#Swagger2" class="headerlink" title="Swagger2"></a>Swagger2</h2><ul><li>swagger2ä¾èµ–</li><li>swagger2é…ç½®</li><li>swagger2æ³¨è§£</li></ul><p>swaggeræ˜¯æœ€æµè¡Œçš„Apiæ¡†æ¶ï¼Œåœ¨spring bootä¸­çš„é›†æˆï¼š</p><p>springfox-swagger2ï¼šåŒ…å«äº†swagger-annotationsã€swagger-models</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springfox-swagger2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${swagger.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>springfox-swagger-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${swagger.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸ºswaggerå±äºç¬¬ä¸‰æ–¹çš„æŠ€æœ¯æ ˆï¼Œå¹¶æ²¡æœ‰ä¸“é—¨çš„åœºæ™¯å¯åŠ¨å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿›è¡Œé…ç½®æ‰å¯ä»¥ä½¿ç”¨</p><p>é…ç½®swaggerï¼šæ­¤æ—¶é‡‡å–é»˜è®¤é…ç½®çš„æ–¹å¼ï¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableSwagger2</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Swagger2Config</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥ä¸»è¦ä»‹ç»ä¸€ä¸‹å…³äº<code>swagger2</code>çš„è¯¦ç»†é…ç½®</p><p>ï¼ˆ1ï¼‰é…ç½®swagger2ç‰ˆæœ¬</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Docket</span> docket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Docket</span><span class="token punctuation">(</span><span class="token class-name">DocumentationType</span><span class="token punctuation">.</span>SWAGGER_2<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ï¼ˆ2ï¼‰é…ç½®é¡µé¢Apiçš„æè¿°ä¿¡æ¯ apiInfo</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">docket <span class="token operator">=</span> docket<span class="token punctuation">.</span><span class="token function">apiInfo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ApiInfo</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/**ApiInfoå¯¹è±¡æ„é€ å™¨*/</span><span class="token keyword">public</span> <span class="token class-name">ApiInfo</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">,</span> <span class="token class-name">String</span> description<span class="token punctuation">,</span> <span class="token class-name">String</span> version<span class="token punctuation">,</span> <span class="token class-name">String</span> termsOfServiceUrl<span class="token punctuation">,</span> <span class="token class-name">Contact</span> contact<span class="token punctuation">,</span> <span class="token class-name">String</span> license<span class="token punctuation">,</span> <span class="token class-name">String</span> licenseUrl<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">VendorExtension</span><span class="token punctuation">&gt;</span></span> vendorExtensions<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>title <span class="token operator">=</span> title<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>description <span class="token operator">=</span> description<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>version <span class="token operator">=</span> version<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>termsOfServiceUrl <span class="token operator">=</span> termsOfServiceUrl<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>contact <span class="token operator">=</span> contact<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>license <span class="token operator">=</span> license<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>licenseUrl <span class="token operator">=</span> licenseUrl<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>vendorExtensions <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span>vendorExtensions<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">/**è”ç³»æ–¹å¼*/</span><span class="token keyword">public</span> <span class="token class-name">Contact</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> url<span class="token punctuation">,</span> <span class="token class-name">String</span> email<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>url <span class="token operator">=</span> url<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>email <span class="token operator">=</span> email<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢æ˜¯ApiInfoçš„æ„é€ å‡½æ•°ï¼ŒåŒ…å«äº†Apiæ–‡æ¡£æè¿°ï¼šæ ‡é¢˜ã€æè¿°ã€ç‰ˆæœ¬ã€å›¢é˜ŸæœåŠ¡é“¾æ¥ã€è”ç³»æ–¹å¼ã€å¼€æºåè®®ã€åè®®é“¾æ¥ã€æ‹“å±•ã€‚</p><p>ï¼ˆ3ï¼‰æ˜¯å¦å¯ç”¨swagger-ui</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">docket <span class="token operator">=</span> docket<span class="token punctuation">.</span><span class="token function">isEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ï¼ˆ4ï¼‰ä¸ºswagger2é…ç½®æœ‰å…³äºJWTçš„ç›¸å…³é…ç½®</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Docket</span> <span class="token function">securitySchemes</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">SecurityScheme</span><span class="token punctuation">&gt;</span></span> securitySchemes<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Docket</span> <span class="token function">securityContexts</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SecurityContext</span><span class="token punctuation">&gt;</span></span> securityContexts<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ï¼ˆ5ï¼‰é…ç½®swagger2æ‰«ææ–¹å¼ï¼ˆæ‰«æçš„ä½ç½®ï¼Œå†…å®¹ã€‚ã€‚ã€‚ï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/**ç”Ÿæˆæ‰«æé€‰æ‹©å™¨*/</span><span class="token class-name">ApiSelectorBuilder</span> selectorBuilder <span class="token operator">=</span> docket<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/**é€‰æ‹©æ‰«æçš„æ–¹å¼*/</span>selectorBuilder <span class="token operator">=</span> selectorBuilder<span class="token punctuation">.</span><span class="token function">apis</span><span class="token punctuation">(</span><span class="token class-name">RequestHandlerSelectors</span><span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/**é€‰æ‹©æ‰«æçš„è·¯å¾„*/</span>selectorBuilder <span class="token operator">=</span> selectorBuilder<span class="token punctuation">.</span><span class="token function">paths</span><span class="token punctuation">(</span><span class="token class-name">PathSelectors</span><span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">/**å»ºé€ Docketå¯¹è±¡*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210527141119.png"></p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210527141118.png"></p><p>ä¸‹é¢éœ€è¦å­¦ä¹ çš„å°±æ˜¯swagger2å¸¸ç”¨çš„æ³¨è§£ï¼Œä»¥åŠä½œç”¨ï¼š</p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„å·¥å…·åŒ…</title>
      <link href="posts/34482.html"/>
      <url>posts/34482.html</url>
      
        <content type="html"><![CDATA[<h1 id="ä¼˜å…ˆé˜Ÿåˆ—"><a href="#ä¼˜å…ˆé˜Ÿåˆ—" class="headerlink" title="ä¼˜å…ˆé˜Ÿåˆ—"></a>ä¼˜å…ˆé˜Ÿåˆ—</h1><p><b style="color: red;">MaxPQ-API</b></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210506125009.png"><p>åœ¨è®¾è®¡è¿™ä¸ªæœ€å¤§ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å¤§å †ï¼‰æ—¶ï¼Œæˆ‘ä»¬åˆ©ç”¨æ•°ç»„çš„ç»“æ„ä¼š<strong>é—²ç½®0ç´¢å¼•ä¸ç”¨</strong>ã€‚è¿™æ ·ä½¿å¾—çˆ¶ç»“ç‚¹å’Œå­ç»“ç‚¹ç´¢å¼•å­˜åœ¨ä¸‹é¢çš„æ•°å­¦å…³ç³»ï¼š</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210506093826.png"><p>åœ¨ç»´æŒä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å¤§å †ï¼‰çš„æœ‰åºæ€§æ—¶ï¼Œæœ€é‡è¦çš„æ˜¯åœ¨æœ‰åºçŠ¶æ€è¢«ç ´åæ—¶å¦‚ä½•æ¢å¤ï¼ˆæ’å…¥ã€åˆ é™¤ï¼‰ã€‚ä¸ºäº†ç»´æŒçˆ¶ç»“ç‚¹å¤§äºç­‰äºå­ç»“ç‚¹çš„çŠ¶æ€ï¼Œæˆ‘ä»¬åœ¨æ’å…¥æ—¶ä¼šå¯¹æ’å…¥çš„ç»“ç‚¹è¿›è¡Œ<strong>ä¸Šæµ®æ“ä½œ</strong>ï¼Œåˆ é™¤æ—¶å¯¹åˆ é™¤çš„æ ¹ç»“ç‚¹è¿›è¡Œ<strong>ä¸‹æ²‰æ“ä½œ</strong> </p><p><b style="color: deeppink;">ä¸Šæµ®ã€ä¸‹æ²‰æ¶ˆé™¤æ’å…¥å’Œåˆ é™¤å¸¦æ¥çš„ä¸å¹³è¡¡å›¾è§£</b></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210506130410.png"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">swim</span><span class="token punctuation">(</span><span class="token keyword">int</span> child<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token function">less</span><span class="token punctuation">(</span>child<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> child<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">swap</span><span class="token punctuation">(</span>child<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> child<span class="token punctuation">)</span><span class="token punctuation">;</span>        child <span class="token operator">=</span> child<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">sink</span><span class="token punctuation">(</span><span class="token keyword">int</span> parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>parent <span class="token operator">&lt;=</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> maxChild <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">*</span>parent<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>maxChild <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> <span class="token function">less</span><span class="token punctuation">(</span>maxChild<span class="token punctuation">,</span> maxChild<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> maxChild<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">less</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> maxChild<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token function">swap</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> maxChild<span class="token punctuation">)</span><span class="token punctuation">;</span>        parent <span class="token operator">=</span> maxChild<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> pq<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>pq<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>    pq<span class="token punctuation">[</span><span class="token operator">++</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> k<span class="token punctuation">;</span>    <span class="token function">swim</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">assert</span> <span class="token function">isMaxHeap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">"Priority queue condition not metï¼"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">delMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Key</span> max <span class="token operator">=</span> pq<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token function">swap</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">sink</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    pq<span class="token punctuation">[</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>n <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token punctuation">(</span>pq<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">resize</span><span class="token punctuation">(</span>pq<span class="token punctuation">.</span>length<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">assert</span> <span class="token function">isMaxHeap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">"Priority queue condition not metï¼"</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> max<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>äºŒå‰å †çš„æ•°ç»„è¡¨ç¤ºå½¢å¼</strong></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210505151018.png" style="width:60%"><p>æœ€å¤§ä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å¤§å †ï¼‰çš„è®¾è®¡è¦ç´ ï¼š</p><ul><li>äºŒå‰å †çš„æ•°ç»„ PQ</li><li>è®°å½•å­˜å‚¨å…ƒç´ ä¸ªæ•°n</li><li>è‡ªå®šä¹‰çš„å…ƒç´ æ¯”è¾ƒå™¨ comparator</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">Key</span><span class="token punctuation">[</span><span class="token punctuation">]</span> pq<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">int</span> n<span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span></span> comparator<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä¸“é—¨é’ˆå¯¹äºŒå‰å †å®ç°çš„è¿­ä»£å™¨ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">HeapIterator</span> <span class="token keyword">implements</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">MaxPQ</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span></span> copy<span class="token punctuation">;</span>    <span class="token comment">//æ ¹æ®æ˜¯å¦è‡ªå®šä¹‰æ¯”è¾ƒå™¨ï¼Œè·å–ä¸åŒçš„å‰¯æœ¬</span>    <span class="token keyword">public</span> <span class="token class-name">HeapIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>comparator <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> copy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MaxPQ</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>                    copy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MaxPQ</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>comparator<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            copy<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>pq<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token operator">!</span>copy<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// æ¯æ¬¡çš„nextæ“ä½œéƒ½å°†åˆ é™¤å½“å‰é˜Ÿåˆ—çš„æœ€å¤§å€¼</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> copy<span class="token punctuation">.</span><span class="token function">delMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DataStructure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HarmonyOS</title>
      <link href="posts/26790.html"/>
      <url>posts/26790.html</url>
      
        <content type="html"><![CDATA[<img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210428090554.gif">]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HarmonyOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Springé¡¹ç›®å®æˆ˜</title>
      <link href="posts/61917.html"/>
      <url>posts/61917.html</url>
      
        <content type="html"><![CDATA[<h1 id="åˆæ­¥"><a href="#åˆæ­¥" class="headerlink" title="åˆæ­¥"></a>åˆæ­¥</h1><p>åœ¨æ„å»ºTacoCloudé¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ­¥å°±æ˜¯åˆå§‹åŒ–ä¸€ä¸ªSpringBooté¡¹ç›®ã€‚</p><p>è¿™é‡Œæœ‰ä¸¤ç§æ–¹å¼ï¼š1.åˆ›å»ºåˆå§‹çš„<b style="color: red;">maven</b>é¡¹ç›®ã€‚2.åˆ©ç”¨<b style="color: green;">SpringInitializr</b>å¿«é€Ÿåˆå§‹åŒ–ã€‚</p><p>è¿™é‡Œä¸ºäº†è®©è‡ªå·±ç†Ÿæ‚‰SpringBooté¡¹ç›®ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨SpringInitializrç†Ÿæ‚‰é¡¹ç›®ç»“æ„ï¼Œç„¶åå®æ“é€‰æ‹©mavenï¼O(âˆ©_âˆ©)O</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210424220419.png" style="width:80%"><p>ç°åœ¨å¼€å§‹ç€æ‰‹åšé¡¹ç›®ï¼š</p><p><b style="background-color: black;color: white;">å®ç°TacoCloudç³»ç»Ÿä¸»é¡µ</b></p><ol><li>è®¾è®¡TacoCloudçš„ä¸»é¡µé¢ <code>home.html</code></li><li>ç¼–å†™è½¬å‘è§†å›¾çš„è§†å›¾æ§åˆ¶å™¨ <code>WebConfig</code>ã€‚è¿˜å¯ä»¥ä½¿ç”¨<code>HomeController</code>ã€‚<br><b style="color: red;">è¿‡ç¨‹è®°å½•</b>ï¼š1.åœ¨ç¼–å†™è§†å›¾æ¨¡æ¿æ—¶ï¼Œhomeè®°ä½è¦é˜²æ­¢è¯­æ³•é”™è¯¯ï¼2.è§†å›¾æ§åˆ¶å™¨ä¸€å®šè¦æ³¨æ„Javaé…ç½®çš„é—®é¢˜ï¼</li></ol><p>è¿™é‡Œéœ€è¦æŒæ¡çš„å°±æ˜¯ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨çš„ç¼–å†™ï¼</p><p><b style="background-color: black;color: white;">å®ç°TacoCloudäº§å“è®¾è®¡æ¨¡å—</b></p><p>å¯¹äºæ¥è‡ª<code>/design</code>çš„ç½‘ç»œè¯·æ±‚ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿”å›ä¸€ä¸ªTacoäº§å“è®¾è®¡çš„é¡µé¢ï¼Œåœ¨è¿™ä¸ªé¡µé¢æˆ‘ä»¬å¯ä»¥æäº¤è‡ªå·±æ ¹æ®é…æ–™æ‰€åˆ¶ä½œçš„äº§å“ï¼Œå¹¶ä¸”ä¸ºè¿™ä¸ªè¡¨å•è¯·æ±‚ç”Ÿæˆä¸€ä¸ªè®¢å•ã€‚ç„¶åå®¢æˆ·åœ¨è®¢å•é¡µé¢è¾“å…¥è‡ªå·±çš„å®¢æˆ·ä¿¡æ¯ï¼Œå®Œæˆè®¢è´­æ“ä½œä¹‹åè¿”å›ç³»ç»Ÿä¸»é¡µé¢ï¼</p><ol><li>æˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ª<code>DesignTacoController</code>ä»¥æ»¡è¶³ä¸Šé¢æåˆ°çš„ç½‘ç»œè¯·æ±‚</li><li>æˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªè®¾è®¡é¡µé¢çš„å±•ç¤ºæ¨¡æ¿<code>design.html</code></li><li>ä¸ºäº†èƒ½å¤Ÿæ»¡è¶³å‰ç«¯çš„æ•°æ®éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰å­˜å‚¨æ•°æ®çš„ç»„ä»¶ï¼š<code>Taco</code>å’Œ<code>Ingredient</code></li><li>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªè®¢å•é¡µé¢ï¼Œè¿™é‡Œä¾æ—§ç¼–å†™æ¨¡æ¿ï¼š<code>orderForm.html</code></li><li>åŒæ ·ä¸ºäº†æ»¡è¶³å‰ç«¯çš„æ•°æ®éœ€æ±‚ï¼Œè¿™é‡Œéœ€è¦å®šä¹‰è®¢å•çš„ç»„ä»¶ï¼š<code>order</code></li><li>å¹¶ä¸”éœ€è¦ç¼–å†™æ»¡è¶³ç½‘ç»œè¯·æ±‚çš„æ§åˆ¶å™¨<code>OrderController</code></li></ol><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210424232209.png" style="border:solid red"><p>å­¦ä¹ çŸ¥è¯†ç‚¹ï¼š</p><p>1ï¼‰thymeleafæ¨¡æ¿è¯­æ³•</p><p>2ï¼‰SpringMVCå¸¸ç”¨æ³¨è§£</p><p><b style="background-color: black;color: white;">å®ç°TacoCloudæ•°æ®æŒä¹…åŒ–</b></p><p style="color:deeppink;">æŠ€æœ¯æ ˆï¼š<br>(1)Spring JDBC <br>(2)Spring Data JPA</p><p>JPAåˆ©ç”¨lombokå‡ºç°äº†å¤±æ•ˆçš„é—®é¢˜</p><blockquote><p>You arenâ€™t using a compiler supported by lombok, so lombok will not work and has been disabled.</p></blockquote><p>åœ¨<code>settings-&gt;Compiler</code>æ·»åŠ ï¼š-Djps.track.ap.dependencies=false</p><p><b style="background-color: black;color: white;">å®ç°TacoCloudç”¨æˆ·å­˜å‚¨</b></p><p style="color:deeppink;">æŠ€æœ¯æ ˆï¼š<br>Spring Security</p><p><code>SecurityConfig</code>é…ç½®ç”¨æˆ·å­˜å‚¨çš„æ–¹å¼</p><p>1ï¼‰ä½œä¸ºäº‹ä¼˜å…ˆçš„åŸåˆ™ï¼šæˆ‘ä»¬é¦–å…ˆéœ€è¦ä¸€ä¸ªç”¨æˆ·ç±»<code>User</code>ã€‚è¿˜éœ€è¦æ•°æ®åº“ä¸šåŠ¡æ“ä½œçš„æ¥å£<code>UserRepository</code></p><p>2ï¼‰åˆ›å»ºç”¨æˆ·è¯¦æƒ…æœåŠ¡<code>UserRepositoryUserDetailService</code></p><p>3ï¼‰å°†è‡ªå®šä¹‰çš„ç”¨æˆ·æœåŠ¡è£…é…åˆ°Spring Security</p><p>4ï¼‰æä¾›ä¸€ä¸ªç”¨æˆ·æ³¨å†Œç•Œé¢ï¼Œå¹¶ä¸”å°†æ³¨å†Œçš„ç”¨æˆ·ä¿¡æ¯ä¼ å…¥æ•°æ®åº“ï¼Œè¿™é‡Œå°±éœ€è¦ä¸€ä¸ªä¸“é—¨ç®¡ç†æ³¨å†Œé¡µé¢çš„æ§åˆ¶å™¨<code>RegistrationController</code>ï¼Œè¿˜éœ€è¦æ³¨å†Œé¡µé¢çš„æ¨¡æ¿<code>login.html</code>ï¼Œä¸€èµ·æ³¨å†Œè¡¨å•ç»‘å®šçš„ç»„ä»¶<code>RegistrationForm</code></p><p><b style="color: red;">æ³¨ï¼š</b>æ­¤æ—¶æ¥è‡ªæ³¨å†Œé¡µé¢çš„webè¯·æ±‚ä¼šå…¨éƒ¨è¢«æ‹¦æˆªï¼Œå› ä¸ºåœ¨é»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šéœ€è¦è®¤è¯ï¼</p><p>æ¥ä¸‹æ¥å°±æ˜¯è§£å†³è®¤è¯é—®é¢˜ï¼š</p><p>å› ä¸ºTacoCloudç³»ç»Ÿçš„å®‰å…¨è¦æ±‚ï¼Œæˆ‘ä»¬å¯¹äºæ¥è‡ªè®¾è®¡é¡µé¢ï¼šç”¨æˆ·é€‰æ‹©é…æ–™è®¾è®¡äº§å“ä»¥åŠæäº¤è¡¨å•çš„è¯·æ±‚éƒ½éœ€è¦è®¤è¯ã€‚ä½†æ˜¯å¯¹äºä¸»é¡µä»¥åŠç™»å½•å’Œæ³¨å†Œé¡µé¢å¯¹æ‰€æœ‰ç”¨æˆ·æ”¾å¼€ï¼</p><p>è¿™é‡Œå°±éœ€è¦<code>HttpSecurity</code>å¯¹è±¡çš„å¸®åŠ©ï¼Œå¯ä»¥åˆ©ç”¨å®ƒé…ç½®çš„åŠŸèƒ½æœ‰ï¼š</p><ul><li>åœ¨ä¸ºæŸä¸€ä¸ªè¯·æ±‚æœåŠ¡æ—¶ï¼Œå¯ä»¥è®©å®ƒå…ˆæ»¡è¶³ä¸€å®šçš„è¦æ±‚</li><li>é…ç½®è‡ªå®šä¹‰çš„ç™»å½•é¡µé¢</li><li>æ”¯æŒç”¨æˆ·æ¨å‡ºåº”ç”¨</li><li>é¢„é˜²CSRFæ”»å‡»</li></ul><p>å¯¹äºä¸åŒçš„é¡µé¢è¿›è¡Œæƒé™è®¾å®š</p>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ ‘å½¢ç»“æ„</title>
      <link href="posts/44723.html"/>
      <url>posts/44723.html</url>
      
        <content type="html"><![CDATA[<h1 id="äºŒå‰æ ‘"><a href="#äºŒå‰æ ‘" class="headerlink" title="äºŒå‰æ ‘"></a>äºŒå‰æ ‘</h1><h2 id="å­˜å‚¨ç»“æ„"><a href="#å­˜å‚¨ç»“æ„" class="headerlink" title="å­˜å‚¨ç»“æ„"></a>å­˜å‚¨ç»“æ„</h2><p>åˆ©ç”¨æ•°ç»„çš„ä¸‹æ ‡ä¸å®Œå…¨äºŒå‰æ ‘çš„ä¸€ä¸€å¯¹åº”ï¼Œæ»¡äºŒå‰æ ‘çš„æ•°ç»„è¡¨ç¤ºã€‚å› ä¸ºæˆ‘ä»¬æ˜¯æŒ‰ç…§æ»¡äºŒå‰æ ‘çš„ç¼–å·æ¥åˆ†é…ç»“ç‚¹çš„å­˜å‚¨ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯æ— è®ºæ»¡ä¸æ»¡ï¼Œéƒ½ä¼šç»™åˆ°2^h^-1çš„ç©ºé—´ï¼ˆå®é™…æ•°ç»„é•¿åº¦ä¸º2^h^ï¼‰</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210419203551.jpg" style="width:80%"><p>è¿™æ ·å¯¹äºç¬¬iä¸ªç»“ç‚¹å­˜åœ¨ä»¥ä¸‹ç»“è®ºï¼š</p><ul><li>å·¦å­©å­ï¼š2i</li><li>å³å­©å­ï¼š2i + 1</li><li>çˆ¶ç»“ç‚¹ï¼šfloor(i/2)</li></ul><p><b style="color: deeppink;">çº¿æ€§å­˜å‚¨ç»“æ„ï¼šæ•°ç»„</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BiTree</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name">TreeElem</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tree<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">TreeElem</span> <span class="token punctuation">{</span>        <span class="token class-name">E</span> elem<span class="token punctuation">;</span>        <span class="token keyword">boolean</span> isEmpty<span class="token punctuation">;</span> <span class="token comment">// ä»£è¡¨å½“å‰ç»“ç‚¹å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210419210256.jpg" style="width:80%"><p><b style="color: deeppink;">é“¾å¼å­˜å‚¨ç»“æ„ï¼šç±»ä¼¼é“¾è¡¨</b></p><p>å¯¹äºé“¾è¡¨çš„å­˜å‚¨ç»“æ„ï¼Œæˆ‘ä»¬å‘ç°å¯¹äºä¸€é¢—äºŒå‰æ ‘æ¥è¯´ï¼Œå‡è®¾å®ƒçš„ç»“ç‚¹ä¸ªæ•°ä¸ºnï¼Œé‚£ä¹ˆå®ƒæœ€å¤šå­˜åœ¨2nä¸ªé“¾æ¥åŸŸï¼ˆä¹Ÿå°±æ˜¯å·¦å³é“¾æ¥ï¼‰ï¼Œä½†æ˜¯è¿™2nä¸ªåŸŸï¼Œåªæœ‰n-1ä¸ªåŸŸè¢«ä½¿ç”¨ï¼Œå› ä¸ºæ¯ä¸€ä¸ªç»“ç‚¹åªä¼šå’Œçˆ¶ç»“ç‚¹ç›´æ¥å­˜åœ¨é“¾æ¥ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰n+1ä¸ªåŸŸæ˜¯é—²ç½®çš„ï¼ˆ<strong>è¿™é‡Œé—²ç½®çš„åŸŸåœ¨äºŒå‰æ ‘çš„çº¿ç´¢åŒ–å­˜åœ¨ç”¨å¤„</strong>ï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BiTree</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name">TreeNode</span> root<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">TreeNode</span> <span class="token punctuation">{</span>        <span class="token class-name">E</span> elem<span class="token punctuation">;</span>        <span class="token class-name">TreeNode</span> left<span class="token punctuation">,</span>right<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨æŸ¥æ‰¾ç®—æ³•ä¸­æ›¾ç»å­¦ä¹ è¿‡å¯¹äºŒå‰æ ‘çš„é€’å½’éå†ï¼Œå…¶ä¸­è¿­ä»£å®ç°ä¸€ä¸ªè¾ƒä¸ºçƒ¦æ¼çš„é—®é¢˜å°±æ˜¯ï¼š<b style="color: red;">å¦‚ä½•è·å–ç»“ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼Ÿ</b></p><p>â‘ åœ¨å­˜å‚¨ç»“æ„ä¸­åŠ å…¥çˆ¶é“¾æ¥</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">TreeNode</span> <span class="token punctuation">{</span>    <span class="token class-name">E</span> elem<span class="token punctuation">;</span>    <span class="token class-name">TreeNode</span> left<span class="token punctuation">,</span> right<span class="token punctuation">,</span> parent<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>â‘¡åˆ©ç”¨è¾…åŠ©çš„å †æ ˆç»“æ„ï¼Œåœ¨è‡ªé¡¶å‘ä¸‹éå†æ—¶ï¼Œå­˜å‚¨ç»“ç‚¹çš„çˆ¶é“¾æ¥ä¿¡æ¯</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Node</span> x <span class="token operator">=</span> root<span class="token punctuation">;</span> <span class="token comment">// åˆ©ç”¨è¾…åŠ©æ ˆï¼Œä¿å­˜ç»“ç‚¹çš„åŒäº²ç»“ç‚¹ä¿¡æ¯ </span><span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">&gt;</span></span> parent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> parent<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">while</span><span class="token punctuation">(</span>x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         parent<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>         x <span class="token operator">=</span> x<span class="token punctuation">.</span>left<span class="token punctuation">;</span>     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         parent<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        x <span class="token operator">=</span>x<span class="token punctuation">.</span>right<span class="token punctuation">;</span>     <span class="token punctuation">}</span> <span class="token keyword">else</span> x <span class="token operator">=</span> parent<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é€’å½’éå†"><a href="#é€’å½’éå†" class="headerlink" title="é€’å½’éå†"></a>é€’å½’éå†</h2><p>ä»å·¦è‡³å³åˆ†åˆ«æ˜¯ï¼šDLRå…ˆåºéå†(preOrder)ã€LDRä¸­åºéå†(inOrder)ã€LDRåç»­éå†(postOrder)</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210419163427.jpg" style="width:80%"><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210419165605.jpg" style="width:80%"><p><b style="color: green;">å…ˆåºéå†DLR</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token function">preOrder</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token function">preOrder</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token function">preOrder</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: green;">ä¸­åºéå†LDR</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">inOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token function">inOrder</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">inOrder</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token function">preOrder</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token function">preOrder</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: green;">ååºéå†LRD</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token function">postOrder</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">postOrder</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token function">preOrder</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token function">preOrder</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: greenyellow;">ä¸‰ç§é€’å½’çš„è¿­ä»£å®ç°</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">preOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">TreeNode</span> x <span class="token operator">=</span> root<span class="token punctuation">;</span>    <span class="token comment">// åˆ©ç”¨è¾…åŠ©æ ˆï¼Œä¿å­˜ç»“ç‚¹çš„åŒäº²ç»“ç‚¹ä¿¡æ¯</span>    <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNode</span><span class="token punctuation">&gt;</span></span> parent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    parent<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            parent<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>            x <span class="token operator">=</span> x<span class="token punctuation">.</span>left<span class="token punctuation">;</span>        <span class="token punctuation">}</span>            <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            parent<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>            x <span class="token operator">=</span>x<span class="token punctuation">.</span>right<span class="token punctuation">;</span>        <span class="token punctuation">}</span>            <span class="token keyword">else</span>   x <span class="token operator">=</span> parent<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                      <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">inOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">TreeNode</span> x <span class="token operator">=</span> root<span class="token punctuation">;</span>    <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNode</span><span class="token punctuation">&gt;</span></span> parent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            parent<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>            x <span class="token operator">=</span> x<span class="token punctuation">.</span>left<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            x <span class="token operator">=</span> parent<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            parent<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>            x <span class="token operator">=</span>x<span class="token punctuation">.</span>right<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            x <span class="token operator">=</span> parent<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">TreeNode</span> x <span class="token operator">=</span> root<span class="token punctuation">;</span>    <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNode</span><span class="token punctuation">&gt;</span></span> parent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            parent<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>            x <span class="token operator">=</span> x<span class="token punctuation">.</span>left<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            x <span class="token operator">=</span> parent<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            parent<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>            x <span class="token operator">=</span>x<span class="token punctuation">.</span>right<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            x <span class="token operator">=</span> parent<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å±‚æ¬¡éå†"><a href="#å±‚æ¬¡éå†" class="headerlink" title="å±‚æ¬¡éå†"></a>å±‚æ¬¡éå†</h2><p>ç»“åˆé˜Ÿåˆ—ç»“æ„å®ç°äºŒå‰æ ‘çš„å±‚æ¬¡éå†ï¼Œè¿™é‡Œæ˜¯åŸºäºé“¾å¼å­˜å‚¨ç»“æ„çš„äºŒå‰æ ‘ç¼–å†™çš„å±‚æ¬¡éå†ã€‚é€šè¿‡è¾…åŠ©é˜Ÿåˆ—queueï¼Œæ¯ä¸€ä¸ªæ ¹ç»“ç‚¹çš„å‡ºé˜Ÿï¼Œéƒ½éœ€è¦æ£€æŸ¥å…¶å­ç»“ç‚¹æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨å°±å…¥é˜Ÿï¼ï¼ŒçŸ¥é“æ‰€æœ‰é˜Ÿåˆ—å…ƒç´ å…¨éƒ¨å‡ºé˜Ÿï¼Œç»“æŸï¼</p><p>å±‚æ¬¡éå†ç®—æ³•æ€æƒ³ï¼š</p><ul><li>åˆå§‹åŒ–è¾…åŠ©é˜Ÿåˆ—</li><li>äºŒå‰æ ‘æ ¹ç»“ç‚¹å…¥é˜Ÿ</li><li>è¾…åŠ©é˜Ÿåˆ—éç©ºï¼Ÿyeså°±å‡ºé˜Ÿï¼Œå¹¶ä¸”è¿”å›å‡ºé˜Ÿå…ƒç´ çš„å­ç»“ç‚¹ï¼Œå¦‚å­˜åœ¨å°±å…¥é˜Ÿ</li><li>é‡å¤ç¬¬ä¸‰æ­¥ï¼ŒçŸ¥é“é˜Ÿåˆ—ä¸ºç©º</li></ul><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210420131810.jpg" style="width:80%"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">levelOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> elems <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TreeNode</span><span class="token punctuation">&gt;</span></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>queue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Node</span> x <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>        elems<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> elems<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="éå†ç¡®å®šç»“æ„"><a href="#éå†ç¡®å®šç»“æ„" class="headerlink" title="éå†ç¡®å®šç»“æ„"></a>éå†ç¡®å®šç»“æ„</h2><p>é€šè¿‡ä¸Šé¢çš„éå†æ–¹å¼ï¼Œä»¥åŠä¹‹å‰æŸ¥æ‰¾ç®—æ³•ä¸­ï¼Œä¸åŒçš„äºŒå‰æ ‘ç»“æ„å¯ä»¥è¡¨ç¤ºç›¸åŒçš„æœ‰åºé”®åˆ—å¯ä»¥çŸ¥é“ï¼Œå•ç‹¬çš„éå†æ–¹å¼ï¼Œæ˜¯æ— æ³•ç¡®å®šäºŒå‰æ ‘çš„å…·ä½“ç»“æ„ï¼Œä½†æ˜¯é€šè¿‡ä¸åŒéå†çš„ç»„åˆï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¡®å®šäºŒå‰æ ‘ç»“æ„ã€‚</p><ul><li>å‰åº+ä¸­åº</li><li>ååº+ä¸­åº</li><li>å±‚æ¬¡+ä¸­åº</li></ul><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210420133435.jpg" style="width:80%"><h1 id="çº¿ç´¢äºŒå‰æ ‘"><a href="#çº¿ç´¢äºŒå‰æ ‘" class="headerlink" title="çº¿ç´¢äºŒå‰æ ‘"></a>çº¿ç´¢äºŒå‰æ ‘</h1><h2 id="ä¸­åºçº¿ç´¢åŒ–"><a href="#ä¸­åºçº¿ç´¢åŒ–" class="headerlink" title="ä¸­åºçº¿ç´¢åŒ–"></a>ä¸­åºçº¿ç´¢åŒ–</h2><p>æˆ‘ä»¬åœ¨æŸ¥æ‰¾ç®—æ³•ä¸­æŒ‡å‡ºï¼šä¸­åºéå†å¾—åˆ°çš„åºåˆ—æ˜¯ç¬¦åˆäºŒå‰æ’åºæ ‘çš„é¡ºåºçš„</p><p>ä¹‹å‰åœ¨é‡‡ç”¨é“¾å¼å­˜å‚¨æŒ‡å‡ºäº†é—²ç½®çš„é“¾æ¥åŸŸï¼Œè¿™é‡Œçš„ä½œç”¨å°±æ˜¯ï¼šè®©é—²ç½®åŸŸæŒ‡å‘ç»“ç‚¹çš„ç›´æ¥å‰é©±å’Œåç»§ç»“ç‚¹ã€‚ä¸ºäº†åŒºåˆ«å®çº¿å’Œè™šçº¿é“¾æ¥çš„åŒºåˆ«ï¼Œæˆ‘ä»¬åœ¨é“¾å¼å­˜å‚¨ç»“æ„ä¸Šå®šä¹‰æ ‡å¿—ä½ ltagã€rtagã€‚<strong>å½“tag=0æ—¶ï¼Œè¡¨ç¤ºå®çº¿é“¾æ¥ï¼Œé“¾æ¥æ˜¯æŒ‡å‘å·¦å³å­©å­çš„ï¼Œå½“tag=1æ—¶ï¼Œè¡¨ç¤ºè™šçº¿é“¾æ¥ï¼Œé“¾æ¥æ˜¯æŒ‡å‘å‰é©±å’Œåç»§ç»“ç‚¹çš„</strong>ã€‚</p><p>çº¿ç´¢åŒ–çš„äºŒå‰æ ‘çš„ä¼˜åŠ¿åœ¨äºï¼šæ–¹ä¾¿å¯»æ‰¾ç»“ç‚¹çš„å‰é©±å’Œåç»§ç»“ç‚¹ã€‚</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210420140434.jpg" style="width:80%"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThreadBiTree</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name">ThreadNode</span> root<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">ThreadNode</span> <span class="token punctuation">{</span>        <span class="token class-name">E</span> data<span class="token punctuation">;</span>        <span class="token class-name">ThreadNode</span> left<span class="token punctuation">,</span> right<span class="token punctuation">;</span>        <span class="token keyword">int</span> ltag<span class="token punctuation">,</span> rtag<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚ä½•å®ç°å¯¹äºŒå‰æ ‘ä¸­åºçº¿ç´¢åŒ–ï¼Ÿ</p><p>é¦–å…ˆéœ€è¦ç†è§£çš„æ˜¯ï¼Œè¢«çº¿ç´¢åŒ–çš„ç»“ç‚¹éƒ½æ˜¯<code>0&lt;=degree&lt;2</code>çš„ç»“ç‚¹ã€‚æˆ‘ä»¬åˆ©ç”¨é“¾æ¥prevä¿å­˜å½“å‰ç»“ç‚¹é“¾æ¥currçš„å‰é©±ï¼Œcurrä¿å­˜å½“å‰ç»“ç‚¹é“¾æ¥ã€‚</p><p>ç®—æ³•æ€æƒ³ï¼š</p><ul><li>åˆ¤æ–­å½“å‰é“¾æ¥çš„å·¦é“¾æ¥æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœæ˜¯ç©ºçš„è¯ï¼Œå°†å·¦é“¾æ¥æŒ‡å‘å½“å‰ç»“ç‚¹çš„å‰é©±ç»“ç‚¹ï¼Œå¹¶å°†æ ‡å¿—ä½ltag=1ã€‚</li><li>åˆ¤æ–­å‰é©±ç»“ç‚¹prevçš„å³é“¾æ¥æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœæ˜¯ç©ºçš„è¯ï¼Œå°†å³é“¾æ¥æŒ‡å‘å‰é©±prevçš„åç»§ç»“ç‚¹ï¼Œå°†æ ‡å¿—ä½rtag=1</li><li>å°†å½“å‰ç»“ç‚¹é“¾æ¥æŒ‡å‘ä¸­åºéå†çš„ä¸‹ä¸€ä¸ªç»“ç‚¹</li><li>é‡å¤ä¸Šé¢ä¸‰æ­¥ï¼Œç›´åˆ°æ‰€æœ‰åº¦ä¸è¶³2çš„ç»“ç‚¹å…¨éƒ¨çº¿ç´¢åŒ–</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">inThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Node</span> prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token function">threadForInOrder</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> prev<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¯¹äºæœ€å³ç»“ç‚¹ï¼Œå®ƒçš„æ ‡å¿—ä½å› ä¸ºé€’å½’ç»“æŸï¼Œæ— æ³•è¿›è¡Œä¿®æ”¹ï¼Œæ‰€ä»¥åº”è¯¥åœ¨é€’å½’è°ƒç”¨åä¿®æ”¹</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>prev<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        prev<span class="token punctuation">.</span>rtag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">threadForInOrder</span><span class="token punctuation">(</span><span class="token class-name">ThreadNode</span> curr<span class="token punctuation">,</span> <span class="token class-name">ThreadNode</span> prev<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>curr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">threadForInOrder</span><span class="token punctuation">(</span>curr<span class="token punctuation">.</span>left<span class="token punctuation">,</span> prev<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//---------å¯¹å½“å‰ç»“ç‚¹çš„æ“ä½œ-------------</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>curr<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            curr<span class="token punctuation">.</span>left <span class="token operator">=</span> prev<span class="token punctuation">;</span>            curr<span class="token punctuation">.</span>ltag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>prev <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token operator">&amp;&amp;</span> prev<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            prev<span class="token punctuation">.</span>right <span class="token operator">=</span> curr<span class="token punctuation">;</span>            prev<span class="token punctuation">.</span>rtag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        prev <span class="token operator">=</span> curr<span class="token punctuation">;</span>        <span class="token comment">//-----------------------------------</span>        <span class="token function">threadForInOrder</span><span class="token punctuation">(</span>curr<span class="token punctuation">.</span>right<span class="token punctuation">,</span> prev<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>çº¿ç´¢åŒ–çš„ç›®çš„æ˜¯ï¼šè®©æˆ‘ä»¬åœ¨éå†æ—¶ï¼Œå¯ä»¥æ–¹ä¾¿æŸ¥æ‰¾æ¯ä¸ªç»“ç‚¹çš„å‰é©±å’Œåç»§ã€‚é‚£ä¹ˆå¯¹äºä¸€ä¸ªå·²ç»çº¿ç´¢åŒ–çš„äºŒå‰æ ‘å¦‚ä½•æ‰¾å¯»ç»“ç‚¹çš„å‰é©±å’Œåç»§ï¼Ÿ</p><p>å¯¹äºä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹ç»“ç‚¹æ¥è¯´ï¼šå½“å­˜åœ¨å­æ ‘çš„æƒ…å†µä¸‹ï¼Œå®ƒçš„å‰é©±ç»“ç‚¹å°±æ˜¯ï¼šå·¦å­æ ‘ä¸Šçš„æœ€å³ç»“ç‚¹ã€‚åç»§ç»“ç‚¹å°±æ˜¯ï¼šå³å­æ ‘ä¸Šçš„æœ€å·¦ç»“ç‚¹ï¼å½“ä¸å­˜åœ¨å­æ ‘çš„æƒ…å†µä¸‹ï¼Œåˆ©ç”¨å·²ç»çº¿ç´¢åŒ–çš„ç»“ç‚¹ï¼Œå°±å¯ä»¥è·å–å¯¹åº”çš„å‰é©±å’Œåç»§ï¼</p><p><b style="color: deeppink;">æ‰¾å¯»äºŒå‰æ ‘çš„æœ€å·¦ç»“ç‚¹</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ThreadNode</span> <span class="token function">leftmost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"tree is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">leftmost</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">ThreadNode</span> <span class="token function">leftmost</span><span class="token punctuation">(</span><span class="token class-name">ThreadNode</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// assert x != null</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>    <span class="token keyword">else</span>               <span class="token keyword">return</span> <span class="token function">leftmost</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: deeppink;">æ‰¾å¯»äºŒå‰æ ‘çš„æœ€å³ç»“ç‚¹</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ThreadNode</span> <span class="token function">rightmost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"tree is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">rightmost</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">private</span> <span class="token class-name">ThreadNode</span> <span class="token function">rightmost</span><span class="token punctuation">(</span><span class="token class-name">ThreadNode</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>     <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token function">rightmost</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: deeppink;">æ‰¾å¯»äºŒå‰æ ‘çš„ä»»ä¸€ç»“ç‚¹xçš„å‰é©±å’Œåç»§</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ThreadNode</span> <span class="token function">getPrev</span><span class="token punctuation">(</span><span class="token class-name">ThreadNode</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>ltag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>left<span class="token punctuation">;</span>    <span class="token keyword">else</span>            <span class="token keyword">return</span> <span class="token function">rightmost</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">ThreadNode</span> <span class="token function">getSucc</span><span class="token punctuation">(</span><span class="token class-name">ThreadNode</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>ltag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>right<span class="token punctuation">;</span>    <span class="token keyword">else</span>            <span class="token keyword">return</span> <span class="token function">leftmost</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å¹³è¡¡äºŒå‰æ ‘"><a href="#å¹³è¡¡äºŒå‰æ ‘" class="headerlink" title="å¹³è¡¡äºŒå‰æ ‘"></a>å¹³è¡¡äºŒå‰æ ‘</h1><p>é¦–å…ˆå¿…é¡»ææ˜ç™½çš„é—®é¢˜æ˜¯ï¼šä»€ä¹ˆæ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼Ÿå¦‚ä½•è®©äºŒå‰æ ‘å¹³è¡¡ï¼Ÿ</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210422203257.png" style="width:80%"><p>AVLï¼šä»£è¡¨æ ‘ä¸­çš„ä»»æ„ä¸€ä¸ªç»“ç‚¹ï¼Œå®ƒçš„å·¦å³å­æ ‘é«˜åº¦åªå·®ä¸ä¼šå¤§äº1ã€‚ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸€ä¸ªç»“ç‚¹éƒ½æ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼‰<br>æˆ‘ä»¬å‡è®¾å®šä¹‰ç»“ç‚¹çš„å¹³è¡¡å› å­<code>balance = left - right</code>ã€‚ä¹Ÿå°±æ˜¯<code>|balacne| &lt;= 1</code>ã€‚æˆ‘å°±ä»¥<code>ALLOWED_IMBALANCE = 1</code>ä¸ºç•Œé™è®¨è®ºå››ç§æƒ…å†µï¼</p><p>ç”±æ­¤æˆ‘ä»¬å¯ä»¥å¾—åˆ°å¹³è¡¡äºŒå‰æ ‘çš„ç»“æ„å®šä¹‰ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AvlTree</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>        <span class="token comment">// å¹³è¡¡äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹å’Œå¹³è¡¡å› å­</span>    <span class="token keyword">private</span> <span class="token class-name">AvlNode</span> avlRoot<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> ALLOWED_IMBALANCE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token comment">// AVLæ ‘ç»“ç‚¹</span>    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">AvlNode</span> <span class="token punctuation">{</span>        <span class="token class-name">E</span> elem<span class="token punctuation">;</span>        <span class="token class-name">AvlNode</span> left<span class="token punctuation">,</span> right<span class="token punctuation">;</span>        <span class="token keyword">int</span> height<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">AvlNode</span><span class="token punctuation">(</span><span class="token class-name">E</span> elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">(</span>elem<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token class-name">AvlNode</span><span class="token punctuation">(</span><span class="token class-name">E</span> elem<span class="token punctuation">,</span> <span class="token class-name">AvlNode</span> left<span class="token punctuation">,</span> <span class="token class-name">AvlNode</span> right<span class="token punctuation">,</span> <span class="token keyword">int</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>elem <span class="token operator">=</span> elem<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">height</span><span class="token punctuation">(</span><span class="token class-name">AvlNode</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> x <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> x<span class="token punctuation">.</span>height<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">// æ­¤æ£µå¹³è¡¡äºŒå‰æ ‘çš„é«˜åº¦</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">height</span><span class="token punctuation">(</span>avlRoot<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>çŸ¥æ™“äº†å¹³è¡¡äºŒå‰æ’åºæ ‘çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å¦‚ä½•ä¿è¯è¯¥äºŒå‰æ ‘æ˜¯å¹³è¡¡çš„ï¼Ÿ</p><p>é¦–å…ˆéœ€è¦çŸ¥é“è®©äºŒå‰æ ‘å¤±å»å¹³è¡¡çš„å››ç§æƒ…å†µï¼š</p><ul><li>å‘ç»“ç‚¹çš„å·¦å­©å­çš„å·¦å­æ ‘æ’å…¥ä¸€ä¸ªç»“ç‚¹ï¼ˆå¤–éƒ¨ï¼‰</li><li>å‘ç»“ç‚¹çš„å³å­©å­çš„å³å­æ ‘æ’å…¥ä¸€ä¸ªç»“ç‚¹ï¼ˆå¤–éƒ¨ï¼‰</li><li>å‘ç»“ç‚¹çš„å·¦å­©å­çš„å³å­æ ‘æ’å…¥ä¸€ä¸ªç»“ç‚¹ï¼ˆå†…éƒ¨ï¼‰</li><li>å‘ç»“ç‚¹çš„å³å­©å­çš„å·¦å­æ ‘æ’å…¥ä¸€ä¸ªç»“ç‚¹ï¼ˆå†…éƒ¨ï¼‰</li></ul><p>ä¹‹æ‰€ä»¥åˆ†ä¸ºå†…å¤–éƒ¨ï¼Œå› ä¸ºåœ¨å¤–éƒ¨æ’å…¥ç»“ç‚¹å¯¼è‡´çš„å¤±è¡¡é‚£ä¹ˆé€šè¿‡å•æ¬¡æ—‹è½¬å³å¯å®ç°ï¼Œè€Œåœ¨å†…éƒ¨æ’å…¥ç»“ç‚¹å¯¼è‡´çš„å¤±è¡¡é‚£ä¹ˆéœ€è¦ä¸¤æ¬¡å•æ—‹è½¬æ‰å¯å®ç°ã€‚åºŸè¯å¤ªå¤šï¼Œä¸Šå›¾è§£</p><p><b style="color: red;">ï¼ˆ1ï¼‰å•æ—‹</b></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210422162525.png" style="width:80%"><p><b style="color: red;">ï¼ˆ2ï¼‰åŒæ—‹</b></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210422163726.png" style="width:80%"><p>é€šè¿‡å›¾è§£æˆ‘ä»¬å¯ä»¥è½»æ¾çœ‹å‡ºï¼Œåº”å¯¹å››ç§æƒ…å†µäºŒå‰æ ‘çš„æ—‹è½¬æ“ä½œã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»£ç å®ç°ä¸Šè¿°çš„å››ç§æ“ä½œï¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// å¤–éƒ¨ï¼Œå·¦å­©å­çš„å·¦å­æ ‘</span><span class="token keyword">private</span> <span class="token class-name">AvlNode</span> <span class="token function">rotateForLL</span><span class="token punctuation">(</span><span class="token class-name">AvlNode</span> parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"node is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">AvlNode</span> child <span class="token operator">=</span> parent<span class="token punctuation">.</span>left<span class="token punctuation">;</span>    parent<span class="token punctuation">.</span>left <span class="token operator">=</span> child<span class="token punctuation">.</span>right<span class="token punctuation">;</span>    child<span class="token punctuation">.</span>right <span class="token operator">=</span> parent<span class="token punctuation">;</span>    parent<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token function">height</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">height</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    child<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token function">height</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> parent<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> child<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// å¤–éƒ¨ï¼Œå³å­©å­çš„å³å­æ ‘</span><span class="token keyword">private</span> <span class="token class-name">AvlNode</span> <span class="token function">rotateForRR</span><span class="token punctuation">(</span><span class="token class-name">AvlNode</span> parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"node is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">AvlNode</span> child <span class="token operator">=</span> parent<span class="token punctuation">.</span>right<span class="token punctuation">;</span>    parent<span class="token punctuation">.</span>right <span class="token operator">=</span> child<span class="token punctuation">.</span>left<span class="token punctuation">;</span>    child<span class="token punctuation">.</span>left <span class="token operator">=</span> parent<span class="token punctuation">;</span>    parent<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token function">height</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">height</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    child<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>height<span class="token punctuation">,</span> <span class="token function">height</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> child<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// å†…éƒ¨ï¼Œå·¦å­©å­çš„å³å­æ ‘</span><span class="token keyword">private</span> <span class="token class-name">AvlNode</span> <span class="token function">rotateForLR</span><span class="token punctuation">(</span><span class="token class-name">AvlNode</span> grandpa<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">AvlNode</span> parent <span class="token operator">=</span> grandpa<span class="token punctuation">.</span>left<span class="token punctuation">;</span>    <span class="token class-name">AvlNode</span> child <span class="token operator">=</span> <span class="token function">rotateForRR</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">rotateForLL</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// å†…éƒ¨ï¼Œå³å­©å­çš„å·¦å­æ ‘</span><span class="token keyword">private</span> <span class="token class-name">AvlNode</span> <span class="token function">rotateForRL</span><span class="token punctuation">(</span><span class="token class-name">AvlNode</span> grandpa<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">AvlNode</span> parent <span class="token operator">=</span> grandpa<span class="token punctuation">.</span>right<span class="token punctuation">;</span>    <span class="token class-name">AvlNode</span> child <span class="token operator">=</span> <span class="token function">rotateForLL</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">rotateForRR</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>çŸ¥æ™“å¦‚ä½•æ¢å¤äºŒå‰æ ‘çš„å¹³è¡¡ç»“æ„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±åº”è¯¥åˆ©ç”¨æ¢å¤æ‰‹æ®µï¼Œç”Ÿæˆå¹³è¡¡äºŒå‰æ’åºæ•°ï¼Œä»¥æ­¤è§£å†³ç”Ÿæˆè¿‡ç¨‹ä¸­çš„ä¸å¹³è¡¡ç°è±¡ï¼</p><p>é¦–å…ˆéœ€è¦åšçš„æ˜¯ï¼šç¡®å®šä¸å¹³è¡¡çš„æƒ…å†µæ˜¯ä¸Šè¿°å››ç§çš„å“ªä¸€ç§ï¼<br>å…¶æ¬¡å°±æ˜¯ï¼šæ ¹æ®ä¸åŒçš„æƒ…å†µæ‰€éœ€è¦é‡‡å–çš„ä¸åŒçš„å¹³è¡¡æ‰‹æ®µï¼</p><p><b style="color: red;">æ ¹æ®ä¸åŒçš„æƒ…å†µé‡‡å–çš„ä¸åŒçš„å¹³è¡¡æ‰‹æ®µ</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// å››ç§æƒ…å†µçš„åº”å¯¹æªæ–½ï¼Œç¡®ä¿é«˜åº¦ä¸€è‡´æ—¶ï¼Œé‡‡ç”¨å•æ—‹è½¬</span><span class="token keyword">private</span> <span class="token class-name">AvlNode</span> <span class="token function">balance</span><span class="token punctuation">(</span><span class="token class-name">AvlNode</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">height</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">height</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token operator">&gt;</span> ALLOWED_IMBALANCE<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">height</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token function">height</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            x <span class="token operator">=</span> <span class="token function">rotateForLL</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            x <span class="token operator">=</span> <span class="token function">rotateForLR</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">height</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">height</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">&gt;</span> ALLOWED_IMBALANCE<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">height</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token function">height</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            x <span class="token operator">=</span> <span class="token function">rotateForRR</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            x <span class="token operator">=</span> <span class="token function">rotateForRL</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    x<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token function">height</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">height</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> x<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: red;">insert(E)</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">AvlNode</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">AvlNode</span> x<span class="token punctuation">,</span> <span class="token class-name">E</span> elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AvlNode</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> cmp <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        x<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">insert</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        x<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">insert</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token function">balance</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">E</span> elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>    avlRoot <span class="token operator">=</span> <span class="token function">insert</span><span class="token punctuation">(</span>avlRoot<span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: red;">delete(E)</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">E</span> elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>    avlRoot <span class="token operator">=</span> <span class="token function">delete</span><span class="token punctuation">(</span>avlRoot<span class="token punctuation">,</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// Hibbardåˆ é™¤æ³•çš„å¦ä¸€ç§è¡¨è¾¾æ–¹å¼</span><span class="token keyword">private</span> <span class="token class-name">AvlNode</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">AvlNode</span> x<span class="token punctuation">,</span> <span class="token class-name">E</span> elem<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> cmp <span class="token operator">=</span> elem<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        x<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">delete</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        x<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">delete</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span>right <span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        x<span class="token punctuation">.</span>elem <span class="token operator">=</span> <span class="token function">findMin</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">.</span>elem<span class="token punctuation">;</span>        x<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">delete</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span> x<span class="token punctuation">.</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        x <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> x<span class="token punctuation">.</span>left <span class="token operator">:</span> x<span class="token punctuation">.</span>right<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token function">balance</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: red;">è·å–å¹³è¡¡äºŒå‰æ ‘çš„ä¸­åºéå†åºåˆ—</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">elemList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>avlRoot <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token keyword">else</span>                 <span class="token keyword">return</span> <span class="token function">inOrderList</span><span class="token punctuation">(</span>avlRoot<span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">inOrderList</span><span class="token punctuation">(</span><span class="token class-name">AvlNode</span> x<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// assert x != null</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">inOrderList</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>elem<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">inOrderList</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> list<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œç»™è‡ªå·±ç•™å‡ ä¸ªé—®é¢˜ï¼š</p><p>1ï¼‰ä¹‹å‰å·²ç»å®ç°äº†äºŒå‰æ ‘ï¼Œé‚£ä¹ˆå¦‚ä½•åœ¨BSTåŸºç¡€ä¹‹ä¸Šå®ç°å¹³è¡¡äºŒå‰æ ‘ï¼Ÿ</p><p>2ï¼‰å¦‚ä½•ç”¨è‡ªå·±å®ç°çš„å¹³è¡¡äºŒå‰æ ‘ä½œä¸ºæ•°æ®ç»“æ„å®ç°æœ‰åºç¬¦å·è¡¨ï¼Ÿ</p><p>3ï¼‰ä¸Šè¿°å®ç°ä»£ç çš„è¿­ä»£ç‰ˆæœ¬å¦‚ä½•ç¼–å†™ï¼Ÿ</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DataStructure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŸ¥æ‰¾ç®—æ³•</title>
      <link href="posts/50339.html"/>
      <url>posts/50339.html</url>
      
        <content type="html"><![CDATA[<h1 id="ç¬¦å·è¡¨"><a href="#ç¬¦å·è¡¨" class="headerlink" title="ç¬¦å·è¡¨"></a>ç¬¦å·è¡¨</h1><h2 id="SymbolTable"><a href="#SymbolTable" class="headerlink" title="SymbolTable"></a>SymbolTable</h2><h3 id="é€šç”¨ç¬¦å·è¡¨"><a href="#é€šç”¨ç¬¦å·è¡¨" class="headerlink" title="é€šç”¨ç¬¦å·è¡¨"></a>é€šç”¨ç¬¦å·è¡¨</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">SymbolTable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">,</span> <span class="token class-name">Value</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><table><thead><tr><th>SymbolTableæ–¹æ³•ï¼ˆåŸºæœ¬æ“ä½œï¼‰</th><th>æè¿°</th></tr></thead><tbody><tr><td>ST()</td><td>æ„é€ ç©ºçš„ST</td></tr><tr><td>Value get (Key key)</td><td>æŸ¥è¯¢k-v</td></tr><tr><td>void put(Key key, Value val)</td><td>æ’å…¥k-vï¼ˆput(key,null)éšå¼åˆ é™¤ï¼‰</td></tr><tr><td>boolean contains(Key key)</td><td>æŸ¥</td></tr><tr><td><code>void delete(Key key)</code></td><td>åˆ é™¤key-val</td></tr><tr><td>int size()</td><td>ç¬¦å·è¡¨k-vä¸ªæ•°</td></tr><tr><td>boolean isEmpty()</td><td>åˆ¤ç©º</td></tr><tr><td><code>Iterable&lt;Key&gt; keys()</code></td><td>è·å–keyçš„è¿­ä»£å™¨</td></tr></tbody></table><h3 id="æœ‰åºç¬¦å·è¡¨"><a href="#æœ‰åºç¬¦å·è¡¨" class="headerlink" title="æœ‰åºç¬¦å·è¡¨"></a>æœ‰åºç¬¦å·è¡¨</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">SortedST</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span> <span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span> <span class="token class-name">Value</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><table><thead><tr><th>SortedSTæ–¹æ³•ï¼ˆæ‹“å±•æ“ä½œï¼‰</th><th>æè¿°</th></tr></thead><tbody><tr><td>SortedST()</td><td></td></tr><tr><td>void put(Key key, Value val)</td><td></td></tr><tr><td>void delete(Key key)</td><td></td></tr><tr><td>Value get(Key key)</td><td></td></tr><tr><td>boolean contains(Key key)</td><td></td></tr><tr><td>boolean isEmpty()</td><td></td></tr><tr><td>int size()</td><td></td></tr><tr><td><code>Key min()</code></td><td>æœ€å°key</td></tr><tr><td><code>Key max()</code></td><td>æœ€å¤§key</td></tr><tr><td><code>Key floor(Key key)</code></td><td>å‘ä¸‹å–æ•´</td></tr><tr><td><code>Key ceiling(Key key)</code></td><td>å‘ä¸Šå–æ•´</td></tr><tr><td><code>int rank(Key key)</code></td><td>å°äºkeyçš„é”®çš„æ•°é‡</td></tr><tr><td><code>Key select(int k)</code></td><td>é€‰å‡ºæ’ç¬¬Kä¸ªé”®</td></tr><tr><td><code>void delMax()</code></td><td>åˆ é™¤æœ€å¤§key</td></tr><tr><td><code>void delMin()</code></td><td>åˆ é™¤æœ€å°key</td></tr><tr><td><code>int size(Key lo, Key hi)</code></td><td>è·å–[lo,hi]ä¹‹é—´çš„é”®æ•°</td></tr><tr><td><code>Iterable&lt;Key&gt; keys(Key lo, Key hi)</code></td><td>è·å–[lo,hi]ä¹‹é—´çš„é”®ï¼Œå·²æ’åº</td></tr><tr><td><code>Iterable&lt;Key&gt; keys()</code></td><td>è·å–æ‰€æœ‰é”®</td></tr></tbody></table><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210417212011.jpg" style="width:50%"><h2 id="é¡ºåºæŸ¥æ‰¾"><a href="#é¡ºåºæŸ¥æ‰¾" class="headerlink" title="é¡ºåºæŸ¥æ‰¾"></a>é¡ºåºæŸ¥æ‰¾</h2><p style="color: red;">å†™åœ¨å‰é¢ï¼šé¡ºåºæŸ¥æ‰¾ï¼ŒæŒ‡çš„æ˜¯åŸºäºé“¾è¡¨ç»“æ„çš„æ— åºé”®å€¼åºåˆ—ï¼Œåœ¨æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬æŒ‰ç…§ä¸€ä¸ªä¸€ä¸ªåœ°é¡ºåºéå†ç¬¦å·è¡¨ä¸­çš„æ‰€æœ‰é”®ï¼Œå¹¶åˆ©ç”¨equals()æ–¹æ³•æ¥å¯»æ‰¾ä¸è¢«æŸ¥æ‰¾é”®ç›¸åŒ¹é…çš„é”®</p><p><b style="color: fuchsia;">é“¾è¡¨çš„å­˜å‚¨ç»“æ„</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SqSST</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span> <span class="token punctuation">,</span><span class="token class-name">Value</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Node</span> first<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> n<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token punctuation">{</span>            <span class="token class-name">Key</span> key<span class="token punctuation">;</span>            <span class="token class-name">Value</span> val<span class="token punctuation">;</span>            <span class="token class-name">Node</span> next<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">,</span> <span class="token class-name">Value</span> val<span class="token punctuation">,</span> <span class="token class-name">Node</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>val <span class="token operator">=</span> val<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: fuchsia;">å¤´æ’æ³•ç”Ÿæˆé“¾è¡¨</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">,</span><span class="token class-name">Value</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>val <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å»¶æ—¶åˆ é™¤æ“ä½œdelete(key,null)</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// å¦‚æœkeyå­˜åœ¨äºç¬¦å·è¡¨ï¼Œåˆ™æ›´æ–°val</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token operator">=</span>first<span class="token punctuation">;</span>x<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">;</span>x<span class="token operator">=</span>x<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            x<span class="token punctuation">.</span>val<span class="token operator">=</span>val<span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    first<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>val<span class="token punctuation">,</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>    n<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: fuchsia;">é“¾è¡¨çš„éå†ï¼Œè·å–key</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Value</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"key is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span> x <span class="token operator">=</span> first<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> x<span class="token punctuation">.</span>val<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: fuchsia;">åˆ é™¤ç¬¦å·è¡¨çš„é”®å€¼ï¼ˆè¿­ä»£å®ç°ï¼‰</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>first <span class="token operator">==</span> <span class="token keyword">null</span><span class="token operator">||</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"SymbolTable is null or key is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Node</span> p <span class="token operator">=</span> first<span class="token punctuation">;</span>    <span class="token class-name">Node</span> prev <span class="token operator">=</span> p<span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>p<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token operator">==</span> first<span class="token operator">&amp;&amp;</span>key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            first <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            p <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            prev<span class="token punctuation">.</span>next <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            p <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            prev <span class="token operator">=</span> p<span class="token punctuation">;</span>            p <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: fuchsia;">åˆ é™¤ç¬¦å·è¡¨çš„é”®å€¼ï¼ˆé€’å½’å®ç°ï¼‰</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"key mustn't be null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    first <span class="token operator">=</span> <span class="token function">delete</span><span class="token punctuation">(</span>first<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">,</span> <span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>k<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        n<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> x<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    x<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token function">delete</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>next<span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ä¸æ–­çš„é‡ç½®åŒ¹é…kä¹‹å‰é”®çš„nextæŒ‡å‘</span>    <span class="token keyword">return</span> x<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: crimson;">åˆ©ç”¨é›†åˆå®¹å™¨ç”Ÿæˆé”®é›†</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span></span> <span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span></span> keys <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x <span class="token operator">=</span> first<span class="token punctuation">;</span> x<span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>        keys<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> keys<span class="token punctuation">;</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: deeppink;">ç¬¦å·è¡¨çš„åŸºæœ¬æ“ä½œ</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> n<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"key is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â˜ï¸<a href="https://gitee.com/matemaster/master-depository/blob/master/algorithm/search/SequentialSearchST.java">SequentialSearchST.java</a><b style="color: deeppink;">ç‚¹å‡»é“¾æ¥è·å–åŸºäºé“¾è¡¨å®ç°çš„é€šç”¨ç¬¦å·è¡¨</b></p><h2 id="äºŒåˆ†æŸ¥æ‰¾"><a href="#äºŒåˆ†æŸ¥æ‰¾" class="headerlink" title="äºŒåˆ†æŸ¥æ‰¾"></a>äºŒåˆ†æŸ¥æ‰¾</h2><p style="color: red">å†™åœ¨å‰é¢ï¼šè¿™é‡Œä¸ºäº†å®ç°äºŒåˆ†æŸ¥æ‰¾ï¼Œæ‰€ä»¥å¿…é¡»ä¿æŒé”®çš„æœ‰åºæ€§ã€‚åˆ©ç”¨ä¸€å¯¹å¹³è¡Œæ•°ç»„ï¼Œkeyså’Œvalsåˆ†åˆ«å­˜å‚¨é”®å€¼ï¼Œä¿æŒComparableç±»å‹çš„é”®æœ‰åºï¼Œä»¥åŠkey-valçš„ä¸€ä¸€å¯¹åº”ã€‚è¿™é‡Œä»¥rank()æ–¹æ³•ä¸ºæ ¸å¿ƒ</p><p>ç®€æ˜“çš„äºŒåˆ†æŸ¥æ‰¾</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">binarySearch</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token class-name">Comparable</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> lo <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> hi <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>lo <span class="token operator">&lt;=</span> hi<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> lo <span class="token operator">+</span> <span class="token punctuation">(</span>hi <span class="token operator">-</span> lo<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> cmp <span class="token operator">=</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> hi <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> lo <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>              <span class="token keyword">return</span> mid<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">return</span> lo<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â˜ï¸<a href="https://gitee.com/matemaster/master-depository/blob/master/algorithm/search/BinarySearchST.java">BinarySearchST.java</a><b style="color: deeppink;">ç‚¹å‡»é“¾æ¥è·å–åŸºäºäºŒåˆ†æŸ¥æ‰¾å®ç°çš„æœ‰åºç¬¦å·è¡¨</b></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210418123239.jpg" style="width:80%"><p><b style="color: indigo;">å¹³è¡Œæ•°ç»„çš„å­˜å‚¨ç»“æ„</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BinarySearchST</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span> <span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span><span class="token class-name">Value</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Key</span><span class="token punctuation">[</span><span class="token punctuation">]</span> keys<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Value</span><span class="token punctuation">[</span><span class="token punctuation">]</span> vals<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_INIT_CAPACITY <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">BinarySearchST</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">(</span>DEFAULT_INIT_CAPACITY<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token class-name">BinarySearchST</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>        keys <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Key</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">new</span> <span class="token class-name">Comparable</span><span class="token punctuation">[</span>capacity<span class="token punctuation">]</span><span class="token punctuation">;</span>        vals <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Value</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>capacity<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">æ ¸å¿ƒæ“ä½œè¿­ä»£å®ç°ï¼šint rank(Key k)</b></p><p>rankæ“ä½œå®ç°äº†äºŒåˆ†æŸ¥æ‰¾ï¼Œæ¯ä¸€ä¸ªå’Œæ¯”è¾ƒåŒºé—´[low,high]çš„ä¸­é—´å…ƒç´ key[mid]æ¯”è¾ƒã€‚ä»¥midä¸ºåˆ‡åˆ†ï¼Œè¾ƒå°æ—¶é€‰æ‹©å·¦åŒºé—´ï¼Œè¾ƒå¤§æ—¶é€‰æ‹©å³åŒºé—´ã€‚è‹¥æ˜¯æ°å¥½å‘½ä¸­ï¼Œåˆ™midå°±æ˜¯è¢«æŸ¥æ‰¾é”®æ‰€åœ¨çš„ä½ç½®ï¼Œæœ€åæƒ…å†µä¸‹æ²¡æœ‰å‘½ä¸­ï¼Œmidä»»ç„¶ä¿è¯å·¦åŒºé—´è¾ƒå°äºkeyå³åŒºé—´è¾ƒå¤§äºkey<b style="color: chocolate;">æ³¨ï¼šæ¯”è¾ƒåŒºé—´æ˜¯é”®çš„èŒƒå›´ä¸æ˜¯æ•´ä¸ªå­˜å‚¨æ•°ç»„çš„èŒƒå›´</b></p><p><b style="color: crimson;">rank()å…·æœ‰ä¸¤ä¸ªæ€§è´¨ï¼š1.å¦‚æœkeyåœ¨æœ‰åºç¬¦å·è¡¨ä¸­ï¼Œé‚£ä¹ˆrankçš„è¿”å›å€¼å¿…å®šæ˜¯keyåœ¨æ•°ç»„ä¸­çš„ä½ç½®ä¹Ÿå°±æ˜¯ç¬¦å·è¡¨ä¸­å°äºkeyçš„é”®çš„ä¸ªæ•°ã€‚2.å¦‚æœkeyä¸åœ¨æœ‰åºç¬¦å·è¡¨ä¸­ï¼Œé‚£ä¹ˆrankçš„è¿”å›å€¼ä¹Ÿä¸€å®šæ˜¯æ¯”keyå°çš„é”®çš„ä¸ªæ•°</b> <strong>rankçš„è¿”å›å€¼èŒƒå›´ä¸º[0,num]</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rank</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// [0, num-1] : num</span>    <span class="token keyword">int</span> lo <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> hi <span class="token operator">=</span> num<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>lo <span class="token operator">&lt;=</span> hi<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> lo <span class="token operator">+</span> <span class="token punctuation">(</span>hi <span class="token operator">-</span> lo<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> cmp <span class="token operator">=</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>keys<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> hi <span class="token operator">=</span> mid <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> lo <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>   <span class="token keyword">return</span> mid<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">// mid &gt;= lo -&gt; keys[mid] &gt;= keys[lo]: å§‹ç»ˆæˆç«‹</span>    <span class="token keyword">return</span> lo<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">æ ¸å¿ƒæ“ä½œé€’å½’å®ç°ï¼šint rank(Key k, int lo, int hi)</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rank</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">rank</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> num<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">rank</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>lo <span class="token operator">&gt;</span> hi<span class="token punctuation">)</span> <span class="token keyword">return</span> lo<span class="token punctuation">;</span>    <span class="token keyword">int</span> mid <span class="token operator">=</span> lo <span class="token operator">+</span> <span class="token punctuation">(</span>hi<span class="token operator">-</span> lo<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> cmp <span class="token operator">=</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>keys<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">rank</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> mid<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">rank</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>hi<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>   <span class="token keyword">return</span> mid<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">æ ¸å¿ƒæ“ä½œï¼šresize(int capacity)</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>capacity <span class="token operator">&lt;</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"resize failed!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// æ‰©å®¹</span>    <span class="token class-name">Key</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tempK <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Key</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">new</span> <span class="token class-name">Comparable</span><span class="token punctuation">[</span>capacity<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token class-name">Value</span><span class="token punctuation">[</span><span class="token punctuation">]</span> tempV <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Value</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>capacity<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">// è½¬ç§»å…ƒç´ </span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        tempK<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        tempV<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> vals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    keys <span class="token operator">=</span> tempK<span class="token punctuation">;</span>    vals <span class="token operator">=</span> tempV<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: indigo;">åŸºäºrankå®ç°putæ“ä½œ</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">,</span> <span class="token class-name">Value</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// åˆ¤ç©ºä¸æ˜¯å¦å»¶æ—¶åˆ é™¤</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"key is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>v <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token function">delete</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è·å–kçš„ä½ç½®/å°äºkçš„é”®çš„ä¸ªæ•°</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">rank</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> num <span class="token operator">&amp;&amp;</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         vals<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">;</span>         <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// æ˜¯å¦æ‰©å®¹</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">&gt;=</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>keys<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è¿ç§»å…ƒç´ </span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> num<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> i<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        keys<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> keys<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>        vals<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> vals<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> k<span class="token punctuation">;</span>    vals<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">;</span>    num<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: indigo;">åŸºäºrankå®ç°getæ“ä½œ</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Value</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"key is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// i : keyæ‰€åœ¨çš„ä½ç½®/å°äºkeyçš„é”®çš„ä¸ªæ•°</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">rank</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> num <span class="token operator">&amp;&amp;</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> vals<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: indigo;">åŸºäºrankå®ç°deleteæ“ä½œ</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"key is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">rank</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// kä¸åœ¨æœ‰åºç¬¦å·è¡¨ä¸­</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> num <span class="token operator">||</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">// è¿ç§»å…ƒç´ </span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> num<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        keys<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> keys<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        vals<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> vals<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    keys<span class="token punctuation">[</span>num<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    vals<span class="token punctuation">[</span>num<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    num<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token comment">// å æ¯”å°äºå››åˆ†ä¹‹ä¸€æ—¶,ç¼©å®¹</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> num <span class="token operator">&lt;=</span> keys<span class="token punctuation">.</span>length<span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span>         <span class="token function">resize</span><span class="token punctuation">(</span>keys<span class="token punctuation">.</span>length<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: limegreen;">ç®€å•æ“ä½œ</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">get</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> num<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: navy;">rankçš„äº’é€†æ“ä½œï¼šKey select(int k)</b></p><p>ä¸ºäº†ä¿æŒå’Œrankæ“ä½œçš„äº’é€†æ€§ï¼Œkçš„èŒƒå›´é™å®šåœ¨[0,num-1]ã€‚kè¡¨ç¤ºkeyåœ¨æ•°ç»„çš„ä½ç½®ï¼Œk+1è¡¨ç¤ºkeyçš„æ’å</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token operator">||</span> k <span class="token operator">&gt;=</span> num<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>                 <span class="token keyword">return</span> keys<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: crimson;">æ£€æŸ¥ï¼šç¡®ä¿ç¬¦å·è¡¨çš„æœ‰åºæ€§ä»¥åŠrankå’Œselectçš„äº’é€†æ€§</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">isSorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">rankCheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// are the items in the array in ascending order?</span><span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">isSorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>keys<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// check that rank(select(i)) = i</span><span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">rankCheck</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> <span class="token function">rank</span><span class="token punctuation">(</span><span class="token function">select</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token function">rank</span><span class="token punctuation">(</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸ºä¿è¯äº†ç¬¦å·è¡¨çš„æœ‰åºæ€§ï¼Œé‚£ä¹ˆæ ¹æ®æ•°ç»„çš„éšæœºå­˜å‚¨çš„ä¼˜åŠ¿ï¼Œè·å–ç¬¦å·è¡¨ä¸­çš„æœ€å¤§ã€æœ€å°å…ƒç´ ã€ä»¥åŠåˆ é™¤æœ€å¤§ã€æœ€å°å…ƒç´ éƒ½ç›¸å¯¹å®¹æ˜“å¾—å¤š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>          <span class="token keyword">return</span> keys<span class="token punctuation">[</span>num<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>          <span class="token keyword">return</span> keys<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>          <span class="token function">delete</span><span class="token punctuation">(</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delMin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>          <span class="token function">delete</span><span class="token punctuation">(</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: indigo;">åŸºäºrankå®ç°flooræ“ä½œ</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">floor</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"key is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">rank</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> num <span class="token operator">&amp;&amp;</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>              <span class="token keyword">return</span> keys<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: indigo;">åŸºäºrankå®ç°ceilingæ“ä½œ</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">ceiling</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"key is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">rank</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> num <span class="token operator">&amp;&amp;</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">==</span> num<span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>              <span class="token keyword">return</span> keys<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: indigo;">åŸºäºrankå®ç°size(lo, hi)æ“ä½œ</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token class-name">Key</span> lo<span class="token punctuation">,</span> <span class="token class-name">Key</span> hi<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>lo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"lo is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span>hi <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"hi is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span>lo<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>hi<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">containsKey</span><span class="token punctuation">(</span>hi<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token keyword">return</span> <span class="token function">rank</span><span class="token punctuation">(</span>hi<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">rank</span><span class="token punctuation">(</span>lo<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>                <span class="token keyword">return</span> <span class="token function">rank</span><span class="token punctuation">(</span>hi<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">rank</span><span class="token punctuation">(</span>lo<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: indigo;">æ‰€æœ‰é”®é›†(ä¸€èˆ¬å®ç°æ–¹å¼)</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span></span> <span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> keys<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> num<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        keys<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> keys<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: indigo;">åŸºäºrankå®ç°èŒƒå›´é”®é›†[lo,hi]</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span></span> <span class="token function">keys</span><span class="token punctuation">(</span><span class="token class-name">Key</span> lo<span class="token punctuation">,</span> <span class="token class-name">Key</span> hi<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>lo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"lo is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>hi <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"hi is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> low <span class="token operator">=</span> <span class="token function">rank</span><span class="token punctuation">(</span>lo<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> high <span class="token operator">=</span> <span class="token function">rank</span><span class="token punctuation">(</span>hi<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>low <span class="token operator">&gt;</span> high<span class="token punctuation">)</span> <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> low<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> high<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>keys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">containsKey</span><span class="token punctuation">(</span>hi<span class="token punctuation">)</span><span class="token punctuation">)</span> list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>keys<span class="token punctuation">[</span>high<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> list<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// åŸºäºèŒƒå›´é”®é›†å®ç°å…¨å±€é”®é›†</span><span class="token keyword">public</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span></span> <span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">keys</span><span class="token punctuation">(</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="äºŒå‰æŸ¥æ‰¾æ ‘"><a href="#äºŒå‰æŸ¥æ‰¾æ ‘" class="headerlink" title="äºŒå‰æŸ¥æ‰¾æ ‘"></a>äºŒå‰æŸ¥æ‰¾æ ‘</h1><p style="color:red;">äºŒå‰æ ‘çš„é€’å½’ç»“æ„ï¼Œå¯ä»¥å®ç°äºŒåˆ†æŸ¥æ‰¾ã€‚è¿™æ ·æˆ‘ä»¬å¯ä»¥åˆ©ç”¨é€’å½’ç‰¹æ€§å®Œæˆæœ‰åºç¬¦å·è¡¨çš„å®ç°æ ‘ä¸­çš„æ¯ä¸€ä¸ªç»“ç‚¹éƒ½å­˜å‚¨k-vï¼Œè€Œkçš„æœ‰åºæ€§ä¿è¯äº†äºŒå‰æ ‘çš„ç»“æ„ï¼Œä»¥åŠäºŒå‰æ ‘ä¸æœ‰åºæ•°ç»„çš„æ˜ å°„å…³ç³»ã€‚<b>ä¸åŒçš„äºŒå‰æ ‘ç»“æ„å¯ä»¥æŠ•å½±å‡ºç›¸åŒçš„æœ‰åºé”®åˆ—</b></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210417164640.jpg" style="width:70%"><h2 id="äºŒå‰æ ‘å®ç°æœ‰åºç¬¦å·è¡¨"><a href="#äºŒå‰æ ‘å®ç°æœ‰åºç¬¦å·è¡¨" class="headerlink" title="äºŒå‰æ ‘å®ç°æœ‰åºç¬¦å·è¡¨"></a>äºŒå‰æ ‘å®ç°æœ‰åºç¬¦å·è¡¨</h2><p>â˜ï¸<a href="https://gitee.com/matemaster/master-depository/blob/master/algorithm/search/BST.java">BST.java</a><b style="color: deeppink;">ç‚¹å‡»é“¾æ¥è·å–åŸºäºäºŒå‰æ ‘çš„æœ‰åºç¬¦å·è¡¨</b></p><p>1ï¼‰å®ç°äºŒå‰æŸ¥æ‰¾æ ‘çš„æ•°æ®ç»“æ„</p><p>ä»¥åµŒå¥—ç§æœ‰ç±»å®ç°äºŒå‰æ ‘çš„ç»“ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹ï¼šéƒ½åŒ…å«é”®å€¼å¯¹ã€å·¦å³å­ç»“ç‚¹ã€å­æ ‘ç»“ç‚¹è®¡æ•°å™¨ï¼ˆä»¥è¯¥ç»“ç‚¹ä¸ºrootï¼‰ã€‚é€šè¿‡è®¡æ•°å™¨å®Œæˆä¸‹é¢å…¬å¼å¯¹æ¯ä¸€ä¸ªäºŒå‰æ ‘ç»“ç‚¹éƒ½æ˜¯æˆç«‹çš„ã€‚</p><p><code>size(root) = size(root.left) + size(root.right) +1</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> BST<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span> <span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span> <span class="token class-name">Value</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Node</span> root<span class="token punctuation">;</span> <span class="token comment">// äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹</span>        <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name">Key</span> key<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">Value</span> val<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">Node</span> left<span class="token punctuation">,</span> right<span class="token punctuation">;</span>            <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token class-name">N</span><span class="token punctuation">;</span> <span class="token comment">//é”®å€¼å¯¹ã€å·¦å³å­ç»“ç‚¹ã€è¯¥Nodeå­æ ‘ç»“ç‚¹ä¸ªæ•°</span>        <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">,</span> <span class="token class-name">Value</span> val<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>         <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>val <span class="token operator">=</span> val<span class="token punctuation">;</span> <span class="token class-name">N</span> <span class="token operator">=</span> n<span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: chocolate;">ç®€å•åŸºæœ¬æ“ä½œ</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">size</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>          <span class="token keyword">return</span> <span class="token class-name"><span class="token namespace">x<span class="token punctuation">.</span></span>N</span><span class="token punctuation">;</span><span class="token punctuation">}</span>   <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">get</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>äºŒå‰æŸ¥æ‰¾æ ‘åœ¨å­˜å‚¨é”®å€¼å¯¹æ—¶ï¼Œå¯¹æœ‰åºé”®åˆ—çš„æŠ•å½±ã€‚<strong>ä¸åŒçš„äºŒå‰æŸ¥æ‰¾æ ‘ç»“æ„å¯ä»¥è·å–ç›¸åŒçš„æœ‰åºé”®åˆ—</strong></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210417164640.jpg" style="width:70%"><p>ä¸Šé¢å›¾ç¤ºå¯ä»¥çœ‹å‡ºï¼ŒäºŒå‰æŸ¥æ‰¾æ ‘å¯ä»¥å­˜å‚¨æœ‰åºçš„é”®å€¼å¯¹åˆ—ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨äºŒå‰æ ‘çš„é€’å½’ç»“æ„ç‰¹æ€§ï¼Œå®ç°äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ã€‚<strong>é¦–å…ˆå®ç°äºŒå‰æŸ¥æ‰¾æ ‘çš„æŸ¥æ‰¾ç®—æ³•</strong></p><p>åœ¨äºŒå‰æŸ¥æ‰¾æ ‘ä¸­æŸ¥è¯¢ä¸€ä¸ªé”®ï¼Œåªå¯èƒ½å­˜åœ¨ä¸¤ç§ç»“æœï¼šå‘½ä¸­ï¼ˆæ‰¾åˆ°k-vï¼Œè¿”å›vï¼‰ã€æœªå‘½ä¸­ï¼ˆæ²¡æ‰¾åˆ°k-vè¿”å›nullï¼‰ æˆ‘ä»¬å¯ä»¥åˆ©ç”¨äºŒå‰æ ‘çš„é€’å½’ç»“æ„å¾—åˆ°å¦‚ä¸‹çš„ç®—æ³•ï¼š</p><p>1ï¼‰å¦‚æœæ ‘æ˜¯ç©ºçš„ï¼Œåˆ™æ²¡æœ‰å‘½ä¸­è¿”å›nullã€‚</p><p>2ï¼‰å¦‚æœæŸ¥æ‰¾çš„é”®ä¸ç»“ç‚¹çš„é”®ç›¸ç­‰ï¼Œåˆ™å‘½ä¸­ è¿”å›ç»“ç‚¹çš„å€¼ã€‚</p><p>3ï¼‰å¦‚æœæŸ¥æ‰¾çš„é”®å°äºç»“ç‚¹çš„é”®åˆ™é€’å½’è‡³å·¦å­æ ‘æŸ¥è¯¢ï¼Œåä¹‹é€’å½’è‡³å³å­æ ‘æŸ¥è¯¢ã€‚</p><p><b style="color: hotpink;">æŸ¥æ‰¾çš„é€’å½’å®ç°get</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Value</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">get</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">Value</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">,</span> <span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> cmp <span class="token operator">=</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">get</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">get</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>    <span class="token keyword">return</span> x<span class="token punctuation">.</span>val<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: hotpink;">æŸ¥æ‰¾çš„éé€’å½’å®ç°</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Value</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Node</span> x <span class="token operator">=</span> root<span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> cmp <span class="token operator">=</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>left<span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>right<span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>val<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç°åœ¨å·²ç»å¯ä»¥ä»äºŒå‰æŸ¥æ‰¾æ ‘ä¸­ï¼Œé¡ºåˆ©çš„æŸ¥è¯¢éœ€è¦çš„k-vï¼Œ<strong>é‚£ä¹ˆå¦‚ä½•å°†æœ‰åºçš„é”®åˆ—æ”¾å…¥äºŒå‰æŸ¥æ‰¾æ ‘çš„åˆé€‚ä½ç½®ï¼Ÿ</strong> <code>put</code>æ–¹æ³•å°±å¯ä»¥å®ç°ï¼Œå°†é”®åˆ—æœ‰åºçš„å­˜å‚¨åœ¨äºŒå‰æŸ¥æ‰¾æ ‘çš„ç»“æ„ä¸­ï¼</p><p>1ï¼‰å¦‚æœk-vå­˜åœ¨äºäºŒå‰æŸ¥æ‰¾æ ‘ï¼Œåˆ™æ›´æ–°ç»“ç‚¹çš„val</p><p>2ï¼‰å¦‚æœk-vä¸å­˜åœ¨äºï¼Œåˆ™å°†ç”Ÿæˆk-væ–°çš„ç»“ç‚¹æ’å…¥äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆé€’å½’å®ç°ï¼‰</p><p><b style="color: hotpink;">æ’å…¥çš„æœ¬è´¨ï¼šå°±æ˜¯å½“æŸ¥æ‰¾åˆ°ä¸€ä¸ªä¸å­˜åœ¨äºæ ‘ä¸­çš„ç»“ç‚¹ï¼Œå¹¶ç»“æŸäºä¸€ä¸ªç©ºé“¾æ¥æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†é“¾æ¥æŒ‡å‘ä¸€ä¸ªåŒ…å«è¢«æŸ¥æ‰¾é”®çš„æ–°ç»“ç‚¹ï¼</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">,</span> <span class="token class-name">Value</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>    root  <span class="token operator">=</span> <span class="token function">put</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">,</span> <span class="token class-name">Key</span> k<span class="token punctuation">,</span> <span class="token class-name">Value</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v <span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> cmp <span class="token operator">=</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> x<span class="token punctuation">.</span>left  <span class="token operator">=</span>  <span class="token function">put</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> x<span class="token punctuation">.</span>right <span class="token operator">=</span>  <span class="token function">put</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>   x<span class="token punctuation">.</span>val   <span class="token operator">=</span>  v<span class="token punctuation">;</span>    <span class="token class-name"><span class="token namespace">x<span class="token punctuation">.</span></span>N</span> <span class="token operator">=</span> <span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> x<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>putæ’å…¥å…ƒç´ çš„é¡ºåºï¼Œå†³å®šäº†äºŒå‰æŸ¥æ‰¾æ ‘çš„å½¢çŠ¶</strong>ã€‚é‚£ä¹ˆå…ƒç´ çš„æ’å…¥é¡ºåºå’Œå…ƒç´ é¡ºåºå¿…é¡»ä¿æŒè‰¯å¥½çš„ï¼ˆå‡åŒ€ï¼‰éšæœºæ€§ã€‚å¦åˆ™ä¼šå‡ºç°ä¸‹é¢è¿™ç§æƒ…å†µï¼šï¼ˆ<strong>äºŒå‰æŸ¥æ‰¾æ ‘å˜æˆäº†é“¾è¡¨</strong>ï¼‰è€Œä¸æ˜¯åƒä¸Šé¢å…·æœ‰è‰¯å¥½çš„äºŒå‰æ ‘å½¢çŠ¶ï¼</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210417202101.jpg" style="width:80%"><p>é€šè¿‡äºŒå‰æ ‘çš„æœ‰åºé”®åˆ—ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—æœ€å¤§é”®å’Œæœ€å°é”®ã€‚æ ¹æ®äºŒå‰æ ‘çš„ç»“æ„ï¼Œå¯ä»¥çŸ¥é“æœ€å¤§é”®å°±æ˜¯äºŒå‰æ ‘çš„æœ€å³å¶å­ç»“ç‚¹ï¼Œæœ€å°é”®å°±æ˜¯äºŒå‰æ ‘çš„æœ€å·¦å¶å­ç»“ç‚¹ã€‚<b style="color: navy;">é‚£ä¹ˆå¦‚ä½•é€šè¿‡é€’å½’ç‰¹æ€§å®ç°å¯»æ‰¾åˆ°æœ€å·¦å³å¶å­ç»“ç‚¹ï¼Ÿ</b></p><p><b style="color: navy;">ç­”ï¼š</b>ä»æ ¹ç»“ç‚¹å‡ºå‘ï¼Œå¦‚æœå·¦å­æ ‘ä¸ºç©ºé‚£ä¹ˆè¯´æ˜æ ¹ç»“ç‚¹å°±æ˜¯æœ€å°ç»“ç‚¹ã€‚å¦‚æœå³å­æ ‘ä¸ºç©ºé‚£ä¹ˆè¯´æ˜æ ¹ç»“ç‚¹å°±æ˜¯æœ€å¤§ç»“ç‚¹</p><p><b style="color: deeppink;">æœ€å¤§é”®</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>          <span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">.</span>key<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>    <span class="token keyword">else</span>                <span class="token keyword">return</span> <span class="token function">max</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">/**public Key max() {    if(isEmpty()) return null;    else          return max(root);}private Key max(Node x) {    if(x.right == null) return x.key;    else                return max(x.right);}*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: deeppink;">æœ€å°é”®</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// ä¿æŒä¸deletæ–¹æ³•çš„å…¼å®¹æ€§</span><span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>          <span class="token keyword">return</span> <span class="token function">min</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">.</span>key<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">;</span>    <span class="token keyword">else</span>               <span class="token keyword">return</span> <span class="token function">min</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">/**public Key min() {    if(isEmpty()) return null;    else          return min(root);}private Key min(Node x) {    if(x.left == null) return x.key;    else               return min(x.left);}*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: deeppink;">å¾ªç¯è¿­ä»£äºŒå‰æ ‘æ‰¾å‡ºæœ€å€¼é”®</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Node</span> x <span class="token operator">=</span> root<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>key<span class="token punctuation">;</span>        <span class="token keyword">else</span>                x <span class="token operator">=</span> x<span class="token punctuation">.</span>right<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Node</span> x <span class="token operator">=</span> root<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>key<span class="token punctuation">;</span>        <span class="token keyword">else</span>               x <span class="token operator">=</span> x<span class="token punctuation">.</span>left<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹äºä¸€ä¸ªå­˜åœ¨äºäºŒå‰æ ‘çš„k-væˆ‘ä»¬å¾ˆç®€å•çš„å®Œæˆäº†å–æ•´æ“ä½œã€‚ä½†æ˜¯å¯¹äºä¸å­˜åœ¨äºäºŒå‰æ ‘çš„k-vå¦‚ä½•å®Œæˆå–æ•´æ“ä½œï¼Ÿ</p><p><b style="color: chocolate;">ç­”ï¼šå‘ä¸‹å–æ•´</b>1.å½“æ ¹ç»“ç‚¹çš„é”®ç­‰äºå–æ•´çš„é”®æ—¶ï¼Œè¡¨ç¤ºæ­¤æ—¶å·²ç»å‘½ä¸­ï¼Œroot.keyå°±æ˜¯æˆ‘ä»¬éœ€è¦çš„å–æ•´ç»“æœã€‚2.å½“æ ¹ç»“ç‚¹çš„é”®å°äºå–æ•´çš„é”®æ—¶ï¼Œæ­¤æ—¶å¦‚æœå·¦å­æ ‘æ˜¯ç©ºï¼Œåˆ™ä¹‹é—´è¿”å›nullè¡¨ç¤ºå–æ•´å¤±è´¥ã€‚å¦‚æœå·¦å­æ ‘ä¸æ˜¯ç©ºï¼Œåˆ™æˆ‘ä»¬å¯ä»¥ç¡®å®šå¯èƒ½å­˜åœ¨å–æ•´ç»“æœï¼Œå¯ä»¥ç»§ç»­é€’å½’å·¦å­æ ‘ã€‚3.å½“æ ¹ç»“ç‚¹çš„é”®å¤§äºå–æ•´é”®æ—¶ï¼Œæ­¤æ—¶å³å­æ ‘ä¸ºç©ºçš„è¯ï¼Œåˆ™æ ¹ç»“ç‚¹çš„é”®å°±æ˜¯å–æ•´ç»“æœï¼Œå¦‚æœå³å­æ ‘ä¸ä¸ºç©ºçš„è¯ï¼Œæˆ‘ä»¬éœ€è¦ç»§ç»­é€’å½’è‡³å³å­æ ‘ï¼ŒæŸ¥æ‰¾æ˜¯å¦å­˜åœ¨å°äºç­‰äºå–æ•´é”®ã€‚</p><p>å‘ä¸Šå–æ•´çš„æƒ…å†µåªæ˜¯å¤„ç†é€’å½’çš„é¡ºåºç›¸åï¼Œæ€æƒ³ä¿æŒä¸€è‡´ï¼</p><p><b style="color: deeppink;">å‘ä¸‹å–æ•´key</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">floor</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"Key is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">floor</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">Key</span> <span class="token function">floor</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">,</span> <span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// å­æ ‘ä¸ºç©ºçš„æƒ…å†µ</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> cmp <span class="token operator">=</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å‘½ä¸­ï¼Œè¿”å›æ ¹ç»“ç‚¹é”®</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>cmp <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>key<span class="token punctuation">;</span>    <span class="token comment">// å°äºå–æ•´é”®ï¼Œé€’å½’è‡³å·¦å­æ ‘æ“ä½œ</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token function">floor</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¤§äºå–æ•´é”®ï¼Œé€’å½’è‡³å³å­æ ‘</span>    <span class="token class-name">Key</span> res <span class="token operator">=</span> <span class="token function">floor</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åˆ¤æ–­æ˜¯å¦åœ¨å³å­æ ‘ä¸­æ‰¾å‡ºå–æ•´ç»“æœ</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>res <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> x<span class="token punctuation">.</span>key<span class="token punctuation">;</span>    <span class="token keyword">else</span>               <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: deeppink;">å‘ä¸Šå–æ•´key</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">ceiling</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">ceiling</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">Key</span> <span class="token function">ceiling</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">,</span> <span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> cmp <span class="token operator">=</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>cmp <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>key<span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token function">ceiling</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Key</span> res <span class="token operator">=</span> <span class="token function">ceiling</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>res <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>key<span class="token punctuation">;</span>    <span class="token keyword">else</span>            <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ ¹æ®äºŒå‰æ ‘çš„ç»“æ„ç‰¹æ€§ï¼Œæ ¹ç»“ç‚¹çš„å·¦å­æ ‘çš„ç»“ç‚¹ä¸ªæ•°è®°å½•äº†å°äºæ ¹ç»“ç‚¹é”®çš„ä¸ªæ•°ï¼Œå³å­æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°è®°å½•äº†å¤§äºæ ¹ç»“ç‚¹é”®çš„ä¸ªæ•°ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å·¦å³å­æ ‘ç»“ç‚¹çš„ä¸ªæ•°ï¼Œè·å–æŒ‡å®šä½ç½®çš„é”®ï¼Œç±»ä¼¼äºäºŒå‰æ ‘æ˜ å°„æœ‰åºæ•°ç»„ï¼Œè·å–æŒ‡å®šä½ç½®çš„é”®ã€‚</p><p>å‡è®¾æˆ‘ä»¬ç°åœ¨éœ€è¦å¯»æ‰¾æ’åä¸ºkçš„é”®ï¼Œå·¦å­æ ‘çš„ç»“ç‚¹ä¸ªæ•°ä¸ºlã€‚å½“l=kæ—¶ï¼Œè¡¨ç¤ºæ ¹ç»“ç‚¹å°±æ˜¯æˆ‘ä»¬éœ€è¦æ‰¾çš„é”®ã€‚å½“k&lt;læ—¶ï¼Œè¡¨æ˜éœ€è¦ç»§ç»­é€’å½’è‡³å·¦å­æ ‘æŸ¥è¯¢ï¼Œå¦‚æœk&gt;lé‚£æˆ‘ä»¬å°±éœ€è¦å†åœ¨å³å­æ ‘å¯»æ‰¾[k-(l+1)]ä¸ªç»“ç‚¹å³å¯ã€‚</p><p><b style="color: deeppink;">selectç¬¬kä¸ªå…ƒç´ </b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Key</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">select</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">Key</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> t <span class="token operator">=</span> <span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">&lt;</span> t<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">select</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">&gt;</span> t<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">select</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span> k<span class="token operator">-</span>t<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>            <span class="token keyword">return</span> x<span class="token punctuation">.</span>key<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: deeppink;">è·å–kçš„æ’å</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">rank</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">rank</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">rank</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">,</span> <span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> cmp <span class="token operator">=</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">rank</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span><span class="token function">rank</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>              <span class="token keyword">return</span> <span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨äºŒå‰æ ‘ä¸­æˆ‘ä»¬å¦‚ä½•åˆ é™¤æœ€å¤§æœ€å°é”®ï¼Ÿå› ä¸ºæœ€å¤§æœ€å°é”®éƒ½æ˜¯å¶å­ç»“ç‚¹ï¼Œåˆ é™¤ä¹‹åå¯¹äºŒå‰æ ‘çš„ç»“æ„å½±å“æœ€å°ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»åˆ é™¤æœ€å¤§æœ€å°é”®å…¥æ‰‹ï¼Œæ¢ç©¶å¦‚ä½•å¯¹äºŒå‰æ ‘è¿›è¡Œåˆ é™¤æ“ä½œï¼</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210419140405.jpg" style="width:80%"><p>æˆ‘ä»¬ä¸Šé¢çš„äºŒå‰æ ‘ç»“æ„å¯ä»¥çœ‹å‡ºï¼Œæœ€å°é”®çš„ç‰¹ç‚¹ï¼šä¸€å®šæ˜¯äºŒå‰æ ‘çš„æœ€å·¦å¶å­ç»“ç‚¹ï¼Œå¹¶ä¸”è¯¥å¶å­ç»“ç‚¹å·¦é“¾æ¥ä¸ºç©ºï¼Œé‚£ä¹ˆåœ¨åˆ é™¤è¯¥å¶å­ç»“ç‚¹æ—¶ï¼Œåªéœ€è¦åˆ©ç”¨è¯¥å¶å­ç»“ç‚¹çš„å³é“¾æ¥è¿›è¡Œè¡¥å……å³å¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šæˆ‘ä»¬å¯ä»¥ä¸æ–­åœ°å¯¹äºŒå‰æ ‘çš„å·¦å­æ ‘è¿›è¡Œè¿­ä»£æˆ–é€’å½’ï¼ŒçŸ¥é“å½“å‰ç»“ç‚¹çš„å·¦é“¾æ¥ä¸ºç©ºæ—¶ï¼Œåœæ­¢è¿­ä»£æˆ–è€…é€’å½’ï¼Œå¹¶ä¸”å°†å½“å‰ç»“ç‚¹çš„å³é“¾æ¥è¿”å›ã€‚</p><p><b style="color: deeppink;">åˆ é™¤æœ€å°é”®</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delMin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    root <span class="token operator">=</span> <span class="token function">delMin</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">delMin</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>right<span class="token punctuation">;</span>    x<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">delMin</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name"><span class="token namespace">x<span class="token punctuation">.</span></span>N</span> <span class="token operator">=</span> <span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> x<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210419141857.jpg" style="width:60%"><p><b style="color: deeppink;">åˆ é™¤æœ€å¤§é”®</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    root <span class="token operator">=</span> <span class="token function">delMax</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">delMax</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>left<span class="token punctuation">;</span>    x<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">delMax</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name"><span class="token namespace">x<span class="token punctuation">.</span></span>N</span> <span class="token operator">=</span> <span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> x<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>äºŒå‰æ ‘å…ƒç´ çš„åˆ é™¤æ˜¯è¾ƒä¸ºå¤æ‚çš„ï¼Œåœ¨åˆ é™¤å…ƒç´ çš„åŒæ—¶ï¼Œéœ€è¦ä¿®æ”¹äºŒå‰æ ‘çš„å½¢çŠ¶ï¼Œå¹¶ä¸”ä¿æŒäºŒå‰æ ‘çš„æœ‰åºæ€§ã€‚ä»ä¸Šé¢çš„åˆ é™¤æœ€å°é”®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼šå¯¹äºåªæœ‰å•ä¸ªå­ç»“ç‚¹çš„å­æ ‘ï¼Œæˆ–è€…æ˜¯æ²¡æœ‰å­ç»“ç‚¹çš„å­æ ‘ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ©ç”¨å®ƒçš„å·¦å³å­æ ‘è¿›è¡Œäº’ç›¸è¡¥å……ï¼Œ<strong>ä½†æ˜¯å¯¹äºå«æœ‰åŒç»“ç‚¹çš„å­æ ‘ï¼Œæˆ‘ä»¬å¦‚ä½•åˆ é™¤æ ¹ç»“ç‚¹ï¼Ÿ</strong>æ¥ä¸‹æ¥ä»‹ç»ä¸€ä¸‹<b style="color: pink;">Hibbardåˆ é™¤æ³•</b></p><ul><li>å°†æŒ‡å‘å³å°†è¢«åˆ é™¤ç»“ç‚¹xçš„é“¾æ¥ä¿å­˜ä¸ºt</li><li>å°†xæŒ‡å‘å®ƒçš„ç›´æ¥åç»§ç»“ç‚¹<code>min(t.right)</code></li><li>å°†xçš„å³é“¾æ¥æŒ‡å‘å»é™¤min(t.right)çš„å­äºŒå‰æ ‘</li><li>å°†xçš„å·¦é“¾æ¥æŒ‡å‘åŸæ¥tçš„å·¦é“¾æ¥</li></ul><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210419134011.jpg" style="width:80%"><p><b style="color: deeppink;">åˆ é™¤äºŒå‰æ ‘ä¸­ä»»æ„é”®</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    root <span class="token operator">=</span> <span class="token function">delete</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">Node</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">,</span> <span class="token class-name">Key</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> cmp <span class="token operator">=</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> x<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">delete</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> x<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">delete</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// Hibbardåˆ é™¤æ³•</span>    <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>left<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> x<span class="token punctuation">.</span>right<span class="token punctuation">;</span>        <span class="token class-name">Node</span> t <span class="token operator">=</span> x<span class="token punctuation">;</span>        x <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>        x<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">delMin</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>        x<span class="token punctuation">.</span>left <span class="token operator">=</span> t<span class="token punctuation">.</span>left<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token class-name"><span class="token namespace">x<span class="token punctuation">.</span></span>N</span> <span class="token operator">=</span> <span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">size</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> x<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: deeppink;">è·å–é”®é›†</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span></span> <span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">keys</span><span class="token punctuation">(</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span></span> <span class="token function">keys</span><span class="token punctuation">(</span><span class="token class-name">Key</span> lo<span class="token punctuation">,</span> <span class="token class-name">Key</span> hi<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>lo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"key is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>hi <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"key is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">keys</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> queue<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> hi<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> queue<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">keys</span><span class="token punctuation">(</span><span class="token class-name">Node</span> x<span class="token punctuation">,</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span></span> queue<span class="token punctuation">,</span> <span class="token class-name">Key</span> lo<span class="token punctuation">,</span> <span class="token class-name">Key</span> hi<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> cmplo <span class="token operator">=</span> lo<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> cmphi <span class="token operator">=</span> hi<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å®ç°çš„æ˜¯äºŒå‰æ ‘çš„ä¸­åºéå†</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>cmplo <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">keys</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span> queue<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> hi<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// lo &lt;= x.key &lt;= hi</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>cmplo <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> cmphi <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>cmphi <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token function">keys</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span> queue<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> hi<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: deeppink;">è·å–é”®æ•°</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token class-name">Key</span> lo<span class="token punctuation">,</span> <span class="token class-name">Key</span> hi<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>lo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"low_key is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>hi <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"high_key is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>lo<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>hi<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">containsKey</span><span class="token punctuation">(</span>hi<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">rank</span><span class="token punctuation">(</span>hi<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">rank</span><span class="token punctuation">(</span>lo<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>               <span class="token keyword">return</span> <span class="token function">rank</span><span class="token punctuation">(</span>hi<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">rank</span><span class="token punctuation">(</span>lo<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="çº¢é»‘æ ‘"><a href="#çº¢é»‘æ ‘" class="headerlink" title="çº¢é»‘æ ‘"></a>çº¢é»‘æ ‘</h1><p>çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬ä»¥æŒ‡å‘ç»“ç‚¹é“¾æ¥çš„é¢œè‰²æ¥ä»£è¡¨ç»“ç‚¹çš„çº¢é»‘ï¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedBlackTree</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Key</span> <span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token punctuation">&lt;</span><span class="token class-name">Key</span><span class="token punctuation">&gt;</span><span class="token punctuation">,</span> <span class="token class-name">Value</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> RED <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">boolean</span> BLACK <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">RedBlackNode</span> root<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">RedBlackNode</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token class-name">Key</span> key<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">Value</span> val<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token class-name">RedBlackNode</span> left<span class="token punctuation">,</span> right<span class="token punctuation">;</span>        <span class="token keyword">private</span> <span class="token keyword">boolean</span> color<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token class-name">RedBlackNode</span><span class="token punctuation">(</span><span class="token class-name">Key</span> key<span class="token punctuation">,</span> <span class="token class-name">Value</span> val<span class="token punctuation">,</span><span class="token keyword">boolean</span> color<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>val <span class="token operator">=</span> val<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> size<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚ä½•å‘çº¢é»‘æ ‘ä¸­æ’å…¥å…ƒç´ ï¼Ÿçº¢é»‘æ ‘è§†ä¸ºè‡ªå¹³è¡¡çš„äºŒå‰æ ‘ï¼Œå°±éœ€è¦å®ç°å¹³è¡¡æ‰€éœ€çš„æ—‹è½¬æ“ä½œã€‚è€Œä¸”çº¢é»‘æ ‘åªéœ€è¦ä¸¤ç§æƒ…å†µçš„æ—‹è½¬å°±å¯ä»¥å®ç°è‡ªå¹³è¡¡ï¼<b style="color: red;">ä¸‹é¢çš„å›¾è§£å·¦æ—‹å‡ºç°é”™è¯¯ï¼ŒBç»“ç‚¹åº”è¯¥ä¸ºé»‘è‰²ï¼ŒAç»“ç‚¹ä¸ºçº¢è‰²ã€‚</b></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210423115101.png" style="width:60%"><p><b style="color: blue;">å·¦æ—‹</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">RedBlackNode</span> <span class="token function">rotateLeft</span><span class="token punctuation">(</span><span class="token class-name">RedBlackNode</span> parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"RedBlackNode is null"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">RedBlackNode</span> child <span class="token operator">=</span> parent<span class="token punctuation">.</span>right<span class="token punctuation">;</span>    parent<span class="token punctuation">.</span>right <span class="token operator">=</span> child<span class="token punctuation">.</span>left<span class="token punctuation">;</span>    child<span class="token punctuation">.</span>left <span class="token operator">=</span> parent<span class="token punctuation">;</span>    <span class="token comment">//---æ—‹è½¬åçš„é¢œè‰²å˜åŒ–---</span>    child<span class="token punctuation">.</span>color <span class="token operator">=</span> parent<span class="token punctuation">.</span>color<span class="token punctuation">;</span>    parent<span class="token punctuation">.</span>color <span class="token operator">=</span> RED<span class="token punctuation">;</span>    <span class="token comment">//-------------------</span>    child<span class="token punctuation">.</span>size <span class="token operator">=</span> parent<span class="token punctuation">.</span>size<span class="token punctuation">;</span>    parent<span class="token punctuation">.</span>size <span class="token operator">=</span> <span class="token function">size</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">size</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> child<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">å³æ—‹</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">RedBlackNode</span> <span class="token function">rotateRight</span><span class="token punctuation">(</span><span class="token class-name">RedBlackNode</span> parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">RedBlackNode</span> child <span class="token operator">=</span> parent<span class="token punctuation">.</span>left<span class="token punctuation">;</span>    parent<span class="token punctuation">.</span>left <span class="token operator">=</span> child<span class="token punctuation">.</span>right<span class="token punctuation">;</span>    child<span class="token punctuation">.</span>right <span class="token operator">=</span> parent<span class="token punctuation">;</span>    child<span class="token punctuation">.</span>color <span class="token operator">=</span> parent<span class="token punctuation">.</span>color<span class="token punctuation">;</span>    parent<span class="token punctuation">.</span>color <span class="token operator">=</span> RED<span class="token punctuation">;</span>    child<span class="token punctuation">.</span>size <span class="token operator">=</span> parent<span class="token punctuation">.</span>size<span class="token punctuation">;</span>    parent<span class="token punctuation">.</span>size <span class="token operator">=</span> <span class="token function">size</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">size</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> child<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="çº¢é»‘æ ‘çš„æ’å…¥"><a href="#çº¢é»‘æ ‘çš„æ’å…¥" class="headerlink" title="çº¢é»‘æ ‘çš„æ’å…¥"></a>çº¢é»‘æ ‘çš„æ’å…¥</h2><p>æ¥ä¸‹æ¥æˆ‘åˆ©ç”¨å›¾è§£çš„æ–¹å¼ï¼Œä»‹ç»ä¸€ä¸‹ï¼Œå‘çº¢é»‘æ ‘ä¸­æ’å…¥ç»“ç‚¹çš„å‡ ç§æƒ…å†µï¼š</p><p>1ï¼‰å‘2-ç»“ç‚¹æ’å…¥çº¢ç»“ç‚¹</p><p>è¿™ç§æƒ…å†µæŒ‡å‡ºå‡ºç°ä¸¤ç§å½¢å¼ï¼š</p><p>1.å‘2-ç»“ç‚¹æ’å…¥å³çº¢ç‚¹ï¼Œæ­¤æ—¶å¾—åˆ°çš„3-ç»“ç‚¹æ˜¯éæ­£å¸¸çš„ï¼Œéœ€è¦å¯¹ç»“ç‚¹Aä½œå·¦æ—‹è½¬ä»¥å¾—åˆ°æ­£å¸¸çš„3-ç»“ç‚¹</p><p>2.å‘2-ç»“ç‚¹æ’å…¥å·¦çº¢ç‚¹ï¼Œæ­¤æ—¶å¾—åˆ°çš„æ˜¯æ­£å¸¸çš„3-ç»“ç‚¹ï¼Œä¸éœ€è¦åšä»»ä½•æ“ä½œ</p><p><b style="color: red;">ä¸‹é¢çš„å›¾è§£ç¬¬ä¸€ç§æƒ…å†µå‡ºç°é”™è¯¯ï¼ŒBç»“ç‚¹åº”è¯¥ä¸ºé»‘è‰²ï¼ŒAç»“ç‚¹ä¸ºçº¢è‰²ã€‚å¾—åˆ°çš„ç»“æœä¸ç¬¬äºŒç§æ­£å¸¸æƒ…å†µç»“æœä¸€è‡´</b></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210423115740.png" style="width:60%"><p>2ï¼‰å‘3-ç»“ç‚¹æ’å…¥çº¢ç»“ç‚¹</p><p>1.æ’å…¥çº¢ç»“ç‚¹çš„é”®åœ¨3-ç»“ç‚¹çš„ä¸¤ä¸ªé”®ä¹‹é—´</p><p>2.æ’å…¥çº¢ç»“ç‚¹çš„é”®æ¯”3-ç»“ç‚¹çš„ä¸¤ä¸ªé”®éƒ½å°</p><p>3.æ’å…¥çº¢ç»“ç‚¹çš„é”®æ¯”3-ç»“ç‚¹çš„ä¸¤ä¸ªé”®éƒ½å¤§ï¼ˆè¿™é‡Œçˆ¶ç»“ç‚¹Bçš„é¢œè‰²å¯çº¢å¯é»‘ï¼‰</p><p>ç¬¬ä¸€ç§æƒ…å†µå°†ä¸‹å±‚çº¢é“¾æ¥å·¦æ—‹ï¼Œå³å¯å¾—åˆ°ç¬¬äºŒç§æƒ…å†µ</p><p>ç¬¬äºŒç§æƒ…å†µå°†ä¸Šå±‚çš„çº¢é“¾æ¥è¿›è¡Œå³æ—‹ï¼Œå³å¯å¾—åˆ°ç¬¬ä¸‰ç§æƒ…å†µ</p><p>ç¬¬ä¸‰ç§æƒ…å†µï¼Œæˆ‘ä»¬å°†å­ç»“ç‚¹çš„çº¢å˜é»‘ï¼Œçˆ¶ç»“ç‚¹é»‘å˜çº¢ï¼Œè¿™æ ·å°±å¯ä»¥å°†4-ç»“ç‚¹å‘ä¸Šå±‚åˆ†è§£</p><p><b style="color: red;">å›¾è§£çš„å³ä¸‹è§’,Bç»“ç‚¹åº”è¯¥æ˜¯é»‘è‰²çš„ï¼</b></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210423121241.png" style="width:80%"><p>é‚£ä¹ˆæˆ‘ä»¬åº”å¯¹ä¸Šé¢æ‰€å±çš„å››ç§éæ­£å¸¸æƒ…å†µï¼Œå°†å…¶è¿›è¡Œæ—‹è½¬ã€å˜è‰²ï¼Œå°±å¯ä»¥å®Œæˆçº¢é»‘æ ‘çš„çº¢é“¾æ¥å‘ä¸Šä¼ é€’ã€‚ä¹Ÿå°±æ˜¯2-3æ ‘å¯¹äº4-ç»“ç‚¹çš„åˆ†è§£ã€‚</p><p>å¦‚æœå³å­ç»“ç‚¹æ˜¯çº¢è‰²ï¼Œè€Œå·¦å­ç»“ç‚¹æ˜¯é»‘è‰²ã€‚åˆ™éœ€è¦å·¦æ—‹</p><p>å¦‚æœå·¦å­ç»“ç‚¹æ˜¯çº¢è‰²ï¼Œè€Œå·¦å­ç»“ç‚¹çš„å·¦å­ç»“ç‚¹ä¹Ÿæ˜¯çº¢è‰²ï¼Œåˆ™éœ€è¦å³æ—‹</p><p>å¦‚æœå·¦å³å­ç»“ç‚¹å‡æ˜¯çº¢è‰²ï¼Œåˆ™éœ€è¦å°†å·¦å³å­å˜é»‘ï¼Œçˆ¶å˜çº¢</p><p><b style="color: blue;">å˜è‰²ã€åˆ¤æ–­ç»“ç‚¹é¢œè‰²</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">flipColor</span><span class="token punctuation">(</span><span class="token class-name">RedBlackNode</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    x<span class="token punctuation">.</span>color <span class="token operator">=</span> RED<span class="token punctuation">;</span>    x<span class="token punctuation">.</span>left<span class="token punctuation">.</span>color <span class="token operator">=</span> BLACK<span class="token punctuation">;</span>    x<span class="token punctuation">.</span>right<span class="token punctuation">.</span>color <span class="token operator">=</span> BLACK<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">isRed</span><span class="token punctuation">(</span><span class="token class-name">RedBlackNode</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>           <span class="token keyword">return</span> x<span class="token punctuation">.</span>color <span class="token operator">==</span> RED<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">åº”å¯¹å››ç§æƒ…å†µçš„æ’å…¥æ“ä½œ</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Key</span> k<span class="token punctuation">,</span> <span class="token class-name">Value</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>    root  <span class="token operator">=</span> <span class="token function">put</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>    root<span class="token punctuation">.</span>color <span class="token operator">=</span> BLACK<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">RedBlackNode</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">RedBlackNode</span> x<span class="token punctuation">,</span><span class="token class-name">Key</span> k<span class="token punctuation">,</span> <span class="token class-name">Value</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RedBlackNode</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">,</span> RED<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> cmp <span class="token operator">=</span> k<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span>      <span class="token punctuation">(</span>cmp <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> x<span class="token punctuation">.</span>left  <span class="token operator">=</span> <span class="token function">put</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">,</span>  k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>cmp <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> x<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">put</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>              x<span class="token punctuation">.</span>val   <span class="token operator">=</span> v<span class="token punctuation">;</span>    <span class="token comment">// ä¸‰ä¸ªå¦‚æœï¼ˆåŒ…å«å››ç§æƒ…å†µï¼‰ä¿è¯äº†ä¸ä¼šå­˜åœ¨è¿ç»­ä¸¤æ¡çº¢é“¾æ¥çš„æƒ…å†µ</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isRed</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">isRed</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span>    x <span class="token operator">=</span> <span class="token function">rotateLeft</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isRed</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">isRed</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">)</span> x <span class="token operator">=</span> <span class="token function">rotateRight</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isRed</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token function">isRed</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token function">flipColor</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> x<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="çº¢é»‘æ ‘çš„åˆ é™¤"><a href="#çº¢é»‘æ ‘çš„åˆ é™¤" class="headerlink" title="çº¢é»‘æ ‘çš„åˆ é™¤"></a>çº¢é»‘æ ‘çš„åˆ é™¤</h2><p>ç†è§£çº¢é»‘æ ‘çš„åˆ é™¤æ“ä½œï¼Œé¦–å…ˆå¿…è¦ç†è§£2-3-4æ ‘è‡ªé¡¶è€Œä¸‹çš„å˜æ¢è¿‡ç¨‹ï¼å…ˆçœ‹ä¸€ä¸‹æœ€å°é”®çš„åˆ é™¤ï¼Œå› ä¸ºæœ‰åºäºŒå‰æ ‘çš„åˆ é™¤æ–¹å¼å¯ä»¥å»ºç«‹åœ¨åˆ é™¤æœ€å°é”®çš„æ“ä½œä¹‹ä¸Šï¼</p><p>ä¸ºäº†ä¿è¯é»‘è‰²å¹³è¡¡æ€§ï¼Œå¿…é¡»è¦ä¿è¯åˆ é™¤çš„ç»“ç‚¹ä¸æ˜¯2-ç»“ç‚¹ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥å°†éœ€è¦åˆ é™¤çš„é”®ï¼Œä¸æ–­åœ°è‡ªé¡¶å‘ä¸‹è¿›è¡Œå˜æ¢ä¼ é€’ï¼Œç›´åˆ°æœ€å°é”®è¢«ä¼ é€’åˆ°æ ‘åº•ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åˆ é™¤æœ€å°é”®å¹¶ä¸”ä¸ç”¨æ‹…å¿ƒåˆ é™¤é€ æˆçš„å¤±è¡¡é—®é¢˜ï¼ä¼ é€’çš„æ ¸å¿ƒç›®çš„ï¼šè®©æœ€å°é”®æ‰€åœ¨çš„å¶å­ç»“ç‚¹å˜æˆ3-ç»“ç‚¹æˆ–è€…æ˜¯ä¸´æ—¶çš„4-ç»“ç‚¹ã€‚å¾…åˆ é™¤å®Œæˆä¹‹åï¼Œåœ¨é€æ­¥è‡ªåº•å‘ä¸Šåˆ†è§£äº§ç”Ÿçš„ä¸´æ—¶4-ç»“ç‚¹ã€‚</p><p>åˆ©ç”¨å›¾è§£ç†è§£å¦‚ä½•æ²¿ç€å·¦é“¾æ¥å®ç°è‡ªé¡¶è€Œä¸‹çš„å˜æ¢è¿‡ç¨‹ï¼š</p><p><b style="color: chocolate;">åˆ é™¤ç»“ç‚¹åœ¨æ ¹ç»“ç‚¹å¤„</b></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210423133305.png" style="width:80%"><p><b style="color: chocolate;">åˆ é™¤ç»“ç‚¹åœ¨çº¢é»‘æ ‘çš„ä¸­é—´ä»»æ„ä½ç½®å¤„</b></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210423133839.png" style="width:80%"><p><b style="color: chocolate;">å¯¹åœ¨æ ‘åº•ä½ç½®çš„åˆ é™¤ç»“ç‚¹è¿›è¡Œåˆ é™¤æ“ä½œ</b></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210423134126.png" style="width:80%"><p><b style="color: blue;">å‘ä¸‹ä¼ é€’æ—¶çš„å˜æ¢æ“ä½œ</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">RedBlackNode</span> <span class="token function">moveRedLeft</span><span class="token punctuation">(</span><span class="token class-name">RedBlackNode</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">flipColor</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isRed</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        x<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">rotateRight</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>        x <span class="token operator">=</span> <span class="token function">rotateLeft</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">flipColor</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> x<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">åˆ é™¤æ ‘åº•éƒ¨çš„æœ€å°é”®</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">RedBlackNode</span> <span class="token function">delMin</span><span class="token punctuation">(</span><span class="token class-name">RedBlackNode</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isRed</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token function">isRed</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        x <span class="token operator">=</span> <span class="token function">moveRedLeft</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    x<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">delMin</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">balance</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delMin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token string">"BST underflow"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isRed</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isRed</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span>        root<span class="token punctuation">.</span>color <span class="token operator">=</span> RED<span class="token punctuation">;</span>    root <span class="token operator">=</span> <span class="token function">delMin</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> root<span class="token punctuation">.</span>color <span class="token operator">=</span> BLACK<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>çº¢é»‘æ ‘ä»»æ„é”®çš„åˆ é™¤æ–¹æ³•è®¾è®¡æ€è·¯ï¼š</p><p>æˆ‘ä»¬åœ¨è‡ªé¡¶å‘ä¸‹çš„æŸ¥æ‰¾è·¯å¾„ç§åšä¸åˆ é™¤æœ€å°é”®ç›¸åŒçš„æ“ä½œï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¿è¯æˆ‘ä»¬åˆ é™¤çš„å½“å‰ç»“ç‚¹ä¸€å®šæ˜¯é2-ç»“ç‚¹ã€‚å½“æˆ‘ä»¬éœ€è¦åˆ é™¤çš„ç»“ç‚¹åœ¨æ ‘åº•éƒ¨æ—¶ï¼Œå¯ä»¥ç›´æ¥å°†é”®åˆ é™¤ã€‚å½“å¾…åˆ é™¤çš„é”®ä¸åœ¨åº•éƒ¨æ—¶ï¼Œæˆ‘ä»¬å°†å½“å‰ç»“ç‚¹ä¸å®ƒçš„ç›´æ¥åç»§ç»“ç‚¹è¿›è¡Œäº¤æ¢ï¼Œç„¶åç±»ä¼¼äºäºŒå‰æŸ¥æ‰¾æ ‘çš„åˆ é™¤æ“ä½œï¼Œå°†é—®é¢˜å˜ä¸ºåœ¨æ ¹ç»“ç‚¹ä¸æ˜¯2-ç»“ç‚¹çš„å­æ ‘ä¸­åˆ é™¤æœ€å°é”®é—®é¢˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> algorithms </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­—ç¬¦ä¸²ç®—æ³•</title>
      <link href="posts/21226.html"/>
      <url>posts/21226.html</url>
      
        <content type="html"><![CDATA[<h2 id="å­å­—ç¬¦ä¸²æŸ¥æ‰¾"><a href="#å­å­—ç¬¦ä¸²æŸ¥æ‰¾" class="headerlink" title="å­å­—ç¬¦ä¸²æŸ¥æ‰¾"></a>å­å­—ç¬¦ä¸²æŸ¥æ‰¾</h2><h3 id="æš´åŠ›åŒ¹é…"><a href="#æš´åŠ›åŒ¹é…" class="headerlink" title="æš´åŠ›åŒ¹é…"></a>æš´åŠ›åŒ¹é…</h3><p><code>searchForFirst(String txt, String pat)</code>æ–¹æ³•å°±æ˜¯åœ¨æ–‡æœ¬å­—ç¬¦ä¸²<code>txt</code>ä¸­æ‰¾å‡ºæ¨¡å¼å­—ç¬¦ä¸²<code>pat</code>ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚è¿™æ®µç¨‹åºé‡‡ç”¨äº†åŒæŒ‡é’ˆçš„æ–¹å¼ï¼Œ<code>æŒ‡é’ˆi</code>è·Ÿè¸ªtxtï¼Œ<code>æŒ‡é’ˆj</code>è·Ÿè¸ªpatã€‚<strong>æŒ‡é’ˆiå§‹ç»ˆæŒ‡å‘å·²ç»åŒ¹é…åºåˆ—çš„å¼€å¤´â€”â€”ä¹Ÿå°±æ˜¯æ¨¡å¼å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°åœ¨txtä¸­çš„ä½ç½®</strong></p><p><strong>å¦‚æœiæŒ‡å‘çš„å…ƒç´ ä¸jæŒ‡å‘çš„å…ƒç´ å¤±é…ï¼Œé‚£ä¹ˆå°±å°†iæŒ‡å‘txtçš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œjé‡æ–°æŒ‡å‘patçš„ç¬¬ä¸€ä¸ªå…ƒç´ </strong></p><p><b style="color: orange;">è¿™ç§æ–¹å¼ä¸‹ï¼Œä¸»æŒ‡é’ˆiéšå¼å›é€€ï¼Œåˆ©ç”¨æ¨¡å¼æŒ‡é’ˆjå®Œæˆå¤±é…æƒ…å†µä¸‹çš„å›é€€æ“ä½œï¼Œâ€œä¸»æŒ‡é’ˆiå§‹ç»ˆä¸å˜â€</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">searchForFirst</span><span class="token punctuation">(</span><span class="token class-name">String</span> txt<span class="token punctuation">,</span> <span class="token class-name">String</span> pat<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> <span class="token class-name">M</span> <span class="token operator">=</span> txt<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token class-name">N</span> <span class="token operator">=</span> pat<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token class-name">M</span><span class="token operator">-</span><span class="token class-name">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> j<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>txt<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token operator">+</span>j<span class="token punctuation">)</span> <span class="token operator">!=</span> pat<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">break</span><span class="token punctuation">;</span><span class="token comment">// åŒ¹é…æˆåŠŸåˆ¤æ–­æ”¾åœ¨å†…å¾ªç¯            </span><span class="token comment">//          if(j == N-1)</span><span class="token comment">//              return i;   </span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">==</span> <span class="token class-name">N</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> i<span class="token punctuation">;</span>   <span class="token comment">//åŒ¹é…æˆåŠŸ åˆ¤æ–­æ”¾åœ¨å¤–å¾ªç¯(æ¯”è¾ƒæ¬¡æ•°æ›´å°‘)</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token class-name">M</span><span class="token punctuation">;</span>     <span class="token comment">// åŒ¹é…å¤±è´¥</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>searchForLast(String txt, String pat)</code>æ–¹æ³•å°±æ˜¯åœ¨æ–‡æœ¬å­—ç¬¦ä¸²<code>txt</code>ä¸­æ‰¾å‡ºæ¨¡å¼å­—ç¬¦ä¸²<code>pat</code>ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚è¿™æ®µç¨‹åºé‡‡ç”¨äº†åŒæŒ‡é’ˆçš„æ–¹å¼ï¼Œ<code>æŒ‡é’ˆi</code>è·Ÿè¸ªtxtï¼Œ<code>æŒ‡é’ˆj</code>è·Ÿè¸ªpatã€‚<strong>æŒ‡é’ˆiå§‹ç»ˆæŒ‡å‘å·²ç»åŒ¹é…åºåˆ—çš„æœ«ç«¯ï¼Œé‚£ä¹ˆi-Må°±æ˜¯patç¬¬ä¸€æ¬¡å‡ºç°åœ¨txtçš„ä½ç½®</strong></p><p><strong>å¦‚æœiæŒ‡å‘å…ƒç´ ä¸jæŒ‡å‘å…ƒç´ å¤±é…ï¼Œé‚£ä¹ˆå°±å°†iæŒ‡å‘æœ¬æ¬¡åŒ¹é…çš„å¼€å§‹ä½ç½®çš„ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œjé‡æ–°æŒ‡å‘patå¼€å¤´</strong></p><p><b style="color: orange;">è¿™ç§æ–¹å¼ä¸‹ï¼Œä¸»æŒ‡é’ˆiæ˜¾å¼å›é€€ï¼Œæ¯æ¬¡å›é€€çš„æ­¥æ•°éƒ½æ˜¯å·²ç»åŒ¹é…çš„jä¸ªå…ƒç´ </b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">searchForLast</span><span class="token punctuation">(</span><span class="token class-name">String</span> txt<span class="token punctuation">,</span> <span class="token class-name">String</span> pat<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> i<span class="token punctuation">,</span><span class="token class-name">M</span> <span class="token operator">=</span> txt<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> j<span class="token punctuation">,</span><span class="token class-name">N</span> <span class="token operator">=</span> pat<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token class-name">M</span><span class="token operator">&amp;&amp;</span>j <span class="token operator">&lt;</span> <span class="token class-name">N</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>txt<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">==</span> pat<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">)</span> j<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token punctuation">{</span> i <span class="token operator">=</span> i <span class="token operator">-</span> j<span class="token punctuation">;</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">==</span> <span class="token class-name">N</span><span class="token punctuation">)</span> <span class="token keyword">return</span> i <span class="token operator">-</span> <span class="token class-name">N</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>            <span class="token keyword">return</span> <span class="token class-name">M</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h3><p>KMPç®—æ³•å­˜åœ¨ä¸¤å¤§æ ¸å¿ƒï¼š1.è·å–æ¨¡å¼ä¸²çš„nextæ•°ç»„ã€2.åˆ©ç”¨nextæ•°ç»„è¿›è¡Œæ¨¡å¼åŒ¹é…</p><p><b style="color:hotpink">1.è·å–æ¨¡å¼ä¸²çš„nextæ•°ç»„</b> </p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">get_next</span><span class="token punctuation">(</span>String pat<span class="token punctuation">,</span> <span class="token keyword">int</span> next<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    next<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> txt<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">==</span> <span class="token number">0</span><span class="token operator">||</span> txt<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> txt<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            next<span class="token punctuation">[</span><span class="token operator">++</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">++</span>j<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            j <span class="token operator">=</span> next<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color:hotpink">2.åˆ©ç”¨nextæ•°ç»„è¿›è¡Œæ¨¡å¼åŒ¹é…</b> </p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">kmp</span><span class="token punctuation">(</span>String txt<span class="token punctuation">,</span> String pat<span class="token punctuation">,</span> <span class="token keyword">int</span> next<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;=</span>txt<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span>j<span class="token operator">&lt;=</span>pat<span class="token punctuation">,</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">==</span> <span class="token number">0</span><span class="token operator">||</span> txt<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> pat<span class="token punctuation">.</span>ch<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            i<span class="token operator">++</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            j <span class="token operator">=</span> next<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">&gt;</span>pat<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> i <span class="token operator">-</span> pat<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> algorithms </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé›†åˆæ¡†æ¶çš„åº”ç”¨</title>
      <link href="posts/25676.html"/>
      <url>posts/25676.html</url>
      
        <content type="html"><![CDATA[<h1 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h1><h2 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h2><h3 id="æ›´æ–°æ˜ å°„é¡¹"><a href="#æ›´æ–°æ˜ å°„é¡¹" class="headerlink" title="æ›´æ–°æ˜ å°„é¡¹"></a>æ›´æ–°æ˜ å°„é¡¹</h3><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ•£åˆ—è¡¨å»ç»Ÿè®¡æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ã€‚</p><blockquote><p>æ¯”å¦‚[1,2,3,4,5,5,7,7,8,8,8,9,0,4,6,2,7,8,1,3,5,7,9,0,7,5,4,3,3,2]</p><p>æ•°å­—: 0 å‡ºç°çš„æ¬¡æ•°:2<br>æ•°å­—: 1 å‡ºç°çš„æ¬¡æ•°:2<br>æ•°å­—: 2 å‡ºç°çš„æ¬¡æ•°:3<br>æ•°å­—: 3 å‡ºç°çš„æ¬¡æ•°:4<br>æ•°å­—: 4 å‡ºç°çš„æ¬¡æ•°:3<br>æ•°å­—: 5 å‡ºç°çš„æ¬¡æ•°:4<br>æ•°å­—: 6 å‡ºç°çš„æ¬¡æ•°:1<br>æ•°å­—: 7 å‡ºç°çš„æ¬¡æ•°:5<br>æ•°å­—: 8 å‡ºç°çš„æ¬¡æ•°:4<br>æ•°å­—: 9 å‡ºç°çš„æ¬¡æ•°:2</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> numbers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> <span class="token function">frequency</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> kv <span class="token operator">:</span> set<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ•°å­—: "</span><span class="token operator">+</span>kv<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" å‡ºç°çš„æ¬¡æ•°:"</span><span class="token operator">+</span>kv<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">frequency</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>map<span class="token punctuation">.</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// æ ¸å¿ƒä»£ç </span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span>  map<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œçš„æ ¸å¿ƒä»£ç ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¯ä»¥è¡¨ç¤ºæˆï¼š<code>map.put(i,map.get(i)+1)</code>ã€‚ä½†æ˜¯è¿™ç§ç®€å•æ–¹å¼ä¼šå¯¼è‡´ä¸€ç§å¼‚å¸¸æƒ…å†µã€‚ä¹Ÿå°±æ˜¯iæœ¬èº«ä¸å­˜åœ¨mapä¸­ï¼Œé‚£ä¹ˆ<code>get</code>æ“ä½œå°†ä¼šæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸</p><p>æ‰€ä»¥å°†æ ¸å¿ƒä»£ç æ›¿æ¢æˆ<code>map.put(i,map.getOrDefault(i,0)+1)</code>ã€‚ç¡®ä¿iä¸åœ¨mapæ—¶ï¼Œå¯ä»¥ä½¿ç”¨é»˜è®¤å€¼0</p><p>å½“ç„¶è¿˜å¯ä»¥ä½¿ç”¨æ›´åŠ é«˜çº§çš„æ“ä½œï¼š<code>map.merge(i,1,Integer::sum)</code></p><h3 id="è·å–æ˜ å°„è§†å›¾"><a href="#è·å–æ˜ å°„è§†å›¾" class="headerlink" title="è·å–æ˜ å°„è§†å›¾"></a>è·å–æ˜ å°„è§†å›¾</h3><p><strong>Javaé›†åˆæ¡†æ¶å¹¶æ²¡æœ‰è®¤ä¸ºmapæ˜¯ä¸€ç§é›†åˆï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æä¾›mapæä¾›çš„æ–¹æ³•è·å–mapçš„è§†å›¾</strong>ã€‚</p><p><code>Set&lt;K&gt; keySet()</code><br><code>Collection&lt;V&gt; values()</code><br><code>Set&lt;Map.Entry&lt;K, V&gt;&gt; entrySet()</code></p><p>é€šè¿‡ä¸Šé¢ä¸‰ç§æ–¹æ³•ä¾æ¬¡æˆ‘ä»¬å¯ä»¥è·å–mapçš„ï¼šé”®å€¼å¯¹è§†å›¾ã€å€¼é›†è§†å›¾ã€é”®é›†è§†å›¾ã€‚<strong>æˆ‘ä»¬å¯¹è§†å›¾åªèƒ½åšåˆ é™¤æ“ä½œï¼Œä¸èƒ½åˆ©ç”¨é›†åˆæ¥å£çš„æ–¹æ³•è¿›è¡Œå…ƒç´ æ·»åŠ ã€‚</strong></p><h1 id="List"><a href="#List" class="headerlink" title="List"></a>List</h1><h2 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h2>]]></content>
      
      
      <categories>
          
          <category> CoreJava </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HashMapåº•å±‚åŸç†</title>
      <link href="posts/10092.html"/>
      <url>posts/10092.html</url>
      
        <content type="html"><![CDATA[<h1 id="HashMap"><a href="#HashMap" class="headerlink" title="HashMap"></a>HashMap</h1><p>åŸºäºå“ˆå¸Œè¡¨çš„ <code>Map</code> æ¥å£çš„å®ç°ã€‚æ­¤å®ç°æä¾›æ‰€æœ‰å¯é€‰çš„æ˜ å°„æ“ä½œï¼Œå¹¶å…è®¸ä½¿ç”¨ <code>null</code> å€¼å’Œ <code>null</code>  é”®ã€‚ï¼ˆé™¤äº†éåŒæ­¥å’Œå…è®¸ä½¿ç”¨ null ä¹‹å¤–ï¼Œ<code>HashMap</code> ç±»ä¸ <code>Hashtable</code>  å¤§è‡´ç›¸åŒã€‚ï¼‰æ­¤ç±»ä¸ä¿è¯æ˜ å°„çš„é¡ºåºï¼Œç‰¹åˆ«æ˜¯å®ƒä¸ä¿è¯è¯¥é¡ºåºæ’ä¹…ä¸å˜ã€‚ </p><p>æ­¤å®ç°å‡å®šå“ˆå¸Œå‡½æ•°å°†å…ƒç´ é€‚å½“åœ°åˆ†å¸ƒåœ¨å„æ¡¶ä¹‹é—´ï¼Œå¯ä¸ºåŸºæœ¬æ“ä½œï¼ˆ<code>get</code> å’Œ <code>put</code>ï¼‰æä¾›ç¨³å®šçš„æ€§èƒ½ã€‚è¿­ä»£  collection è§†å›¾æ‰€éœ€çš„æ—¶é—´ä¸ <code>HashMap</code>  å®ä¾‹çš„â€œå®¹é‡â€ï¼ˆæ¡¶çš„æ•°é‡ï¼‰åŠå…¶å¤§å°ï¼ˆé”®-å€¼æ˜ å°„å…³ç³»æ•°ï¼‰æˆæ¯”ä¾‹ã€‚æ‰€ä»¥ï¼Œå¦‚æœè¿­ä»£æ€§èƒ½å¾ˆé‡è¦ï¼Œåˆ™ä¸è¦å°†åˆå§‹å®¹é‡è®¾ç½®å¾—å¤ªé«˜ï¼ˆæˆ–å°†åŠ è½½å› å­è®¾ç½®å¾—å¤ªä½ï¼‰ã€‚ </p><p><code>HashMap</code> çš„å®ä¾‹æœ‰ä¸¤ä¸ªå‚æ•°å½±å“å…¶æ€§èƒ½ï¼š<em>åˆå§‹å®¹é‡</em> å’Œ<em>åŠ è½½å› å­</em>ã€‚<em>å®¹é‡</em>  æ˜¯å“ˆå¸Œè¡¨ä¸­æ¡¶çš„æ•°é‡ï¼Œåˆå§‹å®¹é‡åªæ˜¯å“ˆå¸Œè¡¨åœ¨åˆ›å»ºæ—¶çš„å®¹é‡ã€‚<em>åŠ è½½å› å­</em>  æ˜¯å“ˆå¸Œè¡¨åœ¨å…¶å®¹é‡è‡ªåŠ¨å¢åŠ ä¹‹å‰å¯ä»¥è¾¾åˆ°å¤šæ»¡çš„ä¸€ç§å°ºåº¦ã€‚å½“å“ˆå¸Œè¡¨ä¸­çš„æ¡ç›®æ•°è¶…å‡ºäº†åŠ è½½å› å­ä¸å½“å‰å®¹é‡çš„ä¹˜ç§¯æ—¶ï¼Œåˆ™è¦å¯¹è¯¥å“ˆå¸Œè¡¨è¿›è¡Œ <em>rehash</em>  æ“ä½œï¼ˆå³é‡å»ºå†…éƒ¨æ•°æ®ç»“æ„ï¼‰ï¼Œä»è€Œå“ˆå¸Œè¡¨å°†å…·æœ‰å¤§çº¦ä¸¤å€çš„æ¡¶æ•°ã€‚ </p><p>é€šå¸¸ï¼Œé»˜è®¤åŠ è½½å› å­ (.75) åœ¨æ—¶é—´å’Œç©ºé—´æˆæœ¬ä¸Šå¯»æ±‚ä¸€ç§æŠ˜è¡·ã€‚åŠ è½½å› å­è¿‡é«˜è™½ç„¶å‡å°‘äº†ç©ºé—´å¼€é”€ï¼Œä½†åŒæ—¶ä¹Ÿå¢åŠ äº†æŸ¥è¯¢æˆæœ¬ï¼ˆåœ¨å¤§å¤šæ•°  <code>HashMap</code> ç±»çš„æ“ä½œä¸­ï¼ŒåŒ…æ‹¬ <code>get</code> å’Œ <code>put</code>  æ“ä½œï¼Œéƒ½åæ˜ äº†è¿™ä¸€ç‚¹ï¼‰ã€‚åœ¨è®¾ç½®åˆå§‹å®¹é‡æ—¶åº”è¯¥è€ƒè™‘åˆ°æ˜ å°„ä¸­æ‰€éœ€çš„æ¡ç›®æ•°åŠå…¶åŠ è½½å› å­ï¼Œä»¥ä¾¿æœ€å¤§é™åº¦åœ°å‡å°‘ rehash  æ“ä½œæ¬¡æ•°ã€‚å¦‚æœåˆå§‹å®¹é‡å¤§äºæœ€å¤§æ¡ç›®æ•°é™¤ä»¥åŠ è½½å› å­ï¼Œåˆ™ä¸ä¼šå‘ç”Ÿ rehash æ“ä½œã€‚ </p><p>å¦‚æœå¾ˆå¤šæ˜ å°„å…³ç³»è¦å­˜å‚¨åœ¨ <code>HashMap</code> å®ä¾‹ä¸­ï¼Œåˆ™ç›¸å¯¹äºæŒ‰éœ€æ‰§è¡Œè‡ªåŠ¨çš„ rehash  æ“ä½œä»¥å¢å¤§è¡¨çš„å®¹é‡æ¥è¯´ï¼Œä½¿ç”¨è¶³å¤Ÿå¤§çš„åˆå§‹å®¹é‡åˆ›å»ºå®ƒå°†ä½¿å¾—æ˜ å°„å…³ç³»èƒ½æ›´æœ‰æ•ˆåœ°å­˜å‚¨ã€‚ </p><p><strong>æ³¨æ„ï¼Œæ­¤å®ç°ä¸æ˜¯åŒæ­¥çš„ã€‚</strong>å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªå“ˆå¸Œæ˜ å°„ï¼Œè€Œå…¶ä¸­è‡³å°‘ä¸€ä¸ªçº¿ç¨‹ä»ç»“æ„ä¸Šä¿®æ”¹äº†è¯¥æ˜ å°„ï¼Œåˆ™å®ƒ<em>å¿…é¡»</em>  ä¿æŒå¤–éƒ¨åŒæ­¥ã€‚ï¼ˆç»“æ„ä¸Šçš„ä¿®æ”¹æ˜¯æŒ‡æ·»åŠ æˆ–åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæ˜ å°„å…³ç³»çš„ä»»ä½•æ“ä½œï¼›ä»…æ”¹å˜ä¸å®ä¾‹å·²ç»åŒ…å«çš„é”®å…³è”çš„å€¼ä¸æ˜¯ç»“æ„ä¸Šçš„ä¿®æ”¹ã€‚ï¼‰è¿™ä¸€èˆ¬é€šè¿‡å¯¹è‡ªç„¶å°è£…è¯¥æ˜ å°„çš„å¯¹è±¡è¿›è¡ŒåŒæ­¥æ“ä½œæ¥å®Œæˆã€‚å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„å¯¹è±¡ï¼Œåˆ™åº”è¯¥ä½¿ç”¨  Collections.synchronizedMap  æ–¹æ³•æ¥â€œåŒ…è£…â€è¯¥æ˜ å°„ã€‚æœ€å¥½åœ¨åˆ›å»ºæ—¶å®Œæˆè¿™ä¸€æ“ä½œï¼Œä»¥é˜²æ­¢å¯¹æ˜ å°„è¿›è¡Œæ„å¤–çš„éåŒæ­¥è®¿é—®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-none"><code class="language-none">Map m = Collections.synchronizedMap(new HashMap(...));<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç”±æ‰€æœ‰æ­¤ç±»çš„â€œcollection è§†å›¾æ–¹æ³•â€æ‰€è¿”å›çš„è¿­ä»£å™¨éƒ½æ˜¯<em>å¿«é€Ÿå¤±è´¥</em>  çš„ï¼šåœ¨è¿­ä»£å™¨åˆ›å»ºä¹‹åï¼Œå¦‚æœä»ç»“æ„ä¸Šå¯¹æ˜ å°„è¿›è¡Œä¿®æ”¹ï¼Œé™¤éé€šè¿‡è¿­ä»£å™¨æœ¬èº«çš„ <code>remove</code> æ–¹æ³•ï¼Œå…¶ä»–ä»»ä½•æ—¶é—´ä»»ä½•æ–¹å¼çš„ä¿®æ”¹ï¼Œè¿­ä»£å™¨éƒ½å°†æŠ›å‡º ConcurrentModificationExceptionã€‚å› æ­¤ï¼Œé¢å¯¹å¹¶å‘çš„ä¿®æ”¹ï¼Œè¿­ä»£å™¨å¾ˆå¿«å°±ä¼šå®Œå…¨å¤±è´¥ï¼Œè€Œä¸å†’åœ¨å°†æ¥ä¸ç¡®å®šçš„æ—¶é—´å‘ç”Ÿä»»æ„ä¸ç¡®å®šè¡Œä¸ºçš„é£é™©ã€‚ </p><p>æ³¨æ„ï¼Œè¿­ä»£å™¨çš„å¿«é€Ÿå¤±è´¥è¡Œä¸ºä¸èƒ½å¾—åˆ°ä¿è¯ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå­˜åœ¨éåŒæ­¥çš„å¹¶å‘ä¿®æ”¹æ—¶ï¼Œä¸å¯èƒ½ä½œå‡ºä»»ä½•åšå†³çš„ä¿è¯ã€‚å¿«é€Ÿå¤±è´¥è¿­ä»£å™¨å°½æœ€å¤§åŠªåŠ›æŠ›å‡º  <code>ConcurrentModificationException</code>ã€‚å› æ­¤ï¼Œç¼–å†™ä¾èµ–äºæ­¤å¼‚å¸¸çš„ç¨‹åºçš„åšæ³•æ˜¯é”™è¯¯çš„ï¼Œæ­£ç¡®åšæ³•æ˜¯ï¼š<em>è¿­ä»£å™¨çš„å¿«é€Ÿå¤±è´¥è¡Œä¸ºåº”è¯¥ä»…ç”¨äºæ£€æµ‹ç¨‹åºé”™è¯¯ã€‚</em> </p><p>æ­¤ç±»æ˜¯ Java  Collections Framework çš„æˆå‘˜</p><h2 id="é™æ€å¸¸é‡"><a href="#é™æ€å¸¸é‡" class="headerlink" title="é™æ€å¸¸é‡"></a>é™æ€å¸¸é‡</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// é»˜è®¤åˆå§‹å®¹é‡ä¸º16</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_INITIAL_CAPACITY <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// aka 16</span><span class="token comment">// æœ€å¤§å®¹é‡</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MAXIMUM_CAPACITY <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">30</span><span class="token punctuation">;</span><span class="token comment">// é»˜è®¤åŠ è½½å› å­ï¼ˆæ‰©å®¹çš„æ—¶æœºã€å‰è¾ˆç»éªŒã€æ¯‹åº¸ç½®ç–‘ï¼‰</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">float</span> DEFAULT_LOAD_FACTOR <span class="token operator">=</span> <span class="token number">0.75f</span><span class="token punctuation">;</span><span class="token comment">// é“¾è¡¨è½¬çº¢é»‘æ ‘çš„æœ€å°è¦æ±‚</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> TREEIFY_THRESHOLD <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span><span class="token comment">// çº¢é»‘æ ‘è½¬é“¾è¡¨çš„è¦æ±‚</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> UNTREEIFY_THRESHOLD <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span><span class="token comment">// æœ€å°æ ‘åŒ–è¦æ±‚ï¼šæ¡¶å®¹é‡è¦è¶…è¿‡64ï¼Œå¹¶ä¸”é“¾è¡¨é•¿åº¦æœ€å°ä¸º8</span><span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MIN_TREEIFY_CAPACITY <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// ç©ºå‚æ„é€ :default_bucket = 16  loadFacotr = 0.75</span><span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>loadFactor <span class="token operator">=</span> DEFAULT_LOAD_FACTOR<span class="token punctuation">;</span> <span class="token comment">// all other fields defaulted</span><span class="token punctuation">}</span><span class="token comment">// intæ„é€ ï¼šdefault_bucket = initialCapacity  loadFacotr = 0.75</span><span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">(</span>initialCapacity<span class="token punctuation">,</span> DEFAULT_LOAD_FACTOR<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// æŒ‡å®šå®¹é‡å’ŒåŠ è½½å› å­</span><span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">,</span> <span class="token keyword">float</span> loadFactor<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"Illegal initial capacity: "</span> <span class="token operator">+</span>                                           initialCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">&gt;</span> MAXIMUM_CAPACITY<span class="token punctuation">)</span>        initialCapacity <span class="token operator">=</span> MAXIMUM_CAPACITY<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>loadFactor <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token class-name">Float</span><span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>loadFactor<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"Illegal load factor: "</span> <span class="token operator">+</span>                                           loadFactor<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>loadFactor <span class="token operator">=</span> loadFactor<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>threshold <span class="token operator">=</span> <span class="token function">tableSizeFor</span><span class="token punctuation">(</span>initialCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// åˆ©ç”¨å·²æœ‰çš„mapåŸºç¡€ä¹‹ä¸Šæ„é€ æ–°çš„map</span><span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">K</span><span class="token punctuation">,</span> <span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>loadFactor <span class="token operator">=</span> DEFAULT_LOAD_FACTOR<span class="token punctuation">;</span>    <span class="token function">putMapEntries</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»æ„é€ å‡½æ•°å¯ä»¥çœ‹å‡ºï¼ŒåŸºæœ¬çš„æ¡¶æ•°ç»„éƒ½ä¸æ˜¯åœ¨æ„é€ å‡½æ•°æœŸé—´åˆ›å»ºçš„ï¼Œè€Œæ˜¯åœ¨putå‘hashmapä¸­åŠ å…ƒç´ æ—¶åˆ›å»ºçš„ã€‚</p><h1 id="put"><a href="#put" class="headerlink" title="put"></a>put</h1><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PutTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> maps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        maps<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"first"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        maps<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token string">"champion"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        maps<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">33</span><span class="token punctuation">,</span><span class="token string">"over"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        maps<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">49</span><span class="token punctuation">,</span><span class="token string">"over"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        maps<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">,</span><span class="token string">"over"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        maps<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">81</span><span class="token punctuation">,</span><span class="token string">"over"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        maps<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">97</span><span class="token punctuation">,</span><span class="token string">"over"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        maps<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">113</span><span class="token punctuation">,</span><span class="token string">"over"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        maps<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">129</span><span class="token punctuation">,</span><span class="token string">"over"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å› ä¸ºé“¾è¡¨é•¿åº¦å¤§äºç­‰äº8,è¿™é‡Œéœ€è¦æ ‘åŒ–æˆ–è€…æ‰©å®¹(è¿™é‡Œæ˜¯æ‰©å®¹)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ ¹æ®<code>maps.put(1,"first");</code>æ“ä½œæ·±å…¥åˆ°putæ“ä½œåº•å±‚æ‰§è¡Œé€»è¾‘ï¼</p><h2 id="putåˆå§‹åŒ–-æ‰©å®¹"><a href="#putåˆå§‹åŒ–-æ‰©å®¹" class="headerlink" title="putåˆå§‹åŒ–(æ‰©å®¹)"></a>putåˆå§‹åŒ–(æ‰©å®¹)</h2><p>â‘ ç‡å…ˆæ‰§è¡Œ<strong>put(K,V)</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">V</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token function">hash</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>â‘¡æ‰§è¡Œ<strong>putVal(int, K, V, boolean, boolean)</strong></p><p>hash-&gt;æ’å…¥é”®çš„å“ˆå¸Œå€¼</p><p>onlyIfAbsent-&gt;å¸ƒå°”å€¼ï¼Œå½“ä¸ºtrueæ—¶è¡¨ç¤ºï¼šä¸èƒ½è¦†ç›–åŸæœ‰çš„é”®å€¼</p><p>evict-&gt;å¸ƒå°”å€¼ï¼Œå½“ä¸ºfalseæ—¶è¡¨ç¤ºï¼šè¡¨æ­£åœ¨åˆ›å»º</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">final</span> <span class="token class-name">V</span> <span class="token function">putVal</span><span class="token punctuation">(</span><span class="token keyword">int</span> hash<span class="token punctuation">,</span> <span class="token class-name">K</span> key<span class="token punctuation">,</span> <span class="token class-name">V</span> value<span class="token punctuation">,</span> <span class="token keyword">boolean</span> onlyIfAbsent<span class="token punctuation">,</span>               <span class="token keyword">boolean</span> evict<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// tab:ä»£è¡¨ä¸´æ—¶çš„å“ˆå¸Œæ¡¶æ•°ç»„ p:æ‰§è¡Œå…ƒç´ çš„æŒ‡é’ˆ n:å“ˆå¸Œæ¡¶æ•° i:æ•°ç»„ä¸‹æ ‡</span>    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">;</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> p<span class="token punctuation">;</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> i<span class="token punctuation">;</span>        <span class="token comment">// è¿™æ­¥ä»…åœ¨åˆå§‹åŒ–ä½¿ç”¨ï¼Œå½“æ¡¶æ•°ç»„ä¸ºç©ºæ—¶ï¼Œè¿›è¡Œæ‰©å®¹æ“ä½œ</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>tab <span class="token operator">=</span> table<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        n <span class="token operator">=</span> <span class="token punctuation">(</span>tab <span class="token operator">=</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token comment">// å¦‚æœå‡ºç°å“ˆå¸Œå†²çªï¼Œåˆ™ä»¥é“¾è¡¨çš„å½¢å¼å­˜å‚¨ã€‚å¦åˆ™è¯¥ä½ç½®å°±æ˜¯å…ƒç´ ä½ç½®</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>p <span class="token operator">=</span> tab<span class="token punctuation">[</span>i <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> hash<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        tab<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">newNode</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆå§‹åŒ–æ—¶è¯¥æ­¥ä¸ä¼šæ‰§è¡Œ,(åªä¼šåœ¨å‡ºç°hashå†²çªæ—¶ï¼Œåº”ç”¨)</span>    <span class="token punctuation">}</span>    <span class="token operator">++</span>modCount<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>size <span class="token operator">&gt;</span> threshold<span class="token punctuation">)</span>        <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">afterNodeInsertion</span><span class="token punctuation">(</span>evict<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">}</span>       <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â‘¢æ‰§è¡Œresize()ï¼Œå°†hashæ•°ç»„æ‰©å®¹ï¼Œå¹¶å°†åŸæ•°ç»„å…ƒç´ åŠ å…¥åˆ°æ–°æ•°ç»„</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> oldTab <span class="token operator">=</span> table<span class="token punctuation">;</span>    <span class="token keyword">int</span> oldCap <span class="token operator">=</span> <span class="token punctuation">(</span>oldTab <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> oldTab<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">int</span> oldThr <span class="token operator">=</span> threshold<span class="token punctuation">;</span>    <span class="token keyword">int</span> newCap<span class="token punctuation">,</span> newThr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>oldCap <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆå§‹åŒ–æ—¶è¯¥æ­¥ä¸ä¼šæ‰§è¡Œ</span>    <span class="token punctuation">}</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>oldThr <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆå§‹åŒ–æ—¶è¯¥æ­¥ä¸ä¼šæ‰§è¡Œ</span>    <span class="token punctuation">}</span>     <span class="token keyword">else</span> <span class="token punctuation">{</span>                       newCap <span class="token operator">=</span> DEFAULT_INITIAL_CAPACITY<span class="token punctuation">;</span>        newThr <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>DEFAULT_LOAD_FACTOR <span class="token operator">*</span> DEFAULT_INITIAL_CAPACITY<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>newThr <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆå§‹åŒ–æ—¶è¯¥æ­¥ä¸ä¼šæ‰§è¡Œ</span>    <span class="token punctuation">}</span>    <span class="token comment">// ä¿®æ”¹æ¬¡hashmapçš„é¢„æœŸå€¼å’Œæ¡¶æ•°,newTab:è¡¨ç¤ºæ–°çš„hashæ•°ç»„</span>    threshold <span class="token operator">=</span> newThr<span class="token punctuation">;</span>    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> newTab <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">[</span>newCap<span class="token punctuation">]</span><span class="token punctuation">;</span>    table <span class="token operator">=</span> newTab<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>oldCap <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆå§‹åŒ–æ—¶è¯¥æ­¥ä¸ä¼šæ‰§è¡Œ</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> newTab<span class="token punctuation">;</span><span class="token punctuation">}</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="putå¤„ç†ç®€å•hashå†²çª"><a href="#putå¤„ç†ç®€å•hashå†²çª" class="headerlink" title="putå¤„ç†ç®€å•hashå†²çª"></a>putå¤„ç†ç®€å•hashå†²çª</h2><p>æˆ‘ä»¬æ¥ç€ä¸Šé¢çš„putVal()ä¸­å¤„ç†hashå†²çªçš„elseè¯­å¥å—</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">else</span> <span class="token punctuation">{</span>    <span class="token comment">// e:å…ƒç´ ç»“ç‚¹,k:ä»£è¡¨å½“å‰å…ƒç´ çš„keyå€¼</span>    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> e<span class="token punctuation">;</span> <span class="token class-name">K</span> k<span class="token punctuation">;</span>        <span class="token comment">// 1.æ’å…¥å…ƒç´ çš„é”®ä¸å†²çªé”®ç›¸åŒ</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span>        <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> p<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        e <span class="token operator">=</span> p<span class="token punctuation">;</span>    <span class="token comment">// 2.æ ‘åŒ–æ“ä½œ</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token keyword">instanceof</span> <span class="token class-name">TreeNode</span><span class="token punctuation">)</span>        e <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putTreeVal</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> tab<span class="token punctuation">,</span> hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 3.æ’å…¥é”®ä¸å†²çªé”®ä¸åŒ</span>    <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token comment">// è¯¥æ­»å¾ªç¯æ˜¯ä¸ºäº†å°†æ’å…¥K-VåŠ å…¥é“¾è¡¨ä¸­(è¦ä¹ˆæ ‘åŒ–ã€è¦ä¹ˆé“¾è¡¨å°¾æ’)</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> binCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">;</span> <span class="token operator">++</span>binCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// é“¾è¡¨å°¾</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                p<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token function">newNode</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>binCount <span class="token operator">&gt;=</span> TREEIFY_THRESHOLD <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// -1 for 1st</span>                    <span class="token function">treeifyBin</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> hash<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// åœ¨é“¾è¡¨ä¸Šå‘é€é”®å†²çª</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span>                <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> e<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            p <span class="token operator">=</span> e<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// è¦†ç›–åŸæœ‰é”®å€¼</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// existing mapping for key</span>        <span class="token class-name">V</span> oldValue <span class="token operator">=</span> e<span class="token punctuation">.</span>value<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>onlyIfAbsent <span class="token operator">||</span> oldValue <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            e<span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>        <span class="token function">afterNodeAccess</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="putæ‰©å®¹"><a href="#putæ‰©å®¹" class="headerlink" title="putæ‰©å®¹"></a>putæ‰©å®¹</h2><p>â‘ ä½•æ—¶æ‰©å®¹ä½•æ—¶æ ‘åŒ–</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">else</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> binCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">;</span> <span class="token operator">++</span>binCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            p<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token function">newNode</span><span class="token punctuation">(</span>hash<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// è¿™é‡Œå› ä¸ºæ’å…¥çš„129 å·²ç»è¶…è¿‡äº†é“¾è¡¨çš„æœ€å¤§é•¿åº¦é™åˆ¶ï¼Œæ­¤æ—¶éœ€è¦å†³å®šæ˜¯æ‰©å®¹è¿˜æ˜¯æ ‘åŒ–</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>binCount <span class="token operator">&gt;=</span> TREEIFY_THRESHOLD <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// -1 for 1st</span>                <span class="token function">treeifyBin</span><span class="token punctuation">(</span>tab<span class="token punctuation">,</span> hash<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>hash <span class="token operator">==</span> hash <span class="token operator">&amp;&amp;</span>            <span class="token punctuation">(</span><span class="token punctuation">(</span>k <span class="token operator">=</span> e<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> key <span class="token operator">||</span> <span class="token punctuation">(</span>key <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        p <span class="token operator">=</span> e<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â‘¡å†³å®šç°åœ¨æ ‘åŒ–æ“ä½œï¼šæ˜¯è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œè¿˜æ˜¯è¿›è¡Œæ ‘åŒ–</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">treeifyBin</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> tab<span class="token punctuation">,</span> <span class="token keyword">int</span> hash<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> index<span class="token punctuation">;</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> e<span class="token punctuation">;</span>    <span class="token comment">// å› ä¸ºæ¡¶æ•°ä¸è¶³å¯¼è‡´æ‰©å®¹</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>tab <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token punctuation">(</span>n <span class="token operator">=</span> tab<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">&lt;</span> MIN_TREEIFY_CAPACITY<span class="token punctuation">)</span>        <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> tab<span class="token punctuation">[</span>index <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> hash<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// æ ‘åŒ–:åœ¨æ»¡è¶³æ¡¶æ•°å¤§äºç­‰äº64ã€é“¾è¡¨é•¿åº¦å¤§äºç­‰äº8è¿›è¡Œ</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â‘¢resize</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// ä¿®æ”¹æ–°çš„æ¡¶æ•°å’Œé¢„æœŸå€¼</span><span class="token keyword">if</span> <span class="token punctuation">(</span>oldCap <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>oldCap <span class="token operator">&gt;=</span> MAXIMUM_CAPACITY<span class="token punctuation">)</span> <span class="token punctuation">{</span>        threshold <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">;</span>        <span class="token keyword">return</span> oldTab<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>newCap <span class="token operator">=</span> oldCap <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token generics"><span class="token punctuation">&lt;</span> MAXIMUM_CAPACITY <span class="token operator">&amp;</span><span class="token operator">&amp;</span>             oldCap <span class="token punctuation">&gt;</span></span><span class="token operator">=</span> DEFAULT_INITIAL_CAPACITY<span class="token punctuation">)</span>        newThr <span class="token operator">=</span> oldThr <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// double threshold</span><span class="token punctuation">}</span><span class="token comment">// å¦‚æœæ‰©å®¹å‰çš„æ•°ç»„å­˜åœ¨å…ƒç´ ï¼Œåˆ™éœ€è¦å°†æ•°ç»„ç§»åŠ¨åˆ°æ‰©å®¹åçš„æ•°ç»„ï¼ˆæ•°æ®è¿ç§»è¿‡ç¨‹ï¼‰</span><span class="token keyword">if</span> <span class="token punctuation">(</span>oldTab <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> oldCap<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> e<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> oldTab<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            oldTab<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>                newTab<span class="token punctuation">[</span>e<span class="token punctuation">.</span>hash <span class="token operator">&amp;</span> <span class="token punctuation">(</span>newCap <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">TreeNode</span><span class="token punctuation">)</span>                <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">TreeNode</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> newTab<span class="token punctuation">,</span> j<span class="token punctuation">,</span> oldCap<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// preserve order</span>                <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> loHead <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> loTail <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> hiHead <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> hiTail <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">K</span><span class="token punctuation">,</span><span class="token class-name">V</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>                <span class="token keyword">do</span> <span class="token punctuation">{</span>                    next <span class="token operator">=</span> e<span class="token punctuation">.</span>next<span class="token punctuation">;</span>                    <span class="token comment">// è¿™æ­¥çš„ä¸è¿ç®—çš„å¦™å¤„åœ¨äºï¼šç¡®å®šäº†æ‰©å®¹åé“¾è¡¨å…ƒç´ æ‰€åœ¨æ¡¶çš„ä½ç½®</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>hash <span class="token operator">&amp;</span> oldCap<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>loTail <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>                            loHead <span class="token operator">=</span> e<span class="token punctuation">;</span>                        <span class="token keyword">else</span>                            loTail<span class="token punctuation">.</span>next <span class="token operator">=</span> e<span class="token punctuation">;</span>                        loTail <span class="token operator">=</span> e<span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">else</span> <span class="token punctuation">{</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>hiTail <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>                            hiHead <span class="token operator">=</span> e<span class="token punctuation">;</span>                        <span class="token keyword">else</span>                            hiTail<span class="token punctuation">.</span>next <span class="token operator">=</span> e<span class="token punctuation">;</span>                        hiTail <span class="token operator">=</span> e<span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e <span class="token operator">=</span> next<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>loTail <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    loTail<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                    newTab<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> loHead<span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>hiTail <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    hiTail<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                    newTab<span class="token punctuation">[</span>j <span class="token operator">+</span> oldCap<span class="token punctuation">]</span> <span class="token operator">=</span> hiHead<span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="putæµç¨‹å›¾"><a href="#putæµç¨‹å›¾" class="headerlink" title="putæµç¨‹å›¾"></a>putæµç¨‹å›¾</h2><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210412224345.png" style="width:80%">]]></content>
      
      
      <categories>
          
          <category> CoreJava </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring5</title>
      <link href="posts/22726.html"/>
      <url>posts/22726.html</url>
      
        <content type="html"><![CDATA[<h1 id="SpringåŸºç¡€"><a href="#SpringåŸºç¡€" class="headerlink" title="SpringåŸºç¡€"></a>SpringåŸºç¡€</h1><h2 id="Springèµ·æ­¥"><a href="#Springèµ·æ­¥" class="headerlink" title="Springèµ·æ­¥"></a>Springèµ·æ­¥</h2><h3 id="SpringåŸºæœ¬æ¦‚å¿µ"><a href="#SpringåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="SpringåŸºæœ¬æ¦‚å¿µ"></a>SpringåŸºæœ¬æ¦‚å¿µ</h3><p><strong>Spring</strong>çš„æ ¸å¿ƒå°±æ˜¯å®¹å™¨ï¼ˆcontainerï¼‰ï¼Œä¹Ÿå°±æ˜¯<b style="color: hotpink;">SpringApplicationContextï¼ˆSpringåº”ç”¨ä¸Šä¸‹æ–‡ï¼‰</b><br>Springåº”ç”¨æ˜¯ç”±è‹¥å¹²ä¸ªç»„ä»¶ï¼ˆcomponentï¼‰æ„æˆï¼Œä¹Ÿå°±æ˜¯<b style="color: hotpink;">bean</b>ã€‚å¹¶ä¸”åˆ©ç”¨Springåº”ç”¨ä¸Šä¸‹æ–‡è¿›è¡Œç»„ä»¶çš„åˆ›å»ºå’Œç®¡ç†ï¼</p><p>Springç»„ä»¶è£…é…çš„æ–¹å¼é‡‡ç”¨äº†<strong>ä¾èµ–æ³¨å…¥ï¼ˆDependency Injection DIï¼‰</strong>ï¼Œè¿™æ ·åšçš„å¥½å¤„å°±åœ¨äºç»„ä»¶ä¸éœ€è¦å†åˆ›å»ºç®¡ç†è‡ªå·±æ‰€ä¾èµ–ç»„ä»¶åŠç”Ÿå‘½å‘¨æœŸï¼è€Œæ˜¯äº¤ç”±Springåº”ç”¨ä¸Šä¸‹æ–‡å°†ç»„ä»¶æ³¨å…¥åˆ°éœ€è¦å®ƒä»¬çš„beanä¸­ï¼é€šå¸¸æ˜¯åˆ©ç”¨æ„é€ å™¨å‚æ•°å’Œå±æ€§è®¿é—®æ–¹æ³•æ¥å®ç°çš„ã€‚</p><p>ä¸¾ä¸ªæ —å­âœ¨</p><p>ç°åœ¨åœ¨æˆ‘çš„Springå®¹å™¨ä¸­å­˜åœ¨ä¸¤ä¸ªç»„ä»¶ï¼šProductServiceå’ŒInventoryServiceï¼Œå¹¶ä¸”å‰è€…ä¾èµ–åè€…ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é‡‡ç”¨DIçš„æ–¹å¼ï¼Œå°†è¿™ä¸¤ä¸ªç»„ä»¶æ³¨å…¥åˆ°Springå®¹å™¨ä¸­ï¼Springå°†ä¾èµ–çš„InventoryServiceæ³¨å…¥åˆ°ProductServiceä¸­ï¼</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210408203037.png" style="width:75%"><p>ä¸Šé¢æåˆ°äº†ä¾èµ–æ³¨å…¥çš„è¿‡ç¨‹ï¼Œé‚£ä¹ˆå°±éœ€è¦è¿›è¡Œä»£ç æ¼”ç¤ºï¼Œå°†beanæ³¨å…¥åˆ°Speingå®¹å™¨çš„ä¸¤ç§æ–¹å¼</p><p>1ï¼‰XMLé…ç½®</p><p>2ï¼‰Javaæ³¨è§£</p><p><b style="background-color: black;color: white;">XMLé…ç½®</b></p><p>xmlä¸»è¦æè¿°åœ¨Springä¸Šä¸‹æ–‡ï¼ˆå®¹å™¨ï¼‰ä¸­<strong>å­˜åœ¨å“ªäº›ç»„ä»¶</strong>ï¼Ÿä»¥åŠå„ä¸ªç»„ä»¶ä¹‹é—´çš„<strong>å…³è”å…³ç³»</strong>ï¼Ÿ</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>inventoryService<span class="token punctuation">"</span></span>       <span class="token attr-name">class</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>cn.matemaster.InventoryService<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>productService<span class="token punctuation">"</span></span>       <span class="token attr-name">class</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>cn.matemaster.ProductService<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>inventoryService<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="background-color: black;color: white;">Javaæ³¨è§£</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServiceConfiguration</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">InventoryService</span> <span class="token function">inventoryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">InventoryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">ProductService</span> <span class="token function">productService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ProductService</span><span class="token punctuation">(</span><span class="token function">inventoryService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: green;">å…³äºJavaæ³¨è§£çš„å«ä¹‰</b></p><p>â‘  <strong>@Configurationæ³¨è§£</strong>å‘ŠçŸ¥Springè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œä¼šä¸ºSpringåº”ç”¨ä¸Šä¸‹æ–‡æä¾›bean</p><p>â‘¡ <strong>@Beanæ³¨è§£</strong>è¡¨æ˜è¯¥æ–¹æ³•è¿”å›çš„å¯¹è±¡å°†ä¼šä»¥beançš„æ–¹å¼æ³¨å…¥åˆ°Springå®¹å™¨ï¼ˆé»˜è®¤æƒ…å†µï¼šbeanå¯¹åº”çš„bean IDå°†ä¼šä¸æ–¹æ³•åç§°ç›¸åŒï¼‰</p><p>å…³äºxmlé…ç½®å’ŒJavaæ³¨è§£ï¼Œå®ƒä»¬éƒ½æ˜¯ä¾èµ–æ³¨å…¥çš„æ˜¾ç¤ºé…ç½®æ–¹å¼ï¼å½“ç„¶SpringæŠ€æœ¯è¿˜æä¾›äº†å¼ºå¤§çš„<strong>è‡ªåŠ¨é…ç½®</strong>åŠŸèƒ½ã€‚<b style="color: silver;">è‡ªåŠ¨é…ç½®ä¸»è¦èµ·æºè‡ªï¼šè‡ªåŠ¨è£…é… å’Œ ç»„ä»¶æ‰«æ</b>ã€‚å€ŸåŠ©ç»„ä»¶æ‰«ææŠ€æœ¯ï¼ŒSpringå¯ä»¥è‡ªåŠ¨å‘ç°ç±»è·¯å¾„ä¸‹çš„ç»„ä»¶ï¼Œå¹¶ä¸”å°†å®ƒä»¬åˆ›å»ºæˆSpringåº”ç”¨ä¸Šä¸‹æ–‡çš„beanã€‚åœ¨å€ŸåŠ©è‡ªåŠ¨è£…é…æŠ€æœ¯ï¼ŒSpringè‡ªåŠ¨ä¸ºç»„ä»¶æ³¨å…¥ä»–ä»¬æ‰€ä¾èµ–çš„beanï¼</p><h3 id="åˆå§‹åŒ–Springé¡¹ç›®"><a href="#åˆå§‹åŒ–Springé¡¹ç›®" class="headerlink" title="åˆå§‹åŒ–Springé¡¹ç›®"></a>åˆå§‹åŒ–Springé¡¹ç›®</h3><h4 id="æ„å»ºæ­¥éª¤"><a href="#æ„å»ºæ­¥éª¤" class="headerlink" title="æ„å»ºæ­¥éª¤"></a>æ„å»ºæ­¥éª¤</h4><p>ä¸ºäº†æ–¹ä¾¿å¿«æ·çš„æ„å»ºSpringé¡¹ç›®éª¨æ¶ï¼Œå°†è‡ªå·±çš„ä¸»è¦ç²¾åŠ›æ”¾åœ¨Springåº”ç”¨ä»£ç çš„ç¼–å†™ä¸Šã€‚<br>è¿™é‡ŒåŸºäº<b style="background-color: black;color: white;">JetBrains IntelliJ IDEA</b>å¹³å°ä½¿ç”¨<b style="background-color: black;color: white;">Spring Initializr</b>åˆå§‹åŒ–åº”ç”¨</p><p>1ï¼‰æ–°å»ºSpring Initilazr</p><p>2ï¼‰é…ç½®é¡¹ç›®çš„ç›¸å…³ä¿¡æ¯</p><p>3ï¼‰å¯¼å…¥é¡¹ç›®çš„ä¾èµ–</p><p>4ï¼‰é€‰æ‹©é¡¹ç›®çš„å­˜å‚¨è·¯å¾„</p><p>â‘  å»ºç«‹Spring Initilazrã€é€‰æ‹©é¡¹ç›®çš„SDK</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210408150416.jpg" style="width:50%"><p>â‘¡ é…ç½®å¥½é¡¹ç›®æ‰€å±ã€åç§°ã€Mavenã€å¼€å‘è¯­è¨€ã€è¯­è¨€ç‰ˆæœ¬ã€æè¿°ä¿¡æ¯â€¦</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210408150610.jpg" style="width:50%"><p>â‘¢ é€‰æ‹©éœ€è¦å¯¼å…¥é¡¹ç›®çš„ä¾èµ–</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210408150808.jpg" style="width:50%"><p>â‘£ é€‰æ‹©é¡¹ç›®å­˜å‚¨è·¯å¾„</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210408150812.jpg" style="width:50%"><h4 id="é¡¹ç›®çš„ç»“æ„"><a href="#é¡¹ç›®çš„ç»“æ„" class="headerlink" title="é¡¹ç›®çš„ç»“æ„"></a>é¡¹ç›®çš„ç»“æ„</h4><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210408160334.jpg" style="width:100%;border:solid"><p><b style="color: skyblue;">TacoCloudApplication.java</b>ï¼šSprint Bootçš„ä¸»ç±»</p><p><b style="color: limegreen;">application.properties</b>ï¼šæŒ‡å®šé…ç½®å±æ€§çš„æ–‡ä»¶</p><p><b style="color: skyblue;">TacoCloudApplicationTests.java</b>ï¼šSpring Bootçš„æµ‹è¯•ç±»</p><p><b style="color: gray;">mvnw/mvnw.cmd</b>ï¼šMavenåŒ…è£…å™¨çš„è„šæœ¬</p><p><b style="color: silver;">static</b>ï¼šå­˜å‚¨é¡¹ç›®çš„é™æ€èµ„æºï¼ˆå›¾ç‰‡.css .jsï¼‰</p><p><b style="color: silver;">templates</b>ï¼šå­˜æ”¾ç”¨æ¥æ¸²æŸ“å†…å®¹åˆ°æµè§ˆå™¨çš„æ¨¡æ¿æ–‡ä»¶</p><p><b style="color: blue;">pom.xml</b>ï¼šMavené¡¹ç›®çš„æ„å»ºè§„èŒƒ</p><p><b style="background-color: black;color: white;">åˆå§‹Mavenæ„å»ºè§„èŒƒï¼špom.xml</b></p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.4.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>taco-cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>taco-cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Demo project for Spring Boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Spring Boot starterä¾èµ–çš„ç‰¹åˆ«ä¹‹å¤„ï¼šå®ƒä»¬æœ¬èº«å¹¶ä¸åŒ…å«åº“çš„ä»£ç ï¼Œè€Œæ˜¯ä¼ é€’æ€§çš„æ‹‰å»å…¶ä»–çš„åº“ã€‚</p><ul><li>æ„å»ºæ–‡ä»¶å˜å°ï¼Œå› ä¸ºä¸å¿…è¦ä¸ºæ¯ä¸€ä¸ªåº“å£°æ˜ä¾èµ–</li><li>ä¸ç”¨æ‹…å¿ƒåº“çš„ç‰ˆæœ¬é—®é¢˜</li></ul><p>spring-boot-maven-pluginæ’ä»¶</p><ul><li>å¯ä»¥ä½¿ç”¨mavenå‘½ä»¤è¿è¡Œé¡¹ç›®</li><li>ç¡®ä¿æ‰€æœ‰ä¾èµ–åº“éƒ½æ‰“åŒ…åœ¨jaræ–‡ä»¶ä¸­</li><li>ä¼šåœ¨jaræ–‡ä»¶ç”Ÿæˆä¸€ä¸ªmanifestæ–‡ä»¶ï¼Œå°†TacoCloudApplicationå£°æ˜ä¸ºjarçš„ä¸»ç±»</li></ul><p><b style="background-color: black;color: white;">SpringBootä¸»ç±»</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>tacocloud</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">;</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TacoCloudApplication</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">TacoCloudApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: gray;">@SpringBootApplication</b>ï¼šè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªSpringBootåº”ç”¨ï¼Œå¹¶ä¸”è¿™è¿˜æ˜¯å¤åˆæ³¨è§£ã€‚å®ƒç»„åˆäº†ä¸‹é¢å‡ ä¸ªæ³¨è§£</p><ul><li>@SpringBootConfigurationï¼šå°†è¯¥ç±»å£°æ˜ä¸ºé…ç½®ç±»</li><li>@EnableAutoConfigurationï¼šå¯åŠ¨SpringBootçš„è‡ªåŠ¨é…ç½®</li><li>@ComponentScanï¼šå¯ç”¨ç»„ä»¶æ‰«æ</li></ul><p><b style="color: gray;">SpringApplication.run(Class&lt;?&gt; primarySource, Stringâ€¦ args)</b>ï¼šåˆ›å»ºä¸€ä¸ªSpringåº”ç”¨ä¸Šä¸‹æ–‡</p><p><b style="background-color: black;color: white;">Springæµ‹è¯•ç±»</b></p><p>è¿™é‡Œçš„ç±»çš„æƒé™å’Œæ–¹æ³•æƒé™å¿…é¡»å…¨éƒ¨æ˜¯public</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">ackage com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>tacocloud<span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span><span class="token class-name">RunWith</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">SpringBootTest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span></span><span class="token class-name">SpringRunner</span><span class="token punctuation">;</span><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SpringBootTest</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TacoCloudApplicationTests</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: gray;">@RunWith(SpringRunner.class)</b>ï¼šRunWith(runner)å¯ä»¥è§†ä¸ºJUnitçš„ä¸€ä¸ªæ’ä»¶ï¼Œä»–ä¼šæä¾›ä¸€ä¸ªæµ‹è¯•è¿è¡Œå™¨runneræ¥æŒ‡å¯¼JUnitå¦‚ä½•è¿è¡Œæµ‹è¯•<br><b style="color: gray;">SpringRunner</b>ï¼šSpringæä¾›æ”¾å…¥ä¸€ä¸ªæµ‹è¯•è¿è¡Œå™¨ï¼Œå®ƒä¼šåˆ›å»ºè¿è¡Œéœ€è¦çš„Springåº”ç”¨ä¸Šä¸‹æ–‡<br><b style="color: gray;">@SpringBootTest</b>ï¼šå°†è¯¥ç±»æ ‡æ³¨ä¸ºæµ‹è¯•ç±»ï¼Œç­‰åŒäºè¿è¡Œmain()ä¸­çš„SpringApplication.run()</p><h3 id="ç¼–å†™é¡¹ç›®ä»£ç "><a href="#ç¼–å†™é¡¹ç›®ä»£ç " class="headerlink" title="ç¼–å†™é¡¹ç›®ä»£ç "></a>ç¼–å†™é¡¹ç›®ä»£ç </h3><p>è¿™é‡Œå°±ç®€å•çš„ç»™è‡ªå·±çš„åº”ç”¨å†™ä¸€ä¸ªä¸»é¡µç«™ç‚¹ï¼Œå½“æœ¬åœ°æµè§ˆå™¨é€šè¿‡ <b style="color: skyblue;"><a href="http://localhost:8080/">http://localhost:8080</a></b>ç«¯å£è¿›è¡Œä¸»é¡µçš„è®¿é—®æ—¶ï¼Œæˆ‘ä»¬ç¼–å†™çš„æ§åˆ¶å™¨å°†è¿”å›ä¸€ä¸ªä¸»é¡µçš„è§†å›¾ï¼Œç”¨äºæ¬¢è¿é¡¾å®¢ï¼</p><p>â‘ ç¼–å†™å¤„ç†webè¯·æ±‚çš„æ§åˆ¶å™¨</p><p><b style="background-color: black;color: white;">HomeController</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>tacocloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Controller</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HomeController</span> <span class="token punctuation">{</span>    <span class="token comment">// æ¥å—æ¥è‡ªæœ¬åœ°æœåŠ¡å™¨çš„GETè¯·æ±‚ï¼Œè¿”å›homeå­—ç¬¦ä¸²</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"home"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œçš„æ³¨è§£ä¸åšè¿‡å¤šè§£é‡Šï¼Œåœ¨å­¦ä¹ SpringMVCæ—¶å·²ç»æ¥è§¦åˆ°ç›¸å…³çš„æ¦‚å¿µï¼æœ‰äº†@Controlleræ³¨è§£ï¼ŒSpringåœ¨ç»„ä»¶æ‰«æçš„æ—¶å€™å°±ä¼šå°†è¯†åˆ«åˆ°å®ƒï¼Œå¹¶å°†åˆ›å»ºHomeControllerå®ä¾‹ä½œä¸ºSpringå®¹å™¨çš„bean</p><p>â‘¡ç¼–å†™Taco Cloudä¸»é¡µè§†å›¾çš„æ¨¡æ¿</p><p>è¿™é‡Œé¡µé¢çš„æ¨¡æ¿å¼•æ“æ˜¯ <b style="color: slategray;">Thymeleaf</b>ã€‚è‡³äºå…¶å®ƒçš„å¼•æ“ï¼š<b style="color: slategray;">FreeMakerã€JSPâ€¦</b>å†è¯´</p><p><b style="background-color: black;color: white;">Taco Cloudä¸»é¡µæ¨¡æ¿</b></p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span>      <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/1999/xhtml<span class="token punctuation">"</span></span>      <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.thymeleaf.org<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Taco Cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Welcome to Taco Cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@{/images/TacoCloud.png}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå°±æ˜¯åœ¨imgæ ‡ç­¾ä¸­å¼•ç”¨äº†Thymeleafçš„th:srcå±æ€§å’Œ@{â€¦}è¡¨è¾¾å¼ã€‚è¿™é‡Œçš„å›¾ç‰‡èµ„æºæ˜¯æ”¾åœ¨äº†é¡¹ç›®çš„é™æ€èµ„æºè·¯å¾„ï¼šâ€/src/main/resources/static/images/TacoCloud.ongâ€ã€‚è¯¥æ¨¡æ¿é¡µé¢çš„htmlæ–‡ä»¶åˆ™æ”¾åœ¨äº†ä¸“é—¨å­˜æ”¾æ¨¡æ¿çš„è·¯å¾„ï¼šâ€/src/main/resources/templates/home.htmlâ€ã€‚</p><p>è¿™é‡Œç©¿æ’ä¸€ä¸‹ï¼Œå¦‚ä½•åœ¨ <b style="color: darkred;">IntelliJ IDEA</b> ä¸­åŠ å…¥Thymeleafæ¨¡æ¿æ–‡ä»¶ã€‚å…³äºæ¨¡æ¿å¼•æ“çš„è¯­æ³•ï¼Œå¯ä»¥å‚è€ƒæ–‡æ¡£</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210409102500.jpg" style="width:80%;border:solid"><p>â‘¢æµ‹è¯•æ§åˆ¶å™¨æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œ</p><p><b style="background-color: black;color: white;">HomeControlleræµ‹è¯•ç±»</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>tacocloud</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span><span class="token class-name">RunWith</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>test<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">WebMvcTest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span></span><span class="token class-name">SpringRunner</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token class-name">MockMvc</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>hamcrest<span class="token punctuation">.</span></span><span class="token class-name">Matchers</span><span class="token punctuation">.</span>containsString<span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">MockMvcRequestBuilders</span><span class="token punctuation">.</span>get<span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>result<span class="token punctuation">.</span></span><span class="token class-name">MockMvcResultMatchers</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token annotation punctuation">@WebMvcTest</span><span class="token punctuation">(</span><span class="token class-name">HomeController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HomeControllerTest</span> <span class="token punctuation">{</span>    <span class="token comment">// è‡ªåŠ¨æ³¨å…¥</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">MockMvc</span> mockMvc<span class="token punctuation">;</span>        <span class="token annotation punctuation">@Test</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        mockMvc<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">"home"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token function">containsString</span><span class="token punctuation">(</span><span class="token string">"Welcome to Taco Cloud"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨æµ‹è¯•ç±»HomeControllerTestä¸­å­˜åœ¨å‡ ä¸ªé™Œç”Ÿçš„æ³¨è§£æ ‡ç­¾ï¼š@WebMvcTest(HomeController.class)ä¸@Autowiredã€‚</p><p><b style="color: lime;">@WebMvcTest</b>ï¼šSpringBootæä¾›çš„ç‰¹æ®Šæµ‹è¯•æ³¨è§£ï¼Œæœ‰äº†è¿™ä¸ªæ³¨è§£æˆ‘ä»¬å°±å¯ä»¥è®©è¿™æ¬¡æµ‹è¯•æ˜¯åœ¨SpringMVCåº”ç”¨ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œï¼Œè€Œæ­¤æ¬¡webæµ‹è¯•çš„å¯¹è±¡å°±æ˜¯ï¼šHomeControllerã€‚<br><b style="color: lime;">@Autowired</b>ï¼šè‡ªåŠ¨å°†MockMvcæ³¨å…¥åˆ°Springçš„å®¹å™¨å½“ä¸­</p><h3 id="æµ‹è¯•é¡¹ç›®è¿è¡Œ"><a href="#æµ‹è¯•é¡¹ç›®è¿è¡Œ" class="headerlink" title="æµ‹è¯•é¡¹ç›®è¿è¡Œ"></a>æµ‹è¯•é¡¹ç›®è¿è¡Œ</h3><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210408195631.jpg" style="width:80%;border:solid"><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210408195735.jpg" style="width:80%;border:solid"><h2 id="webåº”ç”¨å¼€å‘"><a href="#webåº”ç”¨å¼€å‘" class="headerlink" title="webåº”ç”¨å¼€å‘"></a>webåº”ç”¨å¼€å‘</h2><h3 id="ç½‘é¡µçš„å±•ç¤ºä¿¡æ¯"><a href="#ç½‘é¡µçš„å±•ç¤ºä¿¡æ¯" class="headerlink" title="ç½‘é¡µçš„å±•ç¤ºä¿¡æ¯"></a>ç½‘é¡µçš„å±•ç¤ºä¿¡æ¯</h3><p>ä¸ºäº†å¥å…¨Taco Cloudç½‘ç«™çš„åŠŸèƒ½ï¼Œç°åœ¨å»ºç«‹ä¸€ä¸ªæ ‡å‡†çš„MVCæ§åˆ¶æµã€‚</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210409101844.png" style="width:80%;border:solid"><p>ä»ä¸Šé¢çš„æ§åˆ¶æµç¨‹å›¾å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬éœ€è¦æ„å»ºå››ä¸ªç»„ä»¶ï¼š</p><p>â‘ å…³äºtacoçš„è®¾è®¡ï¼ˆè¿™ä¸ªç±»çš„è®¾è®¡æ”¾åœ¨åé¢ï¼‰</p><p>â‘¡tacoè®¾è®¡æ‰€éœ€çš„åŸæ–™</p><p>â‘¢å¤„ç†è®¾è®¡è¯·æ±‚çš„æ§åˆ¶ç±»</p><p>â‘£å±•ç¤ºæ‰€éœ€è¦çš„è§†å›¾æ¨¡æ¿</p><p><b style="background-color: black;color: white;">åŸæ–™ï¼šIngredient</b></p><p>tacoé…æ–™çš„å®šä¹‰ååˆ†ç®€æ´ï¼Œè¿™é‡Œä¸»è¦æ˜¯ä¸ºäº†å¼•å…¥Lombokåº“çš„ä½¿ç”¨ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>tacocloud<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">RequiredArgsConstructor</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@RequiredArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Ingredient</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Type</span> type<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Type</span> <span class="token punctuation">{</span>        WRAP<span class="token punctuation">,</span>PROTEIN<span class="token punctuation">,</span>VEGGIES<span class="token punctuation">,</span>CHEESE<span class="token punctuation">,</span>SAUCE    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: silver;">@RequiredArgsConstructor</b>ï¼šæ„é€ å‡½æ•°æ³¨è§£ï¼Œç”Ÿæˆå«æœ‰ç‰¹æ®Šå‚æ•°çš„æ„é€ å™¨ã€‚ä¸€èˆ¬æ˜¯æŒ‡è¢«finalä¿®é¥°çš„å‚æ•°</p><p><b style="color: silver;">@Data</b>ï¼šè¿™æ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ã€‚åŠ äº†dataå°±ç­‰åŒäºåŠ äº†ä»¥ä¸‹å‡ ä¸ªæ³¨è§£</p><ul><li>@Getter/@Setter</li><li>@ToString</li><li>@EqualsAndHashCode</li><li>@RequiredArgsConstructor</li></ul><p><b style="background-color: black;color: white;">è®¾è®¡ç»“æœï¼šTaco</b></p><p>è¿™ä¸ªç±»ä¸»è¦æ˜¯ç”¨æ¥è¡¨ç¤ºæˆ‘ä»¬åœ¨è®¾è®¡é¡µé¢æ‰€è®¾è®¡å‡ºæ¥çš„taco</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>tacocloud<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Taco</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ingredients<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="background-color: black;color: white;">æ§åˆ¶å™¨ï¼šDesignTacoController</b></p><p>ä¸ºäº†å®Œæˆå®¢æˆ·çš„è®¾è®¡tacoéœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†å®¢æˆ·æ¥è‡ª/designé¡µé¢çš„è¯·æ±‚ã€‚æ‰€ä»¥æ§åˆ¶å™¨éœ€è¦å®Œæˆä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š</p><ul><li>å¤„ç†æ¥è‡ªâ€/designâ€çš„httpè¯·æ±‚</li><li>æ„å»ºé…æ–™çš„åˆ—è¡¨</li><li>å¤„ç†è¯·æ±‚ï¼Œå°†é…æ–™çš„æ•°æ®ä¼ é€’ç»™éœ€è¦æ¸²æŸ“ä¸ºHTMLçš„è§†å›¾æ¨¡æ¿design.htmlï¼Œå¹¶ä¸”å‘é€ç»™è¯·æ±‚çš„webæµè§ˆå™¨</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>tacocloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>tacocloud<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Ingredient</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>tacocloud<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Ingredient<span class="token punctuation">.</span>Type</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>tacocloud<span class="token punctuation">.</span>bean<span class="token punctuation">.</span></span><span class="token class-name">Taco</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>ui<span class="token punctuation">.</span></span><span class="token class-name">Model</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Locale</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Collectors</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Controller</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/design"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DesignTacoController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@GetMapping</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">showDesignFrom</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// æ„å»ºé…æ–™åˆ—è¡¨</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Ingredient</span><span class="token punctuation">&gt;</span></span> ingredientList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>                <span class="token keyword">new</span> <span class="token class-name">Ingredient</span><span class="token punctuation">(</span><span class="token string">"FLTO"</span><span class="token punctuation">,</span> <span class="token string">"Flour Tortilla"</span><span class="token punctuation">,</span> <span class="token class-name">Type</span><span class="token punctuation">.</span>WRAP<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">Ingredient</span><span class="token punctuation">(</span><span class="token string">"COTO"</span><span class="token punctuation">,</span> <span class="token string">"Corn Tortilla"</span><span class="token punctuation">,</span> <span class="token class-name">Type</span><span class="token punctuation">.</span>WRAP<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">Ingredient</span><span class="token punctuation">(</span><span class="token string">"GRBF"</span><span class="token punctuation">,</span> <span class="token string">"Ground Beef"</span><span class="token punctuation">,</span> <span class="token class-name">Type</span><span class="token punctuation">.</span>PROTEIN<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">Ingredient</span><span class="token punctuation">(</span><span class="token string">"CARN"</span><span class="token punctuation">,</span> <span class="token string">"Carnitas"</span><span class="token punctuation">,</span> <span class="token class-name">Ingredient<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span>PROTEIN<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">Ingredient</span><span class="token punctuation">(</span><span class="token string">"TMTO"</span><span class="token punctuation">,</span> <span class="token string">"Diced Tomatoes"</span><span class="token punctuation">,</span> <span class="token class-name">Type</span><span class="token punctuation">.</span>VEGGIES<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">Ingredient</span><span class="token punctuation">(</span><span class="token string">"LETC"</span><span class="token punctuation">,</span> <span class="token string">"Lettuce"</span><span class="token punctuation">,</span> <span class="token class-name">Type</span><span class="token punctuation">.</span>VEGGIES<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">Ingredient</span><span class="token punctuation">(</span><span class="token string">"CHED"</span><span class="token punctuation">,</span> <span class="token string">"Cheddar"</span><span class="token punctuation">,</span> <span class="token class-name">Type</span><span class="token punctuation">.</span>CHEESE<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">Ingredient</span><span class="token punctuation">(</span><span class="token string">"JACK"</span><span class="token punctuation">,</span> <span class="token string">"Monterrey Jack"</span><span class="token punctuation">,</span> <span class="token class-name">Type</span><span class="token punctuation">.</span>CHEESE<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">Ingredient</span><span class="token punctuation">(</span><span class="token string">"SLSA"</span><span class="token punctuation">,</span> <span class="token string">"Salsa"</span><span class="token punctuation">,</span> <span class="token class-name">Type</span><span class="token punctuation">.</span>SAUCE<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">Ingredient</span><span class="token punctuation">(</span><span class="token string">"SRCR"</span><span class="token punctuation">,</span> <span class="token string">"Sour Cream"</span><span class="token punctuation">,</span> <span class="token class-name">Type</span><span class="token punctuation">.</span>SAUCE<span class="token punctuation">)</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Type</span><span class="token punctuation">[</span><span class="token punctuation">]</span> types <span class="token operator">=</span> <span class="token class-name">Ingredient<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// å°†æ•°æ®åŠ å…¥è§†å›¾æ¨¡æ¿ä¸­</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Type</span> type <span class="token operator">:</span> types<span class="token punctuation">)</span> <span class="token punctuation">{</span>            model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                               <span class="token function">filterByType</span><span class="token punctuation">(</span>ingredientList<span class="token punctuation">,</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">// å°†å½“å‰è®¾è®¡é¡µé¢çš„è¡¨å•æ•°æ®å°è£…åœ¨Tacoå¯¹è±¡ä¸­</span>        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"design"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Taco</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token string">"design"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Ingredient</span><span class="token punctuation">&gt;</span></span> <span class="token function">filterByType</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Ingredient</span><span class="token punctuation">&gt;</span></span> ingredients<span class="token punctuation">,</span><span class="token class-name">Type</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> ingredients            <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>x<span class="token operator">-&gt;</span>x<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: silver;">@Slf4j</b>ï¼šä¼šåœ¨è¯¥ç±»è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªSLF4Jçš„loggerã€‚ä¸ä¸‹é¢çš„ä»£ç ç­‰ä»·</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">LoggerFactory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>tacocloud<span class="token punctuation">.</span>controller<span class="token punctuation">.</span></span><span class="token class-name">DesignTacoController</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">DesignTacoController</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><b style="background-color: black;color: white;">è§†å›¾æ¨¡æ¿ï¼šdesign.html</b></p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.thymeleaf.org<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Taco Cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@{/styles.css}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Design Your Taco!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name"><span class="token namespace">th:</span>src</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@{/images/TacoCloud.png}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>object</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${design}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>grid<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredient-group<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wraps<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Designate your warp:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredient : ${wrap}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredients<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${ingredient.id}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${ingredient.name}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>INGREDIENT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredient-group<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>proteins<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Designate your protein:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredient : ${protein}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredients<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${ingredient.id}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${ingredient.name}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>INGREDIENT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredient-group<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cheeses<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Designate your cheese:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredient : ${cheese}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredients<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${ingredient.id}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${ingredient.name}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>INGREDIENT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredient-group<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>veggies<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Designate your veggies:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredient : ${veggies}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredients<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${ingredient.id}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${ingredient.name}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>INGREDIENT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredient-group<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sauces<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Select your sauce:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredient : ${sauce}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredients<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${ingredient.id}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${ingredient.name}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>INGREDIENT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Name your taco creation:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>filed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>*{name}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>Submit your taco<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è§‚å¯Ÿä»¥ä¸‹æ¨¡æ¿æ¸²æŸ“åçš„htmlæ–‡ä»¶ï¼š</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210409114053.jpg" style="width:80%;border:solid"><p>åœ¨design.htmlä¸­çš„æ ¸å¿ƒæ¸²æŸ“éƒ¨åˆ†ï¼Œå°±æ˜¯é…æ–™çš„é€‰æ‹©</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredient : ${warp}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredients<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${ingredient.id}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${ingredient.name}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>INGREDIENT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢çš„th:eachå°†å¯¹ingredient.warpçš„æ¯ä¸€ä¸ªhtmlå…ƒç´ è¿›è¡Œè¿­ä»£æ¸²æŸ“ã€‚é‚£ä¹ˆæˆ‘ä»¬ä»DesignTacoControllerä¼ é€’æ¥çš„æ•°æ®ï¼Œå°†ä¼šè¢«æ¸²æŸ“æˆä¸‹é¢çš„æ•ˆæœï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredients<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>FLTO<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>Flour Tortilla<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ingredients<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>COTO<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>Corn Tortilla<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è™½ç„¶æˆ‘ä»¬è®¾è®¡å‡ºäº†designé¡µé¢çš„è§†å›¾ï¼Œä½†æ˜¯é¡µé¢çš„è¡¨å•postè¯·æ±‚æˆ‘ä»¬ä¾æ—§æ²¡æœ‰å¤„ç†ï¼æ‰€ä»¥åœ¨æäº¤è¡¨å•æ—¶ä¼šæŠ¥é”™ï¼</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210410100830.jpg" style="width:90%;border:solid"><p>æ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥éœ€è¦è¿›è¡Œè¡¨å•è¯·æ±‚çš„å¤„ç†</p><h3 id="å¤„ç†è¡¨å•è¯·æ±‚"><a href="#å¤„ç†è¡¨å•è¯·æ±‚" class="headerlink" title="å¤„ç†è¡¨å•è¯·æ±‚"></a>å¤„ç†è¡¨å•è¯·æ±‚</h3><p>â‘ <b style="color: greenyellow;">å¤„ç†æ¥è‡ªdesignè¡¨å•çš„è¯·æ±‚</b></p><p>å¤„ç†è¯·æ±‚å¿…ç„¶å°‘ä¸äº†æ§åˆ¶å™¨ï¼Œè¿™é‡Œæˆ‘ä»¬å°±åœ¨ï¼ˆDesingTacoControllerï¼‰è®¾ç½®å¤„ç†è¡¨å•è¯·æ±‚çš„æ§åˆ¶å™¨ï¼Œè®©å…¶åœ¨åå°å±•ç¤ºå½“å‰è®¾è®¡tacoçš„ä¿¡æ¯ï¼Œä»¥åŠå°†å®¢æˆ·ç«¯æµè§ˆå™¨é‡å®šå‘åˆ°â€orders/current/â€œé¡µé¢ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">processDesign</span><span class="token punctuation">(</span><span class="token class-name">Taco</span> design<span class="token punctuation">)</span> <span class="token punctuation">{</span>    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Processing desing:"</span> <span class="token operator">+</span> design<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"redirect:/orders/current"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»ä¸Šè¿°ä»£ç çœ‹å‡ºï¼Œåªè¦è¡¨å•æäº¤ä¹‹åï¼Œè¡¨å•æ•°æ®å°†ä¼šè¢«å°è£…åœ¨Tacoå¯¹è±¡ä¸­ã€‚processDesignä¼šåœ¨åç«¯æ§åˆ¶å°æ‰“å°å‡ºæ—¥å¿—ä¿¡æ¯ï¼Œè¡¨æ˜å½“å‰è®¾è®¡designã€‚å¹¶ä¸”å°†é¡µé¢é‡å®šå‘è‡³<code>/orders/current/</code></p><p>â‘¡<b style="color: greenyellow;">æ¥è‡ªprocessDesigné‡å®šå‘çš„getè¯·æ±‚</b></p><p><b style="color: green;">2.1æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç»§ç»­ç¼–å†™ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œä¹Ÿæ¥å—æ¥è‡ªä¸Šé¢é‡å®šå‘çš„getè¯·æ±‚</b></p><p>ï¼ˆä¸ºäº†ç»™ä¹‹å‰çš„è®¾è®¡ç”Ÿæˆä¸€ä¸ªå½“å‰è®¢å•ï¼‰å¤„ç†è¯·æ±‚éœ€è¦åšåˆ°ä¸‹é¢ä¸¤ç‚¹ï¼š</p><ol><li>å°†å½“å‰è®¢å•é¡µé¢çš„æ•°æ®å°è£…åœ¨Orderå¯¹è±¡ä¸­</li><li>æ„å»ºè¿”å›ç»™è¯·æ±‚çš„orderFrom.htmlé¡µé¢æ¨¡æ¿</li></ol><p><b style="background-color: black;color: white;">å½“å‰è®¢å•ï¼šOrder</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>tacocloud<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> street<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> city<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> state<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> zip<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> ccNumber<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> ccExpiration<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> ccCVV<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="background-color: black;color: white;">è®¢å•æ§åˆ¶å™¨ï¼šOrderController</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>tacocloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>ui<span class="token punctuation">.</span></span><span class="token class-name">Model</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PostMapping</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Slf4j</span><span class="token annotation punctuation">@Controller</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/orders"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token punctuation">{</span>        <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/current"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">orderForm</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// å°è£…å½“å‰è®¢å•é¡µé¢è§†å›¾æ•°æ®</span>        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"order"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"orderForm"</span><span class="token punctuation">;</span>     <span class="token comment">// è¿”å›å½“å‰è®¢å•è§†å›¾orderForm.html</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: green;">2.2å¾ˆæ˜¾ç„¶ï¼Œæ¥ä¸‹æ¥çš„ä»»åŠ¡å°±æ˜¯orderForm.htmlè§†å›¾æ¨¡æ¿çš„ç¼–å†™</b></p><p><b style="background-color: black;color: white;">è®¢å•é¡µé¢æ¨¡æ¿ï¼šorderForm.html</b></p><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.thymeleaf.org<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Taco Cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@{/styles.css}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@{/orders}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>object</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${order}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Order your taco creations<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@{/images/TacoCloud.png}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@{/design}<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>another<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Desing another taco<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${#fields.hasErrors()}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>validationError<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>è¯·æ±‚æ­£ç¡®å¡«å†™è¡¨å•æ•°æ®ï¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>Deliver my taco masterpieces to ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Name:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>field</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>*{name}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>street<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Street:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>field</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>*{street}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>city<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>City:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>field</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>*{city}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>state<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>State:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>field</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>*{state}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zip<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Zip:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>field</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>*{zip}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ccNumber<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>ccNumber:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>field</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>*{ccNumber}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ccExpiration<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>ccExpiration:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>field</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>*{ccExpiration}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ccCVV<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>ccCVV:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>field</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>*{ccCVV}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Submit Order<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢è¿™ä¸ªæ¨¡æ¿ä¼šåœ¨â€/orders/current/â€œé¡µé¢ç”Ÿæˆä¸€ä¸ªè®¢å•ä¿¡æ¯çš„è¡¨å•ï¼Œæˆ‘ä»¬ç»§ç»­éœ€è¦ï¼ˆOrderControllerï¼‰åˆ›å»ºä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œæ¥å¤„ç†æ¥è‡ªorderFormè¡¨å•çš„postè¯·æ±‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">processOrder</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Processing Order:"</span> <span class="token operator">+</span> order<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"redirect:/"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ ¡éªŒè¡¨å•æ•°æ®ï¼ˆå­˜åœ¨BUGæš‚æ—¶è·³è¿‡ï¼‰"><a href="#æ ¡éªŒè¡¨å•æ•°æ®ï¼ˆå­˜åœ¨BUGæš‚æ—¶è·³è¿‡ï¼‰" class="headerlink" title="æ ¡éªŒè¡¨å•æ•°æ®ï¼ˆå­˜åœ¨BUGæš‚æ—¶è·³è¿‡ï¼‰"></a>æ ¡éªŒè¡¨å•æ•°æ®ï¼ˆå­˜åœ¨BUGæš‚æ—¶è·³è¿‡ï¼‰</h3><p>ä¸ºäº†æé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§ã€ä¿è¯æ•°æ®çš„åˆæ³•æ€§ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨å®Œæˆè¡¨å•æ•°æ®çš„æ ¡éªŒï¼</p><p>Springæ”¯æŒJavaçš„Beanæ ¡éªŒçš„APIï¼ˆBean Validation APIæˆ–è€…æ˜¯JSR-303ï¼‰ã€‚æˆ‘ä»¬å°±ä¸éœ€è¦å†æ˜¾å¼çš„ä¸ºæ ¡éªŒæœºåˆ¶ç¼–å†™é€»è¾‘ä»£ç ï¼è‡³äºè¦å¯¼å…¥ç›¸åº”çš„ä¾èµ–å³å¯</p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/javax.validation/validation-api --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.validation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>validation-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0.1.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.hibernate.validator/hibernate-validator --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.hibernate.validator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hibernate-validator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>7.0.1.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹äºæ›´åŠ å¼ºå¤§çš„SpringBootæ¥è¯´ï¼Œæˆ‘ä»¬ç”šè‡³ä¸éœ€è¦æ˜¾å¼å¯¼å…¥ä¾èµ–ï¼Œå› ä¸ºåœ¨spring-boot-starter-webå·²ç»é›†æˆäº†JSR-303å’ŒValidation APIçš„Hibernateå®ç°ã€‚</p><p>ä¸ºç»„ä»¶ç±»ï¼ˆTacoã€Orderï¼‰å¢åŠ æ ¡éªŒ</p><p><b style="background-color: black;color: white;">æ ¡éªŒç±»ï¼šTaco</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>tacocloud<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token class-name">NotNull</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token class-name">Size</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Taco</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@NotNull</span>    <span class="token annotation punctuation">@Size</span><span class="token punctuation">(</span>min <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span>message <span class="token operator">=</span> <span class="token string">"Tacoæœ€å°‘ä¸º4å­—ç¬¦"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Size</span><span class="token punctuation">(</span>min <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>message <span class="token operator">=</span> <span class="token string">"æœ€å°‘é€‰æ‹©ä¸€ç§é…æ–™"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> ingredients<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="background-color: black;color: white;">æ ¡éªŒç±»ï¼šOrder</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>tacocloud<span class="token punctuation">.</span>bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hibernate<span class="token punctuation">.</span>validator<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token class-name">CreditCardNumber</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token class-name">Digits</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token class-name">NotBlank</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token class-name">Pattern</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">"ä¸å¯ç©º"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">"ä¸å¯ç©º"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> street<span class="token punctuation">;</span>    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">"ä¸å¯ç©º"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> city<span class="token punctuation">;</span>    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">"ä¸å¯ç©º"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> state<span class="token punctuation">;</span>    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">"ä¸å¯ç©º"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> zip<span class="token punctuation">;</span>    <span class="token annotation punctuation">@CreditCardNumber</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">"è¯·è¾“å…¥æ­£ç¡®çš„ä¿¡ç”¨å¡å·"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> ccNumber<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Pattern</span><span class="token punctuation">(</span>regexp <span class="token operator">=</span> <span class="token string">"^(0[1-9]|1[0-2])([\\/])([1-9][0-9])$"</span><span class="token punctuation">,</span>message <span class="token operator">=</span> <span class="token string">"æ ¼å¼ä½MM/YY"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> ccExpiration<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Digits</span><span class="token punctuation">(</span>integer <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span>fraction <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>message <span class="token operator">=</span> <span class="token string">"ä¸‰ä½æœ‰æ•ˆçš„æ•°å­—"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> ccCVV<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¼–å†™å¥½äº†æ•°æ®æ ¡éªŒæœºåˆ¶ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹æ ¡éªŒçš„æ—¶æœºåšå‡ºè§„å®šã€‚ä¹Ÿå°±æ˜¯è§£å†³ä»€ä¹ˆæ—¶å€™æ ¡éªŒçš„é—®é¢˜ï¼Ÿ</p><p>ä¿®æ”¹æ§åˆ¶å™¨çš„æ‰§è¡Œæ ¡éªŒæ—¶æœºï¼šåœ¨æ¯ä¸€æ¬¡ç»‘å®šè¡¨å•æ•°æ®ä¹‹åï¼Œè°ƒç”¨å¯¹åº”çš„postæ–¹æ³•ä¹‹å‰ã€‚å¦‚æœæ­¤æ—¶å‡ºç°æ ¡éªŒé”™è¯¯ï¼Œç³»ç»Ÿä¼šæ•è·Errorså°†ä¿¡æ¯ä¼ é€’ç»™å¯¹åº”çš„postè¯·æ±‚å¤„ç†æ–¹æ³•ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token comment">// å‰ç«¯è¡¨å•ä¼ é€’æ¥çš„æ•°æ® design</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">processDesign</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Valid</span>  <span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span><span class="token string">"/design"</span><span class="token punctuation">)</span><span class="token class-name">Taco</span> design<span class="token punctuation">,</span> <span class="token class-name">Errors</span> errors<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>errors<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token string">"/design"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Processing desing:"</span> <span class="token operator">+</span> design<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"redirect:/orders/current"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@PostMapping</span><span class="token comment">// å‰ç«¯è¡¨å•ä¼ é€’æ¥çš„æ•°æ® order</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">processOrder</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Valid</span> <span class="token class-name">Order</span> order<span class="token punctuation">,</span> <span class="token class-name">Errors</span> errors<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>errors<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"orderForm"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Processing Order:"</span> <span class="token operator">+</span> order<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"redirect:/"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è§†å›¾æ§åˆ¶å™¨"><a href="#è§†å›¾æ§åˆ¶å™¨" class="headerlink" title="è§†å›¾æ§åˆ¶å™¨"></a>è§†å›¾æ§åˆ¶å™¨</h3><p>åœ¨ä¸Šé¢çš„å™è¿°è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸‰ä¸ªæ§åˆ¶å™¨ï¼šHomeControllerã€DesignTaacoControllerã€OrderControllerã€‚é™¤äº†HomeControllerä¹‹å¤–ï¼Œå…¶ä»–ä¸¤ä¸ªæ§åˆ¶å™¨éƒ½å…·æœ‰ç±»ä¼¼çš„ç¼–ç¨‹æ¨¡å‹ï¼šå®Œæˆå¡«å……æ¨¡å‹æˆ–è€…æ˜¯å¤„ç†è¾“å…¥ã€‚è€Œå¯¹äºHomeControlleræ¥è¯´ï¼Œå®ƒåªæ˜¯ç®€å•çš„åšäº†ä¸€ä¸ªå°†è¯·æ±‚è½¬å‘åˆ°ä¸€ä¸ªè§†å›¾ï¼Œè€Œæ²¡æœ‰å…¶ä»–åŠŸèƒ½ã€‚å¯¹äºè¿™ç§ <strong>åªåšäº†ä¸€ä¸ªå°†è¯·æ±‚è½¬å‘åˆ°ä¸€ä¸ªè§†å›¾</strong>çš„æ§åˆ¶å™¨ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°è§†å›¾æ§åˆ¶å™¨å®Œæˆä»»åŠ¡</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>tacocloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ViewControllerRegistry</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addViewControllers</span><span class="token punctuation">(</span><span class="token class-name">ViewControllerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>        registry<span class="token punctuation">.</span><span class="token function">addViewController</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"home"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹äºå®ç°è§†å›¾æ§åˆ¶å™¨ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ª <strong>WebMvcConfigurer</strong>æ¥å£ï¼Œè¿™ä¸ªæ¥å£æä¾›æ‰€æœ‰æ¥å£æ–¹æ³•çš„é»˜è®¤å®ç°ï¼Œæˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯ï¼Œåœ¨å®ç°æ¥å£åŠŸèƒ½æ—¶è¦†ç›–ç›¸åº”çš„æ–¹æ³•å³å¯ï¼</p><p>è¿™é‡Œçš„ <strong>WebConfig</strong>ä¸ <strong>HomeController</strong>åŠŸèƒ½ä¸€è‡´ã€‚<b style="color: red;">ç¼–å†™çš„æ—¶å€™ä¸è¦å¿˜äº†@Configuration</b></p><h2 id="DataæŒä¹…åŒ–"><a href="#DataæŒä¹…åŒ–" class="headerlink" title="DataæŒä¹…åŒ–"></a>DataæŒä¹…åŒ–</h2><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210426091718.png" style="width:80%"><h3 id="JdbcTemplate"><a href="#JdbcTemplate" class="headerlink" title="JdbcTemplate"></a>JdbcTemplate</h3><p>â˜ï¸<a href="https://gitee.com/matemaster/master-depository/tree/master/spring/JdbcDemo">é¡¹ç›®çš„JdbcTemplateæºç </a></p><h4 id="å®šä¹‰æŒä¹…åŒ–å¯¹è±¡"><a href="#å®šä¹‰æŒä¹…åŒ–å¯¹è±¡" class="headerlink" title="å®šä¹‰æŒä¹…åŒ–å¯¹è±¡"></a>å®šä¹‰æŒä¹…åŒ–å¯¹è±¡</h4><p>å¯¹äºä¸Šé¢çš„ç¨‹åºå¼€å‘ï¼Œæ•°æ®å§‹ç»ˆæ˜¯ç¬æ—¶çŠ¶æ€ï¼Œå¹¶æ²¡æœ‰åœ¨æœ¬åœ°è¿›è¡Œæ•°æ®æŒä¹…åŒ–ã€‚ä¸‹é¢å°±æ˜¯å¯¹TacoCloudåº”ç”¨æ·»åŠ æ•°æ®æŒä¹…åŒ–æ“ä½œã€‚</p><p>â‘ ï¼šæ„å»ºæŒä¹…åŒ–çš„å¯¹è±¡ï¼Œå› ä¸ºæ¯ä¸€ä¸ªæ•°æ®éƒ½å¯¹åº”ç€ä¸€ä¸ªJavaå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆåˆ›å»ºå°è£…æ•°æ®çš„ç±» Javabeanï¼ˆåœ¨ä¹‹å‰åˆ›å»ºçš„ç»„ä»¶ç±»åŸºç¡€ä¹‹ä¸Šï¼Œåšç¨å¾®çš„å˜åŠ¨ï¼‰</p><p><b style="background-color: black;color: white;">Taco</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">tacos</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token class-name">NotNull</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token class-name">Size</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Taco</span> <span class="token punctuation">{</span>    <span class="token comment">//-----Data persistence-----</span>    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Date</span> createdAt<span class="token punctuation">;</span><span class="token comment">//--------------------------</span>        <span class="token annotation punctuation">@NotNull</span>    <span class="token annotation punctuation">@Size</span><span class="token punctuation">(</span>min<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">"Name must be at least 5 characters long"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Size</span><span class="token punctuation">(</span>min<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">"You must choose at least 1 ingredient"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Ingredient</span><span class="token punctuation">&gt;</span></span> ingredients<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="background-color: black;color: white;">Ingredient</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">tacos</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">RequiredArgsConstructor</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@RequiredArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Ingredient</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Type</span> type<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">enum</span> <span class="token class-name">Type</span> <span class="token punctuation">{</span>        WRAP<span class="token punctuation">,</span> PROTEIN<span class="token punctuation">,</span> VEGGIES<span class="token punctuation">,</span> CHEESE<span class="token punctuation">,</span> SAUCE    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="background-color: black;color: white;">Order</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">tacos</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token class-name">Digits</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token class-name">Pattern</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hibernate<span class="token punctuation">.</span>validator<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token class-name">CreditCardNumber</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>hibernate<span class="token punctuation">.</span>validator<span class="token punctuation">.</span>constraints<span class="token punctuation">.</span></span><span class="token class-name">NotBlank</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span><span class="token punctuation">;</span><span class="token comment">//tag::newFields[]</span><span class="token annotation punctuation">@Data</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>  <span class="token comment">//-----Data persistence-----</span>  <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token class-name">Date</span> placedAt<span class="token punctuation">;</span>  <span class="token comment">//--------------------------</span>        <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">"Delivery name is required"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> deliveryName<span class="token punctuation">;</span>    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">"Street is required"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> deliveryStreet<span class="token punctuation">;</span>    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">"City is required"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> deliveryCity<span class="token punctuation">;</span>    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">"State is required"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> deliveryState<span class="token punctuation">;</span>    <span class="token annotation punctuation">@NotBlank</span><span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">"Zip code is required"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> deliveryZip<span class="token punctuation">;</span>    <span class="token annotation punctuation">@CreditCardNumber</span><span class="token punctuation">(</span>message<span class="token operator">=</span><span class="token string">"Not a valid credit card number"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> ccNumber<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Pattern</span><span class="token punctuation">(</span>regexp<span class="token operator">=</span><span class="token string">"^(0[1-9]|1[0-2])([\\/])([1-9][0-9])$"</span><span class="token punctuation">,</span>             message<span class="token operator">=</span><span class="token string">"Must be formatted MM/YY"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> ccExpiration<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Digits</span><span class="token punctuation">(</span>integer<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> fraction<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> message<span class="token operator">=</span><span class="token string">"Invalid CVV"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> ccCVV<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Taco</span><span class="token punctuation">&gt;</span></span> tacos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addDesign</span><span class="token punctuation">(</span><span class="token class-name">Taco</span> design<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>tacos<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>design<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="å®šä¹‰DAO"><a href="#å®šä¹‰DAO" class="headerlink" title="å®šä¹‰DAO"></a>å®šä¹‰DAO</h4><p>â‘¡ï¼šæ„å»ºç›¸åº”çš„å…³ç³»å‹æ•°æ®åº“ã€æ¨¡å¼ä»¥åŠå…³ç³»è¡¨ï¼ˆè¿™é‡Œåˆ©ç”¨çš„å†…åµŒçš„H2æ•°æ®åº“ï¼‰</p><p><b style="color: red;">æ³¨ï¼šè¿™é‡Œç¼–å†™çš„sqlæ–‡ä»¶éœ€è¦æ”¾åœ¨æ ¹ç±»è·¯å¾„ä¸‹</b>ï¼š<code>src/main/resources/xxx.sql</code></p><p><strong>æ•°æ®åº“æ¨¡å¼å®šä¹‰çš„sqlæ–‡ä»¶</strong></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> Ingredient <span class="token punctuation">(</span>  id <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>  name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>  <span class="token keyword">type</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> Taco <span class="token punctuation">(</span>  id <span class="token keyword">identity</span><span class="token punctuation">,</span>  name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>  createdAt <span class="token keyword">timestamp</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> Taco_Ingredients <span class="token punctuation">(</span>  taco <span class="token keyword">bigint</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>  ingredient <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">alter</span> <span class="token keyword">table</span> Taco_Ingredients    <span class="token keyword">add</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>taco<span class="token punctuation">)</span> <span class="token keyword">references</span> Taco<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">alter</span> <span class="token keyword">table</span> Taco_Ingredients    <span class="token keyword">add</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>ingredient<span class="token punctuation">)</span> <span class="token keyword">references</span> Ingredient<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> Taco_Order <span class="token punctuation">(</span>id <span class="token keyword">identity</span><span class="token punctuation">,</span>deliveryName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>deliveryStreet <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>deliveryCity <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>deliveryState <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>deliveryZip <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>ccNumber <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>ccExpiration <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>ccCVV <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>    placedAt <span class="token keyword">timestamp</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> Taco_Order_Tacos <span class="token punctuation">(</span>tacoOrder <span class="token keyword">bigint</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>taco <span class="token keyword">bigint</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">alter</span> <span class="token keyword">table</span> Taco_Order_Tacos    <span class="token keyword">add</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>tacoOrder<span class="token punctuation">)</span> <span class="token keyword">references</span> Taco_Order<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">alter</span> <span class="token keyword">table</span> Taco_Order_Tacos    <span class="token keyword">add</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>taco<span class="token punctuation">)</span> <span class="token keyword">references</span> Taco<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ•°æ®åº“æ•°æ®å¡«å……çš„sqlæ–‡ä»¶</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">delete from <span class="token class-name">Taco_Order_Tacos</span><span class="token punctuation">;</span>delete from <span class="token class-name">Taco_Ingredients</span><span class="token punctuation">;</span>delete from <span class="token class-name">Taco</span><span class="token punctuation">;</span>delete from <span class="token class-name">Taco_Order</span><span class="token punctuation">;</span>delete from <span class="token class-name">Ingredient</span><span class="token punctuation">;</span>insert into <span class="token class-name">Ingredient</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> type<span class="token punctuation">)</span>                 values <span class="token punctuation">(</span><span class="token string">'FLTO'</span><span class="token punctuation">,</span> <span class="token string">'Flour Tortilla'</span><span class="token punctuation">,</span> <span class="token string">'WRAP'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>insert into <span class="token class-name">Ingredient</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> type<span class="token punctuation">)</span>                 values <span class="token punctuation">(</span><span class="token string">'COTO'</span><span class="token punctuation">,</span> <span class="token string">'Corn Tortilla'</span><span class="token punctuation">,</span> <span class="token string">'WRAP'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>insert into <span class="token class-name">Ingredient</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> type<span class="token punctuation">)</span>                 values <span class="token punctuation">(</span><span class="token string">'GRBF'</span><span class="token punctuation">,</span> <span class="token string">'Ground Beef'</span><span class="token punctuation">,</span> <span class="token string">'PROTEIN'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>insert into <span class="token class-name">Ingredient</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> type<span class="token punctuation">)</span>                 values <span class="token punctuation">(</span><span class="token string">'CARN'</span><span class="token punctuation">,</span> <span class="token string">'Carnitas'</span><span class="token punctuation">,</span> <span class="token string">'PROTEIN'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>insert into <span class="token class-name">Ingredient</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> type<span class="token punctuation">)</span>                 values <span class="token punctuation">(</span><span class="token string">'TMTO'</span><span class="token punctuation">,</span> <span class="token string">'Diced Tomatoes'</span><span class="token punctuation">,</span> <span class="token string">'VEGGIES'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>insert into <span class="token class-name">Ingredient</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> type<span class="token punctuation">)</span>                 values <span class="token punctuation">(</span><span class="token string">'LETC'</span><span class="token punctuation">,</span> <span class="token string">'Lettuce'</span><span class="token punctuation">,</span> <span class="token string">'VEGGIES'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>insert into <span class="token class-name">Ingredient</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> type<span class="token punctuation">)</span>                 values <span class="token punctuation">(</span><span class="token string">'CHED'</span><span class="token punctuation">,</span> <span class="token string">'Cheddar'</span><span class="token punctuation">,</span> <span class="token string">'CHEESE'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>insert into <span class="token class-name">Ingredient</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> type<span class="token punctuation">)</span>                 values <span class="token punctuation">(</span><span class="token string">'JACK'</span><span class="token punctuation">,</span> <span class="token string">'Monterrey Jack'</span><span class="token punctuation">,</span> <span class="token string">'CHEESE'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>insert into <span class="token class-name">Ingredient</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> type<span class="token punctuation">)</span>                 values <span class="token punctuation">(</span><span class="token string">'SLSA'</span><span class="token punctuation">,</span> <span class="token string">'Salsa'</span><span class="token punctuation">,</span> <span class="token string">'SAUCE'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>insert into <span class="token class-name">Ingredient</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> type<span class="token punctuation">)</span>                 values <span class="token punctuation">(</span><span class="token string">'SRCR'</span><span class="token punctuation">,</span> <span class="token string">'Sour Cream'</span><span class="token punctuation">,</span> <span class="token string">'SAUCE'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â‘¢ï¼šåˆ©ç”¨JdbcTemplateè¿›è¡Œæ•°æ®åº“æ“ä½œ</p><p>å‡†å¤‡å·¥ä½œï¼šå¯¼å…¥ç›¸åº”çš„ä¾èµ–æ–‡ä»¶ï¼ˆjdbcå’Œh2DBï¼‰</p><p>1ï¼‰ç¼–å†™æ“ä½œæ•°æ®çš„åŠŸèƒ½æ¥å£ï¼ˆJDBC repositoryï¼‰</p><p>2ï¼‰ç¼–å†™å®ç°ä¸Šé¢å®šä¹‰çš„æ¥å£åŠŸèƒ½çš„repositoryç±»</p><p>3ï¼‰å°†ä¸Šé¢çš„ç¼–å†™çš„ç±»æ³¨å…¥åˆ°ç›¸åº”çš„æ§åˆ¶å™¨ä¸­</p><p><strong>é¡¹ç›®ä¾èµ–</strong></p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--SpringBootçš„jdbcä¾èµ–--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--å†…åµŒçš„H2æ•°æ®åº“--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.h2database<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>h2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ•°æ®åº“çš„è¿æ¥æ“ä½œ</strong></p><p><b style="background-color: black;color: white;">DAOæ¥å£ï¼šIngredientRepository</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">tacos<span class="token punctuation">.</span>data</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span></span><span class="token class-name">Ingredient</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IngredientRepository</span> <span class="token punctuation">{</span>  <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Ingredient</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Ingredient</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Ingredient</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Ingredient</span> ingredient<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="background-color: black;color: white;">å®ç°ï¼šJdbcIngredientRepository</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">tacos<span class="token punctuation">.</span>data</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">JdbcTemplate</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RowMapper</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Repository</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span></span><span class="token class-name">Ingredient</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcIngredientRepository</span> <span class="token keyword">implements</span> <span class="token class-name">IngredientRepository</span> <span class="token punctuation">{</span>    <span class="token comment">// æ³¨å…¥ä¾èµ–çš„ç»„ä»¶ï¼šJdbcTemplate</span>    <span class="token keyword">private</span> <span class="token class-name">JdbcTemplate</span> jdbc<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">public</span> <span class="token class-name">JdbcIngredientRepository</span><span class="token punctuation">(</span><span class="token class-name">JdbcTemplate</span> jdbc<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>jdbc <span class="token operator">=</span> jdbc<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Ingredient</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> jdbc<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"select id, name, type from Ingredient"</span><span class="token punctuation">,</span>                          <span class="token keyword">this</span><span class="token operator">::</span><span class="token function">mapRowToIngredient</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Ingredient</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> jdbc<span class="token punctuation">.</span><span class="token function">queryForObject</span><span class="token punctuation">(</span>            <span class="token string">"select id, name, type from Ingredient where id=?"</span><span class="token punctuation">,</span>            <span class="token keyword">this</span><span class="token operator">::</span><span class="token function">mapRowToIngredient</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/**    @Override    public Ingredient findOne(String id) {        return jdbc.queryForObject(            "select id, name, type from Ingredient where id=?",            new RowMapper&lt;Ingredient&gt;() {                public Ingredient mapRow(ResultSet rs, int rowNum)                     throws SQLException {                    return new Ingredient(                        rs.getString("id"),                         rs.getString("name"),                        Ingredient.Type.valueOf(rs.getString("type")));                };            }, id);    }*/</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Ingredient</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Ingredient</span> ingredient<span class="token punctuation">)</span> <span class="token punctuation">{</span>        jdbc<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>            <span class="token string">"insert into Ingredient (id, name, type) values (?, ?, ?)"</span><span class="token punctuation">,</span>            ingredient<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>             ingredient<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            ingredient<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> ingredient<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token class-name">Ingredient</span> <span class="token function">mapRowToIngredient</span><span class="token punctuation">(</span><span class="token class-name">ResultSet</span> rs<span class="token punctuation">,</span> <span class="token keyword">int</span> rowNum<span class="token punctuation">)</span>        <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Ingredient</span><span class="token punctuation">(</span>            rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>             rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token class-name">Ingredient<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>rs<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>@Repository</code>æ˜¯ Spring æ³¨è§£ï¼ŒæŒ‡ç¤ºè£…é¥°çš„ç±»æ˜¯å­˜å‚¨åº“ã€‚ å­˜å‚¨åº“æ˜¯ä¸€ç§ç”¨äºå°è£…å­˜å‚¨ï¼Œæ£€ç´¢å’Œæœç´¢è¡Œä¸ºçš„æœºåˆ¶ï¼Œè¯¥æœºåˆ¶æ¨¡ä»¿å¯¹è±¡çš„é›†åˆã€‚ å®ƒæ˜¯<code>@Component</code>æ³¨è§£çš„ä¸€ç§ç‰¹æ®ŠåŠŸèƒ½ï¼Œå…è®¸é€šè¿‡ç±»è·¯å¾„æ‰«æè‡ªåŠ¨æ£€æµ‹å®ç°ç±»ã€‚</p><p><code>@ComponentScan</code>ç¡®ä¿æ‰¾åˆ°ç”¨<code>@Component</code>å’Œå…¶æ´¾ç”Ÿè¯åŒ…æ‹¬<code>@Repository</code>è£…é¥°çš„ç±»å¹¶å°†å…¶æ³¨å†Œä¸º Spring Beanã€‚ <code>@ComponentScan</code>è‡ªåŠ¨åŒ…å«åœ¨<code>@SpringBootApplication</code>ä¸­ã€‚</p><p><code>query(String sql, RowMapper&lt;T&gt; rowMapper)</code></p><p><code>queryForObject(String sql, RowMapper&lt;T&gt; rowMapper, @Nullable Object... args)</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">tacos<span class="token punctuation">.</span>data</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span></span><span class="token class-name">Order</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OrderRepository</span> <span class="token punctuation">{</span>  <span class="token class-name">Order</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="background-color: black;color: white;">å®ç°ï¼šJdbcOrderRepository</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">tacos<span class="token punctuation">.</span>data</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">JdbcTemplate</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span>simple<span class="token punctuation">.</span></span><span class="token class-name">SimpleJdbcInsert</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Repository</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>fasterxml<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span>databind<span class="token punctuation">.</span></span><span class="token class-name">ObjectMapper</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span></span><span class="token class-name">Taco</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span></span><span class="token class-name">Order</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcOrderRepository</span> <span class="token keyword">implements</span> <span class="token class-name">OrderRepository</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">SimpleJdbcInsert</span> orderInserter<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">SimpleJdbcInsert</span> orderTacoInserter<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">ObjectMapper</span> objectMapper<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">public</span> <span class="token class-name">JdbcOrderRepository</span><span class="token punctuation">(</span><span class="token class-name">JdbcTemplate</span> jdbc<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment">// æŒ‡å®šéœ€è¦æ’å…¥æ•°æ®çš„è¡¨æ ¼ä»¥åŠç”Ÿæˆé”®çš„åˆ—</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>orderInserter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleJdbcInsert</span><span class="token punctuation">(</span>jdbc<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">withTableName</span><span class="token punctuation">(</span><span class="token string">"Taco_Order"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">usingGeneratedKeyColumns</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>orderTacoInserter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleJdbcInsert</span><span class="token punctuation">(</span>jdbc<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">withTableName</span><span class="token punctuation">(</span><span class="token string">"Taco_Order_Tacos"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Order</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>        order<span class="token punctuation">.</span><span class="token function">setPlacedAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> orderId <span class="token operator">=</span> <span class="token function">saveOrderDetails</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>        order<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Taco</span><span class="token punctuation">&gt;</span></span> tacos <span class="token operator">=</span> order<span class="token punctuation">.</span><span class="token function">getTacos</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Taco</span> taco <span class="token operator">:</span> tacos<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">saveTacoToOrder</span><span class="token punctuation">(</span>taco<span class="token punctuation">,</span> orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> order<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">long</span> <span class="token function">saveOrderDetails</span><span class="token punctuation">(</span><span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> values <span class="token operator">=</span>            objectMapper<span class="token punctuation">.</span><span class="token function">convertValue</span><span class="token punctuation">(</span>order<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// å› ä¸ºJacksonä¼šè‡ªåŠ¨å°†Dateè½¬åŒ–ä¸ºLongï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦å•ç‹¬å°†å€¼è¾“å…¥Map</span>        <span class="token comment">// ä¿æŒä¸æ•°æ®è¡¨ç±»å‹ä¸€è‡´</span>        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"placedAt"</span><span class="token punctuation">,</span> order<span class="token punctuation">.</span><span class="token function">getPlacedAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">long</span> orderId <span class="token operator">=</span>            <span class="token comment">// æŒ‡å‘æ’å…¥è¯­å¥ï¼Œå¹¶ä¸”å°†ç”Ÿæˆçš„é”®è¿”å›</span>            orderInserter            <span class="token punctuation">.</span><span class="token function">executeAndReturnKey</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">longValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> orderId<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">saveTacoToOrder</span><span class="token punctuation">(</span><span class="token class-name">Taco</span> taco<span class="token punctuation">,</span> <span class="token keyword">long</span> orderId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> values <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"tacoOrder"</span><span class="token punctuation">,</span> orderId<span class="token punctuation">)</span><span class="token punctuation">;</span>        values<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"taco"</span><span class="token punctuation">,</span> taco<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        orderTacoInserter<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">tacos<span class="token punctuation">.</span>data</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span></span><span class="token class-name">Taco</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TacoRepository</span>  <span class="token punctuation">{</span>  <span class="token class-name">Taco</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Taco</span> design<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="background-color: black;color: white;">å®ç°ï¼šJdbcTacoRepository</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">tacos<span class="token punctuation">.</span>data</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Timestamp</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Types</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Date</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">JdbcTemplate</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatementCreator</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatementCreatorFactory</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">GeneratedKeyHolder</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">KeyHolder</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Repository</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span></span><span class="token class-name">Ingredient</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span></span><span class="token class-name">Taco</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Repository</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcTacoRepository</span> <span class="token keyword">implements</span> <span class="token class-name">TacoRepository</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">JdbcTemplate</span> jdbc<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">JdbcTacoRepository</span><span class="token punctuation">(</span><span class="token class-name">JdbcTemplate</span> jdbc<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>jdbc <span class="token operator">=</span> jdbc<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Taco</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Taco</span> taco<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">long</span> tacoId <span class="token operator">=</span> <span class="token function">saveTacoInfo</span><span class="token punctuation">(</span>taco<span class="token punctuation">)</span><span class="token punctuation">;</span>        taco<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>tacoId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Ingredient</span> ingredient <span class="token operator">:</span> taco<span class="token punctuation">.</span><span class="token function">getIngredients</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">saveIngredientToTaco</span><span class="token punctuation">(</span>ingredient<span class="token punctuation">,</span> tacoId<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> taco<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">long</span> <span class="token function">saveTacoInfo</span><span class="token punctuation">(</span><span class="token class-name">Taco</span> taco<span class="token punctuation">)</span> <span class="token punctuation">{</span>        taco<span class="token punctuation">.</span><span class="token function">setCreatedAt</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatementCreator</span> psc <span class="token operator">=</span>            <span class="token keyword">new</span> <span class="token class-name">PreparedStatementCreatorFactory</span><span class="token punctuation">(</span>            <span class="token string">"insert into Taco (name, createdAt) values (?, ?)"</span><span class="token punctuation">,</span>            <span class="token class-name">Types</span><span class="token punctuation">.</span>VARCHAR<span class="token punctuation">,</span> <span class="token class-name">Types</span><span class="token punctuation">.</span>TIMESTAMP        <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">newPreparedStatementCreator</span><span class="token punctuation">(</span>            <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>                taco<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token keyword">new</span> <span class="token class-name">Timestamp</span><span class="token punctuation">(</span>taco<span class="token punctuation">.</span><span class="token function">getCreatedAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è‡ªåŠ¨ç”Ÿæˆé”®å€¼</span>        <span class="token class-name">KeyHolder</span> keyHolder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GeneratedKeyHolder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        jdbc<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>psc<span class="token punctuation">,</span> keyHolder<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> keyHolder<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">longValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">saveIngredientToTaco</span><span class="token punctuation">(</span>        <span class="token class-name">Ingredient</span> ingredient<span class="token punctuation">,</span> <span class="token keyword">long</span> tacoId<span class="token punctuation">)</span> <span class="token punctuation">{</span>        jdbc<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>            <span class="token string">"insert into Taco_Ingredients (taco, ingredient) "</span> <span class="token operator">+</span>            <span class="token string">"values (?, ?)"</span><span class="token punctuation">,</span>            tacoId<span class="token punctuation">,</span> ingredient<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">tacos<span class="token punctuation">.</span>data</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">JdbcTemplate</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span></span><span class="token class-name">Ingredient</span><span class="token punctuation">;</span><span class="token comment">/** * Raw implementation of {@link IngredientRepository} for * comparison with {@link JdbcIngredientRepository} to illustrate * the power of using {@link JdbcTemplate}.  * @author habuma */</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RawJdbcIngredientRepository</span> <span class="token keyword">implements</span> <span class="token class-name">IngredientRepository</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">DataSource</span> dataSource<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">RawJdbcIngredientRepository</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>dataSource <span class="token operator">=</span> dataSource<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Ingredient</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Ingredient</span><span class="token punctuation">&gt;</span></span> ingredients <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>                <span class="token string">"select id, name, type from Ingredient"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token class-name">Ingredient</span> ingredient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ingredient</span><span class="token punctuation">(</span>                    resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token class-name">Ingredient<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                ingredients<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>ingredient<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>              <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// ??? What should be done here ???</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>resultSet <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>statement <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> ingredients<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// tag::rawfindOne[]</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Ingredient</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">PreparedStatement</span> statement <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>                <span class="token string">"select id, name, type from Ingredient"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            statement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>            resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Ingredient</span> ingredient <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                ingredient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ingredient</span><span class="token punctuation">(</span>                    resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token class-name">Ingredient<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"type"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>             <span class="token keyword">return</span> ingredient<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// ??? What should be done here ???</span>        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>resultSet <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>statement <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">try</span> <span class="token punctuation">{</span>                    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// end::rawfindOne[]</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Ingredient</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">Ingredient</span> ingredient<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// TODO: I only needed one method for comparison purposes, so</span>        <span class="token comment">//       I've not bothered implementing this one (yet).</span>        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="webæ§åˆ¶å™¨"><a href="#webæ§åˆ¶å™¨" class="headerlink" title="webæ§åˆ¶å™¨"></a>webæ§åˆ¶å™¨</h4><p>å…³äº<code>/design</code>é¡µé¢çš„æ§åˆ¶å™¨</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">tacos<span class="token punctuation">.</span>web</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>stream<span class="token punctuation">.</span></span><span class="token class-name">Collectors</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">Valid</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>ui<span class="token punctuation">.</span></span><span class="token class-name">Model</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">Errors</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ModelAttribute</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PostMapping</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">SessionAttributes</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span></span><span class="token class-name">Taco</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span></span><span class="token class-name">Ingredient</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span></span><span class="token class-name">Ingredient<span class="token punctuation">.</span>Type</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span></span><span class="token class-name">Order</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span>data<span class="token punctuation">.</span></span><span class="token class-name">TacoRepository</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span>data<span class="token punctuation">.</span></span><span class="token class-name">IngredientRepository</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Controller</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/design"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SessionAttributes</span><span class="token punctuation">(</span><span class="token string">"order"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DesignTacoController</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">IngredientRepository</span> ingredientRepo<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">TacoRepository</span> designRepo<span class="token punctuation">;</span><span class="token comment">/**    // tag::ingredientRepoOnlyCtor[]    @Autowired    public DesignTacoController(IngredientRepository ingredientRepo) {        this.ingredientRepo = ingredientRepo;    }    // end::ingredientRepoOnlyCtor[]    **/</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">public</span> <span class="token class-name">DesignTacoController</span><span class="token punctuation">(</span>        <span class="token class-name">IngredientRepository</span> ingredientRepo<span class="token punctuation">,</span>         <span class="token class-name">TacoRepository</span> designRepo<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>ingredientRepo <span class="token operator">=</span> ingredientRepo<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>designRepo <span class="token operator">=</span> designRepo<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"order"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Order</span> <span class="token function">order</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"taco"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">Taco</span> <span class="token function">taco</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Taco</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@GetMapping</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">showDesignForm</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Ingredient</span><span class="token punctuation">&gt;</span></span> ingredients <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ingredientRepo<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> ingredients<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Type</span><span class="token punctuation">[</span><span class="token punctuation">]</span> types <span class="token operator">=</span> <span class="token class-name">Ingredient<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Type</span> type <span class="token operator">:</span> types<span class="token punctuation">)</span> <span class="token punctuation">{</span>            model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                <span class="token function">filterByType</span><span class="token punctuation">(</span>ingredients<span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token string">"design"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@PostMapping</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">processDesign</span><span class="token punctuation">(</span>        <span class="token annotation punctuation">@Valid</span> <span class="token class-name">Taco</span> design<span class="token punctuation">,</span> <span class="token class-name">Errors</span> errors<span class="token punctuation">,</span>         <span class="token annotation punctuation">@ModelAttribute</span> <span class="token class-name">Order</span> order<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>errors<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token string">"design"</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">Taco</span> saved <span class="token operator">=</span> designRepo<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>design<span class="token punctuation">)</span><span class="token punctuation">;</span>        order<span class="token punctuation">.</span><span class="token function">addDesign</span><span class="token punctuation">(</span>saved<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"redirect:/orders/current"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Ingredient</span><span class="token punctuation">&gt;</span></span> <span class="token function">filterByType</span><span class="token punctuation">(</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Ingredient</span><span class="token punctuation">&gt;</span></span> ingredients<span class="token punctuation">,</span> <span class="token class-name">Type</span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> ingredients            <span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…³äºè®¢å•é¡µé¢çš„æ§åˆ¶å™¨</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">tacos<span class="token punctuation">.</span>web</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">Valid</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>validation<span class="token punctuation">.</span></span><span class="token class-name">Errors</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PostMapping</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">SessionAttributes</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">SessionStatus</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span></span><span class="token class-name">Order</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span>data<span class="token punctuation">.</span></span><span class="token class-name">OrderRepository</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Controller</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/orders"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SessionAttributes</span><span class="token punctuation">(</span><span class="token string">"order"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">OrderRepository</span> orderRepo<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">OrderController</span><span class="token punctuation">(</span><span class="token class-name">OrderRepository</span> orderRepo<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>orderRepo <span class="token operator">=</span> orderRepo<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/current"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">orderForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"orderForm"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@PostMapping</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">processOrder</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Valid</span> <span class="token class-name">Order</span> order<span class="token punctuation">,</span> <span class="token class-name">Errors</span> errors<span class="token punctuation">,</span>                                <span class="token class-name">SessionStatus</span> sessionStatus<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>errors<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token string">"orderForm"</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        orderRepo<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>order<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// é‡ç½®sessionä¿¡æ¯</span>        sessionStatus<span class="token punctuation">.</span><span class="token function">setComplete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token string">"redirect:/"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨Tacoç±»ä¸­å­˜åœ¨ä¸€ä¸ª<code>private List&lt;Ingredient&gt; ingredients</code>ã€‚ä½†æ˜¯åœ¨å‰ç«¯é¡µé¢è¾“å…¥é…æ–™ä¿¡æ¯ï¼Œè¡¨å•è¿”å›åå°æ—¶ï¼Œå› ä¸ºä¼ å…¥çš„æ˜¯Stringç±»å‹ï¼Œè€Œè¿™é‡Œlistæ˜¯Ingredientç±»å‹ä¼šå‡ºç°ç±»å‹è½¬åŒ–å¤±è´¥çš„é”™è¯¯ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªç±»å‹è½¬æ¢æ¥å£<code>Converter&lt;String, Ingredient&gt;</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">tacos<span class="token punctuation">.</span>web</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>core<span class="token punctuation">.</span>convert<span class="token punctuation">.</span>converter<span class="token punctuation">.</span></span><span class="token class-name">Converter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span></span><span class="token class-name">Ingredient</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">tacos<span class="token punctuation">.</span>data<span class="token punctuation">.</span></span><span class="token class-name">IngredientRepository</span><span class="token punctuation">;</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IngredientByIdConverter</span> <span class="token keyword">implements</span> <span class="token class-name">Converter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Ingredient</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>  <span class="token keyword">private</span> <span class="token class-name">IngredientRepository</span> ingredientRepo<span class="token punctuation">;</span>  <span class="token annotation punctuation">@Autowired</span>  <span class="token keyword">public</span> <span class="token class-name">IngredientByIdConverter</span><span class="token punctuation">(</span><span class="token class-name">IngredientRepository</span> ingredientRepo<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>ingredientRepo <span class="token operator">=</span> ingredientRepo<span class="token punctuation">;</span>  <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>  <span class="token keyword">public</span> <span class="token class-name">Ingredient</span> <span class="token function">convert</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> ingredientRepo<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Spring-Data-JPA"><a href="#Spring-Data-JPA" class="headerlink" title="Spring Data JPA"></a>Spring Data JPA</h3><h2 id="Spring-Securityé…ç½®"><a href="#Spring-Securityé…ç½®" class="headerlink" title="Spring Securityé…ç½®"></a>Spring Securityé…ç½®</h2><p>å®ç°Spring Securityçš„é…ç½®æ–¹å¼å¯ä»¥åŸºäºxmlæˆ–è€…Javaæ³¨è§£ã€‚è¿™é‡Œç¼–å†™åŸºç¡€çš„é…ç½®ç±»<code>SecurityConfig</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@EnableWebSecurity</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{</span>    <span class="token comment">// è‡ªå®šä¹‰ç”¨æˆ·å­˜å‚¨</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationManagerBuilder</span> auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>        auth            <span class="token punctuation">.</span><span class="token function">userDetailsService</span><span class="token punctuation">(</span>userDetailsService<span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token function">encoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”¨æˆ·å­˜å‚¨æœ‰å››ç§æ–¹å¼ï¼š</p><ul><li>åŸºäºå†…å­˜</li><li>åŸºäºJDBC</li><li>ä»¥LADPä¸ºåç«¯çš„</li><li>è‡ªå®šä¹‰</li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaEE </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿æ€§è¡¨çš„æ‹“å±•ç»“æ„</title>
      <link href="posts/27874.html"/>
      <url>posts/27874.html</url>
      
        <content type="html"><![CDATA[<h1 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h1><p><code>æ ˆ</code>ï¼šåªå…è®¸åœ¨ä¸€ç«¯ï¼ˆæ ˆé¡¶ï¼‰æ“ä½œçš„çº¿æ€§è¡¨ã€‚</p><p><code>æ ˆé¡¶</code>ï¼šå…è®¸å¢åˆ çš„ä¸€ç«¯ã€‚</p><p><code>ç©ºæ ˆ</code>ï¼šä¸å«ä»»ä½•å…ƒç´ çš„ç©ºè¡¨ã€‚</p><p>æ ˆçš„æ•°å­¦æ€§è´¨ï¼šå…¥æ ˆçš„nä¸ªå…ƒç´ ï¼Œæœ‰å¤šå°‘ä¸ªä¸åŒæ’åˆ—æ–¹å¼çš„å‡ºæ ˆåºåˆ—ï¼</p><h2 id="æ ˆçš„åŸºæœ¬çŸ¥è¯†"><a href="#æ ˆçš„åŸºæœ¬çŸ¥è¯†" class="headerlink" title="æ ˆçš„åŸºæœ¬çŸ¥è¯†"></a>æ ˆçš„åŸºæœ¬çŸ¥è¯†</h2><h3 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h3><ul><li>cè¯­è¨€å®šä¹‰çš„æ ˆçš„åŸºæœ¬æ“ä½œ</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">InitStack</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">StackEmpty</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>S<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">Pop</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>S<span class="token punctuation">,</span><span class="token operator">&amp;</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">GetTop</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span><span class="token operator">&amp;</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">DestroyStack</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>Javaè¯­è¨€å®šä¹‰çš„æ ˆçš„åŸºæœ¬æ“ä½œ</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">init</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆå§‹çŠ¶æ€ä¸åŸºæœ¬æ“ä½œçš„å…³ç³»"><a href="#åˆå§‹çŠ¶æ€ä¸åŸºæœ¬æ“ä½œçš„å…³ç³»" class="headerlink" title="åˆå§‹çŠ¶æ€ä¸åŸºæœ¬æ“ä½œçš„å…³ç³»"></a>åˆå§‹çŠ¶æ€ä¸åŸºæœ¬æ“ä½œçš„å…³ç³»</h3><p>1ï¼‰å‡è®¾æˆ‘ä»¬è§„å®šS.top = -1ä¸ºæ ˆé¡¶çš„åˆå§‹åŒ–è®¾ç½®ï¼Œé‚£ä¹ˆä»£è¡¨ç€æ ˆé¡¶ä»0å¼€å§‹è®¡æ•°ï¼Œæ ˆé¡¶æŒ‡é’ˆå§‹ç»ˆæŒ‡å‘æ ˆé¡¶å…ƒç´ ï¼</p><p><code>æ ˆé¡¶æŒ‡é’ˆ</code>ï¼šS.top = -1</p><p><code>è¿›æ ˆæ“ä½œ</code>ï¼šå…ˆå°†æ ˆé¡¶æŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€ä½ï¼Œåœ¨èµ‹å€¼å…ƒç´  S.data[++S.top] = e</p><p><code>å‡ºæ ˆæ“ä½œ</code>ï¼šå…ˆå°†å‡ºæ ˆå…ƒç´ ä¿å­˜ï¼Œå†å°†æ ˆé¡¶æŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€ä½ e = S.data[S.topâ€“]</p><p><code>æ ˆç©ºã€æ»¡</code>ï¼šç©º-&gt; S.top == -1 æ»¡-&gt; S.top == MaxSize-1</p><p>2ï¼‰å‡è®¾æˆ‘ä»¬è§„å®šS.top = 0ä¸ºæ ˆé¡¶çš„åˆå§‹åŒ–è®¾ç½®ï¼Œé‚£ä¹ˆä»£è¡¨ç€æ ˆé¡¶ä»1å¼€å§‹è®¡æ•°ï¼Œæ ˆé¡¶æŒ‡é’ˆå§‹ç»ˆæŒ‡å‘æ ˆé¡¶å…ƒç´ çš„ä¸‹ä¸€ä¸ªå­˜å‚¨å•å…ƒï¼</p><p><code>æ ˆé¡¶æŒ‡é’ˆ</code>ï¼šS.top = 0</p><p><code>è¿›æ ˆæ“ä½œ</code>ï¼šå…ˆèµ‹å€¼å…ƒç´ ï¼Œåœ¨å°†æ ˆé¡¶æŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€ä½ S.data[S.top++] = e</p><p><code>å‡ºæ ˆæ“ä½œ</code>ï¼šå…ˆå°†æ ˆé¡¶æŒ‡é’ˆç§»åŠ¨åˆ°ä¸‹ä¸€ä½ï¼Œå†å°†å‡ºæ ˆå…ƒç´ ä¿å­˜ e = S.data[â€“S.top]</p><p><code>æ ˆç©ºã€æ»¡</code>ï¼šç©º-&gt; S.top == 0 æ»¡-&gt; S.top == MaxSize</p><h2 id="é¡ºåºæ ˆ"><a href="#é¡ºåºæ ˆ" class="headerlink" title="é¡ºåºæ ˆ"></a>é¡ºåºæ ˆ</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">define</span> <span class="token macro-name">MaxSize</span> <span class="token expression"><span class="token number">100</span></span></span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>    Elemtype data<span class="token punctuation">[</span>MaxSize<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> top<span class="token punctuation">;</span><span class="token punctuation">}</span> SqStack<span class="token punctuation">;</span>SqStack S<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Cè¯­è¨€å®ç°"><a href="#Cè¯­è¨€å®ç°" class="headerlink" title="Cè¯­è¨€å®ç°"></a>Cè¯­è¨€å®ç°</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">define</span> <span class="token macro-name">MaxSize</span> <span class="token expression"><span class="token number">100</span></span></span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>    Elemtype data<span class="token punctuation">[</span>MaxSize<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> top<span class="token punctuation">;</span><span class="token punctuation">}</span> SqStack<span class="token punctuation">;</span>SqStack S<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">InitStack</span><span class="token punctuation">(</span>SqStack <span class="token operator">&amp;</span>S<span class="token punctuation">)</span> <span class="token punctuation">{</span>    S<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">(</span>Elemtype<span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token function">sizeOf</span><span class="token punctuation">(</span>Elemtype<span class="token punctuation">)</span><span class="token operator">*</span>MaxSize<span class="token punctuation">)</span><span class="token punctuation">;</span>    S<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span>bool <span class="token function">StackEmpty</span><span class="token punctuation">(</span>SqStack S<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>S<span class="token punctuation">.</span>top <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> true<span class="token punctuation">;</span>    <span class="token keyword">else</span>        <span class="token keyword">return</span> false<span class="token punctuation">;</span><span class="token punctuation">}</span>bool <span class="token function">Push</span><span class="token punctuation">(</span>SqStack <span class="token operator">&amp;</span>S<span class="token punctuation">,</span>Elemtype e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>S<span class="token punctuation">.</span>top <span class="token operator">==</span> MaxSize<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> false<span class="token punctuation">;</span>    S<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token operator">++</span>S<span class="token punctuation">.</span>top<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>    <span class="token keyword">return</span> true<span class="token punctuation">;</span><span class="token punctuation">}</span>bool <span class="token function">Pop</span><span class="token punctuation">(</span>SqStack <span class="token operator">&amp;</span>S<span class="token punctuation">,</span>Elemtype <span class="token operator">&amp;</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>S<span class="token punctuation">.</span>top <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> false<span class="token punctuation">;</span>    e <span class="token operator">=</span> S<span class="token punctuation">.</span>data<span class="token punctuation">[</span>S<span class="token punctuation">.</span>top<span class="token operator">--</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> true<span class="token punctuation">;</span><span class="token punctuation">}</span>bool <span class="token function">GetTop</span><span class="token punctuation">(</span>SqStack S<span class="token punctuation">,</span>Elemtype <span class="token operator">&amp;</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>S<span class="token punctuation">.</span>top <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> false<span class="token punctuation">;</span>    e <span class="token operator">=</span> S<span class="token punctuation">.</span>data<span class="token punctuation">[</span>S<span class="token punctuation">.</span>top<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> true<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">DestroyStack</span><span class="token punctuation">(</span>SqStack <span class="token operator">&amp;</span>S<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">free</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Javaå®ç°"><a href="#Javaå®ç°" class="headerlink" title="Javaå®ç°"></a>Javaå®ç°</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SqStack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> top<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>        data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>capacity<span class="token punctuation">]</span><span class="token punctuation">;</span>        top <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>top <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>top <span class="token operator">==</span> data<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">StackOverflowError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        data<span class="token punctuation">[</span><span class="token operator">++</span>top<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> data<span class="token punctuation">[</span>top<span class="token operator">--</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> data<span class="token punctuation">[</span>top<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            data <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Object</span> d<span class="token operator">:</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>            d <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        data <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å…±äº«æ ˆ"><a href="#å…±äº«æ ˆ" class="headerlink" title="å…±äº«æ ˆ"></a>å…±äº«æ ˆ</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ShareStack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> top1<span class="token punctuation">,</span>top2<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>        data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>capacity<span class="token punctuation">]</span><span class="token punctuation">;</span>        top1 <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        top2 <span class="token operator">=</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>top1 <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token operator">&amp;&amp;</span>top2 <span class="token operator">==</span> data<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isFull</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>top2 <span class="token operator">-</span> top1 <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ins1</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isFull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">StackOverFlowException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        data<span class="token punctuation">[</span><span class="token operator">++</span>top1<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ins2</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isFull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">StackOverFlowException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        data<span class="token punctuation">[</span><span class="token operator">--</span>top2<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">del1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> data<span class="token punctuation">[</span>top1<span class="token operator">--</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">del2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> data<span class="token punctuation">[</span>top2<span class="token operator">++</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é“¾æ ˆ"><a href="#é“¾æ ˆ" class="headerlink" title="é“¾æ ˆ"></a>é“¾æ ˆ</h2><ul><li>é“¾è¡¨ç»“æ„</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">LinkNode</span><span class="token punctuation">{</span>    Elemtype data<span class="token punctuation">;</span>    <span class="token keyword">struct</span> <span class="token class-name">LinkNode</span> <span class="token operator">*</span>next<span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token operator">*</span>LiSatck<span class="token punctuation">;</span>LiStack S<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹äºé“¾å¼çš„ç»“æ„æœ‰ä»¥ä¸‹çš„ä¼˜ç‚¹ï¼š</p><p>1ï¼‰å¢åˆ éƒ½åœ¨è¡¨å¤´å®Œæˆï¼Œæ•ˆç‡é«˜</p><p>2ï¼‰åŸºæœ¬ä¸ä¼šå­˜åœ¨ä¸Šæº¢çš„é—®é¢˜</p><h3 id="Cå®ç°"><a href="#Cå®ç°" class="headerlink" title="Cå®ç°"></a>Cå®ç°</h3><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">InitStack_L</span><span class="token punctuation">(</span>LiStack S<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="Javaå®ç°-1"><a href="#Javaå®ç°-1" class="headerlink" title="Javaå®ç°"></a>Javaå®ç°</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LiStack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Node</span> head<span class="token punctuation">;</span>   <span class="token comment">// å§‹ç»ˆæŒ‡å‘æ ˆé¡¶çš„headå¼•ç”¨</span>    <span class="token comment">// é“¾è¡¨çš„ç»„æˆç»“ç‚¹</span>    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>        <span class="token class-name">E</span> data<span class="token punctuation">;</span>        <span class="token class-name">Node</span> next<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">E</span> data<span class="token punctuation">,</span> <span class="token class-name">Node</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// ä¸å«å¤´ç»“ç‚¹çš„é“¾è¡¨</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        head <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token comment">// å †æ ˆä¸ºç©ºå°±æ˜¯æ ˆé¡¶å…ƒç´ ä¸ºç©º</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> head <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// é‡‡ç”¨ç±»ä¼¼å¤´æ’æ³•ç”Ÿæˆåˆ—è¡¨çš„æ–¹å¼ï¼Œè®©headå§‹ç»ˆä¿æŒæ ˆé¡¶ä½ç½®</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Node</span> n <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            head <span class="token operator">=</span> n<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            n<span class="token punctuation">.</span>next <span class="token operator">=</span> head<span class="token punctuation">;</span>            head <span class="token operator">=</span> n<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">Node</span> h <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token class-name">E</span> elem <span class="token operator">=</span> h<span class="token punctuation">.</span>data<span class="token punctuation">;</span>        head <span class="token operator">=</span> head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        h <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> elem<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> head<span class="token punctuation">.</span>data<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            head <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">Node</span> n <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>head <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            head <span class="token operator">=</span> n<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            n <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            n <span class="token operator">=</span> head<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—"></a>é˜Ÿåˆ—</h1><p><code>é˜Ÿåˆ—</code>ï¼šä¸€ç§æ“ä½œå—é™åˆ¶çš„çº¿æ€§è¡¨ï¼Œåªå…è®¸åœ¨<code>é˜Ÿå¤´</code>å‡ºé˜Ÿ<code>é˜Ÿå°¾</code>å…¥é˜Ÿï¼</p><p><code>é˜Ÿå¤´</code>ï¼šå…è®¸åˆ é™¤çš„ä¸€ç«¯</p><p><code>é˜Ÿå°¾</code>ï¼šå…è®¸æ’å…¥çš„ä¸€ç«¯</p><h2 id="é˜Ÿåˆ—åŸºæœ¬çŸ¥è¯†"><a href="#é˜Ÿåˆ—åŸºæœ¬çŸ¥è¯†" class="headerlink" title="é˜Ÿåˆ—åŸºæœ¬çŸ¥è¯†"></a>é˜Ÿåˆ—åŸºæœ¬çŸ¥è¯†</h2><h3 id="åŸºæœ¬æ“ä½œ-1"><a href="#åŸºæœ¬æ“ä½œ-1" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h3><ul><li>cç±»è¯­è¨€</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">InitQueue</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Q<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">QueueEmpty</span><span class="token punctuation">(</span>Q<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">EnQueue</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Q<span class="token punctuation">,</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">DeQueue</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>Q<span class="token punctuation">,</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">GetHead</span><span class="token punctuation">(</span>Q<span class="token punctuation">,</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>Javaè¯­è¨€</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">initQ</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">isEmptyQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">insQueue</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">delQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">getHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆå§‹çŠ¶æ€ä¸åŸºæœ¬æ“ä½œçš„å…³ç³»-1"><a href="#åˆå§‹çŠ¶æ€ä¸åŸºæœ¬æ“ä½œçš„å…³ç³»-1" class="headerlink" title="åˆå§‹çŠ¶æ€ä¸åŸºæœ¬æ“ä½œçš„å…³ç³»"></a>åˆå§‹çŠ¶æ€ä¸åŸºæœ¬æ“ä½œçš„å…³ç³»</h3><p>1ï¼‰å‡è®¾æˆ‘ä»¬è®¾ç½®åˆå§‹çŠ¶æ€ä¸‹ï¼ŒQ.front = Q.rear = 0ï¼æ­¤æ—¶é˜Ÿå°¾æŒ‡é’ˆå§‹ç»ˆæŒ‡å‘é˜Ÿå°¾å…ƒç´ çš„ä¸‹ä¸€ä¸ªå­˜å‚¨å•å…ƒï¼</p><p><code>åˆå§‹çŠ¶æ€</code>ï¼šQ.front = Q.rear = 0</p><p><code>é˜Ÿç©ºæ¡ä»¶</code>ï¼šQ.front == Q.rear </p><p><code>é˜Ÿæ»¡æ¡ä»¶</code>ï¼šå­˜åœ¨ä¸‰ç§å®ç°æ–¹å¼ï¼ˆè¿™é‡Œçš„é˜Ÿåˆ—æ˜¯å¾ªç¯é˜Ÿåˆ—ç»“æ„ï¼‰</p><p><code>å…¥é˜Ÿæ“ä½œ</code>ï¼šQ.data = x ; Q.rear = (Q.rear+1)%MaxSize;</p><p><code>å‡ºé˜Ÿæ“ä½œ</code>ï¼šx = Q.data ; Q.front = (Q.front+1)%MaxSize</p><p>é€šè¿‡æ¨¡è¿ç®—å°±å¯ä»¥å®ç°ç±»ä¼¼äº<code>(0,1,2,â€¦â€¦,MaxSize-1)</code>çš„å‘¨æœŸåºåˆ—</p><p>2ï¼‰å‡è®¾æˆ‘ä»¬è®¾ç½®åˆå§‹çŠ¶æ€ä¸‹ï¼ŒQ.front = 0ã€Q.rear = MaxSize-1ï¼æ­¤æ—¶é˜Ÿå°¾æŒ‡é’ˆå§‹ç»ˆæŒ‡å‘é˜Ÿå°¾å…ƒç´ ï¼</p><p><code>åˆå§‹çŠ¶æ€</code>ï¼šQ.front = 0ã€Q.rear = MaxSize-1</p><p><code>é˜Ÿç©ºæ¡ä»¶</code>ï¼šQ.front == (Q.rear+1)%MaxSize</p><p><code>é˜Ÿæ»¡æ¡ä»¶</code>ï¼šå­˜åœ¨ä¸‰ç§å®ç°æ–¹å¼ï¼ˆè¿™é‡Œçš„é˜Ÿåˆ—æ˜¯å¾ªç¯é˜Ÿåˆ—ç»“æ„ï¼‰</p><p><code>å…¥é˜Ÿæ“ä½œ</code>ï¼šQ.rear = (Q.rear+1)%MaxSize ; Q.data = x </p><p><code>å‡ºé˜Ÿæ“ä½œ</code>ï¼šx = Q.data ; Q.front = (Q.front+1)%MaxSize</p><p><b style="color: red;">æ³¨ï¼š</b><strong>å› ä¸ºæ— è®ºæ˜¯å“ªä¸€ç§åˆå§‹çŠ¶æ€ï¼Œé˜Ÿå¤´æŒ‡é’ˆå§‹ç»ˆæŒ‡å‘é˜Ÿå¤´ï¼Œæ‰€ä»¥ä¸¤ç§çŠ¶æ€ä¸‹çš„å‡ºé˜Ÿæ“ä½œä¿æŒä¸€è‡´ï¼</strong></p><h2 id="é¡ºåºé˜Ÿåˆ—"><a href="#é¡ºåºé˜Ÿåˆ—" class="headerlink" title="é¡ºåºé˜Ÿåˆ—"></a>é¡ºåºé˜Ÿåˆ—</h2><h3 id="Cç±»è¯­è¨€å®ç°"><a href="#Cç±»è¯­è¨€å®ç°" class="headerlink" title="Cç±»è¯­è¨€å®ç°"></a>Cç±»è¯­è¨€å®ç°</h3><p>â‘ å‡è®¾åˆå§‹çŠ¶æ€ä¸€</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">define</span> <span class="token macro-name">MaxSize</span> <span class="token expression"><span class="token number">100</span></span></span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>    Elemtype data <span class="token punctuation">[</span>MaxSize<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> front<span class="token punctuation">,</span>rear<span class="token punctuation">;</span><span class="token punctuation">}</span> SqQueue<span class="token punctuation">;</span>SqQueue Q<span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">InitQueue</span><span class="token punctuation">(</span>SqQueue <span class="token operator">&amp;</span>Q<span class="token punctuation">)</span> <span class="token punctuation">{</span>    Q<span class="token punctuation">.</span>front <span class="token operator">=</span> Q<span class="token punctuation">.</span>rear <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span>bool <span class="token function">QueueEmpty</span><span class="token punctuation">(</span>SqQueue Q<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>Q<span class="token punctuation">.</span>front <span class="token operator">==</span> Q<span class="token punctuation">.</span>rear<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>bool <span class="token function">QueueFull</span><span class="token punctuation">(</span>SqQueue Q<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// è¡¥å……æ“ä½œï¼Œç”¨äºåˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦æ»¡ï¼Œå…·ä½“å®ç°ä¼šåœ¨åé¢å±•å‡ºä¸‰ç§æ–¹æ¡ˆï¼Œç›®å‰å¯ä»¥ç›´æ¥ä½¿ç”¨</span><span class="token punctuation">}</span>bool <span class="token function">EnQueue</span><span class="token punctuation">(</span>SqQueue <span class="token operator">&amp;</span>Q<span class="token punctuation">,</span>Elemtype x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">QueueFull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> false<span class="token punctuation">;</span>    Q<span class="token punctuation">.</span>data<span class="token punctuation">[</span>Q<span class="token punctuation">.</span>rear<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>    Q<span class="token punctuation">.</span>rear <span class="token operator">=</span> <span class="token punctuation">(</span>Q<span class="token punctuation">.</span>rear<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span>MaxSize<span class="token punctuation">;</span>       <span class="token comment">//å¾ªç¯å‘¨æœŸæ“ä½œï¼šåˆå§‹å€¼ä¸º0ã€æ­¥é•¿ä¸º1ã€å¾ªç¯å‘¨æœŸä¸ºMaxSizeçš„åºåˆ—</span>    <span class="token keyword">return</span> true<span class="token punctuation">;</span><span class="token punctuation">}</span>bool <span class="token function">DeQueue</span><span class="token punctuation">(</span>SqQueue <span class="token operator">&amp;</span>Q<span class="token punctuation">,</span>Elemtype <span class="token operator">&amp;</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">QueueEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> false<span class="token punctuation">;</span>    x <span class="token operator">=</span> Q<span class="token punctuation">.</span>data<span class="token punctuation">[</span>Q<span class="token punctuation">.</span>front<span class="token punctuation">]</span><span class="token punctuation">;</span>    Q<span class="token punctuation">.</span>front <span class="token operator">=</span> <span class="token punctuation">(</span>Q<span class="token punctuation">.</span>front<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span>MaxSize<span class="token punctuation">;</span>    <span class="token keyword">return</span> true<span class="token punctuation">;</span><span class="token punctuation">}</span>bool <span class="token function">GetHead</span><span class="token punctuation">(</span>SqQueue Q<span class="token punctuation">,</span>Elemtype <span class="token operator">&amp;</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">QueueEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> false<span class="token punctuation">;</span>    x <span class="token operator">=</span> Q<span class="token punctuation">.</span>data<span class="token punctuation">[</span>Q<span class="token punctuation">.</span>front<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> true<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: darkred;">QueueFull(SqQueue Q)åˆ¤æ–­æ“ä½œçš„ä¸‰ç§å®ç°æ–¹æ¡ˆ</b></p><p>1ï¼‰ç‰ºç‰²ä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼šä¿ç•™æœ€åä¸€ä¸ªä½ç½®<code>Q.data[MaxSize-1]</code>ä»¥åŒºåˆ«å’Œé˜Ÿç©ºçš„åˆ¤æ–­æ¡ä»¶</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// é˜Ÿç©º</span>bool <span class="token function">QueueEmpty</span><span class="token punctuation">(</span>SqQueue Q<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>Q<span class="token punctuation">.</span>front <span class="token operator">==</span> Q<span class="token punctuation">.</span>rear<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// é˜Ÿæ»¡</span>bool <span class="token function">QueueFull</span><span class="token punctuation">(</span>SqQueue Q<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>Q<span class="token punctuation">.</span>rear<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>MaxSize <span class="token operator">==</span> Q<span class="token punctuation">.</span>front<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2ï¼‰å¢åŠ æ ‡è®°å…ƒç´ ä¸ªæ•°çš„è¾…åŠ©å˜é‡sizeï¼šæ­¤æ—¶é˜Ÿç©ºå’Œé˜Ÿæ»¡éƒ½æœ‰å„è‡ªçš„æ ‡å‡†ï¼Œç»“æ„ä½“ä¹Ÿè¦åšå“åº”ä¿®æ­£ï¼Œä»¥åŠè¿›å‡ºé˜Ÿsizeå˜é‡çš„å˜åŒ–ã€‚<strong>å…¥é˜Ÿï¼šsize++ã€å‡ºé˜Ÿï¼šsizeâ€“ã€‚</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>    Elemtype data<span class="token punctuation">[</span>MaxSize<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> front<span class="token punctuation">,</span>rear<span class="token punctuation">;</span>    <span class="token keyword">int</span> size<span class="token punctuation">;</span><span class="token punctuation">}</span> SqQueue<span class="token punctuation">;</span><span class="token comment">// é˜Ÿç©º</span>bool <span class="token function">QueueEmpty</span><span class="token punctuation">(</span>SqQueue Q<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>Q<span class="token punctuation">.</span>size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// é˜Ÿæ»¡</span>bool <span class="token function">QueueFull</span><span class="token punctuation">(</span>SqQueue Q<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>Q<span class="token punctuation">.</span>size <span class="token operator">==</span> MaxSize<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3ï¼‰å¯¹äºæ•°ç»„ç©ºé—´çš„æ¯ä¸€ä½å…ƒç´ æ·»åŠ è¿›å‡ºé˜Ÿæ ‡è®°tagã€‚<strong>å‡ºé˜Ÿï¼šflag == 0ã€å…¥é˜Ÿï¼šflag == 1ã€‚</strong></p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>    Elemtype data<span class="token punctuation">[</span>MaxSize<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> front<span class="token punctuation">,</span>rear<span class="token punctuation">;</span>    <span class="token keyword">int</span> flag<span class="token punctuation">;</span><span class="token punctuation">}</span> SqQueue<span class="token punctuation">;</span><span class="token comment">// é˜Ÿç©º</span>bool <span class="token function">QueueEmpty</span><span class="token punctuation">(</span>SqQueue Q<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>Q<span class="token punctuation">.</span>rear <span class="token operator">==</span> Q<span class="token punctuation">.</span>front <span class="token operator">&amp;&amp;</span> flag <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// é˜Ÿæ»¡</span>bool <span class="token function">QueueFull</span><span class="token punctuation">(</span>SqQueue Q<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>Q<span class="token punctuation">.</span>rear <span class="token operator">==</span> Q<span class="token punctuation">.</span>front <span class="token operator">&amp;&amp;</span> flag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â‘¡å‡è®¾åˆå§‹çŠ¶æ€äºŒ</p><p>1ï¼‰ç‰ºç‰²ä¸¤ä¸ªå­˜å‚¨ç©ºé—´ï¼šä¿ç•™æœ€åä¸€ä¸ªä½ç½®<code>Q.data[MaxSize-1]</code>ã€å€’æ•°ç¬¬äºŒä¸ªä½ç½®<code>Q.data[MaxSize-2]</code>ä»¥åŒºåˆ«å’Œé˜Ÿç©ºçš„åˆ¤æ–­æ¡ä»¶</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// é˜Ÿç©º</span>bool <span class="token class-name">QueueEmpty</span><span class="token punctuation">(</span><span class="token class-name">SqQueue</span> <span class="token class-name">Q</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Q</span><span class="token punctuation">.</span>front <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token class-name">Q</span><span class="token punctuation">.</span>rear<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token class-name">MaxSize</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// é˜Ÿæ»¡</span>bool <span class="token class-name">QueueFull</span><span class="token punctuation">(</span><span class="token class-name">SqQueue</span> <span class="token class-name">Q</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Q</span><span class="token punctuation">.</span>front <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token class-name">Q</span><span class="token punctuation">.</span>rear<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token class-name">MaxSize</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2ï¼‰å¢åŠ æ ‡è®°å…ƒç´ ä¸ªæ•°çš„è¾…åŠ©å˜é‡sizeï¼šæ­¤æ—¶é˜Ÿç©ºå’Œé˜Ÿæ»¡éƒ½æœ‰å„è‡ªçš„æ ‡å‡†ï¼Œç»“æ„ä½“ä¹Ÿè¦åšå“åº”ä¿®æ­£ï¼Œä»¥åŠè¿›å‡ºé˜Ÿsizeå˜é‡çš„å˜åŒ–ã€‚<strong>å…¥é˜Ÿï¼šsize++ã€å‡ºé˜Ÿï¼šsizeâ€“ã€‚</strong></p><p>3ï¼‰å¯¹äºæ•°ç»„ç©ºé—´çš„æ¯ä¸€ä½å…ƒç´ æ·»åŠ è¿›å‡ºé˜Ÿæ ‡è®°tagã€‚<strong>å‡ºé˜Ÿï¼šflag == 0ã€å…¥é˜Ÿï¼šflag == 1ã€‚</strong></p><p><b style="color: yellowgreen;">ä»£ç ä¿æŒä¸å˜ï¼</b></p><h3 id="Javaè¯­è¨€å®ç°"><a href="#Javaè¯­è¨€å®ç°" class="headerlink" title="Javaè¯­è¨€å®ç°"></a>Javaè¯­è¨€å®ç°</h3><p>1ï¼‰ç‰ºç‰²ä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼šä¿ç•™æœ€åä¸€ä¸ªä½ç½®<code>data[capacity]</code>ä»¥åŒºåˆ«å’Œé˜Ÿç©ºçš„åˆ¤æ–­æ¡ä»¶</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SqQueue1</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> front<span class="token punctuation">,</span>rear<span class="token punctuation">;</span>    <span class="token comment">// capacityï¼šè¡¨ç¤ºå¯ç”¨çš„é˜Ÿåˆ—ç©ºé—´ï¼ˆå› ä¸ºè¿™é‡Œæ˜¯é‡‡å–ç‰ºç‰²å­˜å‚¨ç©ºé—´çš„æ–¹å¼ï¼‰</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initQ</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>        data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>capacity<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        front <span class="token operator">=</span> rear <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmptyQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>front <span class="token operator">==</span> rear<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isFullQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>rear<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span> data<span class="token punctuation">.</span>length <span class="token operator">==</span> front<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">insQueue</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isFullQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">StackOverflowError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        data<span class="token punctuation">[</span>rear<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>        rear <span class="token operator">=</span> <span class="token punctuation">(</span>rear<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">delQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmptyQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">E</span> elem <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> data<span class="token punctuation">[</span>front<span class="token punctuation">]</span><span class="token punctuation">;</span>        front <span class="token operator">=</span> <span class="token punctuation">(</span>front<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">return</span> elem<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">getHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmptyQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> data<span class="token punctuation">[</span>front<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2ï¼‰å¢åŠ æ ‡è®°å…ƒç´ ä¸ªæ•°çš„è¾…åŠ©å˜é‡sizeï¼šæ­¤æ—¶é˜Ÿç©ºå’Œé˜Ÿæ»¡éƒ½æœ‰å„è‡ªçš„æ ‡å‡†ï¼Œå±æ€§ä¹Ÿè¦åšå“åº”ä¿®æ­£ï¼Œä»¥åŠè¿›å‡ºé˜Ÿsizeå˜é‡çš„å˜åŒ–ã€‚<strong>å…¥é˜Ÿï¼šsize++ã€å‡ºé˜Ÿï¼šsizeâ€“ã€‚</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">SqQueue2</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> front<span class="token punctuation">,</span>rear<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> size<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initQ</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>        data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>capacity<span class="token punctuation">]</span><span class="token punctuation">;</span>        front <span class="token operator">=</span> rear <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmptyQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isFullQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>size <span class="token operator">==</span> data<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">insQueue</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isFullQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">StackOverflowError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        data<span class="token punctuation">[</span>rear<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>        rear <span class="token operator">=</span> <span class="token punctuation">(</span>rear<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        size<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">delQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmptyQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">E</span> elem <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> data<span class="token punctuation">[</span>front<span class="token punctuation">]</span><span class="token punctuation">;</span>        front <span class="token operator">=</span> <span class="token punctuation">(</span>front<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        size<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> elem<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">getHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmptyQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> data<span class="token punctuation">[</span>front<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3ï¼‰å¯¹äºæ·»åŠ è¿›å‡ºé˜Ÿæ ‡è®°flagã€‚<strong>å‡ºé˜Ÿï¼šflag == 0ã€å…¥é˜Ÿï¼šflag == 1ã€‚</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">SqQueue3</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> front<span class="token punctuation">,</span>rear<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> flag<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initQ</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>        data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>capacity<span class="token punctuation">]</span><span class="token punctuation">;</span>        front <span class="token operator">=</span> rear <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmptyQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>front <span class="token operator">==</span> rear <span class="token operator">&amp;&amp;</span> flag <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isFullQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>front <span class="token operator">==</span> rear <span class="token operator">&amp;&amp;</span> flag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">insQueue</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isFullQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">StackOverflowError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        data<span class="token punctuation">[</span>rear<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>        rear <span class="token operator">=</span> <span class="token punctuation">(</span>rear<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        flag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">delQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmptyQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">E</span> elem <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> data<span class="token punctuation">[</span>front<span class="token punctuation">]</span><span class="token punctuation">;</span>        front <span class="token operator">=</span> <span class="token punctuation">(</span>front<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> elem<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">getHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmptyQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> data<span class="token punctuation">[</span>front<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é“¾å¼é˜Ÿåˆ—"><a href="#é“¾å¼é˜Ÿåˆ—" class="headerlink" title="é“¾å¼é˜Ÿåˆ—"></a>é“¾å¼é˜Ÿåˆ—</h2><p>é“¾è¡¨å®ç°é˜Ÿåˆ—çš„å¥½å¤„åœ¨äºï¼šåŸºæœ¬ä¸éœ€è¦è€ƒè™‘é˜Ÿåˆ—æ»¡çš„æƒ…å†µï¼Œåªéœ€è¦ç•™æ„åˆ¤æ–­é˜Ÿç©ºçš„æƒ…å†µï¼å¹¶ä¸”å¯¹äºé˜Ÿåˆ—çš„å‡ºå…¥é˜Ÿï¼Œä¹Ÿå¯ä»¥ç­‰ä»·äºé˜Ÿå¤´å’Œé˜Ÿå°¾çš„åˆ é™¤å’Œæ’å…¥ï¼</p><h3 id="Cç±»å®ç°"><a href="#Cç±»å®ç°" class="headerlink" title="Cç±»å®ç°"></a>Cç±»å®ç°</h3><p>å¯¹äºå«æœ‰å¤´ç»“ç‚¹çš„å•é“¾è¡¨ï¼Œå°†ä¼šæ¯”è¾ƒé€‚åˆå®ç°é˜Ÿåˆ—çš„ç»“æ„ï¼</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span>  <span class="token punctuation">{</span>    Elemtype data<span class="token punctuation">;</span>    LinkNode <span class="token operator">*</span>next<span class="token punctuation">;</span><span class="token punctuation">}</span>LinkNode<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span>  <span class="token punctuation">{</span>    LinkNode <span class="token operator">*</span>front<span class="token punctuation">,</span><span class="token operator">*</span>rear<span class="token punctuation">;</span><span class="token punctuation">}</span>LiQueue<span class="token punctuation">;</span>LiQueue Q<span class="token punctuation">;</span><span class="token comment">// å¸¦æœ‰å¤´ç»“ç‚¹çš„é“¾è¡¨</span><span class="token keyword">void</span> <span class="token function">InitQueue</span><span class="token punctuation">(</span>LiQueue <span class="token operator">&amp;</span>Q<span class="token punctuation">)</span> <span class="token punctuation">{</span>    Q<span class="token punctuation">.</span>front <span class="token operator">=</span> Q<span class="token punctuation">.</span>rear <span class="token operator">=</span> <span class="token punctuation">(</span>LinkNode<span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>LinkNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Q<span class="token punctuation">.</span>front<span class="token operator">-&gt;</span>next <span class="token operator">=</span> null<span class="token punctuation">;</span><span class="token punctuation">}</span>bool <span class="token function">QueueEmpty</span><span class="token punctuation">(</span>LiQueue Q<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>Q<span class="token punctuation">.</span>front <span class="token operator">==</span> Q<span class="token punctuation">.</span>rear<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">EnQueue</span><span class="token punctuation">(</span>LiQueue <span class="token operator">&amp;</span>Q<span class="token punctuation">,</span>Elemtype e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    LinkNode <span class="token operator">*</span>n <span class="token operator">=</span> <span class="token punctuation">(</span>LinkNode<span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>LinkNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    n<span class="token operator">-&gt;</span>data <span class="token operator">=</span> e<span class="token punctuation">;</span>    n<span class="token operator">-&gt;</span>next <span class="token operator">=</span> null<span class="token punctuation">;</span>    Q<span class="token punctuation">.</span>rear<span class="token operator">-&gt;</span>next <span class="token operator">=</span> n<span class="token punctuation">;</span>    Q<span class="token punctuation">.</span>rear <span class="token operator">=</span> n<span class="token punctuation">;</span><span class="token punctuation">}</span>bool <span class="token function">DeQueue</span><span class="token punctuation">(</span>LiQueue <span class="token operator">&amp;</span>Q<span class="token punctuation">,</span>Elemtype <span class="token operator">&amp;</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">QueueEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> false<span class="token punctuation">;</span>    LinkNode <span class="token operator">*</span>p <span class="token operator">=</span> Q<span class="token punctuation">.</span>front<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    e <span class="token operator">=</span> p<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span>    Q<span class="token punctuation">.</span>front <span class="token operator">=</span> Q<span class="token punctuation">.</span>front<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token operator">==</span> Q<span class="token punctuation">.</span>rear<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Q<span class="token punctuation">.</span>rear <span class="token operator">=</span> Q<span class="token punctuation">.</span>front<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> true<span class="token punctuation">;</span><span class="token punctuation">}</span>bool <span class="token function">GetHead</span><span class="token punctuation">(</span>LiQueue Q<span class="token punctuation">,</span>Elemtype <span class="token operator">&amp;</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">QueueEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> false<span class="token punctuation">;</span>    <span class="token keyword">return</span> Q<span class="token punctuation">.</span>front<span class="token operator">-&gt;</span>next<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Javaå®ç°-2"><a href="#Javaå®ç°-2" class="headerlink" title="Javaå®ç°"></a>Javaå®ç°</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LiQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Node</span> front<span class="token punctuation">,</span>rear<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>        <span class="token class-name">E</span> data<span class="token punctuation">;</span>        <span class="token class-name">Node</span> next<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">,</span> <span class="token class-name">Node</span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> e<span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// ä¸å¸¦å¤´ç»“ç‚¹çš„é“¾è¡¨</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        front <span class="token operator">=</span> rear <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmptyQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>front <span class="token operator">==</span> rear<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// é˜Ÿå°¾æ’å…¥</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">enQueue</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Node</span> r <span class="token operator">=</span> rear<span class="token punctuation">;</span>        <span class="token class-name">Node</span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rear <span class="token operator">=</span> newNode<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            front <span class="token operator">=</span> newNode<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            r<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// é˜Ÿå¤´åˆ é™¤</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">deQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isEmptyQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">Node</span> f <span class="token operator">=</span> front<span class="token punctuation">;</span>        front <span class="token operator">=</span> front<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token class-name">E</span> elem <span class="token operator">=</span> f<span class="token punctuation">.</span>data<span class="token punctuation">;</span>        f<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        f<span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        f <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> elem<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">getHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isEmptyQ</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> front<span class="token punctuation">.</span>data<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ ˆçš„åº”ç”¨"><a href="#æ ˆçš„åº”ç”¨" class="headerlink" title="æ ˆçš„åº”ç”¨"></a>æ ˆçš„åº”ç”¨</h1><h2 id="æ‹¬å·åŒ¹é…"><a href="#æ‹¬å·åŒ¹é…" class="headerlink" title="æ‹¬å·åŒ¹é…"></a>æ‹¬å·åŒ¹é…</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">bracesMatch</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> braces<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Character</span><span class="token punctuation">&gt;</span></span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch <span class="token operator">:</span> braces<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token string">'['</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token string">']'</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">||</span>stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> ch<span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Polish-Notation"><a href="#Polish-Notation" class="headerlink" title="Polish Notation"></a>Polish Notation</h2><p>ä¸­ç¼€è¡¨è¾¾å¼è½¬åŒ–ä¸ºé€†æ³¢å…°å¼<code>(Reverse Polish Notation)</code></p><p><code>toRPN</code>æ¥å—çš„è¡¨è¾¾å¼å¿…é¡»æ˜¯å°†å„å­—ç¬¦ä¹‹é—´å¿…é¡»å­˜åœ¨ç©ºæ ¼åˆ†ç¦»å¼€ï¼</p><p>ç®—æ³•æ€æƒ³ï¼š</p><p>1ï¼‰æ‰«ææ•°ç»„ï¼Œå½“å­—ç¬¦æ˜¯æ“ä½œæ•°æ—¶ï¼Œç›´æ¥å°†æ“ä½œæ•°åŠ å…¥rpnæ•°ç»„</p><p>2ï¼‰å½“å­—ç¬¦æ˜¯ç•Œé™ç¬¦æ—¶ï¼Œæ˜¯<code>(</code>ç›´æ¥å‹å…¥operatoræ ˆã€‚æ˜¯<code>)</code>åˆ™ä¾æ¬¡å°†operatorä¸­çš„æ“ä½œç¬¦å¼¹å‡ºåŠ å…¥rpnæ•°ç»„ï¼Œç›´è‡³é‡åˆ°<code>(</code>åœæ­¢ï¼å¹¶ä¸”å¼¹å‡º<code>(</code>ä¸¢å¼ƒ</p><p>3ï¼‰å½“å­—ç¬¦æ˜¯æ“ä½œç¬¦æ—¶ï¼Œä¾æ¬¡å¼¹å‡ºæ ˆä¸­å¤§äºç­‰äºå½“å‰æ“ä½œç¬¦çš„ä¼˜å…ˆçº§çš„æ‰€æœ‰è¿ç®—ç¬¦ï¼ŒåŠ å…¥rpnæ•°ç»„ï¼Œç›´è‡³æ ˆç©ºæˆ–è€…é‡åˆ°å­—ç¬¦<code>(</code>ï¼Œå†å°†å½“å‰çš„å­—ç¬¦å‹å…¥operatoræ ˆ</p><p>4ï¼‰å½“æ‰«æå®Œæ•°ç»„ï¼Œè‹¥operatoræ ˆä¸ä¸ºç©ºï¼Œåˆ™å°†æ‰€æœ‰çš„æ“ä½œç¬¦ä¾æ¬¡å¼¹å‡ºï¼ŒåŠ å…¥rpnæ•°ç»„</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">stack</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Stack</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> RPN <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">toRPN</span><span class="token punctuation">(</span><span class="token class-name">String</span> express<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// è¿ç®—ç¬¦å­˜å‚¨æ ˆ</span>        <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> operator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é€†æ³¢å…°å¼å­˜å‚¨æ•°ç»„</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> rpn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¸­ç¼€è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²æ•°ç»„å½¢å¼</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ie <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\\s"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¸­ç¼€è¡¨è¾¾å¼æ•°ç»„æ‰«æï¼Œç®—æ³•æ ¸å¿ƒä»£ç </span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> ie<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isOperator</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                rpn<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"("</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                operator<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>operator<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"("</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    rpn<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>operator<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>operator<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"("</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    operator<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>operator<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                      <span class="token operator">&amp;&amp;</span><span class="token function">comparePriority</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>operator<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                      <span class="token operator">&amp;&amp;</span><span class="token operator">!</span>operator<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"("</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    rpn<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>operator<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                operator<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>operator<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            rpn<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>operator<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> objects <span class="token operator">=</span> rpn<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>objects<span class="token punctuation">,</span>objects<span class="token punctuation">.</span>length<span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// æ“ä½œç¬¦åˆ¤æ–­æ–¹æ³•(+ - * / ( ) )</span>    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">isOperator</span><span class="token punctuation">(</span><span class="token class-name">String</span> op<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> op<span class="token punctuation">.</span><span class="token function">matches</span><span class="token punctuation">(</span><span class="token string">"\\p{Punct}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// æ¯”è¾ƒè¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼ˆop1çš„ä¼˜å…ˆçº§å¤§äºç­‰äºop0ï¼‰</span>    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">comparePriority</span><span class="token punctuation">(</span><span class="token class-name">String</span> op0<span class="token punctuation">,</span><span class="token class-name">String</span> op1<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">getPriorVal</span><span class="token punctuation">(</span>op1<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token function">getPriorVal</span><span class="token punctuation">(</span>op0<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// ä¸ºè¿ç®—ç¬¦è§„å®šä¼˜å…ˆçº§ï¼ˆ+ - ä¸º0çº§ * / ä¸º1çº§ï¼‰</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">getPriorVal</span><span class="token punctuation">(</span><span class="token class-name">String</span> op<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>op<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"+"</span><span class="token punctuation">)</span><span class="token operator">||</span>op<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>op<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token operator">||</span>op<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">RPN</span> r <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">RPN</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">toRPN</span><span class="token punctuation">(</span><span class="token string">"A + B - C * D / E + F"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é€†æ³¢å…°å¼è®¡ç®—"><a href="#é€†æ³¢å…°å¼è®¡ç®—" class="headerlink" title="é€†æ³¢å…°å¼è®¡ç®—"></a>é€†æ³¢å…°å¼è®¡ç®—</h2><p>æ ˆç»“æ„å®ç°é€†æ³¢å…°å¼çš„è®¡ç®—</p><p>â‘ ä»å·¦æ‰«ææ•°ç»„</p><p>â‘¡åˆ¤æ–­æ‰«æçš„å­—ç¬¦</p><ul><li>è‹¥æ‰«æçš„æ˜¯æ“ä½œæ•°ï¼Œå‹å…¥æ ˆ</li><li>è‹¥æ‰«æçš„æ˜¯æ“ä½œç¬¦ï¼Œå¼¹å‡ºä¸¤ä¸ªæ“ä½œæ•°ï¼Œè¿›è¡Œè¿ç®—ï¼Œå°†ç»“æœåŠ å…¥æ ˆé¡¶</li></ul><p>â‘¢æ‰«æå®Œæ¯•åï¼Œå¼¹å‡ºæœ€ç»ˆç»“æœ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> RPN <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">calcRPN</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> rpn<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">String</span> r <span class="token operator">:</span> rpn<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isOperator</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                num<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>num<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token comment">// å·¦æ“ä½œæ•° å³æ“ä½œæ•° æ“ä½œç¬¦ </span>                    <span class="token keyword">int</span> right <span class="token operator">=</span> num<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>                    <span class="token keyword">int</span> left <span class="token operator">=</span> num<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"+"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        num<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>left<span class="token operator">+</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        num<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>left<span class="token operator">-</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        num<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>left<span class="token operator">*</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                        num<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>left<span class="token operator">/</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> num<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">RPN</span> r <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">RPN</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// console : 13    </span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">calcRPN</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span><span class="token function">toRPN</span><span class="token punctuation">(</span><span class="token string">"15 - ( 2 + ( 1 + 1 ) * 3 ) / 4"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é€’å½’æ ˆ"><a href="#é€’å½’æ ˆ" class="headerlink" title="é€’å½’æ ˆ"></a>é€’å½’æ ˆ</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">fiboracci</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">fiboracci</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">fiboracci</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// console : fiboracci(5) = 5</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210406174136.jpg" style="width:80%;border:solid"><h1 id="é˜Ÿåˆ—åº”ç”¨"><a href="#é˜Ÿåˆ—åº”ç”¨" class="headerlink" title="é˜Ÿåˆ—åº”ç”¨"></a>é˜Ÿåˆ—åº”ç”¨</h1><h2 id="æ ‘çš„å±‚æ¬¡éå†"><a href="#æ ‘çš„å±‚æ¬¡éå†" class="headerlink" title="æ ‘çš„å±‚æ¬¡éå†"></a>æ ‘çš„å±‚æ¬¡éå†</h2><h2 id="å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†"><a href="#å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†" class="headerlink" title="å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†"></a>å›¾çš„å¹¿åº¦ä¼˜å…ˆéå†</h2><h2 id="å…ˆæ¥å…ˆæœåŠ¡"><a href="#å…ˆæ¥å…ˆæœåŠ¡" class="headerlink" title="å…ˆæ¥å…ˆæœåŠ¡"></a>å…ˆæ¥å…ˆæœåŠ¡</h2><h1 id="çŸ©é˜µ"><a href="#çŸ©é˜µ" class="headerlink" title="çŸ©é˜µ"></a>çŸ©é˜µ</h1><h2 id="çŸ©é˜µå‹ç¼©å­˜å‚¨"><a href="#çŸ©é˜µå‹ç¼©å­˜å‚¨" class="headerlink" title="çŸ©é˜µå‹ç¼©å­˜å‚¨"></a>çŸ©é˜µå‹ç¼©å­˜å‚¨</h2><ul><li><b style="color: chocolate;">å¯¹ç§°çŸ©é˜µçš„å‹ç¼©å­˜å‚¨</b></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">compressSymmetricMatrix</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> symmetricMatrix<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> len <span class="token operator">=</span> matrix<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> compressed <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len<span class="token operator">*</span><span class="token punctuation">(</span>len<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>                compressed<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token operator">+</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                compressed<span class="token punctuation">[</span>j<span class="token operator">*</span><span class="token punctuation">(</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token operator">+</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> compressed<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><b style="color: chocolate;">ä¸‹ä¸‰è§’çŸ©é˜µçš„å‹ç¼©å­˜å‚¨</b></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">compressTriangularMatrixDown</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> triangularMatrix<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> len <span class="token operator">=</span> matrix<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> compressed <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len<span class="token operator">*</span><span class="token punctuation">(</span>len<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>                compressed<span class="token punctuation">[</span>i<span class="token operator">*</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token operator">+</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    compressed<span class="token punctuation">[</span>compress<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> triangularMatrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> compressed<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><b style="color: chocolate;">ä¸Šä¸‰è§’çŸ©é˜µå‹ç¼©å­˜å‚¨</b></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">compressTriangularMatrixUp</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> triangularMatrix<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> len <span class="token operator">=</span> matrix<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> compressed <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>len<span class="token operator">*</span><span class="token punctuation">(</span>len<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&lt;=</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>                compressed<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>len<span class="token operator">-</span>i<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token operator">+</span>j<span class="token operator">-</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    compressed<span class="token punctuation">[</span>compress<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> triangularMatrix<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> compressed<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DataStructure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŠ›æ‰£åˆ·é¢˜</title>
      <link href="posts/46256.html"/>
      <url>posts/46256.html</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®ç»“æ„ä¸ç®—æ³•"><a href="#æ•°æ®ç»“æ„ä¸ç®—æ³•" class="headerlink" title="æ•°æ®ç»“æ„ä¸ç®—æ³•"></a>æ•°æ®ç»“æ„ä¸ç®—æ³•</h1><h2 id="åˆ·é¢˜é¡ºåºå›¾"><a href="#åˆ·é¢˜é¡ºåºå›¾" class="headerlink" title="åˆ·é¢˜é¡ºåºå›¾"></a>åˆ·é¢˜é¡ºåºå›¾</h2><h3 id="ä¸€-æ•°ç»„"><a href="#ä¸€-æ•°ç»„" class="headerlink" title="ä¸€. æ•°ç»„"></a>ä¸€. æ•°ç»„</h3><table><thead><tr><th>é¢˜ç›®åˆ†ç±»</th><th>é¢˜ç›®ç¼–å·</th></tr></thead><tbody><tr><td>æ•°ç»„çš„éå†</td><td>485ã€495ã€414ã€628</td></tr><tr><td>ç»Ÿè®¡æ•°ç»„ä¸­çš„å…ƒç´ </td><td>645ã€697ã€448ã€442ã€41ã€274</td></tr><tr><td>æ•°ç»„çš„æ”¹å˜ã€ç§»åŠ¨</td><td>453ã€665ã€283</td></tr><tr><td>äºŒç»´æ•°ç»„åŠæ»šåŠ¨æ•°ç»„</td><td>118ã€119ã€661ã€598ã€419</td></tr><tr><td>æ•°ç»„çš„æ—‹è½¬</td><td>189ã€396</td></tr><tr><td>ç‰¹å®šé¡ºåºéå†äºŒç»´æ•°ç»„</td><td>54ã€59ã€498</td></tr><tr><td>äºŒç»´æ•°ç»„å˜æ¢</td><td>566ã€48ã€73ã€289</td></tr><tr><td>å‰ç¼€å’Œæ•°ç»„</td><td>303ã€304ã€238</td></tr></tbody></table><h2 id="åŠ›æ‰£åˆ·é¢˜"><a href="#åŠ›æ‰£åˆ·é¢˜" class="headerlink" title="åŠ›æ‰£åˆ·é¢˜"></a>åŠ›æ‰£åˆ·é¢˜</h2><h3 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h3><p>ä¸ºäº†åé¢çš„å¤ä¹ ä»¥åŠåˆ·é¢˜å¤ç›˜ï¼Œæˆ‘å°†è‡ªå·±è§£é¢˜çš„ç­”æ¡ˆåŠæ€è·¯å…¨éƒ¨æ”¾åœ¨äº†è‡ªå·±çš„ä»“åº“ä¸­ğŸ‘‰ <a href="https://gitee.com/matemaster/master-depository/tree/master/leetcode/">åŠ›æ‰£åˆ·é¢˜</a></p><h3 id="ä¸€-æ•°ç»„-1"><a href="#ä¸€-æ•°ç»„-1" class="headerlink" title="ä¸€. æ•°ç»„"></a>ä¸€. æ•°ç»„</h3><h4 id="æ•°ç»„éå†"><a href="#æ•°ç»„éå†" class="headerlink" title="æ•°ç»„éå†"></a>æ•°ç»„éå†</h4><ul><li>485</li></ul><p>ç»™å®šä¸€ä¸ªäºŒè¿›åˆ¶æ•°ç»„ï¼Œ è®¡ç®—å…¶ä¸­æœ€å¤§è¿ç»­ 1 çš„ä¸ªæ•°ã€‚</p><blockquote><p>ç¤ºä¾‹ï¼š<br>è¾“å…¥ï¼š[1,1,0,1,1,1]<br>è¾“å‡ºï¼š3<br>è§£é‡Šï¼šå¼€å¤´çš„ä¸¤ä½å’Œæœ€åçš„ä¸‰ä½éƒ½æ˜¯è¿ç»­ 1 ï¼Œæ‰€ä»¥æœ€å¤§è¿ç»­ 1 çš„ä¸ªæ•°æ˜¯ 3.</p></blockquote><p>è§£é¢˜æ€è·¯ï¼š</p><p>ä½¿ç”¨ä¸€ä¸ªè¿ç»­1çš„è®¡æ•°å™¨iå’Œæœ€å¤§è¿ç»­æ•°æ ‡å¿—maxï¼é€šè¿‡å¯¹è®¡æ•°å™¨iè®°å½•è¿ç»­1çš„ä¸ªæ•°ï¼å½“æ•°ç»„å…ƒç´ ä¸º1æ—¶ï¼Œè®¡æ•°å™¨i+1å½“æ•°ç»„å…ƒç´ ä¸º0æ—¶ï¼Œè®¡æ•°å™¨éœ€è¦é‡æ–°æ¸…é›¶è®¡æ•°ã€‚å¹¶ä¸”æ›´æ–°æœ€å¤§è¿ç»­1æ•°maxï¼Œ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findMaxConsecutiveOnes</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">,</span> max <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>             <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                 i<span class="token operator">++</span><span class="token punctuation">;</span>                 <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&gt;</span>max<span class="token punctuation">)</span>                     max <span class="token operator">=</span> i<span class="token punctuation">;</span>             <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>                 i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>             <span class="token punctuation">}</span>                           <span class="token punctuation">}</span>        <span class="token keyword">return</span> max<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>495</li></ul><p>åœ¨ã€Šè‹±é›„è”ç›Ÿã€‹çš„ä¸–ç•Œä¸­ï¼Œæœ‰ä¸€ä¸ªå« â€œæè«â€ çš„è‹±é›„ï¼Œä»–çš„æ”»å‡»å¯ä»¥è®©æ•Œæ–¹è‹±é›„è‰¾å¸Œï¼ˆç¼–è€…æ³¨ï¼šå¯’å†°å°„æ‰‹ï¼‰è¿›å…¥ä¸­æ¯’çŠ¶æ€ã€‚ç°åœ¨ï¼Œç»™å‡ºæè«å¯¹è‰¾å¸Œçš„æ”»å‡»æ—¶é—´åºåˆ—å’Œæè«æ”»å‡»çš„ä¸­æ¯’æŒç»­æ—¶é—´ï¼Œä½ éœ€è¦è¾“å‡ºè‰¾å¸Œçš„ä¸­æ¯’çŠ¶æ€æ€»æ—¶é•¿ã€‚</p><p>ä½ å¯ä»¥è®¤ä¸ºæè«åœ¨ç»™å®šçš„æ—¶é—´ç‚¹è¿›è¡Œæ”»å‡»ï¼Œå¹¶ç«‹å³ä½¿è‰¾å¸Œå¤„äºä¸­æ¯’çŠ¶æ€ã€‚</p><blockquote><p>ç¤ºä¾‹1:</p><p>è¾“å…¥: [1,4], 2<br>è¾“å‡º: 4<br>åŸå› : ç¬¬ 1 ç§’åˆï¼Œæè«å¼€å§‹å¯¹è‰¾å¸Œè¿›è¡Œæ”»å‡»å¹¶ä½¿å…¶ç«‹å³ä¸­æ¯’ã€‚ä¸­æ¯’çŠ¶æ€ä¼šç»´æŒ 2 ç§’é’Ÿï¼Œç›´åˆ°ç¬¬ 2 ç§’æœ«ç»“æŸã€‚<br>ç¬¬ 4 ç§’åˆï¼Œæè«å†æ¬¡æ”»å‡»è‰¾å¸Œï¼Œä½¿å¾—è‰¾å¸Œè·å¾—å¦å¤– 2 ç§’ä¸­æ¯’æ—¶é—´ã€‚<br>æ‰€ä»¥æœ€ç»ˆè¾“å‡º 4 ç§’ã€‚<br>ç¤ºä¾‹2:</p><p>è¾“å…¥: [1,2], 2<br>è¾“å‡º: 3<br>åŸå› : ç¬¬ 1 ç§’åˆï¼Œæè«å¼€å§‹å¯¹è‰¾å¸Œè¿›è¡Œæ”»å‡»å¹¶ä½¿å…¶ç«‹å³ä¸­æ¯’ã€‚ä¸­æ¯’çŠ¶æ€ä¼šç»´æŒ 2 ç§’é’Ÿï¼Œç›´åˆ°ç¬¬ 2 ç§’æœ«ç»“æŸã€‚<br>ä½†æ˜¯ç¬¬ 2 ç§’åˆï¼Œæè«å†æ¬¡æ”»å‡»äº†å·²ç»å¤„äºä¸­æ¯’çŠ¶æ€çš„è‰¾å¸Œã€‚<br>ç”±äºä¸­æ¯’çŠ¶æ€ä¸å¯å åŠ ï¼Œæè«åœ¨ç¬¬ 2 ç§’åˆçš„è¿™æ¬¡æ”»å‡»ä¼šåœ¨ç¬¬ 3 ç§’æœ«ç»“æŸã€‚<br>æ‰€ä»¥æœ€ç»ˆè¾“å‡º 3 ã€‚</p><p>æç¤ºï¼š</p><p>ä½ å¯ä»¥å‡å®šæ—¶é—´åºåˆ—æ•°ç»„çš„æ€»é•¿åº¦ä¸è¶…è¿‡ 10000ã€‚<br>ä½ å¯ä»¥å‡å®šæè«æ”»å‡»æ—¶é—´åºåˆ—ä¸­çš„æ•°å­—å’Œæè«æ”»å‡»çš„ä¸­æ¯’æŒç»­æ—¶é—´éƒ½æ˜¯éè´Ÿæ•´æ•°ï¼Œå¹¶ä¸”ä¸è¶…è¿‡ 10,000,000ã€‚</p></blockquote><p>è§£é¢˜æ€è·¯ï¼š</p><p>æˆ‘ä»¬ä»é¢˜ç›®ä¸­å¾—å‡ºï¼Œæ•°ç»„å…ƒç´ ä¸ºä¸­æ¯’çš„å¼€å§‹æ—¶åˆ»ï¼Œé‚£ä¹ˆå½“æ—¶é—´é—´éš”å¤§äºä¸­æ¯’çš„æŒç»­æ—¶é—´<code>duration</code>æ—¶ï¼Œæˆ‘ä»¬çš„æ•´ä¸ªä¸­æ¯’è¿‡ç¨‹æŒç»­æ—¶é—´ç›´æ¥å°±æ˜¯ï¼šæ•°ç»„çš„é•¿åº¦âœ–ä¸­æ¯’çš„æŒç»­æ—¶é—´<code>total</code>ã€‚ä½†æ˜¯å½“å…¶ä¸­çš„æ—¶é—´é—´éš”æœ‰å°äºä¸­æ¯’æŒç»­æ—¶é—´çš„æƒ…å†µæ—¶ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸­æ¯’æ•ˆæœå­˜åœ¨å åŠ ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦åœ¨ä¸Šé¢çš„totalå°±éœ€è¦å»é™¤é‡å¤æ—¶é—´ã€‚</p><p>å¯ä»¥çœ‹å‡ºï¼Œé¢˜ç›®çš„éš¾åº¦å°±èšé›†åœ¨å¦‚ä½•ç¡®å®šä¸­æ¯’çš„å åŠ æ—¶é—´<code>repeat</code>ï¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findPoisonedDuration</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> timeSeries<span class="token punctuation">,</span> <span class="token keyword">int</span> duration<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> repeat <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>timeSeries<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>timeSeries<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>duration<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> timeSeries<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                repeat <span class="token operator">+=</span>  <span class="token punctuation">(</span>timeSeries<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> duration <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> timeSeries<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">else</span>                <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token keyword">return</span> timeSeries<span class="token punctuation">.</span>length<span class="token operator">*</span>duration <span class="token operator">-</span> repeat<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">// ä»»æ„æ—¶åˆ»iä¸­æ¯’çš„ç»“æŸæ—¶åˆ»ï¼šendForI = (timeSeries[i]+duration-1)</span><span class="token comment">// ä»»æ„æ—¶åˆ»i+1ä¸­æ¯’çš„å¼€å§‹æ—¶åˆ»ï¼šstartForIplus = timeSeries[i+1]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: chocolate;">å¢å¼ºå¯è¯»æ€§ç‰ˆæœ¬</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findPoisonedDuration</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> timeSeries<span class="token punctuation">,</span> <span class="token keyword">int</span> duration<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> repeat <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>timeSeries<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> endForI <span class="token operator">=</span> <span class="token punctuation">(</span>timeSeries<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span>duration<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> startForIplus <span class="token operator">=</span> timeSeries<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>endForI <span class="token operator">&gt;=</span> startForIplus<span class="token punctuation">)</span>                repeat <span class="token operator">+=</span>  endForI <span class="token operator">-</span> startForIplus <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">else</span>                <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token keyword">return</span> timeSeries<span class="token punctuation">.</span>length<span class="token operator">*</span>duration <span class="token operator">-</span> repeat<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>414</li></ul><p>ç»™ä½ ä¸€ä¸ªéç©ºæ•°ç»„ï¼Œè¿”å›æ­¤æ•°ç»„ä¸­ <strong>ç¬¬ä¸‰å¤§çš„æ•°</strong> ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›æ•°ç»„ä¸­æœ€å¤§çš„æ•°ã€‚</p><blockquote><p>ç¤ºä¾‹ 1:<br>è¾“å…¥ï¼š[3, 2, 1]<br>è¾“å‡ºï¼š1<br>è§£é‡Šï¼šç¬¬ä¸‰å¤§çš„æ•°æ˜¯ 1 ã€‚</p><p>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼š[1, 2]<br>è¾“å‡ºï¼š2<br>è§£é‡Šï¼šç¬¬ä¸‰å¤§çš„æ•°ä¸å­˜åœ¨, æ‰€ä»¥è¿”å›æœ€å¤§çš„æ•° 2 ã€‚</p><p>ç¤ºä¾‹ 3ï¼š</p><p>è¾“å…¥ï¼š[2, 2, 3, 1]<br>è¾“å‡ºï¼š1<br>è§£é‡Šï¼šæ³¨æ„ï¼Œè¦æ±‚è¿”å›ç¬¬ä¸‰å¤§çš„æ•°ï¼Œæ˜¯æŒ‡åœ¨æ‰€æœ‰ä¸åŒæ•°å­—ä¸­æ’ç¬¬ä¸‰å¤§çš„æ•°ã€‚<br>æ­¤ä¾‹ä¸­å­˜åœ¨ä¸¤ä¸ªå€¼ä¸º 2 çš„æ•°ï¼Œå®ƒä»¬éƒ½æ’ç¬¬äºŒã€‚åœ¨æ‰€æœ‰ä¸åŒæ•°å­—ä¸­æ’ç¬¬ä¸‰å¤§çš„æ•°ä¸º 1 ã€‚</p><p>æç¤ºï¼š<br>1 &lt;= nums.length &lt;= 104<br>-231 &lt;= nums[i] &lt;= 231 - 1</p></blockquote><p>è§£é¢˜æ€è·¯ï¼š</p><p>é€šè¿‡ä¸‰æ¬¡éå†çš„æ–¹å¼ï¼šç¬¬ä¸€æ¬¡è·å–æœ€å¤§å€¼ï¼Œç¬¬äºŒæ¬¡è·å–ç¬¬äºŒå¤§å€¼ï¼Œç¬¬ä¸‰æ¬¡è·å–ç¬¬ä¸‰å¤§å€¼ï¼è¿™é‡Œä¸ºäº†é˜²æ­¢å‡ºç°ç±»ä¼¼è¿™ç§æƒ…å†µï¼š<code>[1,2,3,4,Integer.MIN_VALUE]</code>ï¼Œæ‰€ä»¥ç›®æ ‡é€‰å€¼ä½¿ç”¨<code>Long.MIN_VALUE</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">thirdMax</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">long</span> first <span class="token operator">=</span><span class="token class-name">Long</span><span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">,</span> second<span class="token operator">=</span><span class="token class-name">Long</span><span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">,</span> third<span class="token operator">=</span><span class="token class-name">Long</span><span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> first<span class="token punctuation">)</span>                first <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> first<span class="token operator">&amp;&amp;</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> second<span class="token punctuation">)</span>                second <span class="token operator">=</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k<span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">&lt;</span> second<span class="token operator">&amp;&amp;</span>nums<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> third<span class="token punctuation">)</span>                third <span class="token operator">=</span> nums<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>third <span class="token operator">==</span> <span class="token class-name">Long</span><span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>first<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>third<span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>628</li></ul><p>ç»™ä½ ä¸€ä¸ªæ•´å‹æ•°ç»„ nums ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾å‡ºç”±ä¸‰ä¸ªæ•°ç»„æˆçš„æœ€å¤§ä¹˜ç§¯ï¼Œå¹¶è¾“å‡ºè¿™ä¸ªä¹˜ç§¯ã€‚</p><blockquote><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šnums = [1,2,3]<br>è¾“å‡ºï¼š6<br>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼šnums = [1,2,3,4]<br>è¾“å‡ºï¼š24<br>ç¤ºä¾‹ 3ï¼š</p><p>è¾“å…¥ï¼šnums = [-1,-2,-3]<br>è¾“å‡ºï¼š-6</p><p>æç¤ºï¼š</p><p>3 &lt;= nums.length &lt;= 104<br>-1000 &lt;= nums[i] &lt;= 1000</p></blockquote><p>è§£é¢˜æ€è·¯ï¼š</p><p>å¯¹äºå¤§äºç­‰äºä¸‰ä¸ªæ•°çš„æœ€å¤§æˆç»©ï¼šå½“æ•°ç»„å…¨ä¸ºéè´Ÿæ•°æ—¶ï¼Œæœ€å¤§ä¹˜ç§¯ç­‰äºä¸‰ä¸ªæœ€å¤§æ•°çš„ä¹˜ç§¯ï¼å½“æ•°ç»„å…ƒç´ ä¸ºè´Ÿæ•°æ—¶ï¼Œæœ€å¤§ä¹˜ç§¯ä¹Ÿæ˜¯æœ€å¤§çš„ä¸‰ä¸ªè´Ÿæ•°çš„ä¹˜ç§¯ï¼å½“åŒ…å«æ­£è´Ÿæ•°æ—¶ï¼Œæœ€å¤§ä¹˜ç§¯ä¸€å®šç­‰äºæœ€å°çš„ä¸¤ä¸ªè´Ÿæ•°ä¸æœ€å¤§å€¼çš„ä¹˜ç§¯ï¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">maximumProduct</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">*</span>nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span>nums<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>nums<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span>nums<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">*</span>nums<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="ç»Ÿè®¡æ•°ç»„å…ƒç´ "><a href="#ç»Ÿè®¡æ•°ç»„å…ƒç´ " class="headerlink" title="ç»Ÿè®¡æ•°ç»„å…ƒç´ "></a>ç»Ÿè®¡æ•°ç»„å…ƒç´ </h4><p>é›†åˆ s åŒ…å«ä» 1 åˆ° n çš„æ•´æ•°ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå› ä¸ºæ•°æ®é”™è¯¯ï¼Œå¯¼è‡´é›†åˆé‡Œé¢æŸä¸€ä¸ªæ•°å­—å¤åˆ¶äº†æˆäº†é›†åˆé‡Œé¢çš„å¦å¤–ä¸€ä¸ªæ•°å­—çš„å€¼ï¼Œå¯¼è‡´é›†åˆ ä¸¢å¤±äº†ä¸€ä¸ªæ•°å­— å¹¶ä¸” æœ‰ä¸€ä¸ªæ•°å­—é‡å¤ ã€‚</p><p>ç»™å®šä¸€ä¸ªæ•°ç»„ nums ä»£è¡¨äº†é›†åˆ S å‘ç”Ÿé”™è¯¯åçš„ç»“æœã€‚</p><p>è¯·ä½ æ‰¾å‡ºé‡å¤å‡ºç°çš„æ•´æ•°ï¼Œå†æ‰¾åˆ°ä¸¢å¤±çš„æ•´æ•°ï¼Œå°†å®ƒä»¬ä»¥æ•°ç»„çš„å½¢å¼è¿”å›ã€‚</p><p>ï¼ˆåœ¨è¿™ä¸ªé”™è¯¯é›†åˆå½“ä¸­ï¼Œåªä¼šå­˜åœ¨ä¸€ä¸ªé‡å¤æ•°å­—å’Œä¸¢å¤±æ•°å­—ï¼‰</p><blockquote><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šnums = [1,2,2,4]<br>è¾“å‡ºï¼š[2,3]<br>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼šnums = [1,1]<br>è¾“å‡ºï¼š[1,2]</p></blockquote><p>ç»™å®šä¸€ä¸ªéç©ºä¸”åªåŒ…å«éè´Ÿæ•°çš„æ•´æ•°æ•°ç»„ numsï¼Œæ•°ç»„çš„åº¦çš„å®šä¹‰æ˜¯æŒ‡æ•°ç»„é‡Œä»»ä¸€å…ƒç´ å‡ºç°é¢‘æ•°çš„æœ€å¤§å€¼ã€‚</p><p>ä½ çš„ä»»åŠ¡æ˜¯åœ¨ nums ä¸­æ‰¾åˆ°ä¸ nums æ‹¥æœ‰ç›¸åŒå¤§å°çš„åº¦çš„æœ€çŸ­è¿ç»­å­æ•°ç»„ï¼Œè¿”å›å…¶é•¿åº¦ã€‚</p><blockquote><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼š[1, 2, 2, 3, 1]<br>è¾“å‡ºï¼š2<br>è§£é‡Šï¼š<br>è¾“å…¥æ•°ç»„çš„åº¦æ˜¯2ï¼Œå› ä¸ºå…ƒç´ 1å’Œ2çš„å‡ºç°é¢‘æ•°æœ€å¤§ï¼Œå‡ä¸º2.<br>è¿ç»­å­æ•°ç»„é‡Œé¢æ‹¥æœ‰ç›¸åŒåº¦çš„æœ‰å¦‚ä¸‹æ‰€ç¤º:<br>[1, 2, 2, 3, 1], [1, 2, 2, 3], [2, 2, 3, 1], [1, 2, 2], [2, 2, 3], [2, 2]<br>æœ€çŸ­è¿ç»­å­æ•°ç»„[2, 2]çš„é•¿åº¦ä¸º2ï¼Œæ‰€ä»¥è¿”å›2.<br>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼š[1,2,2,3,1,4,2]<br>è¾“å‡ºï¼š6</p></blockquote><p>è§£é¢˜æ€è·¯ï¼š</p><p>æœ€çŸ­æ•°ç»„æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œå­æ•°ç»„çš„åº¦ä¸åŸæ•°ç»„çš„åº¦ç›¸ç­‰ã€‚å­æ•°ç»„çš„é¦–å°¾å…ƒç´ ä¸€å®šæ˜¯å‡ºç°é¢‘æ•°æœ€å¤§çš„é‚£ä¸ªå…ƒç´ ã€‚æˆ‘ä»¬åˆ©ç”¨å“ˆå¸Œè¡¨Map&lt;Integer,int[]&gt;å®ç°ã€‚é”®ä»£è¡¨æ•°ç»„ä¸­çš„å…ƒç´ å€¼ï¼Œint[]æ•°ç»„å­˜å‚¨çš„åˆ†åˆ«æ˜¯ï¼šå…ƒç´ å‡ºç°çš„æ¬¡æ•°ã€å…ƒç´ ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€å…ƒç´ æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚æœ€çŸ­å­æ•°ç»„çš„é•¿åº¦å°±æ˜¯ï¼šlast-first+1</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">findShortestSubArray</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token class-name">Map</span><span class="token operator">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>                map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span>i<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">int</span> maxDegree <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> minLen <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token operator">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> mp <span class="token operator">:</span> map<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> value <span class="token operator">=</span> mp<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>maxDegree<span class="token operator">&lt;</span>value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                maxDegree <span class="token operator">=</span> value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                minLen <span class="token operator">=</span> value<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> maxDegree<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>minLen <span class="token operator">&gt;</span> value<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    minLen <span class="token operator">=</span> value<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> minLen<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>448:æ‰¾åˆ°æ‰€æœ‰æ•°ç»„ä¸­æ¶ˆå¤±çš„æ•°å­—</p><p>ç»™å®šä¸€ä¸ªèŒƒå›´åœ¨  1 â‰¤ a[i] â‰¤ n ( n = æ•°ç»„å¤§å° ) çš„ æ•´å‹æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ ä¸€äº›å‡ºç°äº†ä¸¤æ¬¡ï¼Œå¦ä¸€äº›åªå‡ºç°ä¸€æ¬¡ã€‚</p><p>æ‰¾åˆ°æ‰€æœ‰åœ¨ [1, n] èŒƒå›´ä¹‹é—´æ²¡æœ‰å‡ºç°åœ¨æ•°ç»„ä¸­çš„æ•°å­—ã€‚</p><p>æ‚¨èƒ½åœ¨ä¸ä½¿ç”¨é¢å¤–ç©ºé—´ä¸”æ—¶é—´å¤æ‚åº¦ä¸ºO(n)çš„æƒ…å†µä¸‹å®Œæˆè¿™ä¸ªä»»åŠ¡å—? ä½ å¯ä»¥å‡å®šè¿”å›çš„æ•°ç»„ä¸ç®—åœ¨é¢å¤–ç©ºé—´å†…ã€‚</p><blockquote><p>è¾“å…¥:<br>[4,3,2,7,8,2,3,1]</p><p>è¾“å‡º:<br>[5,6]</p></blockquote><p>è§£é¢˜æ€è·¯ï¼š</p><p>1ï¼‰å› ä¸ºä¸èƒ½ä½¿ç”¨é¢å¤–çš„ç©ºé—´ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€‰æ‹©åŸåœ°ä¿®æ”¹çš„æ–¹æ³•ã€‚æˆ‘ä»¬éå†æ•°ç»„çš„å…ƒç´ ï¼Œåªè¦å…ƒç´ å‡ºç°ï¼Œæˆ‘ä»¬å°±å°†å¯¹åº”ä½ç½®çš„å…ƒç´ +nï¼Œå› ä¸ºå…ƒç´ å€¼å­˜åœ¨èŒƒå›´[1,n]é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å¤§äºnçš„æ•°å®ç°è¯¥æ•°å‡ºç°è¿‡çš„æ ‡å¿—ã€‚æ›´æ–°å€¼åï¼Œåœ¨éå†æ•°ç»„ï¼Œåªè¦å…ƒç´ å¯¹åº”çš„å€¼&lt;=nï¼Œé‚£ä¹ˆå°±è¡¨ç¤ºè¯¥ä½ç½®ä¸Šçš„æ•°æ²¡æœ‰å‡ºç°</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">findDisappearedNumbers</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> num <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>            nums<span class="token punctuation">[</span><span class="token punctuation">(</span>num<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span>n<span class="token punctuation">]</span> <span class="token operator">+=</span> n<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>                list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>2ï¼‰æˆ‘ä»¬è¿˜å¯ä»¥ä¿®æ”¹å‡ºç°çš„æ ‡å¿—ï¼Œå› ä¸ºä¹‹å‰æ˜¯å°†å‡ºç°æ ‡å¿—è®¾ç½®ä¸º&gt;nçš„æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å¯ä»¥å°†å‡ºç°ä½ç½®çš„å…ƒç´ å˜ä¸ºè´Ÿæ•°ï¼Œé‚£ä¹ˆæ²¡æœ‰å‡ºç°çš„æ•°çš„ä½ç½®ä¸€å®šä¸ºæ­£æ•°ï¼Œä¸ºäº†é¿å…é‡å¤å‡ºç°æ•°é€ æˆé‡å¤ä¿®æ”¹çš„æƒ…å†µï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åªå¯¹ç¬¬ä¸€æ¬¡éå†ä¸ºæ­£æ•°çš„è¿›è¡Œä¸Šé¢çš„å–è´Ÿæ“ä½œï¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Solution</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">findDisappearedNumbers</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                nums<span class="token punctuation">[</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span> nums<span class="token punctuation">[</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> list<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>442:</p><p>è§£é¢˜æ€è·¯ï¼šä¸ºäº†è¯æ˜æœ‰äº›å…ƒç´ å‡ºç°äº†ä¸¤æ¬¡ï¼Œæˆ‘ä»¬å°±éœ€è¦æ ‡è®°å‡ºç°è¿‡çš„å…ƒç´ ã€‚å› ä¸ºè¿™é‡Œå…ƒç´ çš„èŒƒå›´åœ¨[1,n]æ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥<code>nums[i] +=n</code>æ ‡è®°å…ƒç´ å‡ºç°è¿‡ï¼Œè€Œå¦‚æœå½“å‰ num[i] +=n æ‰§è¡Œäº†ä¸¤æ¬¡ï¼Œä¹Ÿå°±æ˜¯è¯´å…ƒç´ å‡ºç°äº†ä¸¤æ¬¡ã€‚é‚£ä¹ˆæœ€åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ nums[i] &gt; 2*n æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å‡ºç°ä¸¤æ¬¡ï¼</p></blockquote><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Solution_442</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">findDuplicates</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> repeat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> n<span class="token punctuation">)</span>                nums<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">%</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> n<span class="token punctuation">;</span>            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">%</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>                nums<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> n<span class="token punctuation">;</span>            <span class="token keyword">else</span>                nums<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">%</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> n<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token operator">*</span>n<span class="token punctuation">)</span>                repeat<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> repeat<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> leetcode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œåº”ç”¨å±‚</title>
      <link href="posts/64831.html"/>
      <url>posts/64831.html</url>
      
        <content type="html"><![CDATA[<h1 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h1><h2 id="åŸºæœ¬çŸ¥è¯†"><a href="#åŸºæœ¬çŸ¥è¯†" class="headerlink" title="åŸºæœ¬çŸ¥è¯†"></a>åŸºæœ¬çŸ¥è¯†</h2><p><code>URI</code>å’Œ<code>URL</code>çš„è”ç³»</p><pre class="line-numbers language-http" data-language="http"><code class="language-http"><span class="token header-name keyword">mailto:</span> matemaster@163.com<span class="token header-name keyword">https:</span>//matemaster.cn/posts/52745.html<span class="token header-name keyword">ftp:</span>//ftp.sjtu.edu.cn<span class="token header-name keyword">news:</span>comp.infosystem.www.servers.unix<span class="token header-name keyword">telnet:</span>//124.70.110.117:443/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-uri" data-language="uri"><code class="language-uri"># ç»å¯¹URIæ ¼å¼http://user:pass@www.server.com:80/dir/index.htm?uid=1#ch1# user:pass ï¼šç™»å½•ä¿¡æ¯éªŒè¯# www.server.com ï¼šæœåŠ¡å™¨åœ°å€# 80 ï¼šç«¯å£å·# dir/index.htm ï¼šå¸¦å±‚æ¬¡çš„æ–‡ä»¶è·¯å¾„# uid = 1 ï¼šæŸ¥è¯¢å­—ç¬¦ä¸²# ch1 ï¼šç‰‡æ®µæ ‡è¯†ç¬¦<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æŒç»­æ€§"><a href="#æŒç»­æ€§" class="headerlink" title="æŒç»­æ€§"></a>æŒç»­æ€§</h2><p>éæŒç»­æ€§è¿æ¥ï¼šå‡è®¾ç°åœ¨è®¿é—®<code>https://matemaster.cn/posts/52745.html</code>é¡µé¢ï¼Œæ­¤é¡µé¢å¤§æ¦‚å«æœ‰60ä¸ªèµ„æºå¯¹è±¡</p><p>1ï¼‰<code>åä¸ºæµè§ˆå™¨</code>çš„httpè¿›ç¨‹ä»<code>port:80</code>ç«¯å£å‘èµ·ä¸€ä¸ªä¸ <code>mateamster.cn</code>çš„<code>TCPè¿æ¥</code></p><p>2ï¼‰åä¸ºæµè§ˆå™¨å®¢æˆ·ç«¯å‘å‡ºä¸€ä¸ª<code>https://matemaster.cn/posts/52745.html</code>è¯·æ±‚æŠ¥æ–‡</p><p>3ï¼‰<code>Nginx</code>æ¥å—è¯·æ±‚ï¼Œä»åç«¯æ•°æ®åº“è·å–è¯·æ±‚èµ„æºå°è£…æˆå“åº”æŠ¥æ–‡ï¼Œå¹¶è¿”å›è¯¥å“åº”æŠ¥æ–‡</p><p>4ï¼‰åä¸ºæµè§ˆå™¨å‘èµ·tcpè¿æ¥å…³é—­çš„è¯·æ±‚ï¼ŒNginxå›åº”ï¼Œå¹¶å…³é—­è¿æ¥ã€‚</p><p>5ï¼‰åä¸ºæµè§ˆå™¨åˆ†æ<code>52745.html</code>çš„å¼•ç”¨ï¼Œå¹¶æ ¹æ®å¼•ç”¨è¯·æ±‚èµ„æºï¼Œé‡å¤ä¸Šé¢å››æ­¥ï¼Œç›´è‡³èµ„æºè¯·æ±‚å®Œæ¯•ï¼</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼šæ­¤æ¬¡è·å–é¡µé¢èµ„æºï¼Œå¤§æ¦‚éœ€è¦<code>60ä¸ªtcpè¿æ¥</code></p><p>æŒç»­æ€§è¿æ¥ï¼šåˆ™æ˜¯åœ¨ä¸Šé¢çš„ç¬¬å››æ­¥å‘ç”Ÿä¸åŒï¼Œ</p><h2 id="çŠ¶æ€ç "><a href="#çŠ¶æ€ç " class="headerlink" title="çŠ¶æ€ç "></a>çŠ¶æ€ç </h2><p><code>2xx</code>ï¼šæ­£å¸¸</p><ul><li><strong>200 OK</strong>ï¼šæµè§ˆå™¨è¯·æ±‚è¢«æœåŠ¡å™¨æ­£å¸¸è¿”å›</li><li><strong>204 No Content</strong>ï¼šè¯·æ±‚æ­£å¸¸å“åº”ï¼Œä½†æ˜¯æ²¡æœ‰èµ„æºè¿”å›</li><li><strong>206 Partial Content</strong>ï¼šè¯·æ±‚æ­£å¸¸å“åº”ï¼Œè¿”å›éœ€è¦çš„ä¸€éƒ¨åˆ†èµ„æº</li></ul><p><code>3xx</code>ï¼šé‡å®šå‘</p><ul><li><strong>301 Moved Permaently</strong>ï¼šæ°¸ä¹…é‡å®šå‘</li><li><strong>302 Found</strong>ï¼šä¸´æ—¶é‡å®šå‘</li><li><strong>303 See Other</strong></li><li><strong>304 Not Modified</strong>ï¼šèµ„æºæ‰¾åˆ°ï¼Œä½†è¯·æ±‚ä¸æ»¡è¶³æ¡ä»¶</li><li><strong>307 Temporary Redirect</strong></li></ul><p><code>4xx</code>ï¼šå®¢æˆ·ç«¯é”™è¯¯</p><ul><li><strong>400 Bad Request</strong>ï¼šå®¢æˆ·ç«¯è¯·æ±‚å­˜åœ¨è¯­æ³•é”™è¯¯</li><li><strong>401 Unauthorized</strong>ï¼šæœåŠ¡å™¨éœ€è¦éªŒè¯å®¢æˆ·ç«¯èº«ä»½</li><li><strong>403 Forbidden</strong>ï¼šä¸å…è®¸è¯·æ±‚è¯¥èµ„æº</li><li><strong>404 Not Found</strong>ï¼šæœåŠ¡å™¨ä¸å­˜åœ¨è¯·æ±‚çš„èµ„æº</li></ul><p><code>5xx</code>ï¼šæœåŠ¡å™¨é”™è¯¯</p><ul><li><strong>500 Internal Server Error</strong>ï¼šæœåŠ¡å™¨æ‰§è¡Œè¯·æ±‚é”™è¯¯</li><li><strong>503 Service Unavailable</strong>ï¼šæœåŠ¡å™¨ç¹å¿™</li></ul><h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h2><p><b style="color: red;">HTTPåè®®æ˜¯ä¸€ç§æ— çŠ¶æ€çš„åè®®ï¼Œç®€è€Œè¨€ä¹‹å°±æ˜¯ï¼ŒæœåŠ¡å™¨ä¸ä¼šè®°å½•æµè§ˆå™¨çš„è®¿é—®è¯·æ±‚ï¼Œå³ä½¿æ˜¯åˆšè¯·æ±‚çš„æµè§ˆå™¨ï¼ŒæœåŠ¡å™¨ä¾æ—§è§†ä¸ºç¬¬ä¸€æ¬¡è¯·æ±‚è®¿é—®ï¼</b>ä½†æ˜¯<code>Cookie</code>å¼•å…¥ï¼Œæ”¯æŒäº†HTTPçŠ¶æ€ï¼Œç¬¬ä¸€æ¬¡åä¸ºæµè§ˆå™¨è®¿é—®é˜¿é‡Œå®˜ç½‘ï¼Œé˜¿é‡ŒæœåŠ¡å™¨ä¼šåœ¨å“åº”æŠ¥æ–‡ä¸­åŠ å…¥<code>cookie</code>å­—æ®µï¼Œå¹¶ä¸”åœ¨é˜¿é‡Œçš„åç«¯æ•°æ®åº“è®°å½•è¯¥cookieã€‚åŒæ—¶åä¸ºæµè§ˆå™¨åœ¨æ¥è‡ªé˜¿é‡ŒæœåŠ¡å™¨çš„å“åº”æŠ¥æ–‡ä¸­æŸ¥æ‰¾åˆ°<code>Set-Cookie: sid = 18967626</code>ï¼Œå¹¶åœ¨æµè§ˆå™¨çš„cookieç®¡ç†ä¸­æ·»åŠ è¿™ä¸ªä¿¡æ¯ï¼Œä»¥ä¾¿äºä¸‹æ¬¡**@matemaster_pc**è®¿é—®é˜¿é‡Œå®˜ç½‘æ—¶ï¼Œå°†cookieåŠ å…¥åˆ°è¯·æ±‚å¤´ä¸­ã€‚é˜¿é‡ŒæœåŠ¡å™¨åœ¨åä¸ºæµè§ˆå™¨ä¸‹ä¸€æ¬¡è®¿é—®æ—¶ï¼Œè¿›è¡Œæ•°æ®åº“æ£€ç´¢ï¼Œå¦‚æœå­˜åœ¨cookieè®°å½•ï¼Œé‚£ä¹ˆé˜¿é‡Œå°†ä¼šè‡ªåŠ¨è®°å½•è¯¥æµè§ˆå™¨çš„æµè§ˆè®°å½•ï¼Œä¿æŒçŠ¶æ€ï¼</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210329191736.jpg" style="width:80%;border:solid"><h2 id="webæœåŠ¡å™¨"><a href="#webæœåŠ¡å™¨" class="headerlink" title="webæœåŠ¡å™¨"></a>webæœåŠ¡å™¨</h2><p>ä»£ç†æœåŠ¡å™¨çš„ä½œç”¨å°±æ˜¯åš<code>webç¼“å­˜</code>ã€‚webç¼“å­˜å¯ä»¥å‡è½»æ¥å…¥è‹±ç‰¹ç½‘çš„å‹åŠ›ï¼Œå¹¶ä¸”åŠ å¿«äº†å®¢æˆ·ç«¯çš„å“åº”é€Ÿåº¦ï¼</p><p>è¿™é‡Œä¸ºäº†ä¿è¯<code>webç¼“å­˜æœ‰æ•ˆæœŸ</code>ï¼Œæˆ‘ä»¬çš„webç¼“å­˜æœåŠ¡å™¨ï¼Œä¼šå‘æºæœåŠ¡å™¨å‘é€GETè¯·æ±‚ï¼Œå¹¶ä¸”åœ¨å­—æ®µä¸­å­˜åœ¨<code>If-Modified-Since</code>ä¸<code>Last-Modified</code>åšå¯¹æ¯”ï¼Œå½“ä¸ä¸€è‡´æ—¶è¯´æ˜ç¼“å­˜è¿‡æœŸï¼Œé‚£ä¹ˆå°†æ›´æ–°webç¼“å­˜ï¼</p><pre class="line-numbers language-wireshark" data-language="wireshark"><code class="language-wireshark"># ä¸Šä¸€æ¬¡ä¿®æ”¹æ—¶é—´Last-Modified: Mon, 29 Mar 2021 05:59:01 GMT# å‡è®¾ä¸Šä¸€æ¬¡ä¿®æ”¹æ—¶é—´If-Modified-Since: Mon, 29 Mar 2021 05:59:01 GMT<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210329184233.jpg" style="width:80% ;border:solid;"><h2 id="HTTPæŠ¥æ–‡"><a href="#HTTPæŠ¥æ–‡" class="headerlink" title="HTTPæŠ¥æ–‡"></a>HTTPæŠ¥æ–‡</h2><p><code>start https://matemaster.cn</code></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210329165927.jpg" style="width:80%;border:solid"><p>ç®€å•çš„<code>WiresharkæŠ“åŒ…</code></p><p><code>GET /wireshark-labs/HTTP-wireshark-file1.html HTTP/1.1</code>è¯·æ±‚æŠ¥æ–‡ï¼šå•è¡Œçš„ç®€å•æŠ¥æ–‡</p><pre class="line-numbers language-wireshark" data-language="wireshark"><code class="language-wireshark">Hypertext Transfer Protocol    GET /wireshark-labs/HTTP-wireshark-file1.html HTTP/1.1        [Expert Info (Chat/Sequence): GET /wireshark-labs/HTTP-wireshark-file1.html HTTP/1.1]            [GET /wireshark-labs/HTTP-wireshark-file1.html HTTP/1.1]            [Severity level: Chat]            [Group: Sequence]        Request Method: GET        Request URI: /wireshark-labs/HTTP-wireshark-file1.html        Request Version: HTTP/1.1    Host: gaia.cs.umass.edu    Connection: keep-alive    Upgrade-Insecure-Requests: 1    User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.121 Safari/537.36 HBPC/11.0.3.301    Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9    Accept-Encoding: gzip, deflate    Accept-Language: zh-CN,zh;q=0.9    [Full request URI: http://gaia.cs.umass.edu/wireshark-labs/HTTP-wireshark-file1.html]    [HTTP request 1/2]    [Response in frame: 1037]    [Next request in frame: 1039]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>HTTP/1.1 200 OK (text/html)</code>å“åº”æŠ¥æ–‡</p><pre class="line-numbers language-wireshark" data-language="wireshark"><code class="language-wireshark">Hypertext Transfer Protocol    HTTP/1.1 200 OK        [Expert Info (Chat/Sequence): HTTP/1.1 200 OK]            [HTTP/1.1 200 OK]            [Severity level: Chat]            [Group: Sequence]        Response Version: HTTP/1.1        Status Code: 200        [Status Code Description: OK]        Response Phrase: OK    Date: Mon, 29 Mar 2021 11:28:02 GMT    Server: Apache/2.4.6 (CentOS) OpenSSL/1.0.2k-fips PHP/7.4.14 mod_perl/2.0.11 Perl/v5.16.3    Last-Modified: Mon, 29 Mar 2021 05:59:01 GMT    ETag: "80-5bea6940d9e00"    Accept-Ranges: bytes    Content-Length: 128        [Content length: 128]    Keep-Alive: timeout=5, max=100    Connection: Keep-Alive    Content-Type: text/html; charset=UTF-8    [HTTP response 1/2]    [Time since request: 0.270377000 seconds]    [Request in frame: 1033]    [Next request in frame: 1039]    [Next response in frame: 1040]    [Request URI: http://gaia.cs.umass.edu/wireshark-labs/HTTP-wireshark-file1.html]    File Data: 128 bytes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ é™¤ç¼“å­˜åçš„ç¬¬äºŒæ¬¡è®¿é—®ï¼Œè·å–file2.html</p><p><code>GET /wireshark-labs/HTTP-wireshark-file2.html HTTP/1.1</code>ï¼šå¤šè¡Œæ–‡æœ¬</p><pre class="line-numbers language-wireshark" data-language="wireshark"><code class="language-wireshark">Hypertext Transfer Protocol    GET /wireshark-labs/HTTP-wireshark-file2.html HTTP/1.1        [Expert Info (Chat/Sequence): GET /wireshark-labs/HTTP-wireshark-file2.html HTTP/1.1]            [GET /wireshark-labs/HTTP-wireshark-file2.html HTTP/1.1]            [Severity level: Chat]            [Group: Sequence]        Request Method: GET        Request URI: /wireshark-labs/HTTP-wireshark-file2.html        Request Version: HTTP/1.1    Host: gaia.cs.umass.edu    Connection: keep-alive    Upgrade-Insecure-Requests: 1    User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.121 Safari/537.36 HBPC/11.0.3.301    Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9    Accept-Encoding: gzip, deflate    Accept-Language: zh-CN,zh;q=0.9    [Full request URI: http://gaia.cs.umass.edu/wireshark-labs/HTTP-wireshark-file2.html]    [HTTP request 1/1]    [Response in frame: 142]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>HTTP/1.1 200 OK (text/html)</code>å“åº”æŠ¥æ–‡</p><pre class="line-numbers language-wireshark" data-language="wireshark"><code class="language-wireshark">Hypertext Transfer Protocol    HTTP/1.1 200 OK        [Expert Info (Chat/Sequence): HTTP/1.1 200 OK]            [HTTP/1.1 200 OK]            [Severity level: Chat]            [Group: Sequence]        Response Version: HTTP/1.1        Status Code: 200        [Status Code Description: OK]        Response Phrase: OK    Date: Mon, 29 Mar 2021 11:48:18 GMT    Server: Apache/2.4.6 (CentOS) OpenSSL/1.0.2k-fips PHP/7.4.14 mod_perl/2.0.11 Perl/v5.16.3    Last-Modified: Mon, 29 Mar 2021 05:59:01 GMT    ETag: "173-5bea6940d9630"    Accept-Ranges: bytes    Content-Length: 371        [Content length: 371]    Keep-Alive: timeout=5, max=100    Connection: Keep-Alive    Content-Type: text/html; charset=UTF-8    [HTTP response 1/1]    [Time since request: 0.275678000 seconds]    [Request in frame: 140]    [Request URI: http://gaia.cs.umass.edu/wireshark-labs/HTTP-wireshark-file2.html]    File Data: 371 bytes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="SMTP"><a href="#SMTP" class="headerlink" title="SMTP"></a>SMTP</h1><p>å›½å†…å¸¸è§çš„é‚®ä»¶æœåŠ¡å•†</p><pre class="line-numbers language-http" data-language="http"><code class="language-http">smtp.qq.comsmtp.163.comsmtp.aliyun.comsmtp.sina.com//å…³äºå›½é™…çŸ¥åçš„é‚®ä»¶ï¼Œå› ä¸ºç½‘ç»œé™åˆ¶å°±ä¸ä»‹ç»äº†ï¼Œå›½å†…çš„å‡ ä¸ªå·²ç»å¤Ÿç”¨<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="mail"><a href="#mail" class="headerlink" title="mail"></a>mail</h2><p>é‚®ä»¶ç³»ç»Ÿçš„ç»„æˆï¼š<code>user-agent</code>ã€<code>mail server</code>ã€<code>SMTP</code></p><p>é‚®ä»¶çš„å‘é€è¿‡ç¨‹ï¼šä»¥<code>matemaster@163.com</code>å‘<code>2099625007@qq.com</code>ä¸ºä¾‹</p><p>1ï¼‰é¦–å…ˆï¼Œmatemasteræœ¬åœ°çš„ç”¨æˆ·ä»£ç†ï¼Œä¼šå°†å«æœ‰å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¿¡æ¯ï¼Œä»¥åŠé‚®ä»¶ä¸»ä½“ä¿¡æ¯çš„é‚®ä»¶æŠ¥æ–‡<code>(SMTP)</code>ã€‚å¹¶ä¸”<strong>åœ¨25å·ç«¯å£å»ºç«‹ä¸é‚®ä»¶æœåŠ¡å™¨çš„tcpè¿æ¥</strong>ï¼Œå‘é€ç»™å¯¹åº”çš„ç½‘æ˜“é‚®ä»¶æœåŠ¡å™¨ï¼Œå¹¶ä¸”å°†æŠ¥æ–‡å­˜åœ¨æœåŠ¡å™¨çš„æŠ¥æ–‡é˜Ÿåˆ—å½“ä¸­</p><p>2ï¼‰ç½‘æ˜“é‚®ä»¶æœåŠ¡å™¨ï¼Œå°†æ ¹æ®æ¥æ”¶æ–¹ä¿¡æ¯ï¼Œåˆ©ç”¨<code>tcp</code>è¿æ¥å°†é‚®ä»¶æŠ¥æ–‡å‘é€ç»™è…¾è®¯é‚®ä»¶æœåŠ¡å™¨<code>(SMTP)</code></p><p>3ï¼‰è…¾è®¯é‚®ä»¶æœåŠ¡å™¨åœ¨æ”¶åˆ°é‚®ä»¶æŠ¥æ–‡ä¹‹åï¼Œä¸»åŠ¨å°†æŠ¥æ–‡æ¨é€ç»™å¯¹åº”æ¥æ”¶æ–¹çš„ç”¨æˆ·ä»£ç†<code>(SMTP)</code></p><p><code>SMTP</code>ä¸<code>HTTP</code>ä¹‹é—´åŒºåˆ«åœ¨äºï¼š</p><p>â‘ SMTPå±äºpushåè®®ï¼Œä¸å¯ä»¥ä¸»åŠ¨ä»æœåŠ¡å™¨ç«¯è·å–é‚®ä»¶ï¼Œåªèƒ½ç­‰å¾…æœåŠ¡å™¨æ¨é€ï¼HTTPå±äºpullåè®®ï¼Œå¯ä»¥ä¸»åŠ¨å‘æœåŠ¡å™¨è¯·æ±‚è·å–èµ„æºï¼<br>â‘¡SMTPæ¯ä¸ªæŠ¥æ–‡çš„å†…å®¹å¿…é¡»æ˜¯7ä½ASCIIç æ ¼å¼</p><p><strong>WiresharkæŠ“åŒ…</strong>çœ‹å‡º<code>SMTP</code>æŠ¥æ–‡ä¿¡æ¯ï¼šï¼ˆå°±æ˜¯<code>matemaster@163.com-&gt;user-agent</code>ä¸ç½‘æ˜“é‚®ä»¶æœåŠ¡å™¨çš„å¯¹è¯ï¼‰ğŸ‘‡</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210329150920.jpg" style="width:80%;border:solid ;"><p>æ ‡å‡†çš„æŠ¥æ–‡æ ¼å¼ï¼š</p><pre class="line-numbers language-smtp" data-language="smtp"><code class="language-smtp">From: matemaster@163.comTo: matemaster@qq.comSubject: This is a simple title!<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="Telnet"><a href="#Telnet" class="headerlink" title="Telnet"></a>Telnet</h2><p>åŸºäº<code>telnet</code>å‘½ä»¤å¯ä»¥ä½¿ç”¨SMTPåè®®å‘æŒ‡å®šç”¨æˆ·å‘é€ä¿¡æ¯ï¼Œå®Œæ•´æ¼”ç¤ºæ•ˆæœï¼Œå¯ä»¥å‚çœ‹ä¸‹å›¾ğŸ‘‡</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd"># telnet æœåŠ¡å™¨åŸŸå ç«¯å£å·telnet smtp.163.com 25# è¿æ¥æœåŠ¡å™¨æˆåŠŸä¹‹åï¼Œå¯ä»¥ä½¿ç”¨HELOæŒ‡å®šå‘æœåŠ¡å™¨å‘å‡ºæŒ‡ä»¤helo 163.com# ç™»å½•é‚®ç®±ç”¨æˆ·auth login # 334 username:# 334 password:# ç™»å½•æˆåŠŸåï¼Œå‘æŒ‡å®šçš„é‚®ç®±å‘é€æ¶ˆæ¯mail from: &lt;matemaster@163.com&gt;rcpt to: &lt;35679808@qq.com&gt;data # é‚®ä»¶æŠ¥æ–‡å†…å®¹from: matemasterto: 35679808@qq.comsubject: mail titleThis is main content of mail message!.# send successful!<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210329142131.jpg" style="width:80%; border:solid "><h2 id="åŸºäºpythonçš„é‚®ä»¶å‘é€"><a href="#åŸºäºpythonçš„é‚®ä»¶å‘é€" class="headerlink" title="åŸºäºpythonçš„é‚®ä»¶å‘é€"></a>åŸºäºpythonçš„é‚®ä»¶å‘é€</h2><p>è¿™é‡Œæš‚æ—¶ä¸æ”¯æŒé™„ä»¶ä¼ é€ï¼Œå› ä¸ºæ²¡æœ‰å¯¼å…¥åŒ…</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> smtplib<span class="token keyword">from</span> email<span class="token punctuation">.</span>mime<span class="token punctuation">.</span>text <span class="token keyword">import</span> MIMEText<span class="token keyword">from</span> email<span class="token punctuation">.</span>header <span class="token keyword">import</span> header<span class="token comment"># SMTPéœ€è¦é‚®ä»¶æœåŠ¡å•†æˆæƒï¼Œè·å–ä¸€ä¸ªæˆæƒç ï¼Œè‡ªè¡Œç™¾åº¦</span>auth_passport <span class="token operator">=</span> <span class="token string">"é‚®ä»¶æœåŠ¡å•†çš„æˆæƒç "</span><span class="token comment"># å»ºç«‹ä¸qqæœåŠ¡å•†çš„SMTPè”ç³»</span>server <span class="token operator">=</span> smtplib<span class="token punctuation">.</span>SMTP<span class="token punctuation">(</span><span class="token punctuation">)</span>server<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token string">"smtp.qq.com"</span><span class="token punctuation">)</span>server<span class="token punctuation">.</span>login<span class="token punctuation">(</span><span class="token string">"35679808@qq.com"</span><span class="token punctuation">,</span>auth_passport<span class="token punctuation">)</span><span class="token comment"># é‚®ä»¶å‚æ•°ï¼šå‘é€è€…ã€æ¥æ”¶è€…ã€é‚®ä»¶æ ‡é¢˜</span>sendedr <span class="token operator">=</span> <span class="token string">'35679808@qq.com'</span>receiver <span class="token operator">=</span> <span class="token string">'matemaster@163.com'</span>subject <span class="token operator">=</span> <span class="token string">'Python SMTP é‚®ä»¶å‘é€æµ‹è¯•ä»£ç '</span><span class="token comment"># å‘é€é‚®ä»¶</span>message <span class="token operator">=</span> MIMEText<span class="token punctuation">(</span><span class="token string">'Python send email test!'</span><span class="token punctuation">,</span><span class="token string">'plain'</span><span class="token punctuation">,</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>message<span class="token punctuation">[</span><span class="token string">'Subject'</span><span class="token punctuation">]</span> <span class="token operator">=</span> header<span class="token punctuation">(</span>subject<span class="token punctuation">,</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>server<span class="token punctuation">.</span>sendmail<span class="token punctuation">(</span>sender<span class="token punctuation">,</span>receiver<span class="token punctuation">,</span>message<span class="token punctuation">.</span>as_string<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># å…³é—­ä¸æœåŠ¡å™¨çš„è¿æ¥</span>server<span class="token punctuation">.</span>quit<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é‚®ä»¶è®¿é—®POP3"><a href="#é‚®ä»¶è®¿é—®POP3" class="headerlink" title="é‚®ä»¶è®¿é—®POP3"></a>é‚®ä»¶è®¿é—®POP3</h2><p>POP3ä¸‰ä¸ªå·¥ä½œé˜¶æ®µ</p><p>1ï¼‰å®¢æˆ·æ ¡éªŒ<code>authorization</code>ï¼šæ­¤æ—¶ä¸»è¦ä¸ºäº†æ ¡éªŒç”¨æˆ·çš„èº«ä»½</p><p>2ï¼‰äº‹åŠ¡å¤„ç†ï¼šå–å›SMTPæŠ¥æ–‡ã€å¯¹æŠ¥æ–‡è¿›è¡Œåˆ é™¤æ ‡è®°å’Œå–æ¶ˆåˆ é™¤æ ‡è®°ï¼Œè·å–é‚®ä»¶çš„ç»Ÿè®¡ä¿¡æ¯</p><p>3ï¼‰æ›´æ–°ï¼šåœ¨ç”¨æˆ·æŒ‡å‘quitå‘½ä»¤ä¹‹åï¼Œé‚®ä»¶æœåŠ¡å™¨ä¼šåˆ é™¤é‚£äº›è¢«åˆ é™¤æ ‡è®°çš„æŠ¥æ–‡</p><p><b style="color: chocolate;">POP3ç”¨æˆ·ä»£ç†ä¸é‚®ä»¶æœåŠ¡å™¨çš„å¯¹è¯è¿‡ç¨‹</b></p><p><b style="color: blue;">C: telnet pop.163.com 110</b></p><p><b style="color: red;">S: +OK Welcome to coremail Mail Pop3 Server (163coms[blahblah])</b></p><p><b style="color: blue;">C: user matemaster-mail</b></p><p><b style="color: red;">S: +OK core mail </b></p><p><b style="color: blue;">C: pass matemaster-authorizationCode</b></p><p><b style="color: red;">S: +OK user successfully logged onï¼ˆéªŒè¯æˆåŠŸï¼‰æˆ– S:-ERR Unable to log onï¼ˆéªŒè¯å¤±è´¥ï¼‰</b></p><p><b style="color: blue;">C: list</b></p><p><b style="color: red;">S: 1 [980bytes] 2[990bytes] â€¦â€¦</b></p><p><b style="color: blue;">C: quit</b></p><p><b style="color: red;">S: +OK core mail</b></p><p><strong>POP3å‘½ä»¤</strong></p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd"># ç™»å½•ç”¨æˆ·çš„è´¦å·ä»¥åŠæˆæƒç user usermailpass authorization code# äº‹åŠ¡å¤„ç†é˜¶æ®µçš„å‘½ä»¤list #åˆ—å‡ºé‚®ä»¶æœåŠ¡å™¨çš„é‚®ä»¶  Server: åºå· [é‚®ä»¶å­—èŠ‚æ•°]stat #è¿”å›é‚®ä»¶æœåŠ¡å™¨çš„çŠ¶æ€ï¼ˆæˆ‘ä½¿ç”¨çš„pop.163.comä¸æ”¯æŒè¿™ä¸ªï¼‰top n #åˆ—å‡ºç¬¬nä¸ªé‚®ä»¶çš„å†…å®¹retr n #æ¥å—ç¬¬nä¸ªé‚®ä»¶dele n #åˆ é™¤ç¬¬nä¸ªé‚®ä»¶ï¼ˆè¿™é‡Œåªæ˜¯åšåˆ é™¤æ ‡è®°ï¼Œåœ¨quitä¹‹åæ‰ä¼šåˆ é™¤ï¼‰quit #é€€å‡ºé‚®ä»¶æœåŠ¡å™¨<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h1><h2 id="DNSæœåŠ¡"><a href="#DNSæœåŠ¡" class="headerlink" title="DNSæœåŠ¡"></a>DNSæœåŠ¡</h2><h3 id="åŸºæœ¬æœåŠ¡"><a href="#åŸºæœ¬æœåŠ¡" class="headerlink" title="åŸºæœ¬æœåŠ¡"></a>åŸºæœ¬æœåŠ¡</h3><p><code>DNS</code>æä¾›äº†åŸŸå-&gt;ipçš„è§£ææœåŠ¡ã€‚ä¸»è¦ç”±ï¼šDNSåˆ†å¸ƒå¼æ•°æ®åº“ä»¥åŠä½¿å¾—ä¸»æœºå¯ä»¥æŸ¥è¯¢æ•°æ®åº“çš„åº”ç”¨å±‚åè®®æ„æˆã€‚</p><p><code>DNS</code>å»ºç«‹åœ¨<code>UDP</code>åè®®ä¹‹ä¸Šè¿›è¡Œç½‘ç»œä¼ è¾“ï¼Œäº’è”ç½‘ç«¯å£<code>port:53</code></p><p>ä¸¾ä¸ªæ —å­<span class="github-emoji"><span>âœŒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/270c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p>ä»åº”ç”¨å±‚è§£é‡Šï¼šæœ¬åœ°ä¸»æœº<code>(@localhost)</code>å‘æœåŠ¡å™¨è¯·æ±‚<code>www.matemaster.cn/index.html</code>èµ„æºæ—¶ï¼Œ<code>DNS</code>çš„æ“ä½œè¿‡ç¨‹</p><p>1ï¼‰<code>web browser:åä¸ºæµè§ˆå™¨</code>å‘æœ¬åœ°ç”µè„‘çš„<code>DNSå®¢æˆ·ç«¯</code>ç¨‹åºå‘é€è·å–<code>www.matemaster.cnçš„ipåœ°å€</code>è¯·æ±‚</p><p>2ï¼‰æœ¬åœ°ç”µè„‘çš„<code>DNSå®¢æˆ·ç«¯</code>å‘è¿œç«¯<code>DNS server</code>å‘é€ä¸Šè¿°è¯·æ±‚æŠ¥æ–‡</p><p>3ï¼‰<code>DNS server</code>ä»åç«¯åˆ†å¸ƒå¼æ•°æ®åº“æˆ–è€…DNSç¼“å­˜ä¸­è·å–ipï¼Œå¹¶å°è£…æˆå“åº”æŠ¥æ–‡ï¼Œè¿”å›ç»™<code>DNSå®¢æˆ·ç«¯</code></p><p>4)<code>web browser:åä¸ºæµè§ˆå™¨</code>æ ¹æ®<code>DNSå®¢æˆ·ç«¯</code>è¿”å›çš„<code>ip</code>ä¸è¿œç«¯æœåŠ¡å™¨<code>www.matemaster.cn</code>å»ºç«‹<code>tcp</code>è¿æ¥</p><h3 id="é¢å¤–æœåŠ¡"><a href="#é¢å¤–æœåŠ¡" class="headerlink" title="é¢å¤–æœåŠ¡"></a>é¢å¤–æœåŠ¡</h3><p>é™¤äº†<code>åŸŸå-&gt;ipçš„è§£ææœåŠ¡</code>ï¼ŒDNSæ”¯æŒï¼šä¸»æœºåˆ«åã€é‚®ä»¶æœåŠ¡å™¨åˆ«åã€è´Ÿè½½åˆ†é…ã€‚</p><p><code>ä¸»æœºåˆ«å</code>ï¼šå¯¹äºå«æœ‰å¤æ‚hostnameçš„ä¸»æœºï¼Œå¯ä»¥æ”¯æŒå¤šåˆ«åçš„æ“ä½œã€‚è€Œå…¶ä¸­å­˜åœ¨ä¸€ä¸ª<code>è§„èŒƒä¸»æœºå</code>å’Œå¤šä¸ª<code>ä¸»æœºåˆ«å</code>è€ŒDNSä¾¿æ˜¯æä¾›ï¼Œå°†å¤šä¸ªä¸»æœºåˆ«åï¼Œè½¬ä¸ºå¯¹åº”çš„è§„èŒƒä¸»æœºåã€‚</p><p><code>é‚®ä»¶æœåŠ¡å™¨åˆ«å</code>ï¼šä¸ºäº†è®©é‚®ä»¶ç”¨æˆ·å¯ä»¥è‡ªå·±å®šä¹‰å¥½è®°çš„é‚®ä»¶åï¼Œæˆ‘ä»¬å°±éœ€è¦åˆ©ç”¨ç±»ä¼¼ä¸»æœºåˆ«åçš„æ–¹å¼ï¼Œä¸ºé‚®ä»¶æœåŠ¡å™¨æä¾›åˆ«åæ“ä½œï¼Œè€Œåœ¨DNSè®°å½•ä¸­å­˜åœ¨çš„MXè®°å½•ï¼Œå…è®¸é‚®ä»¶æœåŠ¡å™¨åå’ŒwebæœåŠ¡å™¨åç›¸åŒã€‚</p><p><code>è´Ÿè½½åˆ†é…</code>ï¼šç®€å•ç†è§£ï¼šå°±æ˜¯ä¸€ä¸ªIPåœ°å€é›†åˆä¸åŒä¸€ä¸ªè§„èŒƒä¸»æœºåç›¸è”ç³»ï¼ï¼ˆå¯ä»¥å‚è€ƒä¸‹é¢åœ¨Ubuntuç³»ç»Ÿä¸‹çš„nslookup alibaba.comï¼‰ã€‚ä»é‚£é‡Œçœ‹å‡ºï¼Œä¸€ä¸ª<strong>alibaba.com</strong>å¯¹åº”äº†4ä¸ªIPåœ°å€</p><h2 id="DNSåˆ†å¸ƒå¼æ•°æ®åº“"><a href="#DNSåˆ†å¸ƒå¼æ•°æ®åº“" class="headerlink" title="DNSåˆ†å¸ƒå¼æ•°æ®åº“"></a>DNSåˆ†å¸ƒå¼æ•°æ®åº“</h2><h3 id="åˆ†å¸ƒå¼æ•°æ®åº“ç»“æ„"><a href="#åˆ†å¸ƒå¼æ•°æ®åº“ç»“æ„" class="headerlink" title="åˆ†å¸ƒå¼æ•°æ®åº“ç»“æ„"></a>åˆ†å¸ƒå¼æ•°æ®åº“ç»“æ„</h3><p>DNSé‡‡å–çš„æ˜¯ï¼š<code>åˆ†å¸ƒå¼ã€å±‚æ¬¡æ•°æ®åº“</code>ã€‚å±‚æ¬¡ï¼šrootã€TLDã€æƒå¨</p><p>çœ‹çœ‹ä¾‹å›¾<span class="github-emoji"><span>âœŒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/270c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210328145741.jpg" style="width:80%;border:solid"><p><code>root server</code>ï¼šæä¾›äº†å¯¹åº”é¡¶çº§åŸŸæœåŠ¡å™¨çš„<code>ip</code></p><p><code>TLD</code>ï¼šé¡¶çº§åŸŸæœåŠ¡å™¨æä¾›äº†å­˜å‚¨äº†<code>ä¸»æœºip</code>çš„æƒå¨æœåŠ¡å™¨çš„<code>ip</code></p><p><code>æƒå¨æœåŠ¡å™¨</code>ï¼šå­˜å‚¨äº†<code>å¯¹åº”ä¸»æœºåçš„ipåœ°å€</code></p><p><code>æœ¬åœ°DNS server</code>ï¼šè™½ç„¶ä¸å±äºåˆ†å¸ƒå¼å±‚æ¬¡ç»“æ„ä¸­çš„æ•°æ®åº“ï¼Œä½†æ˜¯åœ¨DNSä¸­èµ·é‡è¦ä½œç”¨ã€‚ä¸DNSç¼“å­˜æœ‰å…³ï¼</p><p>alibaba.comçš„DNSè§£æè¿‡ç¨‹ï¼š</p><p>1ï¼‰@matemaster_pcå‘æœ¬åœ°DNSæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œä»¥è·å–alibaba.comåŸŸåçš„ipåœ°å€</p><p>2ï¼‰æœ¬åœ°DNSæœåŠ¡å™¨å…ˆæŸ¥è¯¢æ•°æ®åº“ï¼Œçœ‹æ˜¯å¦å­˜åœ¨å¯¹åº”ipåœ°å€çš„ç¼“å­˜ã€‚</p><ul><li><p>è‹¥å­˜åœ¨ç›´æ¥è¿”å›ç»™ä¸»æœº</p></li><li><p>è‹¥ä¸å­˜åœ¨åˆ™ï¼Œå‘æ ¹æœåŠ¡å™¨å‘é€è¯·æ±‚</p></li></ul><p>3ï¼‰å“åº”æŠ¥æ–‡ï¼Œè·å–comé¡¶çº§åŸŸæœåŠ¡å™¨çš„ipåœ°å€</p><p>4ï¼‰å‘comé¡¶çº§åŸŸå‘é€è¯·æ±‚æŠ¥æ–‡</p><p>5ï¼‰å“åº”æŠ¥æ–‡ï¼Œè·å–alibaba.comæƒå¨æœåŠ¡å™¨çš„ipåœ°å€</p><p>6ï¼‰å‘æƒå¨æœåŠ¡å™¨å‘é€è¯·æ±‚</p><p>7ï¼‰å“åº”æŠ¥æ–‡ï¼Œè·å–alibaba.comä¸»æœºçš„ipåœ°å€</p><p>8ï¼‰è¿”å›ç»™@matemaster_pc</p><h3 id="åˆ†å¸ƒå¼æ•°æ®åº“çš„å·¥ä½œè¿‡ç¨‹"><a href="#åˆ†å¸ƒå¼æ•°æ®åº“çš„å·¥ä½œè¿‡ç¨‹" class="headerlink" title="åˆ†å¸ƒå¼æ•°æ®åº“çš„å·¥ä½œè¿‡ç¨‹"></a>åˆ†å¸ƒå¼æ•°æ®åº“çš„å·¥ä½œè¿‡ç¨‹</h3><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210328151824.jpg" style="width:80%;border:solid red"><p>åœ¨è¿™é‡Œ<code>alibaba.com</code>æœåŠ¡å™¨çš„<code>ip</code>é‡‡å–äº†è´Ÿè½½åˆ†é…çš„æ–¹å¼ï¼Œæˆ‘è¿™é‡Œçš„å¯¹åº”aliçš„DNSæœåŠ¡å™¨ï¼Œä»¥åŠipå¦‚ä¸‹<span class="github-emoji"><span>ğŸ‘‡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f447.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><pre class="line-numbers language-ubuntu" data-language="ubuntu"><code class="language-ubuntu">matemaster@matemaster:~$ nslookup alibaba.comServer:        127.0.0.53Address:    127.0.0.53#53Non-authoritative answer:Name:    alibaba.comAddress: 106.11.223.101 106.11.208.151 203.119.129.109 203.119.215.82matemaster@matemaster:~$ nslookup -type=NS alibaba.comServer:        127.0.0.53Address:    127.0.0.53#53Non-authoritative answer:alibaba.com    nameserver = ns2.alibabadns.com.alibaba.com    nameserver = ns1.alibabadns.com.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="DNSè®°å½•"><a href="#DNSè®°å½•" class="headerlink" title="DNSè®°å½•"></a>DNSè®°å½•</h2><p>DNSè®°å½•åŒ…å«4å…ƒç»„ï¼š<code>[name,value,type,TTL]</code></p><p><b style="color: red;">typeçš„å€¼ï¼Œå†³å®šäº†name-valueä¹‹é—´çš„å…³ç³»</b></p><p><code>type = A</code>ï¼šnameæ˜¯ä¸»æœºåï¼Œvalueæ˜¯ä¸»æœºåå¯¹åº”çš„IPåœ°å€</p><p><code>type = NS</code>ï¼šnameæ˜¯åŸŸï¼Œvalueä¹Ÿæ˜¯ä¸»æœºåâ€”â€”è¯¥åŸŸä¸»æœºIPå¯¹åº”çš„æƒå¨æœåŠ¡å™¨</p><p><code>type = CNAME</code>ï¼šnameæ˜¯ä¸»æœºåˆ«åï¼Œvalueæ˜¯å¯¹åº”çš„è§„èŒƒä¸»æœºå</p><p><code>type = MX</code>ï¼šnameé‚®ä»¶æœåŠ¡å™¨åˆ«åï¼Œvalueæ˜¯å¯¹åº”çš„è§„èŒƒä¸»æœºå</p><p>ï¼ˆ1ï¼‰å½“æŸä¸ªDNSæœåŠ¡å™¨<code>server_it</code>ä¸æ˜¯<code>alibaba.com</code>çš„æƒå¨æœåŠ¡å™¨ï¼Œé‚£ä¹ˆ<code>server_it</code>å¿…å°†åŒ…å«ä¸¤æ¡è®°å½•ï¼šAå’ŒNS</p><p><code>NS(alibaba.com,ns1.alibabadns.com,NS,100)</code></p><p><code>A(ns1.alibabadns.com,198.11.138.254,A,100)</code></p><p>ï¼ˆ2ï¼‰å½“æŸä¸ªæœåŠ¡å™¨<code>server_ali</code>æ˜¯<code>alibaba.com</code>çš„æƒå¨æœåŠ¡å™¨ï¼Œé‚£ä¹ˆ<code>server_ali</code>ä¸€å®šå«æœ‰Aè®°å½•</p><p><code>A(alibaba.com,203.119.215.82,A,100)</code></p><p><b style="color: hotpink;">æ¯”å¦‚æˆ‘åœ¨åä¸ºäº‘åŸŸåæœåŠ¡å™¨æ³¨å†Œçš„åŸŸåmatemaster.cnï¼Œåœ¨DNSç³»ç»Ÿæ•°æ®åº“ä¸­è‡³å°‘å­˜åœ¨ä¸¤ä¸ªå…³äºæˆ‘åŸŸåçš„è®°å½•ï¼š(matemaster.cn,ns1-huaweiclound-dns.net,NS)ã€<br>(ns1-huaweiclound-dns.net,198.70.153.255,A)</b></p><h2 id="DNSæŠ¥æ–‡"><a href="#DNSæŠ¥æ–‡" class="headerlink" title="DNSæŠ¥æ–‡"></a>DNSæŠ¥æ–‡</h2><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210328155528.jfif" style="width:80%"><h3 id="WiresharkæŠ“åŒ…"><a href="#WiresharkæŠ“åŒ…" class="headerlink" title="WiresharkæŠ“åŒ…"></a>WiresharkæŠ“åŒ…</h3><p>é¦–å…ˆè¯´ä¸‹ï¼Œè¿™é‡Œçš„æŠ“åŒ…æ“ä½œï¼Œå€Ÿé‰´äº†è®¡ç®—æœºç½‘ç»œè‡ªé¡¶å‘ä¸‹æ–¹æ³•ï¼šDNSå®éªŒã€‚å…³äºå®Œæ•´çš„å®éªŒæ–‡æ¡£æˆ‘æ”¾åœ¨äº†è‡ªå·±çš„ä»“åº“å½“ä¸­ï¼Œå¦‚æœæœ‰éœ€è¦çš„å¯ä»¥è‡ªå·±<code>git clone</code>ã€‚ğŸ‘‰ <a href="https://gitee.com/matemaster/master-depository/tree/master/2021-03-28/wireshark%E5%AE%9E%E9%AA%8C%E6%96%87%E6%A1%A3-en">Wiresharkå®éªŒæŠ¥å‘Šæ–‡æ¡£</a></p><p>ä¸‹é¢æ˜¯æˆ‘åˆ©ç”¨<strong>Wireshark</strong>æŠ“å–æœ¬åœ°ä¸»æœºè®¿é—®<code>matemaster.cn</code>ä¸»æœºçš„<code>DNSè¯·æ±‚æŠ¥æ–‡</code></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210328195018.jpg" style="width:80%;border:solid"><pre class="line-numbers language-wireshark" data-language="wireshark"><code class="language-wireshark">Domain Name System (query)    Transaction ID: 0x49f1    Flags: 0x0100 Standard query        0... .... .... .... = Response: Message is a query        .000 0... .... .... = Opcode: Standard query (0)        .... ..0. .... .... = Truncated: Message is not truncated        .... ...1 .... .... = Recursion desired: Do query recursively        .... .... .0.. .... = Z: reserved (0)        .... .... ...0 .... = Non-authenticated data: Unacceptable    Questions: 1    Answer RRs: 0    Authority RRs: 0    Additional RRs: 0    Queries        matemaster.cn: type A, class IN            Name: matemaster.cn            [Name Length: 13]            [Label Count: 2]            Type: A (Host Address) (1)            Class: IN (0x0001)    [Response In: 498]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç›¸å¯¹äºçš„æ¥è‡ª<code>DNS server</code>çš„å“åº”æŠ¥æ–‡</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210328195022.jpg" style="width:80%;border:solid"><pre class="line-numbers language-wireshark" data-language="wireshark"><code class="language-wireshark">Domain Name System (response)    Transaction ID: 0x49f1    Flags: 0x8180 Standard query response, No error        1... .... .... .... = Response: Message is a response        .000 0... .... .... = Opcode: Standard query (0)        .... .0.. .... .... = Authoritative: Server is not an authority for domain        .... ..0. .... .... = Truncated: Message is not truncated        .... ...1 .... .... = Recursion desired: Do query recursively        .... .... 1... .... = Recursion available: Server can do recursive queries        .... .... .0.. .... = Z: reserved (0)        .... .... ..0. .... = Answer authenticated: Answer/authority portion was not authenticated by the server        .... .... ...0 .... = Non-authenticated data: Unacceptable        .... .... .... 0000 = Reply code: No error (0)    Questions: 1    Answer RRs: 1    Authority RRs: 0    Additional RRs: 0    Queries        matemaster.cn: type A, class IN            Name: matemaster.cn        # æŸ¥è¯¢å            [Name Length: 13]            [Label Count: 2]            Type: A (Host Address) (1) # æŸ¥è¯¢ç±»å‹            Class: IN (0x0001)         # æŸ¥è¯¢ç±»    Answers        matemaster.cn: type A, class IN, addr 124.70.110.117            Name: matemaster.cn            Type: A (Host Address) (1)            Class: IN (0x0001)            Time to live: 283 (4 minutes, 43 seconds)            Data length: 4            Address: 124.70.110.117    [Request In: 495]    [Time: 0.005763000 seconds]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æŠ¥æ–‡å‚æ•°"><a href="#æŠ¥æ–‡å‚æ•°" class="headerlink" title="æŠ¥æ–‡å‚æ•°"></a>æŠ¥æ–‡å‚æ•°</h3><p><code>Transaction ID</code>ï¼šäº‹åŠ¡IDï¼Œåªæ˜¯å•çº¯çš„2Bï¼Œ16bitçš„æ•°æ®ï¼Œç”¨äºæ ‡è¯†æŠ¥æ–‡çš„å”¯ä¸€æ€§</p><p><code>Flags</code>ï¼š</p><ul><li><p><strong>QR(Response)</strong> <code>1bit</code>ï¼šæ ‡è®°æ˜¯è¯·æ±‚è¿˜æ˜¯å“åº”æŠ¥æ–‡</p><ul><li>0ï¼šè¯·æ±‚</li><li>1ï¼šå“åº”</li></ul></li><li><p><strong>Opcode</strong> <code>4bit</code>ï¼š</p><ul><li>0ï¼šæ ‡å‡†æŸ¥è¯¢</li><li>1ï¼šåå‘æŸ¥è¯¢</li><li>2ï¼šæœåŠ¡å™¨çŠ¶æ€è¯·æ±‚</li></ul></li><li><p><strong>Authoritative</strong> <code>1bit</code>ï¼šæ ‡è®°å‘é€æ­¤å“åº”æŠ¥æ–‡çš„æœåŠ¡å™¨æ˜¯å¦ä¸ºæƒå¨æœåŠ¡å™¨</p><ul><li>0ï¼š</li><li>1ï¼šæ˜¯æƒå¨æœåŠ¡å™¨</li></ul></li><li><p><strong>Truncated</strong> <code>1bit</code>ï¼šæ•°æ®æ˜¯å¦è¢«æˆªæ–­ï¼Œåœ¨æ•°æ®è¶…è¿‡512Bæ—¶è‡ªåŠ¨æˆªæ–­ï¼Œä¹Ÿå°±æ˜¯åªèƒ½ä¼ è¾“512B</p><ul><li>0ï¼š</li><li>1ï¼š</li></ul></li><li><p><strong>Recursion desired</strong> <code>1bit</code>ï¼šæ˜¯é€’å½’æŸ¥è¯¢è¿˜æ˜¯è¿­ä»£æŸ¥è¯¢</p><ul><li>0ï¼š</li><li>1ï¼š</li></ul></li><li><p><strong>Recursion available</strong> <code>1bit</code>ï¼šåªå‡ºç°åœ¨å“åº”æŠ¥æ–‡ï¼Œè¡¨æ˜æœåŠ¡å™¨æ˜¯å¦æ”¯æŒé€’å½’æŸ¥è¯¢</p><ul><li>0ï¼š</li><li>1ï¼š</li></ul></li><li><p><strong>Z</strong> <code>1bit</code>ï¼šä¿ç•™å­—æ®µåªèƒ½ä¸º0</p></li><li><p><strong>Answer authenticated</strong> <code>1bit</code>ï¼šæœåŠ¡å™¨æˆæƒéªŒè¯</p><ul><li>0ï¼š</li><li>1ï¼š</li></ul></li><li><p><strong>Non-authenticated data</strong> <code>1bit</code>ï¼šä¿ç•™å­—æ®µï¼Œåªèƒ½ä¸º0</p></li><li><p><strong>Reply code</strong> <code>4bit</code></p><ul><li>0ï¼šæ— å·®é”™ </li><li>1ï¼šæ ¼å¼å·®é”™</li><li>2ï¼šé—®é¢˜åœ¨åŸŸåæœåŠ¡å™¨ä¸Š </li><li>3ï¼šåŸŸå‚ç…§é—®é¢˜ </li><li>4ï¼šæŸ¥è¯¢ç±»å‹ä¸æ”¯æŒ </li><li>5ï¼šåœ¨ç®¡ç†ä¸Šè¢«ç¦æ­¢ </li><li>6 ~ 15 ä¿ç•™</li></ul></li></ul><p><code>Queries</code>ï¼š</p><ul><li>æŸ¥è¯¢åï¼š<strong>åŸŸå</strong>-<code>matemaster.cn</code>æˆ–è€… <strong>IPåœ°å€</strong></li><li>æŸ¥è¯¢ç±»å‹ï¼šï¼ˆæ¯”è¾ƒå¤šï¼Œè¿™é‡Œä»‹ç»ä¸€ä¸‹æ¯”è¾ƒå¸¸è§çš„ï¼‰<ul><li>Aï¼ˆ1ï¼‰ï¼šIPV4åœ°å€</li><li>NSï¼ˆ2ï¼‰ï¼šåŸŸåæœåŠ¡å™¨</li><li>CNAMEï¼ˆ5ï¼‰ï¼šè§„èŒƒä¸»æœºåçš„åˆ«å</li><li>MXï¼ˆ15ï¼‰ï¼š</li><li>AAAAï¼ˆ28ï¼‰ï¼šIPV6åœ°å€</li><li>PTRï¼ˆ12ï¼‰ï¼šIPè½¬åŸŸå</li></ul></li><li>æŸ¥è¯¢ç±»ï¼šIN-<code>Internet</code></li></ul><h1 id="ç½‘ç»œç¼–ç¨‹"><a href="#ç½‘ç»œç¼–ç¨‹" class="headerlink" title="ç½‘ç»œç¼–ç¨‹"></a>ç½‘ç»œç¼–ç¨‹</h1><h2 id="å®ç°å®¢æˆ·ç«¯"><a href="#å®ç°å®¢æˆ·ç«¯" class="headerlink" title="å®ç°å®¢æˆ·ç«¯"></a>å®ç°å®¢æˆ·ç«¯</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>    <span class="token comment">// å»ºç«‹ä¸ www.matemaster.cn ä¹‹é—´çš„å¥—æ¥å­—</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        <span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">InetSocketAddress</span> address <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InetSocketAddress</span><span class="token punctuation">(</span><span class="token string">"www.matemaster.cn"</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        socket<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>address<span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…³äºå¸¸ç”¨çš„å¥—æ¥å­—çŸ¥è¯†ï¼š</p><p>1ï¼‰å¦‚ä½•è·å–ä¸€ä¸ªä¸»æœºçš„è‹±ç‰¹ç½‘åœ°å€</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">InetAddress</span><span class="token punctuation">.</span><span class="token function">getByName</span><span class="token punctuation">(</span><span class="token string">"www.matemaster.cn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//console : www.matemaster.cn/124.70.110.117</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>2ï¼‰è·å–å¥—æ¥å­—çš„æ•°æ®æµ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>socket<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>socket<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>3ï¼‰è®¾ç½®å¥—æ¥å­—çš„è¿æ¥æ—¶é—´</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Socket</span> socket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Socket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>socket<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">int</span> timeoutInMilliseconds<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="å®ç°æœåŠ¡ç«¯"><a href="#å®ç°æœåŠ¡ç«¯" class="headerlink" title="å®ç°æœåŠ¡ç«¯"></a>å®ç°æœåŠ¡ç«¯</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServerSocketDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>        <span class="token class-name">ServerSocket</span> serv<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServerSocket</span><span class="token punctuation">(</span><span class="token number">8189</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Socket</span> client <span class="token operator">=</span> serv<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">InputStream</span> in <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">OutputStream</span> out <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Scanner</span> sc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">PrintWriter</span> output <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        output<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello Enter BYE to exit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span> done <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>done<span class="token operator">&amp;&amp;</span>sc<span class="token punctuation">.</span><span class="token function">hasNextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">String</span> line <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            output<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Server : "</span><span class="token operator">+</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"BYE"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                done <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºç½‘ç»œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Http </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºHexoçš„åšå®¢ç½‘ç«™</title>
      <link href="posts/52745.html"/>
      <url>posts/52745.html</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºäºMateryçš„é­”æ”¹"><a href="#åŸºäºMateryçš„é­”æ”¹" class="headerlink" title="åŸºäºMateryçš„é­”æ”¹"></a>åŸºäºMateryçš„é­”æ”¹</h1><h2 id="è‡ªå®šä¹‰ç½‘ç«™å­—ä½“"><a href="#è‡ªå®šä¹‰ç½‘ç«™å­—ä½“" class="headerlink" title="è‡ªå®šä¹‰ç½‘ç«™å­—ä½“"></a>è‡ªå®šä¹‰ç½‘ç«™å­—ä½“</h2><h3 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h3><p>é¦–å…ˆç¡®ä¿ä¸»é¢˜å­˜åœ¨cssæ–‡ä»¶ï¼š<code>(hexo-theme-matery/source/css/.mycss)</code></p><p><b style="color: chocolate;">è·¯å¾„å¾ˆé‡è¦ï¼æ–‡ä»¶æ²¡æœ‰ç”¨å°±è‡ªå·±åˆ›ï¼</b></p><p><b style="color: red;">æœ¬ç«™ä½¿ç”¨çš„å¼€æºå­—ä½“:JetBrains Mono</b></p><h3 id="ç½‘ç«™å±€éƒ¨ä¸ªæ€§åŒ–å­—ä½“"><a href="#ç½‘ç«™å±€éƒ¨ä¸ªæ€§åŒ–å­—ä½“" class="headerlink" title="ç½‘ç«™å±€éƒ¨ä¸ªæ€§åŒ–å­—ä½“"></a>ç½‘ç«™å±€éƒ¨ä¸ªæ€§åŒ–å­—ä½“</h3><p>ä¸€èˆ¬ç½‘ç«™çš„webå­—ä½“éƒ½å¯ä»¥ç›´æ¥ä»<a href="https://fonts.google.com/">Google-Font</a>è·å–èµ„æºï¼Œè¿™æ ·ä¸ç”¨æ‹…å¿ƒå­—ä½“å•†ä¸šå¸¦æ¥çš„æ³•å¾‹é—®é¢˜</p><p>1ï¼‰åˆ›å»ºwebå­—ä½“å¼•ç”¨</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span><span class="token punctuation">{</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'å¼•ç”¨çš„å­—ä½“åç§°'</span><span class="token punctuation">;</span>    <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'è°·æ­Œå­—ä½“è·¯å¾„ï¼ˆæˆ–è€…å…¶ä»–ä»€ä¹ˆå­—ä½“å¼•ç”¨ï¼‰'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>2ï¼‰åœ¨ç½‘é¡µåˆé€‚çš„ä½ç½®è¿›è¡Œå­—ä½“å¼•ç”¨</p><p>â‘ åˆ©ç”¨æµè§ˆå™¨æ£€æŸ¥å…ƒç´ ï¼Œè·å–éœ€è¦å®šä¹‰å­—ä½“çš„éƒ¨åˆ†</p><p>â‘¡åœ¨ä¸»ä½“çš„é…ç½®æ–‡ä»¶ä¸­(hexo-theme-matery/layout/â€¦)æ‰¾åˆ°å¯¹åº”çš„æ¸²æŸ“(.ejs)æ–‡ä»¶ï¼ŒæŸ¥æ‰¾éœ€è¦ä¿®æ”¹çš„éƒ¨åˆ†</p><p>â‘ æ¼”ç¤ºä¸€ä¸‹åˆ©ç”¨æµè§ˆå™¨è·å–å®šä¹‰å­—ä½“çš„éƒ¨åˆ†</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210331113624.jpg" style="width:80%;"><p>å¯¹è·å–åˆ°çš„<code>idé€‰æ‹©å™¨ï¼š#artDetail</code>è¿›è¡Œcssæ¸²æŸ“</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">#artDetail</span> <span class="token punctuation">{</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'å¼•ç”¨çš„webå­—ä½“'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>â‘¡åˆ©ç”¨ä¸»ä½“çš„ejsæ¸²æŸ“æ–‡ä»¶æ‰¾å‡ºéœ€è¦ä¿®é¥°çš„éƒ¨åˆ†ï¼ˆåŠ å…¥è‡ªå®šä¹‰ç±»ï¼‰</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210331114123.jpg" style="width:80%"><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/*ä½¿ç”¨æˆ‘åœ¨æ–‡ç« å†…å®¹è¯¦æƒ…å®šä¹‰çš„diyFnotç±»**/</span><span class="token selector">.diyfont</span> <span class="token punctuation">{</span>   <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'å¼•ç”¨çš„webå­—ä½“'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token comment">/*ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå¸¦çš„id*/</span><span class="token selector">#artDetail</span> <span class="token punctuation">{</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'å¼•ç”¨çš„webå­—ä½“'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç½‘ç«™å…¨å±€åŒ–å­—ä½“å®šä¹‰"><a href="#ç½‘ç«™å…¨å±€åŒ–å­—ä½“å®šä¹‰" class="headerlink" title="ç½‘ç«™å…¨å±€åŒ–å­—ä½“å®šä¹‰"></a>ç½‘ç«™å…¨å±€åŒ–å­—ä½“å®šä¹‰</h3><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span><span class="token punctuation">{</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'å¼•ç”¨çš„å­—ä½“åç§°'</span><span class="token punctuation">;</span>    <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'è°·æ­Œå­—ä½“è·¯å¾„ï¼ˆæˆ–è€…å…¶ä»–ä»€ä¹ˆå­—ä½“å¼•ç”¨ï¼‰'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token selector">body</span> <span class="token punctuation">{</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'å¼•ç”¨çš„webå­—ä½“åç§°'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¼•ç”¨æœ¬åœ°çš„å­—ä½“æ–‡ä»¶"><a href="#å¼•ç”¨æœ¬åœ°çš„å­—ä½“æ–‡ä»¶" class="headerlink" title="å¼•ç”¨æœ¬åœ°çš„å­—ä½“æ–‡ä»¶"></a>å¼•ç”¨æœ¬åœ°çš„å­—ä½“æ–‡ä»¶</h3><p>å½“ç„¶æœ‰æ—¶å€™é‚£ä¸ªè°·æ­Œå­—ä½“çš„ç½‘ç«™å¯èƒ½ç™»å½•ä¸ä¸Šå»ï¼Œéœ€è¦ç§‘å­¦ä¸Šç½‘ï¼Œå¾ˆçƒ¦äººï¼æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è½½ä¸‹å­—ä½“æ–‡ä»¶ï¼Œå°†ä»–æ”¾åœ¨æœ¬åœ°ï¼Œè¿›è¡Œç›´æ¥å¼•ç”¨ï¼çœ‹ä¸‹é¢æ“ä½œğŸ‘‡</p><p>â‘ åœ¨æœ¬åœ°çš„hexoæ ¹ç›®å½•çš„sourceæ–‡ä»¶ä¸‹åˆ›ç«‹diy-fontæ–‡ä»¶å¤¹:<code>/source/diy-font</code></p><p>åœ¨è¯¥æ–‡ä»¶ä¸‹å­˜æ”¾ä½ çš„å­—ä½“æ–‡ä»¶ï¼Œæ¯”å¦‚ï¼š<code>/source/diy-font/IBMPlexMono-Italic.ttf</code></p><p>â‘¡å¼•ç”¨æœ¬åœ°å­—ä½“ï¼ˆä»ç„¶æ˜¯åœ¨my.cssæ–‡ä»¶ä¸­ä¹¦å†™ä»£ç ï¼‰</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span><span class="token punctuation">{</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'IBMPlexMono-Italic'</span><span class="token punctuation">;</span>    <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'../diy-font/IBMPlexMono-Italic.ttf'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token selector">body</span> <span class="token punctuation">{</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'IBMPlexMono-Italic'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å®ç°å¼•ç”¨æœ¬åœ°çš„å­—ä½“äº†ï¼Œå¹¶ä¸”åœ¨webæœ‰æ•ˆï¼</p><h1 id="å­—è››å‹ç¼©å­—ä½“"><a href="#å­—è››å‹ç¼©å­—ä½“" class="headerlink" title="å­—è››å‹ç¼©å­—ä½“"></a>å­—è››å‹ç¼©å­—ä½“</h1><p>åœ¨ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•åœ¨ç½‘ç«™ä¸Šå¼•ç”¨è‡ªå·±å–œæ¬¢çš„å­—ä½“ï¼Œä½†æ˜¯è¿™æ ·ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼šå­—ä½“æ–‡ä»¶å¤ªå¤§ï¼ï¼ˆå°¤å…¶æ˜¯ä¸­æ–‡ï¼Œæœ‰æ—¶å€™ä¸ºäº†å‡ ä¸ªå­—å¼•å…¥ä¸€ä¸ªæ•°åå…†çš„å­—ä½“æ–‡ä»¶ï¼Œå¾—ä¸å¿å¤±ï¼‰ï¼Œæ‰€æœ‰éœ€è¦å­—ä½“å‹ç¼©ï¼</p><p>â‘ ä¸‹è½½å­—è››æ’ä»¶</p><pre class="line-numbers language-nodejs" data-language="nodejs"><code class="language-nodejs">npm install font-spider -g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>â‘¡åœ¨ç½‘ç«™ä¸Šå¼•ç”¨è‡ªå·±çš„å­—ä½“</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token atrule"><span class="token rule">@font-face</span></span><span class="token punctuation">{</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'IBMPlexMono-Italic'</span><span class="token punctuation">;</span>    <span class="token property">src</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'../diy-font/IBMPlexMono-Italic.ttf'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>   <span class="token punctuation">}</span><span class="token selector">body</span> <span class="token punctuation">{</span>    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'IBMPlexMono-Italic'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â‘¢å­—è››å‘½ä»¤ç›´æ¥å‹ç¼©å¼•ç”¨äº†ä½ è‡ªå®šä¹‰å­—ä½“çš„é¡µé¢</p><pre class="line-numbers language-nodejs" data-language="nodejs"><code class="language-nodejs">font-spider å¼•ç”¨å­—ä½“é¡µé¢çš„è·¯å¾„// æ¯”å¦‚ï¼šfont-spider /public/*.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å…³äºå­—ä½“å‹ç¼©æœ‰å¾ˆå¤šæ–¹å¼ï¼šå¯ä»¥è‡ªå·±ç¼–è¯‘è‡ªå·±çš„å¸¸ç”¨å­—ä½“ï¼Œè¿™æ ·æ–‡ä»¶æœ€å°ï¼Œå½“ç„¶æœ€å¥½å°±ç›´æ¥æ¡ç°æˆçš„å¼€æºå­—ä½“ï¼</p><h1 id="Hexoéƒ¨ç½²äº‘æœåŠ¡å™¨"><a href="#Hexoéƒ¨ç½²äº‘æœåŠ¡å™¨" class="headerlink" title="Hexoéƒ¨ç½²äº‘æœåŠ¡å™¨"></a>Hexoéƒ¨ç½²äº‘æœåŠ¡å™¨</h1><p>å‡†ç¡®æ¥è¯´ï¼Œè¿™éƒ¨åˆ†æ˜¯ä»‹ç»ï¼Œå¦‚ä½•å°†hexoéƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ã€‚ä¹Ÿå°±è¯´è¿™éƒ¨åˆ†æ˜¯é¢å‘é‚£äº›æƒ³æŠŠè‡ªå·±çš„åšå®¢ç½‘ç«™æ”¾åˆ°è‡ªå·±çš„äº‘æœåŠ¡å™¨ä¸Šè¿è¡Œçš„æœ‹å‹ä»¬ï¼</p><h2 id="äº‘æœåŠ¡å™¨"><a href="#äº‘æœåŠ¡å™¨" class="headerlink" title="äº‘æœåŠ¡å™¨"></a>äº‘æœåŠ¡å™¨</h2><p><b style="color: yellowgreen;">äº‘æœåŠ¡å™¨é…ç½®</b></p><table><thead><tr><th>äº‘æœåŠ¡å™¨</th><th>å‚æ•°</th></tr></thead><tbody><tr><td><strong>Linuxç³»ç»Ÿ</strong></td><td><strong>Ubuntu 18.04 server 64bit with ARM</strong></td></tr><tr><td><strong>äº‘ç¡¬ç›˜</strong></td><td><strong>1G+40GBï¼ˆé«˜IOï¼‰</strong></td></tr><tr><td><strong>åŸŸå</strong></td><td><strong><a href="http://www.matemaster.cn/">www.matemaster.cn</a></strong></td></tr></tbody></table><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210327105816.jpg" style="width:80%"><h2 id="è¿æ¥äº‘æœåŠ¡å™¨"><a href="#è¿æ¥äº‘æœåŠ¡å™¨" class="headerlink" title="è¿æ¥äº‘æœåŠ¡å™¨"></a>è¿æ¥äº‘æœåŠ¡å™¨</h2><h3 id="åˆ›å»ºgitç”¨æˆ·"><a href="#åˆ›å»ºgitç”¨æˆ·" class="headerlink" title="åˆ›å»ºgitç”¨æˆ·"></a>åˆ›å»ºgitç”¨æˆ·</h3><p>ï¼ˆ1ï¼‰ç™»å½•äº‘æœåŠ¡å™¨ï¼Œåˆ‡æ¢rootç”¨æˆ·ï¼ˆåä¸ºäº‘é»˜è®¤rootç”¨æˆ·ï¼‰</p><p>ï¼ˆ2ï¼‰å®‰è£…gitï¼ˆå¯ä»¥gitâ€“versionæµ‹è¯•æ˜¯å¦æˆåŠŸï¼‰</p><p>ï¼ˆ3ï¼‰åˆ›å»ºç®¡ç†gitçš„ç”¨æˆ·</p><p>ï¼ˆ4ï¼‰æ·»åŠ gitç”¨æˆ·çš„æƒé™</p><p>ï¼ˆ5ï¼‰vimæ“ä½œç¼–è¾‘gitçš„æƒé™</p><p>ï¼ˆ6ï¼‰åˆ‡æ¢è‡³gitç”¨æˆ·ï¼Œåˆ›å»ºSSHå¯†é’¥</p><p>ï¼ˆ7ï¼‰ä¿®æ”¹SSHæ–‡ä»¶æƒé™ï¼Œæµ‹è¯•æ˜¯å¦æˆåŠŸï¼ˆssh -v git@æœåŠ¡å™¨ipï¼‰</p><pre class="line-numbers language-cloundshell" data-language="cloundshell"><code class="language-cloundshell">// åˆ‡æ¢rootç”¨æˆ·ï¼ˆåä¸ºäº‘é»˜è®¤rootç”¨æˆ·ï¼‰sudo su root// å®‰è£…gitapt install git// åˆ›å»ºç®¡ç†gitçš„ç”¨æˆ·ï¼ˆè‹¥ä¹‹å‰å¼„è¿‡gitç”¨æˆ·å°±å¯ä»¥deluser gitï¼‰adduser git// æ·»åŠ gitç”¨æˆ·çš„æƒé™chmod 740 /etc/sudoersvim /etc/sudoers// ä¸Šé¢è¿™ä¸ªvimæ“ä½œå°†ä¼šè¿›å…¥ç¼–è¾‘æ¨¡å¼ è¾“å…¥ i è¿›è¡Œç¼–è¾‘// æ‰¾åˆ°è¿™ä¸ªå†…å®¹ï¼šroot    ALL=(ALL)     ALL// åŠ å…¥ä¸‹é¢ä»£ç ï¼šgit    ALL=(ALL)     ALL// æŒ‰ä¸‹ESCæ¨å‡ºiï¼Œå¹¶ä¸”è¾“å…¥:wqä¿å­˜æ¨å‡º// æ”¹å›æƒé™chmod 400 /etc/sudoers// å¦‚æœä½ åœ¨åˆ›å»ºgitç”¨æˆ·æ—¶ï¼Œå·²ç»è¾“å…¥å¯†ç ï¼Œé‚£ä¹ˆå°±è·³è¿‡è¿™ä¸€æ­¥sudo passwd git// åˆ‡æ¢è‡³gitç”¨æˆ·ï¼ˆå¾ˆé‡è¦ï¼‰ è¿›è¡Œä¸‹é¢æ“ä½œsu gitmkdir ~/.sshvim ~/.ssh/authorized_keys// vimæ“ä½œè¿›å…¥äº†authorized_keysç¼–è¾‘æ“ä½œï¼ŒæŒ‰åºiè¿›å…¥ç¼–è¾‘ï¼Œå°†æœ¬åœ°çš„SSHå¯†é’¥è¾“å…¥è¿›å»ï¼Œç„¶åESCï¼Œåœ¨:wqä¿å­˜æ¨å‡º// ä¿®æ”¹ä¸Šé¢è¿™ä¸¤ä¸ªæ–‡ä»¶çš„æƒé™chmod 600 /home/git/.ssh/authorized_keyschmod 700 /home/git/.ssh//æµ‹è¯•ä¸€ä¸‹æœ¬åœ°ç»ˆç«¯èƒ½ä¸èƒ½è¿æ¥åˆ°äº‘æœåŠ¡å™¨çš„gitï¼ˆä¸‹é¢è¿™è¡Œä»£ç æ˜¯åœ¨æœ¬åœ°ç”µè„‘å®Œæˆï¼Œä¸æ˜¯äº‘æœåŠ¡å™¨çš„å‘½ä»¤ï¼‰ssh -v git@äº‘æœåŠ¡å™¨çš„ipè‡³æ­¤gitç”¨æˆ·æ“ä½œå®Œæˆ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ›å»ºgitä»“åº“"><a href="#åˆ›å»ºgitä»“åº“" class="headerlink" title="åˆ›å»ºgitä»“åº“"></a>åˆ›å»ºgitä»“åº“</h3><p>ï¼ˆ1ï¼‰åˆ›å»ºgitæ–‡ä»¶å¤¹ï¼Œæˆäºˆgitä¸»æƒ</p><p>ï¼ˆ2ï¼‰æ–°å»ºgitä»“åº“</p><p>ï¼ˆ3ï¼‰åˆ›å»ºgité’©å­</p><p>ï¼ˆ4ï¼‰ç»™gité’©å­æƒé™</p><pre class="line-numbers language-cloundshell" data-language="cloundshell"><code class="language-cloundshell">// å»¶ç»­ä¸Šé¢çš„æ“ä½œï¼Œæ­¤æ—¶éœ€è¦åˆ‡å›rootç”¨æˆ·ï¼ˆä»¥ä¸‹å‘½ä»¤å‡åœ¨rootï¼‰mkdir /var/repo//å°†ä¸Šé¢è¿™ä¸ªæ–‡ä»¶æˆæƒç»™gitchown -R git:git /var/repochmod -R 755 /var/repo// å»ºç«‹ç½‘ç«™æ ¹ç›®å½•ï¼Œå¹¶ç»™æƒé™mkdir /var/hexochown -R git:git /var/hexochmod -R 755 /var/hexo// æ–°å»ºgitä»“åº“ï¼ˆè¿™é‡Œhexo.gitï¼Œå¯ä»¥æ”¹æˆï¼šè‡ªå·±æƒ³è¦çš„åå­—.gitï¼‰cd /var/repogit init --bare hexo.git// åˆ›å»ºgité’©å­ï¼ŒæœåŠ¡è‡ªåŠ¨éƒ¨ç½²vim /var/repo/hexo.git/hooks/post-receive// è¿›è¡Œvimç¼–è¾‘ ï¼Œç²˜è´´ä¿å­˜é€€å‡º#!/bin/bashgit --work-tree=/var/hexo --git-dir=/var/repo/hexo.git checkout -f//ä¿®æ”¹é’©å­æƒé™chown -R git:git /var/repo/hexo.git/hooks/post-receivechmod +x /var/repo/hexo.git/hooks/post-receive<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="é…ç½®äº‘æœåŠ¡å™¨è½¯ä»¶Nginxï¼ˆå®å¡”ï¼‰"><a href="#é…ç½®äº‘æœåŠ¡å™¨è½¯ä»¶Nginxï¼ˆå®å¡”ï¼‰" class="headerlink" title="é…ç½®äº‘æœåŠ¡å™¨è½¯ä»¶Nginxï¼ˆå®å¡”ï¼‰"></a>é…ç½®äº‘æœåŠ¡å™¨è½¯ä»¶Nginxï¼ˆå®å¡”ï¼‰</h3><p>ï¼ˆ1ï¼‰åœ¨äº‘æœåŠ¡å™¨ä¸‹è½½å®å¡”</p><p>ï¼ˆ2ï¼‰ä¸‹è½½Nginx</p><p>ï¼ˆ3ï¼‰æ·»åŠ ç«™ç‚¹</p><p>ï¼ˆ4ï¼‰é…ç½®æ–‡ä»¶</p><p>ï¼ˆ5ï¼‰ç½‘ç«™ç›®å½•</p><p>ï¼ˆ6ï¼‰é‡å¯å®å¡”ï¼Œä½¿é…ç½®ç”Ÿæ•ˆ</p><pre class="line-numbers language-cloundshell" data-language="cloundshell"><code class="language-cloundshell">// ä¸‹è½½å®å¡”ï¼ˆä¸‹é¢æœ‰æ•™ç¨‹ï¼‰wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh// ä¸‹è½½å¥½ä¹‹åï¼ˆä¼šå‡ºç°ç½‘ç«™å…¬ç½‘åŸŸåã€ç™»å½•ç”¨æˆ·ã€ç™»å½•å¯†ç ï¼‰// è®°ä½åœ¨ç™»å½•å®å¡”çš„æ—¶å€™ï¼Œä¸€å®šè¦è®°ç€æ”¾å¼€port: 8888 ç«¯å£ä¸ç„¶å°±æ‹¦æˆªäº†<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®‰è£…å®å¡”Linuxé¢æ¿æ–¹æ³•<a href="https://www.bt.cn/bbs/thread-19376-1-1.html">æŸ¥çœ‹è¯¦ç»†æ•™ç¨‹ &gt;&gt;</a></p><blockquote><p>ä½¿ç”¨ SSH è¿æ¥å·¥å…·ï¼Œå¦‚<a href="https://download.bt.cn/ssh/BT-Term.exe">å ¡å¡”SSHç»ˆç«¯</a>è¿æ¥åˆ°æ‚¨çš„ Linux æœåŠ¡å™¨åï¼Œ<a href="https://www.bt.cn/bbs/thread-5166-1-1.html">æŒ‚è½½ç£ç›˜</a>ï¼Œæ ¹æ®ç³»ç»Ÿæ‰§è¡Œç›¸åº”å‘½ä»¤å¼€å§‹å®‰è£…ï¼ˆå¤§çº¦2åˆ†é’Ÿå®Œæˆé¢æ¿å®‰è£…ï¼‰ï¼š</p><p>Centoså®‰è£…è„šæœ¬</p><pre class="line-numbers language-none"><code class="language-none">yum install -y wget &amp;&amp; wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>Ubuntu/Deepinå®‰è£…è„šæœ¬</p><pre class="line-numbers language-none"><code class="language-none">wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>Debianå®‰è£…è„šæœ¬</p><pre class="line-numbers language-none"><code class="language-none">wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; bash install.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>Fedoraå®‰è£…è„šæœ¬</p><pre class="line-numbers language-none"><code class="language-none">wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; bash install.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><p>ä¸‹è½½nginx</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210327113052.jpg" style="width:90%"><p>æ·»åŠ ç«™ç‚¹</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210327113213.jpg" style="width:90%"><p>è®¾ç½®é…ç½®æ–‡ä»¶</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210327113305.jpg" style="width:90%"><p>è®¾ç½®ç½‘ç«™ç›®å½•</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210327113329.jpg" style="width:90%"><p>é‡å¯å®å¡”æœåŠ¡ï¼ˆåœ¨äº‘æœåŠ¡å™¨ä¸­è¿›è¡Œï¼‰</p><pre class="line-numbers language-cloundshell" data-language="cloundshell"><code class="language-cloundshell">bt restart   //è¿™æ ·æ‰ä¼šä½¿ä¸Šé¢åœ¨å®å¡”linuxé¢æ¿çš„é…ç½®ç”Ÿæ•ˆ<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="æœ¬åœ°hexoé…ç½®"><a href="#æœ¬åœ°hexoé…ç½®" class="headerlink" title="æœ¬åœ°hexoé…ç½®"></a>æœ¬åœ°hexoé…ç½®</h3><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">deploy:  type: git  repo: git@åŸŸå:/var/repo/hexo.git  branch: master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">hexo cl&amp;&amp;hexo g&amp;&amp;hexo d  //å®Œæˆéƒ¨ç½²<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆ‘åœ¨éƒ¨ç½²çš„æ—¶å€™å‡ºç°äº†æƒé™é”™è¯¯çš„é—®é¢˜ ï¼Œåæ¥å‘ç°æ˜¯è‡ªå·±åœ¨åˆ›å»ºgitä¸‹çš„æ–‡ä»¶å¤¹æ—¶ï¼Œå¿˜è®°æˆæƒäº†ã€‚</p><pre class="line-numbers language-cloundshell" data-language="cloundshell"><code class="language-cloundshell">chown -R git:git /var/repo/chown -R git:git /var/hexo/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="éƒ¨ç½²æˆåŠŸé¢„è§ˆ"><a href="#éƒ¨ç½²æˆåŠŸé¢„è§ˆ" class="headerlink" title="éƒ¨ç½²æˆåŠŸé¢„è§ˆ"></a>éƒ¨ç½²æˆåŠŸé¢„è§ˆ</h3><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.1/imgs/20210326173021.jpg" style="width:80%"><h1 id="SSLè¯ä¹¦"><a href="#SSLè¯ä¹¦" class="headerlink" title="SSLè¯ä¹¦"></a>SSLè¯ä¹¦</h1><h2 id="è·å–SSLè¯ä¹¦"><a href="#è·å–SSLè¯ä¹¦" class="headerlink" title="è·å–SSLè¯ä¹¦"></a>è·å–SSLè¯ä¹¦</h2><p>è¿™ä¸ªSSLå¯ä»¥ä¹°ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç™½å«–ã€‚å½“ç„¶ä¸ºäº†çœé’±çš„è¯ï¼Œè¿˜æ˜¯æ•™å¤§å®¶æ€ä¹ˆç™½å«–ï¼<a href="https://support.huaweicloud.com/scm_faq/scm_01_0192.html">åä¸ºäº‘å®˜æ–¹æ•™ç¨‹</a></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210327131003.jpg" style="width:90%"><p>å°†è¯ä¹¦çš„*.keyä»¥åŠ*.pemå†…å®¹ä¿å­˜åˆ°å¯¹åº”ä½ç½®å³å¯ï¼</p><h1 id="å‰ç«¯åº“CDNåŠ é€Ÿ"><a href="#å‰ç«¯åº“CDNåŠ é€Ÿ" class="headerlink" title="å‰ç«¯åº“CDNåŠ é€Ÿ"></a>å‰ç«¯åº“CDNåŠ é€Ÿ</h1><p>åœ¨<code>Matery</code>ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œä½œè€…å¯¹äº<code>libs</code>ä¸‹çš„æ–‡ä»¶åšå‡ºè¿™æ ·çš„è§£é‡Šï¼šä½¿ç”¨åˆ°çš„å‰ç«¯åº“ï¼Œå¯æŒ‰éœ€æ›¿æ¢æˆå¯¹åº”çš„CDNåœ°å€ï¼Œå¦‚æœä¸‹é¢æœªæŒ‡å®šå…·ä½“çš„ç‰ˆæœ¬å·ï¼Œä½¿ç”¨æœ€æ–°çš„ç‰ˆæœ¬å³å¯ã€‚ğŸ‘‰<a href="https://github.com/matemaster9/source@2.0/matery-libs">Githubå‰ç«¯åº“</a></p><h2 id="libs"><a href="#libs" class="headerlink" title="libs"></a>libs</h2><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">libs:  css:    matery: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/css/matery.css     mycss:  /css/my.css     fontAwesome: /libs/awesome/css/all.css     materialize: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/css/materialize.min.css    aos: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/css/aos.css     animate: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/css/animate.min.css     lightgallery: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/css/lightgallery.min.css     aplayer: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/css/APlayer.min.css     dplayer: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/css/DPlayer.min.css    gitalk: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/css/gitalk.css     jqcloud: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/css/jqcloud.css     tocbot: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/css/tocbot.css     prism: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/css/prism.css    js:    matery: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/matery.js     jquery: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/jquery.min.js     materialize: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/materialize.min.js     masonry: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/masonry.pkgd.min.js     aos: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/aos.js     scrollProgress: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/scrollProgress.min.js     lightgallery: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/lightgallery-all.min.js     clicklove: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/clicklove.js    busuanzi: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/busuanzi.pure.mini.js     aplayer: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/APlayer.min.js    dplayer: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/DPlayer.min.js     crypto: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/crypto-js.min.js     echarts: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/echarts.min.js     gitalk: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/gitalk.min.js #/libs/gitalk/gitalk.min.js    valine: https://unpkg.com/valine/dist/Valine.min.js     minivaline: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/MiniValine.js     twikoo: https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js     jqcloud: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/jqcloud-1.0.4.min.js    tocbot: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/tocbot.min.js     canvas_nest: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/canvas-nest.js     ribbon: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/ribbon.min.js     ribbonRefresh: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/ribbon-refresh.min.js     ribbon_dynamic: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/ribbon-dynamic.js     instantpage: https://cdn.jsdelivr.net/gh/matemaster9/source@2.0/matery-libs/js/instantpage.js<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="cdn-jsdelivr-github"><a href="#cdn-jsdelivr-github" class="headerlink" title="cdn+jsdelivr+github"></a>cdn+jsdelivr+github</h2><p>è¿™ä¸ªæ˜¯ç›®å‰æ¯”è¾ƒå¥½ç”¨çš„é™æ€èµ„æºçš„CDNåŠ é€Ÿæ–¹å¼ã€‚å½“ç„¶è¿˜æœ‰èŠ±é’±çš„æ–¹å¼ï¼Œé‚£ä¸ªä¹Ÿä¸é”™</p><p><code>è…¾è®¯</code>ï¼š<a href="https://blog.sky03.cn/medias/test.jpg">COS + CDN</a></p><p><code>GitHub</code>ï¼š<a href="https://cdn.jsdelivr.net/gh/skyls03/skyls03.github.io/medias/test.jpg">cdn + jsDelivr + GitHub</a></p><p><code>é˜¿é‡Œ</code>ï¼š<a href="https://sky03-blog-images.oss-cn-beijing.aliyuncs.com/blog-img/test.jpg">OSS</a></p><p>ä¸ºäº†é¿å¼€<code>jsdelivr</code>æ¯æ¬¡åŠ é€Ÿèµ„æºä¸è¶…è¿‡20mæˆ–è€…githubä»“åº“å®¹é‡ä¸èƒ½è¶…è¿‡50mçš„å¼Šç«¯ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–å‘å¸ƒç‰ˆæœ¬çš„æ–¹å¼æ¥è§£å†³ï¼</p><p>ï¼ˆ1ï¼‰æ–°å»ºä¸€ä¸ª<code>GitHub</code>ä»“åº“<strong>source</strong></p><p>ï¼ˆ2ï¼‰<code>git clone</code>å½“æœ¬åœ°ï¼Œå°†éœ€è¦åŠ é€Ÿçš„é™æ€èµ„æºï¼ˆ.css .jsï¼‰ç­‰æ–‡ä»¶æ”¾å…¥æœ¬åœ°ä»“åº“</p><p>ï¼ˆ3ï¼‰<code>git push</code>åˆ°è¿œç«¯ä»“åº“ï¼Œç„¶åå‘å¸ƒç‰ˆæœ¬å³å¯</p><p>å¼•ç”¨èµ„æºçš„æ–¹å¼</p><pre class="line-numbers language-url" data-language="url"><code class="language-url">// å…·ä½“ä½¿ç”¨è¿æ¥ï¼Œå¯ä»¥å‚è€ƒä¸Šé¢çš„å‰ç«¯åº“https://cdn.jsdelivr.net/gh/ç”¨æˆ·å/ä»“åº“å@å‘å¸ƒçš„ç‰ˆæœ¬å·/æ–‡ä»¶è·¯å¾„<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="SEO"><a href="#SEO" class="headerlink" title="SEO"></a>SEO</h1><h2 id="ç™¾åº¦æ”¶å½•"><a href="#ç™¾åº¦æ”¶å½•" class="headerlink" title="ç™¾åº¦æ”¶å½•"></a>ç™¾åº¦æ”¶å½•</h2><h3 id="å°†åŸŸåç«™ç‚¹æäº¤åˆ°ç™¾åº¦"><a href="#å°†åŸŸåç«™ç‚¹æäº¤åˆ°ç™¾åº¦" class="headerlink" title="å°†åŸŸåç«™ç‚¹æäº¤åˆ°ç™¾åº¦"></a>å°†åŸŸåç«™ç‚¹æäº¤åˆ°ç™¾åº¦</h3><p>æµ‹è¯•ç½‘ç«™æ˜¯å¦è¢«æœç´¢å¼•æ“æ”¶å½•ï¼šåœ¨ç™¾åº¦è¾“å…¥ä¸‹é¢ä»£ç ï¼Œä¼šå‡ºç°æ”¶å½•ç»“æœ</p><pre class="line-numbers language-none"><code class="language-none">// site:(åŸŸå)site:www.matemaster.cn<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><b style="color: hotpink;">æ²¡æœ‰æ”¶å½•ï¼Ÿé‚£ä¹ˆçœ‹ä¸‹é¢æ“ä½œ</b></p><p>ï¼ˆ1ï¼‰ç™»å½•<a href="https://ziyuan.baidu.com/">ç™¾åº¦æœç´¢èµ„æºå¹³å°</a></p><p>ï¼ˆ2ï¼‰ç™»å½•æˆåŠŸåï¼Œåœ¨ç”¨æˆ·ä¸­å¿ƒ-&gt;ç«™ç‚¹ç®¡ç†-&gt;æ·»åŠ ç½‘ç«™æ“ä½œ <span class="github-emoji"><span>ğŸ‘‡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f447.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>çœ‹ä¸‹å›¾</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210326232547.jpg" style="width: 90%"><p>ï¼ˆ3ï¼‰è¿™é‡Œè®²ä¸€ä¸‹ç¬¬ä¸‰æ­¥ï¼šéªŒè¯ç½‘ç«™ï¼æœ€å¥½é€‰æ‹©CNAMEè§£æï¼ˆæ¢è€Œè¨€ä¹‹ï¼Œå°±ç”¨è¿™ä¸ªæœ€å¥½ï¼Œå¸®ä½ é€‰å¥½æ–¹å¼çœçš„çº ç»“ï¼‰</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210326233923.jpg" style="width: 90%"><p><b style="color: orange;">åä¸ºäº‘åŸŸåä¸ºä¾‹ï¼Œæ·»åŠ åŸŸåè®°å½•é›†ï¼ˆé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€ä¸ƒç‰›äº‘â€¦â€¦ï¼‰éƒ½ä¸€æ ·çš„æ“ä½œï¼Œå®åœ¨ä¸ä¼šçš„å¯ä»¥ç›´æ¥ç™¾åº¦ï¼Œæˆ–è€…å°±åœ¨å®˜æ–¹äº‘æœåŠ¡ç½‘ç«™æ‰¾æ•™ç¨‹ï¼</b></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210326234541.jpg" style="zoom: 67%;"><p><b style="color: hotpink;">ä»¥ä¸Šæ“ä½œï¼Œåªæ˜¯å•çº¯çš„å°†ç½‘ç«™åŸŸåæäº¤çš„ç™¾åº¦æ”¶å½•äº†ï¼ï¼Œä½†æ˜¯ä¸ºäº†ä»¥åè‡ªå·±å†™çš„æ¯ä¸€ç¯‡åšå®¢æ–‡ç« éƒ½å¯ä»¥è¢«ç™¾åº¦æ”¶å½•ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿˜æ˜¯ä¸»åŠ¨æ¨é€ä¸ºå¥½ï¼</b></p><h3 id="ä¸»åŠ¨æ¨é€"><a href="#ä¸»åŠ¨æ¨é€" class="headerlink" title="ä¸»åŠ¨æ¨é€"></a>ä¸»åŠ¨æ¨é€</h3><p>é¦–å…ˆè¯´ä¸€å¥ï¼Œæ¨é€çš„æ–¹å¼æœ‰ä¸‰ç§ï¼šä¸»åŠ¨æ¨é€ã€è‡ªåŠ¨æ¨é€ã€sitemapæ¨é€ã€‚è¿™é‡Œ<code>matery</code>å·²ç»å†…éƒ¨é›†æˆäº†è‡ªåŠ¨æ¨é€ï¼Œ<code>hexo-theme-matery</code>å†…éƒ¨æ–‡æ¡£ä¸­æœ‰è§£é‡Šï¼Œè¿™é‡Œå°±ä»‹ç»æœ€å¥½çš„æ–¹å¼ï¼š<strong>ä¸»åŠ¨æ¨é€</strong></p><p>ï¼ˆ1ï¼‰ä¸€ä¸ªæ’ä»¶<code>hexo-baidu-url-submit</code></p><p>ï¼ˆ2ï¼‰ä¸€ä¸ªé…ç½®é¡¹<code>baidu_url_submit</code></p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">baidu_url_submit:  count: 80 # æäº¤æœ€æ–°çš„ä¸€ä¸ªé“¾æ¥  host: https://www.matemaster.cn # åœ¨ç™¾åº¦èµ„æºæœç´¢å¹³å°ä¸­æ³¨å†Œçš„åŸŸå  token: xxxxxxxxxxxx # è¯·æ³¨æ„è¿™æ˜¯æ¨é€ç§˜é’¥ï¼Œ æ‰€ä»¥è¯·ä¸è¦æŠŠåšå®¢æºä»£ç å‘å¸ƒåœ¨å…¬ä¼—ä»“åº“é‡Œ!  path: baidu_urls.txt # æ–‡æœ¬æ–‡æ¡£çš„åœ°å€ï¼Œ æ–°é“¾æ¥ä¼šä¿å­˜åœ¨æ­¤æ–‡æœ¬æ–‡æ¡£é‡Œ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>â“ï¼šå¯†é’¥ä»å“ªé‡Œè·å–<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> <strong>token = å¯†é’¥</strong></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.2/imgs/20210326235758.jpg" style="width:90%"><p>è¿™é‡Œè¦æ·»åŠ æ–°çš„<code>deploy</code>ç±»å‹</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"># hexoæ ¹ç›®å½•ä¸‹deploy:- type: baidu_url_submitter<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="æŸ¥çœ‹æ¨é€åé¦ˆ"><a href="#æŸ¥çœ‹æ¨é€åé¦ˆ" class="headerlink" title="æŸ¥çœ‹æ¨é€åé¦ˆ"></a>æŸ¥çœ‹æ¨é€åé¦ˆ</h3><ul><li><p>æ¨é€æˆåŠŸ</p></li><li><p>çŠ¶æ€ç ä¸º200ï¼Œå¯èƒ½è¿”å›ä»¥ä¸‹å­—æ®µï¼š</p><table><thead><tr><th align="left">å­—æ®µ</th><th align="left">æ˜¯å¦å¿…é€‰</th><th align="left">å‚æ•°ç±»å‹</th><th align="right">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">success</td><td align="left">æ˜¯</td><td align="left">int</td><td align="right"><strong>æˆåŠŸæ¨é€çš„urlæ¡æ•°</strong></td></tr><tr><td align="left">remain</td><td align="left">æ˜¯</td><td align="left">int</td><td align="right">å½“å¤©å‰©ä½™çš„å¯æ¨é€urlæ¡æ•°</td></tr><tr><td align="left">not_same_site</td><td align="left">å¦</td><td align="left">array</td><td align="right">ç”±äºä¸æ˜¯æœ¬ç«™urlè€Œæœªå¤„ç†çš„urlåˆ—è¡¨</td></tr><tr><td align="left">not_valid</td><td align="left">å¦</td><td align="left">array</td><td align="right">ä¸åˆæ³•çš„urlåˆ—è¡¨</td></tr></tbody></table></li></ul><h2 id="urlä¼˜åŒ–"><a href="#urlä¼˜åŒ–" class="headerlink" title="urlä¼˜åŒ–"></a>urlä¼˜åŒ–</h2><p>å› ä¸ºåœ¨<code>hexo</code>æ ¹ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤çš„æ–‡ç« é¡µå¯¹åº”çš„urlæ˜¯å››çº§ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢è¿™ç§å½¢å¼</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">url: https://www.matemaster.cnpermalink: :year/:month/:day/:title.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ç¼©çŸ­urlé“¾æ¥</p><p>ï¼ˆ1ï¼‰æ’ä»¶ï¼š<code>hexo-abbrlink</code></p><p>ï¼ˆ2ï¼‰<code>hexo</code>æ ¹é…ç½®é¡¹</p><pre class="line-numbers language-none"><code class="language-none">// ä¸‹è½½æ’ä»¶npm install hexo-abbrlink --save// æ ¹ç›®å½•é…ç½®é¡¹abbrlink:  alg: crc16  #ç®—æ³•é€‰é¡¹ï¼šcrc16ã€crc32ï¼ŒåŒºåˆ«è§ä¹‹å‰çš„æ–‡ç« ï¼Œè¿™é‡Œé»˜è®¤ä¸ºcrc16ä¸¨crc32æ¯”crc16å¤æ‚ä¸€ç‚¹ï¼Œé•¿ä¸€ç‚¹  rep: dec    #è¾“å‡ºè¿›åˆ¶ï¼šåè¿›åˆ¶å’Œåå…­è¿›åˆ¶ï¼Œé»˜è®¤ä¸º10è¿›åˆ¶ã€‚ä¸¨decä¸ºåè¿›åˆ¶ï¼Œhexä¸ºåå…­è¿›åˆ¶// ä¿®æ”¹æ ¹ç›®å½•æ–‡ç« permalinkpermalink: posts/:abbrlink.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€ç»ˆæ•ˆæœï¼š<b style="color: aqua;">matemaster.cn/posts/52745.html</b></p><h2 id="cnpmåŠ é€Ÿ"><a href="#cnpmåŠ é€Ÿ" class="headerlink" title="cnpmåŠ é€Ÿ"></a>cnpmåŠ é€Ÿ</h2><p>åœ¨ä½¿ç”¨<code>npm</code>ä¸‹è½½æ’ä»¶çš„æ—¶å€™ï¼Œå¾€å¾€é€Ÿåº¦å¾ˆæ…¢ï¼Œå¹¶ä¸”å¯èƒ½å­˜åœ¨å¡æ­»çš„æƒ…å†µï¼Œæ²¡æœ‰åŠæ³•ä¸æƒ³ç§‘å­¦ä¸Šç½‘ï¼</p><p>åæ¥å‘ç°å›½å†…æ·˜å®å›¢é˜Ÿåšäº†ä¸€ä¸ªnpmçš„é•œåƒ<code>cnpm</code>ï¼Œä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨<code>cnpmä¸‹è½½</code></p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">// è·å–npmçš„é»˜è®¤ä¸‹è½½åœ°å€npm config get registry   //é»˜è®¤åœ°å€ï¼šhttps://registry.npmjs.org/// ä¸‹è½½cnpmnpm install -g cnpm --registry=https://registry.npm.taobao.org// æµ‹è¯•cnpmæ˜¯å¦ä¸‹è½½æˆåŠŸï¼ˆå‡ºç°ç‰ˆæœ¬å·å³å¯ï¼‰cnpm-v<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“ç„¶äº†ï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šå‡ºç°ä¸‹è½½<code>cnpm</code>ä¼šå‡ºç°é”™è¯¯ï¼Œæ¯”å¦‚æˆ‘è‡ªå·±å°±å‡ºç°äº†ï¼Œå› ä¸ºæˆ‘åœ¨ç”µè„‘ä¸Šé¢æœ¬åœ°å»ºç«‹äº†å¤šä¸ªåšå®¢ï¼Œæ‰€ä»¥å°±å‡ºç°ä¸‹è½½<code>cnpmé”™è¯¯</code>ã€‚å½“ç„¶è¿˜æœ‰ä¸€ç§ï¼šâ€œä¿®æ”¹npmé»˜è®¤ä»“åº“åœ°å€çš„æ–¹å¼ï¼Œå®ç°ä½¿ç”¨æ·˜å®é•œåƒâ€ï¼</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">// ä¿®æ”¹cnpmçš„é»˜è®¤ä»“åº“åœ°å€npm config set registry https://registry.npm.taobao.org<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><b style="color: red;">è¿™æ ·ä»¥åå°±å¯ä»¥ç”¨cnpmä»£æ›¿npmæŒ‡ä»¤</b></p>]]></content>
      
      
      <categories>
          
          <category> MasterStudio </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Matery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLå­˜å‚¨ç¨‹åº</title>
      <link href="posts/55362.html"/>
      <url>posts/55362.html</url>
      
        <content type="html"><![CDATA[<h1 id="å­˜å‚¨è¿‡ç¨‹åŸºæœ¬çŸ¥è¯†"><a href="#å­˜å‚¨è¿‡ç¨‹åŸºæœ¬çŸ¥è¯†" class="headerlink" title="å­˜å‚¨è¿‡ç¨‹åŸºæœ¬çŸ¥è¯†"></a>å­˜å‚¨è¿‡ç¨‹åŸºæœ¬çŸ¥è¯†</h1><p>æ“ä½œé‡‡ç”¨çš„æ•°æ®åº“å…³ç³»è¡¨å›¾</p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/image-one/images/20210322215407.png"></p><h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p><b style="color: chocolate;">å»ºä¸€ä¸ªä¸å¸¦å‚æ•°çš„å­˜å‚¨è¿‡ç¨‹</b></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># åˆ›å»ºä¸€ä¸ªproductpricingå­˜å‚¨è¿‡ç¨‹</span><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> productpricing<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">BEGIN</span><span class="token keyword">SELECT</span> <span class="token function">Avg</span><span class="token punctuation">(</span>prod_price<span class="token punctuation">)</span> <span class="token keyword">AS</span> priceaverage<span class="token keyword">FROM</span> products<span class="token punctuation">;</span><span class="token keyword">END</span><span class="token punctuation">;</span><span class="token comment"># åˆ é™¤æ­¤å­˜å‚¨è¿‡ç¨‹</span><span class="token keyword">DROP</span> <span class="token keyword">PROCEDURE</span>  <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> productpricing<span class="token punctuation">;</span><span class="token comment"># ä½¿ç”¨æ­¤å­˜å‚¨è¿‡ç¨‹ï¼ˆæ­¤æ—¶ä¼šè¾“å‡ºç»“æœ@priceaverageï¼‰</span><span class="token keyword">CALL</span> productpricing<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------------+</span><span class="token operator">|</span><span class="token variable">@priceaverage</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------+</span><span class="token operator">|</span>    <span class="token number">16.133571</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: hotpink;">å»ºä¸€ä¸ªå¸¦å‚æ•°ï¼ˆè¾“å‡ºï¼‰çš„å­˜å‚¨è¿‡ç¨‹</b></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># åˆ›å»ºä¸€ä¸ªå¸¦å‚productpricingå­˜å‚¨è¿‡ç¨‹</span><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> productpricing<span class="token punctuation">(</span>    <span class="token keyword">OUT</span> pMin <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">OUT</span> pMax <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">OUT</span> pAvg <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">BEGIN</span><span class="token keyword">SELECT</span> <span class="token function">Min</span><span class="token punctuation">(</span>prod_price<span class="token punctuation">)</span><span class="token keyword">FROM</span> products<span class="token keyword">INTO</span> pMin<span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token function">Max</span><span class="token punctuation">(</span>prod_price<span class="token punctuation">)</span><span class="token keyword">FROM</span> products<span class="token keyword">INTO</span> pMax<span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token function">Avg</span><span class="token punctuation">(</span>prod_price<span class="token punctuation">)</span><span class="token keyword">FROM</span> products<span class="token keyword">INTO</span> pAvg<span class="token punctuation">;</span><span class="token keyword">END</span><span class="token punctuation">;</span><span class="token comment"># ä½¿ç”¨æ­¤å­˜å‚¨è¿‡ç¨‹ï¼ˆæ­¤æ—¶ä¸åœ¨ç›´æ¥è¾“å‡ºç»“æœï¼Œè€Œæ˜¯å°†ç»“æœä¿å­˜åœ¨è¾“å‡ºå‚æ•°ä¸­ï¼‰</span><span class="token keyword">CALL</span> productpricing<span class="token punctuation">(</span><span class="token variable">@pMin</span><span class="token punctuation">,</span><span class="token variable">@pMax</span><span class="token punctuation">,</span><span class="token variable">@pAvg</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token variable">@pMin</span><span class="token punctuation">,</span><span class="token variable">@pMax</span><span class="token punctuation">,</span><span class="token variable">@pAvg</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------+-------+-------+</span><span class="token operator">|</span> <span class="token variable">@pMin</span> <span class="token operator">|</span> <span class="token variable">@pMax</span> <span class="token operator">|</span> <span class="token variable">@pAvg</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+-------+-------+</span><span class="token operator">|</span>  <span class="token number">2.50</span> <span class="token operator">|</span> <span class="token number">55.00</span> <span class="token operator">|</span> <span class="token number">16.13</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+-------+-------+</span><span class="token comment"># åˆ é™¤æ­¤å­˜å‚¨è¿‡ç¨‹</span><span class="token keyword">DROP</span> <span class="token keyword">PROCEDURE</span>  <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> productpricing<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼šä¸ºä»€ä¹ˆä¸è®²ä¸Šé¢ä¸‰ä¸ªselectå­å¥åˆå¹¶ï¼Ÿä¹Ÿå°±æ˜¯ä¸‹é¢çš„ç¼–å†™æ–¹å¼ã€‚</p><p>å› ä¸ºï¼šåœ¨å­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œè®°å½•é›†ä¸å±äºä»»ä½•æ•°æ®ç±»å‹ï¼Œä¸ºäº†å’Œä¸Šé¢çš„è¾“å‡ºå‚æ•°ç±»å‹ä¿æŒä¸€è‡´ï¼Œæ‰€ä»¥å°±å¿…é¡»å°†æ¯ä¸€é¡¹çš„ç±»å‹ä¿æŒä¸€ä¸€å¯¹åº”ï¼</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">BEGIN</span><span class="token keyword">SELECT</span> <span class="token function">Min</span><span class="token punctuation">(</span>prod_price<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">Max</span><span class="token punctuation">(</span>prod_price<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">Avg</span><span class="token punctuation">(</span>prod_price<span class="token punctuation">)</span><span class="token keyword">FROM</span> products<span class="token keyword">INTO</span> pMin<span class="token punctuation">,</span>pMax<span class="token punctuation">,</span>pAcg<span class="token punctuation">;</span><span class="token keyword">END</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: yellowgreen;">å»ºä¸€ä¸ªæ™ºèƒ½çš„å­˜å‚¨è¿‡ç¨‹</b></p><p>åœºæ™¯æè¿°ï¼šç°åœ¨éœ€è¦å¯¹è®¢å•è¿›è¡Œç»Ÿè®¡ï¼Œä½†æ˜¯éœ€è¦å¯¹æŸäº›åœ°æ–¹çš„å¢åŠ ç¨æ”¶ã€‚</p><p>é‚£ä¹ˆéœ€è¦å®Œæˆä»¥ä¸‹å‡ æ­¥ï¼š</p><p>ï¼ˆ1ï¼‰æ­£å¸¸ç»Ÿè®¡è®¢å•</p><p>ï¼ˆ2ï¼‰å¯¹éœ€è¦å¢åŠ è¥ä¸šç¨çš„è®¢å•ï¼Œè¿›è¡Œç¨æ”¶å¤„ç†</p><p>ï¼ˆ3ï¼‰è¿”å›ç»Ÿè®¡çš„ç»“æœ</p><p>å­˜å‚¨è¿‡ç¨‹ï¼šordertotal</p><p>å‚æ•°ï¼š</p><ul><li>onumberï¼šè®¢å•å·</li><li>taxable ï¼šæ˜¯å¦ç¨æ”¶</li><li>ototalï¼šç»Ÿè®¡ç»“æœ        </li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> ordertotal<span class="token punctuation">(</span>    <span class="token operator">IN</span> onumber <span class="token keyword">INT</span><span class="token punctuation">,</span>    <span class="token operator">IN</span> taxable <span class="token keyword">BOOLEAN</span><span class="token punctuation">,</span>    <span class="token keyword">OUT</span> ototal <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">COMMENT</span> <span class="token string">'Obtain ordertotal,optional taxable'</span><span class="token keyword">BEGIN</span><span class="token comment"># å®šä¹‰å±€éƒ¨å˜é‡ï¼štotalã€taxrate</span><span class="token keyword">DECLARE</span> total <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">DECLARE</span> taxrate <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">6</span><span class="token punctuation">;</span><span class="token comment"># è®¢å•åˆè®¡</span><span class="token keyword">SELECT</span> <span class="token function">Sum</span><span class="token punctuation">(</span>item_price<span class="token operator">*</span>quantity<span class="token punctuation">)</span><span class="token keyword">FROM</span> orderitems<span class="token keyword">INTO</span> total<span class="token punctuation">;</span><span class="token comment"># æ˜¯å¦äº¤ç¨</span><span class="token keyword">IF</span> taxable <span class="token keyword">THEN</span><span class="token keyword">SELECT</span> total<span class="token operator">+</span><span class="token punctuation">(</span>total<span class="token operator">/</span><span class="token number">100</span><span class="token operator">*</span>taxrate<span class="token punctuation">)</span> <span class="token keyword">INTO</span> total<span class="token punctuation">;</span><span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>        <span class="token comment"># è¿”å›ç»“æœ</span>    <span class="token keyword">SELECT</span> total <span class="token keyword">INTO</span> ototal<span class="token punctuation">;</span><span class="token keyword">END</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨ä¸Šè¿°çš„å­˜å‚¨è¿‡ç¨‹</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># ä¸åŠ ç¨</span><span class="token keyword">CALL</span> ordertotal<span class="token punctuation">(</span><span class="token number">20005</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token variable">@total</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token variable">@total</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span> <span class="token variable">@total</span>  <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span> <span class="token number">1368.34</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token comment"># åŠ ç¨</span><span class="token keyword">CALL</span> ordertotal<span class="token punctuation">(</span><span class="token number">20005</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token variable">@total</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token variable">@total</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span> <span class="token variable">@total</span>  <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span><span class="token operator">|</span> <span class="token number">1450.44</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç»“æ„è¯¦è§£"><a href="#ç»“æ„è¯¦è§£" class="headerlink" title="ç»“æ„è¯¦è§£"></a>ç»“æ„è¯¦è§£</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> å­˜å‚¨è¿‡ç¨‹å<span class="token punctuation">(</span>å‚æ•°åˆ—è¡¨<span class="token punctuation">)</span> <span class="token punctuation">[</span>ä¿®é¥°è¯<span class="token punctuation">]</span> è¿‡ç¨‹ä¸»ä½“<span class="token comment"># å‚æ•°åˆ—è¡¨</span><span class="token punctuation">[</span><span class="token operator">IN</span><span class="token operator">|</span><span class="token keyword">OUT</span><span class="token operator">|</span><span class="token keyword">INOUT</span><span class="token punctuation">]</span> parameter <span class="token keyword">type</span><span class="token comment"># ä¿®é¥°è¯</span><span class="token keyword">LANGUAGE</span> <span class="token keyword">SQL</span> <span class="token comment">#è¡¨æ˜å½“å‰ç³»ç»Ÿè¯­è¨€ä¸ºSQL</span><span class="token punctuation">[</span><span class="token operator">NOT</span><span class="token punctuation">]</span> <span class="token keyword">DETERMINISTIC</span> <span class="token comment">#æ— NOTè¡¨æ˜ï¼šåŒæ ·è¾“å…¥å¾—åˆ°ç›¸åŒç»“æœã€‚NOT è¡¨æ˜ï¼šåŒæ ·è¾“å…¥ç»“æœå¯èƒ½ä¸ä¸€è‡´</span>{<span class="token keyword">CONTAINS</span> <span class="token keyword">SQL</span><span class="token operator">|</span><span class="token keyword">NO</span> <span class="token keyword">SQL</span><span class="token operator">|</span><span class="token keyword">READS</span> <span class="token keyword">SQL</span> <span class="token keyword">DATA</span><span class="token operator">|</span><span class="token keyword">MODIFIES</span> <span class="token keyword">SQL</span> <span class="token keyword">DATA</span>} <span class="token comment">#å­ç¨‹åºä½¿ç”¨SQLçš„é™åˆ¶</span><span class="token comment"># CONTAINS SQL:å­ç¨‹åºåŒ…å«SQLï¼Œä½†æ˜¯ä¸åŒ…å«è¯»å†™çš„</span><span class="token comment"># NO SQL:å­ç¨‹åºä¸åŒ…å«SQLè¯­å¥</span><span class="token comment"># READS SQL DATA:åŒ…å«è¯»æ•°æ®SQK</span><span class="token comment"># MODIFIES SQL DATA:åŒ…å«å†™æ•°æ®SQL</span><span class="token keyword">SQL</span> SECURITY{<span class="token keyword">DEFINER</span><span class="token operator">|</span><span class="token keyword">INVOKER</span>} <span class="token comment">#æ‰§è¡ŒSQLçš„æƒé™</span><span class="token comment"># DEFINERï¼šå®šä¹‰è€…æ‰§è¡Œ</span><span class="token comment"># INVOKERï¼šæœ‰æƒé™çš„è°ƒç”¨è€…æ‰§è¡Œ</span><span class="token keyword">COMMENT</span> <span class="token string">'String'</span> <span class="token comment"># æ³¨é‡Šä¿¡æ¯ï¼Œå¯ä»¥æè¿°å­˜å‚¨è¿‡ç¨‹</span><span class="token comment"># è¿‡ç¨‹ä¸»ä½“</span><span class="token keyword">BEGIN</span><span class="token comment"># ä¸»ä½“SQLè¯­å¥</span><span class="token keyword">END</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å­˜å‚¨å‡½æ•°"><a href="#å­˜å‚¨å‡½æ•°" class="headerlink" title="å­˜å‚¨å‡½æ•°"></a>å­˜å‚¨å‡½æ•°</h1><h2 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> å‡½æ•°å<span class="token punctuation">(</span>å‚æ•°åˆ—è¡¨<span class="token punctuation">)</span> <span class="token keyword">RETURNS</span> <span class="token keyword">type</span> <span class="token punctuation">[</span>ä¿®é¥°è¯<span class="token punctuation">]</span> å‡½æ•°ä¸»ä½“<span class="token comment"># å‚æ•°åˆ—è¡¨å’Œä¿®é¥°è¯ä¸å­˜å‚¨è¿‡ç¨‹ä¿æŒä¸€è‡´ï¼Œä¸åšèµ˜è¿°</span><span class="token comment"># å‡½æ•°ä¸»ä½“</span><span class="token keyword">RETURN</span> <span class="token keyword">value</span> <span class="token comment"># value å¯ä»¥æ˜¯ä¸€ä¸ªæŸ¥è¯¢è®°å½•</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå®šä¹‰ä¸€ä¸ª<code>SupplierName</code>å‡½æ•°</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> SupplierName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">RETURNS</span> <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token keyword">RETURN</span> <span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> s_name    <span class="token keyword">FROM</span> suppliers    <span class="token keyword">WHERE</span> <span class="token punctuation">(</span>s_call <span class="token operator">=</span> <span class="token string">'48075'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># è°ƒç”¨å‡½æ•°</span><span class="token keyword">SELECT</span> SupplierName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å­˜å‚¨ç¨‹åºè¿›é˜¶"><a href="#å­˜å‚¨ç¨‹åºè¿›é˜¶" class="headerlink" title="å­˜å‚¨ç¨‹åºè¿›é˜¶"></a>å­˜å‚¨ç¨‹åºè¿›é˜¶</h1><h2 id="å˜é‡ä½¿ç”¨"><a href="#å˜é‡ä½¿ç”¨" class="headerlink" title="å˜é‡ä½¿ç”¨"></a>å˜é‡ä½¿ç”¨</h2><p>ä¹‹å‰åœ¨<code>ordertotal</code>å­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨åˆ°äº†å±€éƒ¨å˜é‡çš„å®šä¹‰</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DECLARE</span> total <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">DECLARE</span> taxrate <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">6</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä»ä¸Šé¢ä»£ç çœ‹å‡ºï¼ŒMySQLå˜é‡å®šä¹‰çš„æ–¹å¼</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># æ— é»˜è®¤å€¼</span><span class="token keyword">DECLARE</span> var_name var_type<span class="token punctuation">;</span><span class="token comment"># æœ‰é»˜è®¤å€¼</span><span class="token keyword">DECLARE</span> var_name var_type <span class="token keyword">DEFAULT</span> default_value<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>é‚£ä¹ˆåœ¨å®šä¹‰äº†å˜é‡ä¹‹åï¼Œæˆ‘ä»¬æ€ä¹ˆå®ç°å¯¹å˜é‡çš„èµ‹å€¼å‘¢ï¼Ÿ</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># setæ“ä½œ</span><span class="token keyword">SET</span> var_name <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span><span class="token comment"># select...into...</span><span class="token keyword">SELECT</span> <span class="token keyword">value</span> <span class="token keyword">INTO</span> var_name<span class="token punctuation">;</span><span class="token comment">## è¿™é‡Œçš„valueå¯ä»¥æ˜¯ç‰¹å®šå€¼æˆ–è€…æŸ¥è¯¢ç»“æœï¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®šä¹‰æ¡ä»¶å’Œå¤„ç†ç¨‹åº"><a href="#å®šä¹‰æ¡ä»¶å’Œå¤„ç†ç¨‹åº" class="headerlink" title="å®šä¹‰æ¡ä»¶å’Œå¤„ç†ç¨‹åº"></a>å®šä¹‰æ¡ä»¶å’Œå¤„ç†ç¨‹åº</h2><p>å®šä¹‰æ¡ä»¶å’Œå¤„ç†ç¨‹åºçš„å¥½å¤„åœ¨äºï¼šå½“å­˜å‚¨ç¨‹åºå‘ç”Ÿé”™è¯¯æˆ–è€…é—®é¢˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å®šä¹‰çš„æ¡ä»¶åˆ¤æ–­é”™è¯¯çš„ç±»å‹ï¼Œå¹¶ä¸”é€‰æ‹©åˆé€‚çš„å¤„ç†ç¨‹åºè¿›è¡Œé—®é¢˜å¤„ç†ï¼Œæé«˜äº†å­˜å‚¨ç¨‹åºèƒ½åŠ›ï¼Œé¿å…ç¨‹åºå¼‚å¸¸ï¼</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DECLARE</span> condition_name CONDITION <span class="token keyword">FOR</span> condition_type<span class="token punctuation">;</span><span class="token comment"># condition_name:é”™è¯¯çš„ç±»å‹åï¼Œå¯ä»¥è‡ªå®šä¹‰</span><span class="token comment"># condition_type:é”™è¯¯ç±»å‹ï¼Œåˆ†ä¸ºï¼šå­—ç¬¦å‹ï¼ˆå­—ç¬¦é•¿åº¦ä¸º5ï¼‰ã€æ•°å€¼å‹é”™è¯¯ä»£ç </span>SQLSTATE <span class="token punctuation">[</span><span class="token keyword">VALUE</span><span class="token punctuation">]</span> : sqlstate_value<span class="token operator">|</span>mysql_error_code<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå°±ç›´æ¥ä¸¾ä¸ªæ —å­<span class="github-emoji"><span>âœŒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/270c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> ï¼šå®šä¹‰ä¸€ä¸ªé”™è¯¯ä»£ç  <code>ERROR 1970(43990)</code>ï¼Œåç§°ä¸º<code>command_not allowed</code>çš„æ¡ä»¶</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># ï¼ˆ1ï¼‰sqlstate_value</span><span class="token keyword">DECLARE</span> command_not_allowed CONDITION <span class="token keyword">FOR</span> <span class="token number">1970</span><span class="token punctuation">;</span><span class="token comment"># ï¼ˆ2ï¼‰mysql_error_code</span><span class="token keyword">DECLARE</span> command_not_allowed CONDOTION <span class="token keyword">FOR</span> <span class="token string">'43990'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¸¸æ ‡çš„ä½¿ç”¨"><a href="#æ¸¸æ ‡çš„ä½¿ç”¨" class="headerlink" title="æ¸¸æ ‡çš„ä½¿ç”¨"></a>æ¸¸æ ‡çš„ä½¿ç”¨</h2><p>ç®€å•ä»‹ç»ä¸€ä¸‹æ¸¸æ ‡<code>cursor</code>çš„å£°æ˜ã€æ‰“å¼€ã€ä½¿ç”¨ã€å…³é—­</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># å£°æ˜æ¸¸æ ‡</span><span class="token keyword">DECLARE</span> cursor_name <span class="token keyword">CURSOR</span> <span class="token keyword">FOR</span> select_statement<span class="token punctuation">;</span><span class="token comment"># æ‰“å¼€æ¸¸æ ‡</span><span class="token keyword">OPEN</span> cursor_name<span class="token punctuation">;</span><span class="token comment"># ä½¿ç”¨æ¸¸æ ‡</span><span class="token keyword">FETCH</span> cursor_name <span class="token keyword">INTO</span> var_name<span class="token punctuation">;</span><span class="token comment"># å…³é—­æ¸¸æ ‡</span><span class="token keyword">CLOSE</span> cursor_name<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç®€å•åœ°ä¸¾ä¸ªæ —å­<span class="github-emoji"><span>âœŒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/270c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># å£°æ˜åç§°ä¸ºcursor_fruitçš„å…‰æ ‡</span><span class="token keyword">CREATE</span> cursor_fruit <span class="token keyword">CURSOR</span> <span class="token keyword">FOR</span> <span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> f_name<span class="token punctuation">,</span> f_price     <span class="token keyword">FROM</span> fruits <span class="token punctuation">;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># æ‰“å¼€æ¸¸æ ‡</span><span class="token keyword">OPEN</span> cursor_fruit<span class="token punctuation">;</span><span class="token comment"># ä½¿ç”¨æ¸¸æ ‡ï¼ˆå˜é‡å¿…é¡»åœ¨æ¸¸æ ‡å£°æ˜ä¹‹å‰å°±å·²ç»å®šä¹‰äº†ï¼‰</span><span class="token keyword">FETCH</span>  cursor_fruit <span class="token keyword">INTO</span> fruit_name<span class="token punctuation">,</span> fruit_price <span class="token punctuation">;</span><span class="token comment"># å…³é—­</span><span class="token keyword">CLOSE</span> cursor_fruit<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h2><ul><li>ç†è§£<code>if</code>è¯­å¥å’Œ<code>if()</code>å‡½æ•°çš„åŒºåˆ«</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">IF</span> condition1 <span class="token keyword">THEN</span> expression1<span class="token punctuation">[</span><span class="token keyword">ELSE</span> <span class="token keyword">IF</span> condition2 <span class="token keyword">THEN</span> expression2<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">ELSE</span> else_statement<span class="token punctuation">]</span><span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ä¸¾ä¸ªæ —å­</strong><span class="github-emoji"><span>âœŒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/270c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">IF</span> var <span class="token operator">IS</span> <span class="token boolean">NULL</span> <span class="token keyword">THEN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token string">'var is null'</span><span class="token punctuation">)</span><span class="token keyword">ELSE</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token string">'var is not null'</span><span class="token punctuation">)</span><span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li><code>case</code>è¯­å¥çš„ä¸¤ç§å½¢å¼</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># 1.caseå­˜åœ¨å˜é‡</span><span class="token keyword">CASE</span> vars<span class="token keyword">WHEN</span> var1 <span class="token keyword">THEN</span> expr1<span class="token punctuation">[</span><span class="token keyword">WHEN</span> var2 <span class="token keyword">THEN</span> expr2<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">ELSE</span> else_statement<span class="token punctuation">]</span><span class="token keyword">END</span> <span class="token keyword">CASE</span><span class="token punctuation">;</span><span class="token comment"># 2.caseä¸å­˜åœ¨å˜é‡</span><span class="token keyword">CASE</span><span class="token keyword">WHEN</span> condition1 <span class="token keyword">THEN</span> expr1<span class="token punctuation">[</span><span class="token keyword">WHEN</span> condition2 <span class="token keyword">THEN</span> expr2<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">ELSE</span> else_statement<span class="token punctuation">]</span><span class="token keyword">END</span> <span class="token keyword">CASE</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ä¸¾ä¸ªæ —å­</strong><span class="github-emoji"><span>âœŒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/270c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># (1)</span><span class="token keyword">CASE</span> var  <span class="token keyword">WHEN</span> <span class="token number">1</span> <span class="token keyword">THEN</span> <span class="token keyword">SELECT</span> <span class="token string">'val is 1'</span><span class="token punctuation">;</span>  <span class="token keyword">WHEN</span> <span class="token number">2</span> <span class="token keyword">THEN</span> <span class="token keyword">SELECT</span> <span class="token string">'val is 2'</span><span class="token punctuation">;</span>  <span class="token keyword">ELSE</span> <span class="token keyword">SELECT</span> <span class="token string">'val is not 1 or 2'</span><span class="token punctuation">;</span><span class="token keyword">END</span> <span class="token keyword">CASE</span><span class="token punctuation">;</span><span class="token comment"># (2)</span><span class="token keyword">CASE</span>  <span class="token keyword">WHEN</span> val <span class="token operator">IS</span> <span class="token boolean">NULL</span> <span class="token keyword">THEN</span> <span class="token keyword">SELECT</span> <span class="token string">'val is NULL'</span><span class="token punctuation">;</span>  <span class="token keyword">WHEN</span> val <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">THEN</span> <span class="token keyword">SELECT</span> <span class="token string">'val is less than 0'</span><span class="token punctuation">;</span>  <span class="token keyword">WHEN</span> val <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">THEN</span> <span class="token keyword">SELECT</span> <span class="token string">'val is greater than 0'</span><span class="token punctuation">;</span>  <span class="token keyword">ELSE</span> <span class="token keyword">SELECT</span> <span class="token string">'val is 0'</span><span class="token punctuation">;</span><span class="token keyword">END</span> <span class="token keyword">CASE</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>Loop</code>å¾ªç¯</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token punctuation">[</span>loop_label<span class="token punctuation">]</span>: <span class="token keyword">LOOP</span>loop_statement<span class="token keyword">END</span> <span class="token keyword">LOOP</span> <span class="token punctuation">[</span>loop_label<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>ä¸¾ä¸ªæ —å­</strong><span class="github-emoji"><span>âœŒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/270c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># æ±‚1~100ä¹‹å’Œ</span><span class="token keyword">DECLARE</span> s <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">DECLARE</span> id <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">;</span>SUM : <span class="token keyword">loop</span><span class="token keyword">SET</span> id <span class="token operator">=</span> id <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> s <span class="token operator">=</span> s <span class="token operator">+</span> id<span class="token punctuation">;</span><span class="token keyword">IF</span> id <span class="token operator">&gt;=</span> <span class="token number">100</span> <span class="token keyword">THEN</span> <span class="token keyword">LEAVE</span> SUM<span class="token punctuation">;</span><span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span><span class="token keyword">END</span> <span class="token keyword">LOOP</span> SUM<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œè¿˜æ¶‰åŠåˆ°ä¸€ä¸ª<code>LEAVE</code>è¯­å¥ï¼Œç”¨äºè·³å‡ºå¾ªç¯å’Œ<code>BEGINâ€¦â€¦END</code>ã€‚å½“ç„¶è¿˜æœ‰ä¸€ä¸ªç”¨äºç›´æ¥è·³è½¬åˆ°å¾ªç¯å¤´<code>ITERATE</code>ã€‚</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> doiterate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">BEGIN</span><span class="token keyword">DECLARE</span> p1 <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">;</span>my_loop: <span class="token keyword">LOOP</span>  <span class="token keyword">SET</span> p1<span class="token operator">=</span> p1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token keyword">IF</span> p1 <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token keyword">THEN</span> <span class="token keyword">ITERATE</span> my_loop<span class="token punctuation">;</span>  <span class="token keyword">ELSEIF</span> p1 <span class="token operator">&gt;</span> <span class="token number">20</span> <span class="token keyword">THEN</span> <span class="token keyword">LEAVE</span> my_loop<span class="token punctuation">;</span>  <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>  <span class="token keyword">SELECT</span> <span class="token string">'p1 is between 10 and 20'</span><span class="token punctuation">;</span><span class="token keyword">END</span> <span class="token keyword">LOOP</span> my_loop<span class="token punctuation">;</span><span class="token keyword">END</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>REPEAT</code>è¯­å¥</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token punctuation">[</span>repeat_label<span class="token punctuation">]</span> : <span class="token keyword">REPEAT</span>statement_listUNTIL expr<span class="token keyword">END</span> <span class="token keyword">REPEAT</span> <span class="token punctuation">[</span>repeat_label<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ä¸¾ä¸ªæ —å­</strong><span class="github-emoji"><span>âœŒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/270c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DECLARE</span> id <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">REPEAT</span><span class="token keyword">SET</span> id <span class="token operator">=</span> id <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>UNTIL  id <span class="token operator">&gt;=</span> <span class="token number">10</span><span class="token keyword">END</span> <span class="token keyword">REPEAT</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>WHILE</code>è¯­å¥</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token punctuation">[</span>while_label<span class="token punctuation">]</span> : <span class="token keyword">WHILE</span> expr_condition<span class="token keyword">DO</span> statement<span class="token keyword">END</span> <span class="token keyword">WHILE</span> <span class="token punctuation">[</span>while_label<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>ä¸¾ä¸ªæ —å­</strong><span class="github-emoji"><span>âœŒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/270c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DECLARE</span> i <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">WHILE</span> i <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token keyword">DO</span> <span class="token keyword">SET</span> i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">END</span> <span class="token keyword">WHILE</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­˜å‚¨ç¨‹åºçš„CRUD"><a href="#å­˜å‚¨ç¨‹åºçš„CRUD" class="headerlink" title="å­˜å‚¨ç¨‹åºçš„CRUD"></a>å­˜å‚¨ç¨‹åºçš„CRUD</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># æ›´æ”¹å­˜å‚¨ç¨‹åº</span><span class="token keyword">ALTER</span> {<span class="token keyword">PROCEDURE</span><span class="token operator">|</span><span class="token keyword">FUNCTION</span>} sp_name <span class="token keyword">MODIFIES</span> <span class="token punctuation">[</span>alter_statement<span class="token punctuation">]</span><span class="token comment"># æŸ¥çœ‹å­˜å‚¨å‡½æ•°çŠ¶æ€</span><span class="token keyword">SHOW</span> {<span class="token keyword">PROCEDURE</span><span class="token operator">|</span><span class="token keyword">FUNCTION</span>} <span class="token keyword">STATUS</span> <span class="token punctuation">[</span><span class="token operator">LIKE</span> <span class="token string">'pattern'</span><span class="token punctuation">]</span><span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> {<span class="token keyword">PROCEDURE</span><span class="token operator">|</span><span class="token keyword">FUNCTION</span>} sp_name<span class="token comment"># åˆ é™¤å­˜å‚¨ç¨‹åº</span><span class="token keyword">DROP</span> <span class="token keyword">PROCEDURE</span><span class="token operator">|</span><span class="token keyword">FUNCTION</span> sp_name<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åä¸ºå¤ªç©ºäººè¡¨ç›˜</title>
      <link href="posts/57338.html"/>
      <url>posts/57338.html</url>
      
        <content type="html"><![CDATA[<h1 id="åŠ¨ç”»æ•ˆæœå›¾"><a href="#åŠ¨ç”»æ•ˆæœå›¾" class="headerlink" title="åŠ¨ç”»æ•ˆæœå›¾"></a>åŠ¨ç”»æ•ˆæœå›¾</h1><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/image-one/images/20210324175449.gif"></p><h1 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h1><p>è¿™ä¸ªé¡¹ç›®æ˜¯æºè‡ªäºæŠ–éŸ³ä¸Šç‰¹åˆ«ç«çš„åä¸ºå¤ªç©ºäººè¡¨ç›˜ï¼Œåˆ©ç”¨å‰ç«¯ä¸‰å¤§ä»¶: HTML5+CSS3+JavaScriptå®ç°<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60e.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p>å‘œå‘¼ï¼èµ·é£ï¼ğŸ›«âœˆï¸âœˆï¸âœˆï¸ğŸ‘‰<a href="https://gitee.com/matemaster/master-depository/tree/master/2021-03-24/HW_watch">æˆ‘è¦å½“å¤ªç©ºäºº</a></p>]]></content>
      
      
      <categories>
          
          <category> MasterStudio </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MasterStudio </tag>
            
            <tag> è½¬è½½ </tag>
            
            <tag> åŠ¨ç”» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œ</title>
      <link href="posts/40597.html"/>
      <url>posts/40597.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºç½‘ç»œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸåˆ› </tag>
            
            <tag> è®¡ç½‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—æœºç»„æˆåŸç†</title>
      <link href="posts/51917.html"/>
      <url>posts/51917.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºç»„æˆåŸç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸåˆ› </tag>
            
            <tag> è®¡ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ’åºç®—æ³•</title>
      <link href="posts/61237.html"/>
      <url>posts/61237.html</url>
      
        <content type="html"><![CDATA[<h1 id="å¯è§†åŒ–ç®—æ³•ç½‘ç«™"><a href="#å¯è§†åŒ–ç®—æ³•ç½‘ç«™" class="headerlink" title="å¯è§†åŒ–ç®—æ³•ç½‘ç«™"></a>å¯è§†åŒ–ç®—æ³•ç½‘ç«™</h1><ul><li><strong><a href="https://algorithm-visualizer.org/">algorithm-visualizer</a></strong></li><li><strong><a href="https://www.cs.usfca.edu/~galles/visualization/Algorithms.html">www.cs.usfca.edu-visualization</a></strong></li><li><strong><a href="https://visualgo.net/zh">visualgo.net</a></strong></li></ul><h1 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h1><p><a href="https://visualgo.net/zh/sorting">æ’å…¥æ’åºå¯è§†åŒ–</a></p><p><b style="color: red;">ç®—æ³•æ€æƒ³ï¼š</b>é»˜è®¤ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºå·²æ’åºåºåˆ—å…ƒç´ ï¼Œé€‰å–æœªæ’åºåºåˆ—çš„å…ƒç´ ï¼Œå¯¹å·²æ’åºåºåˆ—ä»åå‘å‰æ‰«æï¼Œå°†å½“å‰ä¸ºæ’åºå…ƒç´ æ’å…¥åˆ°å·²æ’åºåºåˆ—çš„åˆé€‚ä½ç½®</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>algorithm<span class="token punctuation">.</span>sorting</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Insertion</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">exchange</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Comparable</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>        arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//-------é™åºç‰ˆæœ¬------------</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">less</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span> a<span class="token punctuation">,</span> <span class="token class-name">Comparable</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">desc</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">less</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token function">exchange</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//-------å‡åºç‰ˆæœ¬--------------</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">more</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span> a<span class="token punctuation">,</span> <span class="token class-name">Comparable</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">asc</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">more</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token function">exchange</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h1><p><a href="https://visualgo.net/zh/sorting">é€‰æ‹©æ’åºå¯è§†åŒ–</a></p><p><b style="color: red;">ç®—æ³•æ€æƒ³ï¼š</b>æ¯æ¬¡é€‰æ‹©æœªæ’åºåºåˆ—ä¸­æœ€å€¼çš„å…ƒç´ ï¼Œæ”¾å…¥å·²æ’åºåºåˆ—çš„æœ«å°¾ï¼Œä¾æ­¤ç±»æ¨ç›´åˆ°å…¨éƒ¨å…ƒç´ æœ‰åº</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>algorithm<span class="token punctuation">.</span>sorting</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Selection</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">exchange</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Comparable</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>        arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">less</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span> a<span class="token punctuation">,</span> <span class="token class-name">Comparable</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">more</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span> a<span class="token punctuation">,</span> <span class="token class-name">Comparable</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">desc</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> max <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">more</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>max<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    max <span class="token operator">=</span> j<span class="token punctuation">;</span>            <span class="token function">exchange</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">asc</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">int</span> min <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">less</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>min<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    min <span class="token operator">=</span> j<span class="token punctuation">;</span>            <span class="token function">exchange</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> min<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h1><p><a href="https://visualgo.net/zh/sorting">å†’æ³¡æ’åºå¯è§†åŒ–</a></p><p><b style="color: red;">ç®—æ³•æ€æƒ³ï¼š</b>å®ƒé‡å¤åœ°èµ°è®¿è¿‡è¦æ’åºçš„å…ƒç´ åˆ—ï¼Œä¾æ¬¡æ¯”è¾ƒä¸¤ä¸ªç›¸é‚»çš„å…ƒç´ ï¼Œå¦‚æœé¡ºåºï¼ˆå¦‚ä»å¤§åˆ°å°ã€é¦–å­—æ¯ä»Zåˆ°Aï¼‰é”™è¯¯å°±æŠŠä»–ä»¬äº¤æ¢è¿‡æ¥ã€‚èµ°è®¿å…ƒç´ çš„å·¥ä½œæ˜¯é‡å¤åœ°è¿›è¡Œç›´åˆ°æ²¡æœ‰ç›¸é‚»å…ƒç´ éœ€è¦äº¤æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥å…ƒç´ åˆ—å·²ç»æ’åºå®Œæˆã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>algorithm<span class="token punctuation">.</span>sorting</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bubble</span> <span class="token punctuation">{</span>        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">exchange</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Comparable</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>        arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">less</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span> a<span class="token punctuation">,</span> <span class="token class-name">Comparable</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">more</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span> a<span class="token punctuation">,</span> <span class="token class-name">Comparable</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> a<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">asc</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">more</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token function">exchange</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> j<span class="token punctuation">,</span> j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">desc</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token operator">-</span>i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">less</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token function">exchange</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> j<span class="token punctuation">,</span> j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å¸Œå°”æ’åº"><a href="#å¸Œå°”æ’åº" class="headerlink" title="å¸Œå°”æ’åº"></a>å¸Œå°”æ’åº</h1><p><a href="https://www.cs.usfca.edu/~galles/visualization/ComparisonSort.html">å¸Œå°”æ’åºå¯è§†åŒ–</a></p><p><b style="color: red;">ç®—æ³•æ€æƒ³ï¼š</b>ä½œä¸ºæ’å…¥æ’åºçš„ä¼˜åŒ–ç®—æ³•ï¼Œæ¯æ¬¡åœ¨å¢é‡gapé—´éš”ä¸Šä¿æŒæœ‰åºï¼Œç›´åˆ°gap=1æ—¶ï¼Œæ‰€æœ‰å…ƒç´ æœ‰åºã€‚</p><p>è¿™é‡Œçš„SortTemplateç±»åªæ˜¯å°†ä¸Šé¢çš„ä¸‰ä¸ªæ–¹æ³•ï¼ˆlessã€moreã€exchangeï¼‰å°è£…åœ¨äº†ä¸€èµ·ï¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>algorithm<span class="token punctuation">.</span>sorting</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Shell</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">asc</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">int</span> gap <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token comment">// ç¡®å®šå¢é‡:1ã€4ã€13ã€40ã€......</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>gap <span class="token operator">&lt;</span> n<span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span>            gap <span class="token operator">=</span> gap<span class="token operator">*</span><span class="token number">3</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>gap <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> gap<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span>gap <span class="token punctuation">;</span> j<span class="token operator">-=</span>gap<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">SortTemplate</span><span class="token punctuation">.</span><span class="token function">more</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token operator">-</span>gap<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token class-name">SortTemplate</span><span class="token punctuation">.</span><span class="token function">exchange</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> j<span class="token operator">-</span>gap<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            gap <span class="token operator">=</span> gap<span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>            <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">desc</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token keyword">int</span> gap <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>gap <span class="token operator">&lt;</span> n<span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span>            gap <span class="token operator">=</span> gap<span class="token operator">*</span><span class="token number">3</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>gap <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> gap<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span>gap <span class="token punctuation">;</span> j<span class="token operator">-=</span>gap<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">SortTemplate</span><span class="token punctuation">.</span><span class="token function">less</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token operator">-</span>gap<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token class-name">SortTemplate</span><span class="token punctuation">.</span><span class="token function">exchange</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> j<span class="token operator">-</span>gap<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            gap <span class="token operator">=</span> gap<span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h1><p><b style="color: red;">ç®—æ³•æ€æƒ³ï¼š</b>å½’å¹¶æ“ä½œå¯ä»¥å°†ä¸¤ä¸ªæœ‰åºçš„å·¦å³å­æ•°ç»„å½’å¹¶æˆä¸€ä¸ªæœ‰åºçš„åˆæ•°ç»„ã€‚é‚£ä¹ˆé‡‡å–åˆ†æ²»çš„æ€æƒ³ã€‚å°†æ’åºåºåˆ—åˆ†ä¸ºå·¦å³å­åºåˆ—ã€å½’å¹¶ï¼Œåœ¨å¯¹å­åºåˆ—è¿›è¡ŒåŒæ ·çš„é€’å½’æ“ä½œã€‚</p><p>åŸåœ°å½’å¹¶</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>algorithm<span class="token punctuation">.</span>sorting</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Merge</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> aux<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> mid<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// copy to aux[]</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>aux<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>a<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// merge back to a[]</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> lo<span class="token punctuation">,</span> j <span class="token operator">=</span> mid<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> lo<span class="token punctuation">;</span> k <span class="token operator">&lt;=</span> hi<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span>      <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> mid<span class="token punctuation">)</span>                           a<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> aux<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&gt;</span> hi<span class="token punctuation">)</span>                            a<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> aux<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">SortTemplate</span><span class="token punctuation">.</span><span class="token function">more</span><span class="token punctuation">(</span>aux<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> aux<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> a<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> aux<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">else</span>                                        a<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> aux<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">setAux</span><span class="token punctuation">(</span><span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>        aux <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Comparable</span><span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è‡ªé¡¶å‘ä¸‹å½’å¹¶æ’åº</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>algorithm<span class="token punctuation">.</span>sorting</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">MergeTD</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>hi <span class="token operator">&lt;=</span> lo<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> mid <span class="token operator">=</span> lo <span class="token operator">+</span> <span class="token punctuation">(</span>hi <span class="token operator">-</span> lo<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> mid<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> hi<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Merge</span><span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> mid<span class="token punctuation">,</span> hi<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">asc</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Merge</span><span class="token punctuation">.</span><span class="token function">setAux</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è‡ªåº•å‘ä¸Šå½’å¹¶æ’åº</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">MergeBU</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">asc</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span>     <span class="token punctuation">{</span>        <span class="token keyword">int</span> n <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token class-name">Merge</span><span class="token punctuation">.</span><span class="token function">setAux</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> sub <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> sub <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> sub<span class="token operator">*=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> lo <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> lo <span class="token operator">&lt;</span> n <span class="token operator">-</span> sub<span class="token punctuation">;</span> lo <span class="token operator">+=</span> sub<span class="token operator">+</span>sub<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">int</span> mid <span class="token operator">=</span> lo <span class="token operator">+</span> sub <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> hi <span class="token operator">=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>lo <span class="token operator">+</span> sub <span class="token operator">+</span> sub <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Merge</span><span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span>lo<span class="token punctuation">,</span>mid<span class="token punctuation">,</span>hi<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>           <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h1><p><b style="color: red;">ç®—æ³•æ€æƒ³ï¼š</b>é€‰å–ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºåŸºå‡†ï¼Œå°†åºåˆ—åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚é‡å¤åˆ‡åˆ†æ“ä½œï¼Œç›´åˆ°åˆ‡åˆ†å­åºåˆ—ä¸ºä¸€ä¸ªå…ƒç´ ã€‚</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210504230138.png"><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>algorithm<span class="token punctuation">.</span>sorting</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Quick</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">asc</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// å…ˆæ•´ä¸ªåˆ‡åˆ†ï¼Œå†é€’å½’è‡³å·¦å³å­æ•°ç»„æ‰§è¡ŒåŒæ ·æ“ä½œ</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>lo <span class="token operator">&gt;=</span> hi<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> part <span class="token operator">=</span> <span class="token function">partition</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span>lo<span class="token punctuation">,</span>hi<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> part<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> part<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> hi<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">partition</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> lo<span class="token punctuation">,</span> <span class="token keyword">int</span> hi<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// æ‰«ææŒ‡é’ˆã€åˆ‡åˆ†å€¼</span>        <span class="token keyword">int</span> i <span class="token operator">=</span> lo<span class="token punctuation">;</span>        <span class="token keyword">int</span> j <span class="token operator">=</span> hi<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token class-name">Comparable</span> s <span class="token operator">=</span> arr<span class="token punctuation">[</span>lo<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// i åœæ­¢æ—¶æŒ‡å‘çš„å…ƒç´ ä¸€å®šä¸å¤§äºs</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">SortTemplate</span><span class="token punctuation">.</span><span class="token function">more</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> arr<span class="token punctuation">[</span><span class="token operator">++</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> hi<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token comment">// j åœæ­¢æ—¶æŒ‡å‘çš„å…ƒç´ ä¸€å®šä¸å°äºs</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">SortTemplate</span><span class="token punctuation">.</span><span class="token function">more</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token operator">--</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;=</span> lo<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> j<span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token class-name">SortTemplate</span><span class="token punctuation">.</span><span class="token function">exchange</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">// j æŒ‡å‘çš„å…ƒç´ å°±æ˜¯éœ€è¦åˆ‡åˆ†çš„ä½ç½®</span>        <span class="token class-name">SortTemplate</span><span class="token punctuation">.</span><span class="token function">exchange</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> lo<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> j<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="è®¡æ•°æ’åº"><a href="#è®¡æ•°æ’åº" class="headerlink" title="è®¡æ•°æ’åº"></a>è®¡æ•°æ’åº</h1><p>é’ˆå¯¹æœ‰é™å…ƒç´ é›†åˆSï¼Œä»¥åŠçº¿æ€§è¡¨L</p><p>Lä¸­åœ¨Sçš„å…ƒç´ siç»Ÿè®¡Lä¸­å°äºç­‰äºsiçš„iä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå…ƒç´ å°±å¯¹åº”æ”¾åœ¨ç»“æœçš„çº¿æ€§è¡¨Lsçš„iä½ã€‚</p><p><b style="color:red">è®¡æ•°æ’åºçš„åŸºæœ¬æ€æƒ³</b>ï¼šå¯¹äºä¸€ä¸ªè¾“å…¥çš„å…ƒç´ mï¼Œç¡®å®šå°äºmçš„å…ƒç´ ä¸ªæ•°ã€‚åˆ©ç”¨è¿™ä¸€ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†mæ”¾åœ¨è¾“å‡ºæ•°ç»„çš„åˆé€‚ä½ç½®ä¸Šã€‚æ¯”å¦‚ï¼šå°äºmçš„å…ƒç´ ä¸ªæ•°ä¸º17ä¸ªï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŠŠmæ”¾åœ¨è¾“å‡ºæ•°ç»„çš„ç¬¬åå…«ä½ã€‚å¯¹äºå¤šä¸ªç›¸åŒçš„mæˆ‘ä»¬å¯ä»¥ä¾æ¬¡å‘åè¾“å‡ºï¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>algorithm<span class="token punctuation">.</span>sorting</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Count</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">asc</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> max <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> min <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">:</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> max<span class="token punctuation">)</span>                max <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> min<span class="token punctuation">)</span>                min <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token comment">// ä¼˜åŒ–è®¡æ•°æ•°ç»„</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> count <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>max <span class="token operator">-</span> min <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment">// å¯¹ arrå…ƒç´ è®¡æ•°</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>            count<span class="token punctuation">[</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> min<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token comment">// ç¡®å®šå½’è¿˜ä½ç½®(æ¯”må°çš„å…ƒç´ ä¸ªæ•°)</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> count<span class="token punctuation">.</span>length<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>            count<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+=</span> count<span class="token punctuation">[</span>k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment">// æ’åºåˆ°ç»“æœæ•°ç»„</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> l <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> l <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> l<span class="token operator">--</span><span class="token punctuation">)</span>            res<span class="token punctuation">[</span><span class="token operator">--</span>count<span class="token punctuation">[</span>arr<span class="token punctuation">[</span>l<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> min<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>l<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h1><p><strong>å †æ’åº</strong>ï¼ˆè‹±è¯­ï¼šHeapsortï¼‰æ˜¯æŒ‡åˆ©ç”¨<a href="https://baike.baidu.com/item/%E5%A0%86">å †</a>è¿™ç§<a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/1450">æ•°æ®ç»“æ„</a>æ‰€è®¾è®¡çš„ä¸€ç§<a href="https://baike.baidu.com/item/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95">æ’åºç®—æ³•</a>ã€‚å †æ˜¯ä¸€ä¸ªè¿‘ä¼¼<a href="https://baike.baidu.com/item/%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91">å®Œå…¨äºŒå‰æ ‘</a>çš„ç»“æ„ï¼Œå¹¶åŒæ—¶æ»¡è¶³<strong>å †çš„æ€§è´¨</strong>ï¼šå³å­ç»“ç‚¹çš„é”®å€¼æˆ–ç´¢å¼•æ€»æ˜¯å°äºï¼ˆæˆ–è€…å¤§äºï¼‰å®ƒçš„çˆ¶èŠ‚ç‚¹ã€‚</p><p>å› ä¸ºå †çš„æ ¹ç»“ç‚¹ä¸€å®šæ˜¯æœ€å€¼ç‚¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸æ–­åœ°è¿›è¡Œå–æ ¹ã€è°ƒæ•´æœ€å¤§å †æ“ä½œï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—ã€‚è¿™é‡Œçš„å †ç»“æ„ä¸ºäº†æ»¡è¶³ floor(parent/2) = childï¼Œæ•°ç»„ä¼šä»1å·å¼€å§‹å­˜å‚¨</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210505151018.png" style="width:60%"><p>å †æœ‰åºçš„çŠ¶æ€ä¸‹ï¼šçˆ¶ç»“ç‚¹ä¸€å®šå¤§äºå­ç»“ç‚¹ã€‚è‹¥æ˜¯çŠ¶æ€è¢«æ‰“ç ´ï¼Œé‚£ä¹ˆè¯´æ˜ä¸€å®šæ˜¯å› ä¸ºå­ç»“ç‚¹å˜å¾—æ¯”çˆ¶ç»“ç‚¹å¤§</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>matemaster<span class="token punctuation">.</span>algorithm<span class="token punctuation">.</span>sorting</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Heap</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">maxHeapify</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> start<span class="token punctuation">,</span> <span class="token keyword">int</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// çˆ¶ç»“ç‚¹ï¼šparentã€å·¦ç»“ç‚¹ï¼šchild</span>        <span class="token keyword">int</span> parent <span class="token operator">=</span> start<span class="token punctuation">;</span>        <span class="token keyword">int</span> child <span class="token operator">=</span> parent<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">&lt;=</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// é€‰å–å¤§çš„å­ç»“ç‚¹</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;=</span> end <span class="token operator">&amp;&amp;</span> <span class="token class-name">SortTemplate</span><span class="token punctuation">.</span><span class="token function">more</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>child<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                child<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token comment">// åˆ¤æ–­æ˜¯å¦ç¬¦åˆå †æœ‰åº</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">SortTemplate</span><span class="token punctuation">.</span><span class="token function">more</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>child<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token class-name">SortTemplate</span><span class="token punctuation">.</span><span class="token function">exchange</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> child<span class="token punctuation">)</span><span class="token punctuation">;</span>                parent <span class="token operator">=</span> child<span class="token punctuation">;</span>                child <span class="token operator">=</span> parent<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>        <span class="token comment">// è‡ªåº•å‘ä¸Šè°ƒæ•´å †</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>            <span class="token function">maxHeapify</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> i<span class="token punctuation">,</span> len <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//  å–æœ€å€¼ã€è°ƒæ•´å †æœ‰åº</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">SortTemplate</span><span class="token punctuation">.</span><span class="token function">exchange</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">maxHeapify</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">asc</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// è¾…åŠ©çš„å † </span>        <span class="token class-name">Comparable</span><span class="token punctuation">[</span><span class="token punctuation">]</span> heap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Comparable</span><span class="token punctuation">[</span>arr<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>heap<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">sort</span><span class="token punctuation">(</span>heap<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>heap<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>arr<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ¡¶æ’åº"><a href="#æ¡¶æ’åº" class="headerlink" title="æ¡¶æ’åº"></a>æ¡¶æ’åº</h1><p>åˆ©ç”¨åˆé€‚çš„å‡½æ•°ï¼Œå°†å¾…æ’åºåºåˆ—çš„å…ƒç´ å¹³å‡çš„åˆ†é…åˆ°æ¡¶ä¸­ï¼Œå¹¶ä¸”å¯¹æ¯ä¸€ä¸ªæ¡¶åˆ©ç”¨åˆé€‚çš„æ’åºç®—æ³•æˆ–è€…é‡‡å–é€’å½’çš„æ–¹å¼æ’åºã€‚</p><ol><li>æ¡¶çš„åˆ†é…</li><li>æ’åºç®—æ³•çš„é€‰æ‹©</li></ol>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> algorithms </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£æçº¿æ€§è¡¨</title>
      <link href="posts/55225.html"/>
      <url>posts/55225.html</url>
      
        <content type="html"><![CDATA[<h1 id="é€»è¾‘ç»“æ„"><a href="#é€»è¾‘ç»“æ„" class="headerlink" title="é€»è¾‘ç»“æ„"></a>é€»è¾‘ç»“æ„</h1><p>åœ¨è¯´çº¿æ€§è¡¨çš„é€»è¾‘ç»“æ„ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»çŸ¥æ™“çº¿æ€§è¡¨çš„åŸºæœ¬æ¦‚å¿µï¼</p><p>çº¿æ€§è¡¨ï¼ˆlinear-tableï¼‰ï¼šæ˜¯ä¸€ç»„å…·æœ‰å…±æ€§çš„æœ‰é™åºåˆ—ã€‚ï¼ˆå…±æ€§ï¼šæœ‰ç€ç›¸åŒçš„æ•°æ®ç±»å‹ï¼‰</p><p>ä¸¾ä¸ªæ —å­ï¼š<span class="github-emoji"><span>âœŒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/270c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p>ç®€å•ç±»å‹â€”â€”å•ä¸€æ•°æ®</p><p>åäºŒç”Ÿè‚–ï¼ˆå­é¼ ã€ä¸‘ç‰›ã€å¯…è™ã€å¯å…”ã€è¾°é¾™ã€å·³è›‡ã€åˆé©¬ã€æœªç¾Šã€ç”³çŒ´ã€é…‰é¸¡ã€æˆŒç‹—ã€äº¥çŒªï¼‰</p><p>å¤æ‚ç±»å‹â€”â€”å¤åˆæ•°æ®</p><p>å­¦ç”Ÿç™»è®°è¡¨ï¼ˆï¼ˆstartï¼‰,,â€¦,ï¼ˆi-1ï¼‰,ï¼ˆiï¼‰,ï¼ˆi+1ï¼‰,â€¦ï¼ˆendï¼‰ï¼‰</p><p>i = ï¼ˆname,stu_id,dept_idï¼‰</p><p><b style="color: darkgreen;">æ³¨ï¼šèµ·å§‹ç»“ç‚¹ï¼ˆstartï¼‰åªå­˜åœ¨ç›´æ¥åç»§ç»“ç‚¹ï¼Œç»ˆç«¯ç»“ç‚¹ï¼ˆendï¼‰åªå­˜åœ¨ç›´æ¥å‰é©±ç»“ç‚¹ï¼å…¶ä¸­ä»»æ„ä¸­é—´ç»“ç‚¹ï¼Œéƒ½å­˜åœ¨ç›´æ¥å‰é©±ç»“ç‚¹ï¼ˆprevï¼‰å’Œç›´æ¥åç»§ç»“ç‚¹ï¼ˆsuccï¼‰ï¼</b></p><p><b style="color: darkred;">çº¿æ€§è¡¨å­˜åœ¨ä¸¤ç§é€»è¾‘ç»“æ„ï¼šçº¿æ€§è¡¨ã€é“¾è¡¨</b></p><h2 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h2><h3 id="ä¸€å…ƒå¤šé¡¹å¼"><a href="#ä¸€å…ƒå¤šé¡¹å¼" class="headerlink" title="ä¸€å…ƒå¤šé¡¹å¼"></a>ä¸€å…ƒå¤šé¡¹å¼</h3><p>ä¸€å…ƒå¤šé¡¹å¼ï¼ˆpolynomial in one varï¼‰æ±‚å’Œï¼<br>$$<br>P_n(x) = P_0+P_1x^1 +â€¦P_{i-1}x^{i-1}+P_ix^i+P_{i+1}x^{i+1}+â€¦ + P_nx^n<br>$$</p><p>$$<br>Q_m(x) = Q_0+Q_1x^1 +â€¦Q_{i-1}x^{i-1}+Q_ix^i+Q_{i+1}x^{i+1}+â€¦ + Q_mx^m<br>$$</p><p>$$<br>ADD = P_n(x) + Q_m(x)<br>$$</p><p>ä¸‹é¢å°±æ˜¯é’ˆå¯¹è¿™ä¸€ADDæ“ä½œçš„å®ç°ç®—æ³•ï¼Œä»¥åŠæ•°æ®çš„é€»è¾‘å­˜å‚¨æ–¹å¼ï¼</p><p>çº¿æ€§è¡¨é€»è¾‘ç»“æ„ï¼šP<del>n</del>(x) Q<del>m</del>(x) ADD  <code>ï¼ˆè¿™é‡Œå‡è®¾M &gt;= nï¼‰</code><br>$$<br>P_n(X) = (P_1,P_2,â€¦,P_{i-1},P_i,P_{i+1},â€¦,P_n)<br>$$</p><p>$$<br>Q_m(x) = (Q_1,Q_2,â€¦,Q_{i-1},Q_i,Q_{i+1},â€¦,Q_m)<br>$$</p><p>$$<br>ADD = (P_1+Q_1,â€¦,P_i+Q_i,â€¦,P_n+Q_n,â€¦,Q_m)<br>$$</p><ul><li>é€»è¾‘ç»“æ„çš„æ€è·¯ï¼ˆçº¿æ€§è¡¨ï¼‰</li></ul><p>æˆ‘ä»¬ç›´æ¥é‡‡å–æ•°ç»„å­˜å‚¨å¤šé¡¹å¼çš„ç³»æ•°ï¼Œåˆ©ç”¨æ•°ç»„çš„ä¸‹æ ‡è¡¨ç¤ºxçš„å¹‚ï¼ˆä¸‹æ ‡å’ŒæŒ‡æ•°ä¸€ä¸€å¯¹åº”ï¼‰ã€‚</p><table><thead><tr><th>P<del>n</del>(x)</th><th>0</th><th>1</th><th>2</th><th>â€¦</th><th>i</th><th>â€¦</th><th>n</th></tr></thead><tbody><tr><td></td><td>P<del>0</del></td><td>P<del>1</del></td><td>P<del>2</del></td><td></td><td>P<del>i</del></td><td></td><td>P<del>n</del></td></tr></tbody></table><table><thead><tr><th>Q<del>m</del>(x)</th><th>0</th><th>1</th><th>2</th><th>â€¦</th><th>i</th><th>â€¦</th><th>m</th></tr></thead><tbody><tr><td></td><td>Q<del>0</del></td><td>Q<del>1</del></td><td>Q<del>2</del></td><td></td><td>Q<del>i</del></td><td></td><td>Q<del>m</del></td></tr></tbody></table><p>æˆ‘ä»¬è¿™é‡Œçš„æ•°ç»„ä¸‹æ ‡å°†å¯Œå«æŒ‡æ•°çš„å«ä¹‰ï¼Œé‚£ä¹ˆä¸¾ä¸ªæ —å­<span class="github-emoji"><span>âœŒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/270c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><table><thead><tr><th>P<del>2</del>(x) = 2+3x+x^2^</th><th>0</th><th>1</th><th>2</th></tr></thead><tbody><tr><td></td><td>2</td><td>3</td><td>1</td></tr></tbody></table><table><thead><tr><th>Q<del>3</del>(x) = 1+2x+3x^2^+4x^3^</th><th>0</th><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td></td><td>1</td><td>2</td><td>3</td><td>4</td></tr></tbody></table><table><thead><tr><th>ADD = 3+5x+4x^2^+4x^3^</th><th>0</th><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td></td><td>3</td><td>5</td><td>4</td><td>4</td></tr></tbody></table><ul><li>é€»è¾‘ç»“æ„æ€è·¯</li></ul><p>å¦‚æœé‡‡å–é“¾è¡¨çš„æ–¹å¼ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦è€ƒè™‘ä¸‹æ ‡çš„å«ä¹‰è€Œæ˜¯ç›´æ¥å­˜å‚¨ï¼ˆç³»æ•°ï¼ŒæŒ‡æ•°ï¼‰ï¼Œåªè¦å°†ç»“æœå…¨éƒ¨å½’å¹¶åˆ°ç›¸å¯¹é•¿çš„é“¾è¡¨ä¸­å³å¯ã€‚<br>$$<br>Q_3(x) = 1 + 2x + 3x^2+4x^3<br>$$</p><table>    <tbody><tr>        <td>            <table>                <tbody><tr>                    <td>1</td>                    <td>0</td>                    <td>â†’</td>                </tr>            </tbody></table>        </td>        <td>            <table>                <tbody><tr>                    <td>2</td>                    <td>1</td>                    <td>â†’</td>                </tr>            </tbody></table>        </td>        <td>            <table>                <tbody><tr>                    <td>3</td>                    <td>2</td>                    <td>â†’</td>                </tr>            </tbody></table>        </td>        <td>            <table>                <tbody><tr>                    <td>4</td>                    <td>3</td>                    <td>null</td>                </tr>            </tbody></table>        </td>       </tr></tbody></table>    <h3 id="ç¨€ç–å¤šé¡¹å¼æ¡ˆä¾‹"><a href="#ç¨€ç–å¤šé¡¹å¼æ¡ˆä¾‹" class="headerlink" title="ç¨€ç–å¤šé¡¹å¼æ¡ˆä¾‹"></a>ç¨€ç–å¤šé¡¹å¼æ¡ˆä¾‹</h3><p>ç¨€ç–å¤šé¡¹å¼ä¸»è¦é’ˆå¯¹é‚£äº›æŒ‡æ•°ä¸æ˜¯è¿ç»­çš„å¤šé¡¹å¼ï¼Œæ­¤æ—¶æˆ‘ä»¬è™½ç„¶é€»è¾‘ç»“æ„ä¾ç„¶é‡‡å–æ•°ç»„å’Œé“¾è¡¨çš„æ–¹å¼ï¼Œä½†æ˜¯æ•°ç»„çš„å­˜å‚¨å†…å®¹å‘ç”Ÿäº†å˜åŒ–<br>$$<br>Q_{300}(x) = 1 + 2x + 3x^{200}+4x^{300}<br>$$</p><p>æ•°ç»„å­˜å‚¨</p><table><thead><tr><th>æ•°ç»„ä¸‹æ ‡</th><th>0</th><th>1</th><th>2</th><th>3</th></tr></thead><tbody><tr><td>ç³»æ•°</td><td>1</td><td>2</td><td>3</td><td>4</td></tr><tr><td>æŒ‡æ•°</td><td>0</td><td>1</td><td>200</td><td>300</td></tr></tbody></table><p>é“¾è¡¨çš„å­˜å‚¨ä¾æ—§ä¸å˜</p><table>    <tbody><tr>        <td>            <table>                <tbody><tr>                    <td>1</td>                    <td>0</td>                    <td>â†’</td>                </tr>            </tbody></table>        </td>        <td>            <table>                <tbody><tr>                    <td>2</td>                    <td>1</td>                    <td>â†’</td>                </tr>            </tbody></table>        </td>        <td>            <table>                <tbody><tr>                    <td>3</td>                    <td>200</td>                    <td>â†’</td>                </tr>            </tbody></table>        </td>        <td>            <table>                <tbody><tr>                    <td>4</td>                    <td>300</td>                    <td>null</td>                </tr>            </tbody></table>        </td>       </tr></tbody></table><p>â—ç¨€ç–å¤šé¡¹å¼è¿ç®—ç®—æ³•ï¼š</p><p><b style="color: chocolate;">æ•°ç»„å­˜å‚¨</b></p><p>å› ä¸ºæ•°ç»„å­˜å‚¨çš„æ•°æ®ç±»å‹æ”¹å˜ï¼Œä¸‹æ ‡ä¸æŒ‡æ•°ä¸åœ¨å­˜åœ¨ä¸€ä¸€å¯¹åº”å…³ç³»ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥æ–°çš„ç»“æœæ•°ç»„resultå­˜å‚¨æ–°çš„ç»“æœå¤šé¡¹å¼ï¼</p><p>ï¼ˆ1ï¼‰åˆ†å¸ƒå¯¹å¤šé¡¹å¼P(x)ä¸Q(x)æ¯ä¸€é¡¹è¿›è¡Œéå†ï¼Œè¿›è¡Œæ¯”è¾ƒ</p><ul><li>æŒ‡æ•°ç›¸åŒï¼ŒåšADDï¼Œå½“ç³»æ•°ä¸ä¸º0æ—¶åŠ å…¥result</li><li>æŒ‡æ•°ä¸ç›¸åŒï¼Œå°†æŒ‡æ•°å°çš„copyåˆ°result</li></ul><p>ï¼ˆ2ï¼‰å½“ä¸€ä¸ªå¤šé¡¹å¼éå†ç»“æŸï¼Œå°†å¦ä¸€ä¸ªå¤šé¡¹å¼æœªéå†çš„æ•°æ®copyåˆ°result</p><p style="color: blue;">æ³¨ï¼šè¿™é‡Œå…³äºresulté•¿åº¦çš„æ€è€ƒï¼Ÿ<br>æœ€å¥½çš„æƒ…å†µä¸‹P(x)ä¸Q(x)æ¯ä¸€é¡¹ä¸€ä¸€å¯¹åº”ï¼Œæ­¤æ—¶result_length = max(m,n)ã€‚<br>æœ€åçš„æƒ…å†µä¸‹P(x)ä¸Q(x)æ¯ä¸€é¡¹éƒ½ä¸å¯¹åº”result_length = m+n</p><p><b style="color: chocolate;">é“¾è¡¨å­˜å‚¨</b></p><p>ç®—æ³•ä¸€è‡´ï¼Œå¥½å¤„å°±æ˜¯é“¾è¡¨ä¸éœ€è¦å†å•ç‹¬åˆ›å»ºä¸€ä¸ªé“¾è¡¨ï¼Œåªè¦éµå¾ªä¸Šé¢çš„ç®—æ³•è¿›è¡Œç»“æœé›†çš„é“¾æ¥ï¼çœ‹ä¸‹å›¾</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/image-one/images/20210324232448.jpg" style="width:80%;"><h3 id="å›¾ä¹¦ç®¡ç†ç³»ç»Ÿæ¡ˆä¾‹"><a href="#å›¾ä¹¦ç®¡ç†ç³»ç»Ÿæ¡ˆä¾‹" class="headerlink" title="å›¾ä¹¦ç®¡ç†ç³»ç»Ÿæ¡ˆä¾‹"></a>å›¾ä¹¦ç®¡ç†ç³»ç»Ÿæ¡ˆä¾‹</h3><p>ä¸€èˆ¬æ¶‰åŠåˆ°ä¸€ä¸ªå›¾ä¹¦ç®¡ç†å…³ç³»è¡¨ <strong>Book (IBSN,name,price)</strong></p><p>æ­¤æ—¶æ•°ç»„å’Œé“¾è¡¨å­˜å‚¨çš„æ•°æ®å¯¹è±¡å°†æ˜¯æŠ½è±¡æ•°æ®ç±»å‹ï¼ˆADTï¼‰ Book</p><p><b style="color: navy;">æ•°ç»„å­˜å‚¨</b></p><table>    <tbody><tr>        <td>            <table>                <tbody><tr>                    <td>1343442114</td>                    <td>ç®—æ³•4</td>                    <td>100.00</td>                </tr>            </tbody></table>        </td>        <td>            <table>                <tbody><tr>                    <td>23542536</td>                    <td>Javaç¼–ç¨‹æ€æƒ³</td>                    <td>200.00</td>                </tr>            </tbody></table>        </td>     </tr></tbody></table><p><b style="color: navy;">é“¾è¡¨å­˜å‚¨</b></p><table>    <tbody><tr>        <td>            <table>                <tbody><tr>                    <td>1343442114</td>                    <td>ç®—æ³•4</td>                    <td>100.00</td>                    <td>â†’</td>                </tr>            </tbody></table>        </td>        <td>            <table>                <tbody><tr>                    <td>23542536</td>                    <td>Javaç¼–ç¨‹æ€æƒ³</td>                    <td>200.00</td>                    <td></td>                </tr>            </tbody></table>        </td>     </tr></tbody></table><h2 id="é€»è¾‘ç»“æ„ä¸Šçš„ç±»å‹å®šä¹‰"><a href="#é€»è¾‘ç»“æ„ä¸Šçš„ç±»å‹å®šä¹‰" class="headerlink" title="é€»è¾‘ç»“æ„ä¸Šçš„ç±»å‹å®šä¹‰"></a>é€»è¾‘ç»“æ„ä¸Šçš„ç±»å‹å®šä¹‰</h2><p>è¿™é‡Œä¸»è¦ä»‹ç»çº¿æ€§è¡¨æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼Œå…·ä½“çš„å…±æ€§æ“ä½œï¼ï¼ˆä¸æ¶‰åŠå®ç°é—®é¢˜ï¼‰</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token function">initList</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>L<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">destroyList</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>L<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">clearList</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>L<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">listEmpty</span><span class="token punctuation">(</span>L<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">listLength</span><span class="token punctuation">(</span>L<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">getElem</span><span class="token punctuation">(</span>L<span class="token punctuation">,</span>i<span class="token punctuation">,</span><span class="token operator">&amp;</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">locateElem</span><span class="token punctuation">(</span>L<span class="token punctuation">,</span>e<span class="token punctuation">,</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">priorElem</span><span class="token punctuation">(</span>L<span class="token punctuation">,</span>cur_e<span class="token punctuation">,</span><span class="token operator">&amp;</span>prev_e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">nextElem</span><span class="token punctuation">(</span>L<span class="token punctuation">,</span>cur_e<span class="token punctuation">,</span><span class="token operator">&amp;</span>prev_e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">listInsert</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>L<span class="token punctuation">,</span>i<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">listDelete</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>L<span class="token punctuation">,</span>i<span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">listTraverse</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>L<span class="token punctuation">,</span><span class="token function">visited</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>çº¿æ€§è¡¨çš„æ•°ç»„å®ç°æ¨¡æ¿</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>    ElemType elem<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">//æ•°ç»„é™æ€åˆ†é…</span>    <span class="token keyword">int</span> length<span class="token punctuation">;</span><span class="token punctuation">}</span> SqList<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>    ElemType <span class="token operator">*</span>elem<span class="token punctuation">;</span>  <span class="token comment">//æ•°ç»„åŠ¨æ€åˆ†é…</span>    <span class="token keyword">int</span> length<span class="token punctuation">;</span><span class="token punctuation">}</span> SqList<span class="token punctuation">;</span><span class="token comment">// Cè¯­è¨€æ•°ç»„ç©ºé—´åˆ†é…å‡½æ•°</span>SqList L<span class="token punctuation">;</span>L<span class="token punctuation">.</span>elem <span class="token operator">=</span> <span class="token punctuation">(</span>ElemType<span class="token operator">*</span><span class="token punctuation">)</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>ElemType<span class="token punctuation">)</span><span class="token operator">*</span>MaxSize<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// malloc(m)ï¼šåˆ†é…må­—èŠ‚å†…å­˜ç©ºé—´</span><span class="token comment">// sizeof(t)ï¼šè·å–tç±»å‹çš„å­—èŠ‚é•¿åº¦</span><span class="token comment">// free(p)ï¼šé‡Šæ”¾pæŒ‡é’ˆçš„ç©ºé—´</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å­˜å‚¨ç»“æ„"><a href="#å­˜å‚¨ç»“æ„" class="headerlink" title="å­˜å‚¨ç»“æ„"></a>å­˜å‚¨ç»“æ„</h1><h2 id="Javaç®€å•å®ç°"><a href="#Javaç®€å•å®ç°" class="headerlink" title="Javaç®€å•å®ç°"></a>Javaç®€å•å®ç°</h2><p>çº¿æ€§è¡¨åŸºäºæ•°ç»„çš„å®ç°ï¼Œä¸ºäº†é¿å…é‡å¤é€ è½®å­è¿™é‡Œå°±ç›´æ¥åŸºäºJavaå†…ç½®çš„åŠ¨æ€åˆ—è¡¨ç»“æ„<code>ArrayList</code>å®ç°ï¼<span class="github-emoji"><span>ğŸ˜‰</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f609.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">SqList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> sqList<span class="token punctuation">;</span>    <span class="token keyword">public</span>  <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        sqList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sqList <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sqList<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sqList <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sqList <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sqList<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sqList <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> sqList<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sqList <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> sqList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">getElem</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sqList <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> sqList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">priorElem</span><span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sqList <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> position <span class="token operator">=</span> sqList<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>position <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> sqList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">nextElem</span><span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sqList <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> position <span class="token operator">=</span> sqList<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>position <span class="token operator">==</span> sqList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> sqList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insElem</span><span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sqList <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sqList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">T</span> <span class="token function">delElem</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sqList <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> sqList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sqList <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"çº¿æ€§è¡¨å·²ç»é”€æ¯ï¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span> sqList<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é¡ºåºå®ç°"><a href="#é¡ºåºå®ç°" class="headerlink" title="é¡ºåºå®ç°"></a>é¡ºåºå®ç°</h2><p>å½“ç„¶äº†ï¼Œä¸Šé¢çš„å®ç°ä¹Ÿå¤ªé¢å‘å¯¹è±¡äº†ï¼æˆ‘ä»¬ç”¨ç‚¹C++âœçš„ï¼Œçœ‹èµ·æ¥æ›´æ•°æ®ç»“æ„</p><p>å…ˆä»‹ç»ä¸€ä¸‹ï¼Œå…³äºC++å‡½æ•°çš„ä¸€äº›å®šä¹‰</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">define</span> <span class="token macro-name">TRUE</span> <span class="token expression"><span class="token number">1</span><span class="token punctuation">;</span></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">define</span> <span class="token macro-name">FALSE</span> <span class="token expression"><span class="token number">0</span><span class="token punctuation">;</span></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">define</span> <span class="token macro-name">OK</span> <span class="token expression"><span class="token number">1</span><span class="token punctuation">;</span></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">define</span> <span class="token macro-name">ERROR</span> <span class="token expression"><span class="token number">0</span><span class="token punctuation">;</span></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">define</span> <span class="token macro-name">INFEASIBLE</span> <span class="token expression"><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></span></span><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">define</span> <span class="token macro-name">OVERFLOW</span> <span class="token expression"><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span></span></span><span class="token keyword">typedef</span> <span class="token keyword">int</span> Status<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">char</span> ElemType<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥å¼€å§‹å®ç°å…³äºçº¿æ€§è¡¨çš„é¡ºåºè¡¨ç¤ºæ–¹å¼çš„åŸºæœ¬æ“ä½œï¼ˆç®€å•å®ç°ï¼‰</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">Status <span class="token function">InitList_Sq</span><span class="token punctuation">(</span>Sqlist <span class="token operator">&amp;</span>L<span class="token punctuation">)</span> <span class="token punctuation">{</span>    L<span class="token punctuation">.</span>elem <span class="token operator">=</span> new ElemType<span class="token punctuation">[</span>MAXSIZE<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>L<span class="token punctuation">.</span>elem<span class="token punctuation">)</span> <span class="token function">exit</span><span class="token punctuation">(</span>overflow<span class="token punctuation">)</span><span class="token punctuation">;</span>    L<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> OK<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">DestroyList</span><span class="token punctuation">(</span>SqList <span class="token operator">&amp;</span>L<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span>elem<span class="token punctuation">)</span> delete elem<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">ClearList</span><span class="token punctuation">(</span>SqList <span class="token operator">&amp;</span>L<span class="token punctuation">)</span> <span class="token punctuation">{</span>    L<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">GetLength</span><span class="token punctuation">(</span>SqList L<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>L<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">IsEmpty</span><span class="token punctuation">(</span>SqList L<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">GetElem</span><span class="token punctuation">(</span>SqList L<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> ElemType <span class="token operator">&amp;</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">||</span>i<span class="token operator">&gt;=</span>L<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>        e <span class="token operator">=</span> L<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> OK<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥ä»‹ç»ä¸€äº›å…³é”®ç‚¹çš„æ“ä½œï¼ˆç¨å¾®å¤æ‚ç‚¹ï¼‰</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// é¡ºåºæŸ¥æ‰¾å…ƒç´ ï¼Œä»æ•°ç»„å¤´éƒ¨å¼€å§‹ä¾æ¬¡æ¯”å¯¹(int = 1,2,3,4....,MAXSIZE)</span><span class="token keyword">int</span> <span class="token function">LocateElem</span><span class="token punctuation">(</span>SqList <span class="token operator">&amp;</span>L<span class="token punctuation">,</span> ElemType e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>e <span class="token operator">==</span> L<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// è¿™é‡Œé™¤äº†forè¯­å¥å®ç°ï¼Œè¿˜å¯ä»¥ä¾èµ–whileå¾ªç¯å®ç°</span><span class="token keyword">int</span> <span class="token function">LocateElem</span><span class="token punctuation">(</span>SqList L<span class="token punctuation">,</span> ElemType e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span>L<span class="token punctuation">.</span>length<span class="token operator">&amp;&amp;</span>e<span class="token operator">!=</span>L<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>        i<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span>L<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é¡ºåºè¡¨çš„æ’å…¥å’Œåˆ é™¤</p><pre class="line-numbers language-c++" data-language="c++"><code class="language-c++">// æ’å…¥åœ¨æœ€åã€æœ€å‰ã€ä¸­é—´[1,2,3,4,5,6,7,insert][1,2,3,4,5,insert,6,7][insert,1,2,3,4,5,6,7]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹å‡ºå¯¹äºå«æœ‰nä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œæ’å…¥ä½ç½®çš„èŒƒå›´ï¼š0~nï¼Œå¹¶ä¸”æ­¤æ—¶å…ƒç´ çš„æ•°é‡&lt;=MAXSIZE</p><p>ç®—æ³•æ€æƒ³ï¼š</p><p>1ï¼‰æ’å…¥ä½ç½®çš„èŒƒå›´æ˜¯å¦åˆæ³•</p><p>2ï¼‰æ•°ç»„æ˜¯å¦å·²ç»æ»¡ã€å¦åˆ™è¿”å›ERROR</p><p>3ï¼‰å°†ç¬¬nåç§»ç¬¬iä½å…ƒç´ åç§»ä¸€ä½</p><p>4ï¼‰è¡¨é•¿åŠ ä¸€ OK</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// åœ¨ç¬¬iå·ä½ç½®æ’å…¥e</span>Status <span class="token function">InsertList_Sq</span><span class="token punctuation">(</span>SqList <span class="token operator">&amp;</span>L<span class="token punctuation">,</span><span class="token keyword">int</span> i<span class="token punctuation">,</span>ElemType e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">||</span>i<span class="token operator">&gt;=</span>L<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span>length <span class="token operator">==</span> MAXSIZE<span class="token punctuation">)</span> <span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>j <span class="token operator">=</span> L<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&gt;=</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        L<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> L<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    L<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>    L<span class="token punctuation">.</span>length<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> OK<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// åˆ é™¤æœ€åã€æœ€å‰ã€ä¸­é—´</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span>null<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span>null<span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>null<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç®—æ³•æ€æƒ³ï¼š</p><p>1ï¼‰åˆ é™¤å…ƒç´ çš„ä½ç½®æ˜¯å¦åˆæ³•ï¼Œä»¥åŠå½“å‰è¡¨æ˜¯å¦ä¸ºç©º</p><p>2ï¼‰å°†åˆ é™¤å…ƒç´ ä¿ç•™åˆ°e</p><p>3ï¼‰å°†ç¬¬i+1åˆ°nå·å…ƒç´ å‰ç§»ä¸€ä½</p><p>4ï¼‰è¡¨é•¿å‡ä¸€ OK</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">Status <span class="token function">DeleteList_Sq</span><span class="token punctuation">(</span>SqList <span class="token operator">&amp;</span>L<span class="token punctuation">,</span><span class="token keyword">int</span> i<span class="token punctuation">,</span>ElemType e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span><span class="token number">1</span><span class="token operator">||</span>i<span class="token operator">&gt;</span>L<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>    e <span class="token operator">=</span> L<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>j <span class="token operator">=</span> i<span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>L<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        L<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> L<span class="token punctuation">.</span>elem<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    L<span class="token punctuation">.</span>length<span class="token operator">--</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> OK<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é“¾è¡¨å®ç°"><a href="#é“¾è¡¨å®ç°" class="headerlink" title="é“¾è¡¨å®ç°"></a>é“¾è¡¨å®ç°</h2><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Lnode</span> <span class="token punctuation">{</span>    ElemType data<span class="token punctuation">;</span>    <span class="token keyword">struct</span> <span class="token class-name">Lnode</span> <span class="token operator">*</span>next<span class="token punctuation">;</span><span class="token punctuation">}</span>Lnode<span class="token punctuation">,</span> <span class="token operator">*</span>LinkList<span class="token punctuation">;</span><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> score<span class="token punctuation">;</span>    cha<span class="token punctuation">[</span><span class="token punctuation">]</span> name<span class="token punctuation">;</span><span class="token punctuation">}</span>ElemType<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œçš„å•é“¾è¡¨æ˜¯å¸¦æœ‰å¤´ç»“ç‚¹çš„é“¾è¡¨ç»“æ„</p><p>åˆå§‹åŒ–ç©ºé“¾è¡¨çš„æ€æƒ³ï¼š</p><p>1ï¼‰ç”Ÿæˆæ–°çš„ç»“ç‚¹ä½œä¸ºå¤´ç»“ç‚¹ï¼Œå¹¶ä¸”å°†å¤´æŒ‡é’ˆæŒ‡å‘å¤´ç»“ç‚¹</p><p>2ï¼‰å°†å¤´ç»“ç‚¹çš„æŒ‡é’ˆåŸŸç½®ç©ºï¼ˆä»£è¡¨å½“å‰çš„é“¾è¡¨ä¸ºç©ºï¼‰</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">Status <span class="token function">InitList_L</span> <span class="token punctuation">(</span>LinkList <span class="token operator">&amp;</span>L<span class="token punctuation">)</span> <span class="token punctuation">{</span>    L <span class="token operator">=</span> new Lnode<span class="token punctuation">;</span>   <span class="token comment">//ç­‰ä»·äº L = (LinkList) malloc(sizeOf(Lnode));</span>    L<span class="token operator">-&gt;</span>next <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> OK<span class="token punctuation">;</span><span class="token punctuation">}</span>LinkList L<span class="token punctuation">;</span> <span class="token comment">// ä»£è¡¨ä¸å¸¦æœ‰å¤´ç»“ç‚¹çš„é“¾è¡¨ç»“æ„</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬å¯¹äºå¸¦å¤´ç»“ç‚¹çš„é“¾è¡¨æ˜¯ä»¥è¿™ç§æ–¹å¼åˆ¤ç©ºğŸ‘‡</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">ListEmpty</span><span class="token punctuation">(</span>LinkList L<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>L<span class="token operator">-&gt;</span>next <span class="token operator">==</span> null<span class="token punctuation">)</span>         <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹äºå•é“¾è¡¨çš„é”€æ¯ï¼Œæˆ‘ä»¬é‡‡å–å°†ä»å¤´ç»“ç‚¹çš„é‡Šæ”¾å¼€å§‹ï¼</p><p>åˆ©ç”¨è¾…åŠ©æŒ‡é’ˆpï¼Œè¿›è¡Œä¸´æ—¶å­˜æ”¾å¾…åˆ é™¤ç»“ç‚¹çš„åœ°å€ï¼Œä¸æ–­è¿›è¡Œå¤´æŒ‡é’ˆçš„åç§»ï¼Œç›´è‡³é“¾è¡¨ç»“ç‚¹ä¸åœ¨å­˜åœ¨</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">Status <span class="token function">DestroyList_L</span><span class="token punctuation">(</span>LinkList <span class="token operator">&amp;</span>L<span class="token punctuation">)</span> <span class="token punctuation">{</span>    LinkList p<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>L<span class="token punctuation">)</span> <span class="token punctuation">{</span>        p <span class="token operator">=</span> L<span class="token punctuation">;</span>        L <span class="token operator">=</span> L<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>        delete p<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹äºæ¸…ç©ºå•é“¾è¡¨æ¥è¯´ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯é‡Šæ”¾å¤´ç»“ç‚¹ä¹‹åçš„æ‰€æœ‰ç»“ç‚¹ï¼Œå¹¶ä¸”å°†å¤´ç»“ç‚¹çš„nextåŸŸç½®ç©ºï¼ä½¿é“¾è¡¨æ¢å¤æœ€åˆçš„ç©ºé“¾è¡¨çŠ¶æ€ï¼ï¼ˆé‡Šæ”¾å¤´ç»“ç‚¹åé¢çš„æ‰€æœ‰ç»“ç‚¹ï¼‰</p><p>1ï¼‰é¦–å…ˆå°†pæŒ‡å‘é¦–å…ƒç»“ç‚¹</p><p>2ï¼‰å°†qæŒ‡å‘pçš„åç»§èŠ‚ç‚¹</p><p>3ï¼‰é‡Šæ”¾p</p><p>4ï¼‰å°†pæŒ‡å‘q</p><p>5ï¼‰qæŒ‡å‘qçš„åç»§èŠ‚ç‚¹</p><p>6ï¼‰é‡å¤ 3ã€4ã€5ç›´è‡³pç»“ç‚¹ä¸ºç©º</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">Status <span class="token function">ClearList_L</span><span class="token punctuation">(</span>LinkList L<span class="token punctuation">)</span> <span class="token punctuation">{</span>    LinkList p<span class="token punctuation">,</span>q<span class="token punctuation">;</span>    p <span class="token operator">=</span> L<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    <span class="token comment">/*    while(p) {    q = p-&gt;next;    delete p;     p = q;    }    */</span>    q <span class="token operator">=</span> p<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>          <span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token punctuation">{</span>        delete p<span class="token punctuation">;</span>        p <span class="token operator">=</span> q<span class="token punctuation">;</span>        q <span class="token operator">=</span> q<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>            <span class="token punctuation">}</span>    L<span class="token operator">-&gt;</span>next <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token keyword">return</span> OK<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚ä½•æ±‚å–é“¾è¡¨çš„è¡¨é•¿ï¼ˆå«æœ‰å¤šå°‘ä¸ªå…ƒç´ ï¼‰</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">GetLength_L</span><span class="token punctuation">(</span>LinkList L<span class="token punctuation">)</span> <span class="token punctuation">{</span>    LinkList p <span class="token operator">=</span> L<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    <span class="token keyword">int</span> len<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token punctuation">{</span>        len<span class="token operator">++</span><span class="token punctuation">;</span>        p <span class="token operator">=</span> p<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> len<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è·å–å•é“¾è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼ˆå–ç¬¬iä¸ªå€¼ï¼‰</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">Status <span class="token function">GetElem_L</span><span class="token punctuation">(</span>LinkList L<span class="token punctuation">,</span><span class="token keyword">int</span> i<span class="token punctuation">,</span>ElemType <span class="token operator">&amp;</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    LinkList p <span class="token operator">=</span> L<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">&amp;&amp;</span>j<span class="token operator">&lt;</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>        p <span class="token operator">=</span> p<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>        j<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>P<span class="token operator">||</span>j<span class="token operator">&gt;</span>i<span class="token punctuation">)</span> <span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>   <span class="token comment">//æ¡ä»¶åˆ¤æ–­ï¼šç¡®å®šæ²¡æœ‰æ£€ç´¢åˆ°ç¬¬iä¸ªå€¼ã€içš„åˆç†æ€§(i&gt;0)</span>    e <span class="token operator">=</span> p<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span>    <span class="token keyword">return</span> OK<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æŸ¥æ‰¾é“¾è¡¨ä¸­æŒ‡å®šå…ƒç´ çš„ä½ç½®</p><p>1ï¼‰ä»é¦–å…ƒç»“ç‚¹å¼€å§‹ï¼Œä¸å…ƒç´ eæ¯”è¾ƒ</p><p>2ï¼‰è‹¥ç›¸ç­‰åˆ™è¿”å›å…ƒç´ çš„ä½ç½®|åœ°å€</p><p>3ï¼‰è‹¥æŸ¥æ‰¾æ‰€æœ‰å…ƒç´ éƒ½ä¸ç›¸ç­‰åˆ™è¿”å›0|null</p><ul><li>è¿”å›ä½ç½®çš„ç®—æ³•</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> <span class="token function">LocateElem_L</span><span class="token punctuation">(</span>LinkList L<span class="token punctuation">,</span>ElemType e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    LinkList p <span class="token operator">=</span> L<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">&amp;&amp;</span>p<span class="token operator">-&gt;</span>data <span class="token operator">!=</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        p <span class="token operator">=</span> p<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>        i<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>p <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> i<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>è¿”å›åœ°å€çš„ç®—æ³•</li></ul><pre class="line-numbers language-c" data-language="c"><code class="language-c">Lnode <span class="token operator">*</span> <span class="token function">LocateElem_L</span><span class="token punctuation">(</span>LinkList L<span class="token punctuation">,</span>ElemType e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    p <span class="token operator">=</span> L<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">&amp;&amp;</span>p<span class="token operator">-&gt;</span>data<span class="token operator">!=</span>e<span class="token punctuation">)</span>        p <span class="token operator">=</span> p<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    <span class="token keyword">return</span> p<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é“¾è¡¨çš„ä¼˜åŠ¿æ“ä½œ</p><p>åœ¨ç¬¬iä¸ªå…ƒç´ å‰é¢æ’å…¥ç»“ç‚¹e</p><p>1ï¼‰æ‰¾å‡ºæŒ‡å‘ç¬¬i-1ä¸ªç»“ç‚¹çš„æŒ‡é’ˆ</p><p>2ï¼‰ç”Ÿæˆç»“ç‚¹e</p><p>3ï¼‰å°†ç»“ç‚¹eæ’å…¥åˆ°iå‰é¢</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">Status <span class="token function">InsertList_L</span><span class="token punctuation">(</span>LinkList <span class="token operator">&amp;</span>L<span class="token punctuation">,</span><span class="token keyword">int</span> i<span class="token punctuation">,</span>ElemType e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    p <span class="token operator">=</span> L<span class="token punctuation">;</span>    j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">&amp;&amp;</span>j<span class="token operator">&lt;</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        p <span class="token operator">=</span> p<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>        j<span class="token operator">++</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>p<span class="token operator">||</span>j<span class="token operator">&gt;</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>    s <span class="token operator">=</span> new Lnode<span class="token punctuation">;</span>    s<span class="token operator">-&gt;</span>data <span class="token operator">=</span> e<span class="token punctuation">;</span>    s<span class="token operator">-&gt;</span>next <span class="token operator">=</span> p<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    p <span class="token operator">=</span> s<span class="token punctuation">;</span>    L<span class="token punctuation">.</span>length<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> OK<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ é™¤ç¬¬iä¸ªå…ƒç´ </p><p>1ï¼‰æ‰¾å‡ºæŒ‡å‘ç¬¬i-1ä¸ªç»“ç‚¹çš„æŒ‡é’ˆ</p><p>2ï¼‰åˆ é™¤ç»“ç‚¹i</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">Status <span class="token function">DeleteList_L</span><span class="token punctuation">(</span>LinkList <span class="token operator">&amp;</span>L<span class="token punctuation">,</span><span class="token keyword">int</span> i<span class="token punctuation">,</span>ElemType <span class="token operator">&amp;</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    p <span class="token operator">=</span> L<span class="token punctuation">;</span>    j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>next<span class="token operator">&amp;&amp;</span>j<span class="token operator">&lt;</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        p <span class="token operator">=</span> p<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>        j<span class="token operator">++</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>next<span class="token punctuation">)</span><span class="token operator">||</span>j<span class="token operator">&gt;</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>    p<span class="token operator">-&gt;</span>next <span class="token operator">=</span> p<span class="token operator">-&gt;</span>next<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    e <span class="token operator">=</span> p<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span>    delete p<span class="token punctuation">;</span>    <span class="token keyword">return</span> OK<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ›å»ºé“¾è¡¨çš„ä¸¤ç§æ–¹å¼ï¼šå¤´æ’æ³•ã€å°¾æ’æ³•</p><p>å¤´æ’ï¼š</p><p>1ï¼‰åˆ›å»ºå¸¦æœ‰å¤´ç»“ç‚¹çš„ç©ºè¡¨</p><p>2ï¼‰åˆ›å»ºæ–°çš„ç»“ç‚¹e</p><p>3ï¼‰å°†å¤´ç»“ç‚¹çš„nextæ¥å…¥åˆ°æ–°çš„ç»“ç‚¹åé¢ï¼Œå†å°†æ–°çš„ç»“ç‚¹æ¥å…¥åˆ°å¤´ç»“ç‚¹ä¹‹å</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">Status <span class="token function">CreateList_H</span><span class="token punctuation">(</span>LinkList <span class="token operator">&amp;</span>L<span class="token punctuation">)</span> <span class="token punctuation">{</span>    L <span class="token operator">=</span> new Lnode<span class="token punctuation">;</span>    L<span class="token operator">-&gt;</span>next <span class="token operator">=</span> null<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>L<span class="token punctuation">)</span> <span class="token keyword">return</span> ERRO<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span>n<span class="token punctuation">;</span>i<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        p <span class="token operator">=</span> new Lnode<span class="token punctuation">;</span>        cin<span class="token operator">&gt;&gt;</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span>        p<span class="token operator">-&gt;</span>next <span class="token operator">=</span> L<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>        L<span class="token operator">-&gt;</span>next <span class="token operator">=</span> p<span class="token punctuation">;</span>        L<span class="token punctuation">.</span>length<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> OK<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å°¾æ’ï¼š</p><p>1ï¼‰åˆ›å»ºå¸¦æœ‰å¤´ç»“ç‚¹çš„ç©ºè¡¨</p><p>2ï¼‰åˆ›ç«‹æŒ‡å‘å°¾ç»“ç‚¹çš„å°¾æŒ‡é’ˆï¼Œå¹¶ä¸”å°†å°¾æŒ‡é’ˆæŒ‡å‘å¤´ç»“ç‚¹</p><p>3ï¼‰åˆ›å»ºæ–°çš„ç»“ç‚¹e</p><p>4ï¼‰å°†æ–°ç»“ç‚¹æ¥å…¥åˆ°å°¾æŒ‡é’ˆçš„nextï¼Œå¹¶ä¸”å°†å°¾æŒ‡é’ˆæŒ‡å‘æ–°ç»“ç‚¹</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">Status <span class="token function">CreateList_R</span><span class="token punctuation">(</span>LinkList <span class="token operator">&amp;</span>L<span class="token punctuation">)</span> <span class="token punctuation">{</span>    L <span class="token operator">=</span> new Lnode<span class="token punctuation">;</span>    L<span class="token operator">-&gt;</span>next <span class="token operator">=</span> null<span class="token punctuation">;</span>    r <span class="token operator">=</span> L<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>L<span class="token punctuation">)</span> <span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        p <span class="token operator">=</span> new Lnode<span class="token punctuation">;</span>        cin<span class="token operator">&gt;&gt;</span>p<span class="token operator">-&gt;</span>data<span class="token punctuation">;</span>        p<span class="token operator">-&gt;</span>next <span class="token operator">=</span> null<span class="token punctuation">;</span>        r<span class="token punctuation">.</span>next <span class="token operator">=</span> p<span class="token punctuation">;</span>        r <span class="token operator">=</span> p<span class="token punctuation">;</span>        L<span class="token punctuation">.</span>length<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> OK<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é“¾è¡¨æ‹“å±•"><a href="#é“¾è¡¨æ‹“å±•" class="headerlink" title="é“¾è¡¨æ‹“å±•"></a>é“¾è¡¨æ‹“å±•</h1><h2 id="å¾ªç¯é“¾è¡¨"><a href="#å¾ªç¯é“¾è¡¨" class="headerlink" title="å¾ªç¯é“¾è¡¨"></a>å¾ªç¯é“¾è¡¨</h2><h3 id="ä¸¤ç§ç»“æ„"><a href="#ä¸¤ç§ç»“æ„" class="headerlink" title="ä¸¤ç§ç»“æ„"></a>ä¸¤ç§ç»“æ„</h3><p>ç›®å‰åªé’ˆå¯¹å•å‘å¾ªç¯é“¾è¡¨ï¼Œå¹¶ä¸”æ˜¯å¸¦æœ‰å¤´æŒ‡é’ˆæˆ–è€…æ˜¯å°¾æŒ‡é’ˆçš„å¾ªç¯é“¾è¡¨ï¼</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210401142223.jpg" style="width:80%"><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio@1.3/imgs1/20210401142220.jpg" style="width:80%"><p>é’ˆå¯¹å¾ªç¯é“¾è¡¨çš„åˆ¤ç©ºæ ‡å‡†ï¼Œä¸ä¼šå†ä¸å•å‘é“¾è¡¨ç›¸åŒ</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">// å¾ªç¯é“¾è¡¨çš„åˆ¤æ–­æ–¹å¼     // å•å‘é“¾è¡¨çš„åˆ¤æ–­æ–¹å¼   </span>R<span class="token operator">-&gt;</span>next <span class="token operator">==</span> R<span class="token punctuation">;</span>          L<span class="token operator">-&gt;</span>next <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>H<span class="token operator">-&gt;</span>next <span class="token operator">==</span> H<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä»¥å¸¦æœ‰å¤´æŒ‡é’ˆçš„å•å‘å¾ªç¯é“¾è¡¨çš„éå†ä¸ºä¾‹</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">p <span class="token operator">=</span> H<span class="token punctuation">;</span><span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>next <span class="token operator">!=</span> H<span class="token punctuation">)</span> <span class="token punctuation">{</span>    p <span class="token operator">=</span> p<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    p<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬ä»ä¸Šé¢çš„ç»“æ„çœ‹å‡ºï¼ŒHå¾ªç¯é“¾è¡¨åœ¨è®¿é—®è¡¨å¤´å…ƒç´ æ—¶ï¼Œå¤æ‚åº¦å±äºå¸¸é‡é˜¶ï¼Œè€Œè¡¨å°¾å…ƒç´ ä¾æ—§æ˜¯né˜¶ï¼</p><p>ä½†æ˜¯å¯¹äºRå¾ªç¯é“¾è¡¨æ—¶ï¼Œè®¿é—®è¡¨å¤´ä¸è¡¨å°¾å…ƒç´ å¤æ‚åº¦éƒ½æ˜¯å¸¸é‡é˜¶ï¼è¿™æ ·ä¹Ÿçœ‹å‡ºå°¾æŒ‡é’ˆå¾ªç¯é“¾è¡¨çš„å¥½å¤„ï¼</p><h3 id="é“¾è¡¨åˆå¹¶"><a href="#é“¾è¡¨åˆå¹¶" class="headerlink" title="é“¾è¡¨åˆå¹¶"></a>é“¾è¡¨åˆå¹¶</h3><p>æ—¢ç„¶å°¾æŒ‡é’ˆå¾ªç¯é“¾è¡¨çš„å¥½å¤„å¤šå¤šï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹ï¼Œå¾ªç¯é“¾è¡¨çš„åˆå¹¶æ“ä½œ</p><p>1ï¼‰ä¿ç•™Açš„å¤´ç»“ç‚¹æŒ‡é’ˆ</p><p>2ï¼‰å°†Açš„è¡¨å°¾æŒ‡å‘Bçš„é¦–å…ƒç»“ç‚¹</p><p>3ï¼‰é‡Šæ”¾Bçš„å¤´ç»“ç‚¹</p><p>4ï¼‰å°†Bçš„è¡¨å°¾æŒ‡å‘Açš„è¡¨å¤´</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">void</span> <span class="token function">ConnectList_L</span><span class="token punctuation">(</span>LinkList A<span class="token punctuation">,</span>LinkList B<span class="token punctuation">)</span> <span class="token punctuation">{</span>    LinkList p <span class="token operator">=</span> A<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    A<span class="token operator">-&gt;</span>next <span class="token operator">=</span> B<span class="token operator">-&gt;</span>next<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    delete B<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    B<span class="token operator">-&gt;</span>next <span class="token operator">=</span>  p<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åŒå‘é“¾è¡¨"><a href="#åŒå‘é“¾è¡¨" class="headerlink" title="åŒå‘é“¾è¡¨"></a>åŒå‘é“¾è¡¨</h2><p>å•å‘é“¾è¡¨çš„å¼Šç«¯åœ¨äºï¼Œå½“å·²çŸ¥ä¸€ä¸ªç»“ç‚¹çš„ä½ç½®ï¼Œæ— æ³•è®¿é—®å®ƒçš„å‰é©±ç»“ç‚¹ã€‚è€ŒåŒå‘é“¾è¡¨å¹¶è§£å†³äº†è¿™æ ·çš„é—®é¢˜ã€‚æ¯”å¦‚åœ¨Javaä¸­çš„LinkedListå°±æ˜¯ä½¿ç”¨çš„åŒå‘é“¾è¡¨ï¼Œé‚£ä¹ˆåœ¨å¯¹äºå¤§é‡çš„å¢åˆ æ”¹æŸ¥æ—¶ï¼ŒåŒå‘é“¾è¡¨çš„ä¼˜åŠ¿å°±å‡ºç°äº†ã€‚</p><p>åŒå‘é“¾è¡¨çš„ç»“æ„</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>    DuLnode prior<span class="token punctuation">;</span>    DuLnode next<span class="token punctuation">;</span>    ElemType data<span class="token punctuation">;</span><span class="token punctuation">}</span>DuLnode Dulink<span class="token operator">*</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Javaçš„åŒå‘é“¾è¡¨"><a href="#Javaçš„åŒå‘é“¾è¡¨" class="headerlink" title="Javaçš„åŒå‘é“¾è¡¨"></a>Javaçš„åŒå‘é“¾è¡¨</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>     <span class="token keyword">public</span> <span class="token class-name">E</span> item<span class="token punctuation">;</span>     <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev<span class="token punctuation">;</span>     <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>     <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev<span class="token punctuation">,</span> <span class="token class-name">E</span> item<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>item <span class="token operator">=</span> item<span class="token punctuation">;</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>         <span class="token keyword">this</span><span class="token punctuation">.</span>prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ’å…¥å…ƒç´ "><a href="#æ’å…¥å…ƒç´ " class="headerlink" title="æ’å…¥å…ƒç´ "></a>æ’å…¥å…ƒç´ </h3><p>å¯¹äºcç³»åˆ—åŒå‘é“¾è¡¨çš„æ’å…¥ï¼Œè¦ç®€åŒ–ä¸Javaçš„æ’å…¥ï¼ˆè¿™é‡Œå‡è®¾æ’å…¥ä½ç½®çš„å‰é©±å’Œåç»§ç»“ç‚¹éƒ½å­˜åœ¨ï¼‰</p><p>1ï¼‰éå†è·å–å¾…æ’å…¥çš„ç¬¬iä¸ªç»“ç‚¹çš„æŒ‡é’ˆp</p><p>2ï¼‰ç”Ÿæˆæ’å…¥ç»“ç‚¹s</p><p>3ï¼‰å°†sçš„å‰é©±å’Œåç»§æŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘pçš„å‰é©±å’Œpè‡ªèº«</p><p>4ï¼‰å°†pçš„å‰é©±çš„åç»§æŒ‡å‘sï¼Œå°†pçš„å‰é©±æŒ‡å‘s</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">Status <span class="token function">ListInsert_Dul</span><span class="token punctuation">(</span>Dulink <span class="token operator">&amp;</span>L<span class="token punctuation">,</span><span class="token keyword">int</span> i<span class="token punctuation">,</span>ElemType e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token function">GetElem</span><span class="token punctuation">(</span>L<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>    s <span class="token operator">=</span> new DuLnode<span class="token punctuation">;</span>    s<span class="token operator">-&gt;</span>data <span class="token operator">=</span> e<span class="token punctuation">;</span>    s<span class="token operator">-&gt;</span>prior <span class="token operator">=</span> p<span class="token operator">-&gt;</span>prior<span class="token punctuation">;</span>    s<span class="token operator">-&gt;</span>next <span class="token operator">=</span> p<span class="token punctuation">;</span>    p<span class="token operator">-&gt;</span>prior<span class="token operator">-&gt;</span>next <span class="token operator">=</span> s<span class="token punctuation">;</span>    p<span class="token operator">-&gt;</span>prior <span class="token operator">=</span> s<span class="token punctuation">;</span>    <span class="token keyword">return</span> OK<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ é™¤å…ƒç´ "><a href="#åˆ é™¤å…ƒç´ " class="headerlink" title="åˆ é™¤å…ƒç´ "></a>åˆ é™¤å…ƒç´ </h3><p>å¯¹äºåˆ é™¤æ“ä½œï¼Œå‡è®¾åˆ é™¤ä½ç½®çš„å‰é©±å’Œåç»§éƒ½å­˜åœ¨ï¼Œä¸è€ƒè™‘åˆ é™¤ä¹‹åä¸ºç©ºè¡¨çš„æƒ…å†µ,ä¹Ÿä¸è·å–åˆ é™¤å…ƒç´ çš„å†…å®¹ï¼Œåªè€ƒè™‘åˆ é™¤ç»“ç‚¹æ—¶ï¼Œåˆ é™¤ä½ç½®å‰é©±å’Œåç»§ç»“ç‚¹çš„æŒ‡é’ˆå˜åŒ–ï¼</p><p>1ï¼‰å°†pçš„åç»§çš„å‰é©±æŒ‡é’ˆæŒ‡å‘pçš„å‰é©±ç»“ç‚¹</p><p>2ï¼‰å°†pçš„å‰é©±çš„åç»§æŒ‡é’ˆæŒ‡å‘pçš„åç»§ç»“ç‚¹</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">Status <span class="token function">ListDelete_Dul</span><span class="token punctuation">(</span>Dulink <span class="token operator">&amp;</span>L<span class="token punctuation">,</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token function">GetElem</span><span class="token punctuation">(</span>L<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> ERROR<span class="token punctuation">;</span>    p<span class="token operator">-&gt;</span>next<span class="token operator">-&gt;</span>prior <span class="token operator">=</span> p<span class="token operator">-&gt;</span>prior<span class="token punctuation">;</span>    p<span class="token operator">-&gt;</span>prior<span class="token operator">-&gt;</span>next <span class="token operator">=</span> p<span class="token operator">-&gt;</span>next<span class="token punctuation">;</span>    <span class="token keyword">return</span> OK<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…³äºå¤æ‚çš„åŒå‘é“¾è¡¨çš„å¢åˆ æ”¹æŸ¥ï¼Œå¯ä»¥å‚è€ƒ <a href="https://www.matemaster.cn/posts/53096.html#toc-heading-2">LinkedListåº•å±‚åŸç†</a></p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DataStructure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLçš„é«˜çº§æ•°æ®æŸ¥è¯¢</title>
      <link href="posts/10300.html"/>
      <url>posts/10300.html</url>
      
        <content type="html"><![CDATA[<p><b style="color: red;">æœ¬ç‰‡åšæ–‡çš„sqlæ–‡ä»¶</b>ğŸ‘‰<a href="https://gitee.com/matemaster/master-depository/blob/master/2021-03-22/Query-for-MySQL.sql">Query-for-MySQL</a></p><p><b style="color: red;">ç»ƒä¹ æ•°æ®åº“SQLæ–‡ä»¶</b>ğŸ‘‰<a href="https://gitee.com/matemaster/master-depository/tree/master/2021-03-22/Query-MySQL-Lianxi">Query-MySQL-Lianxi</a></p><p><b style="color: red;">SQLåœ¨çº¿ç»ƒä¹ ç½‘ç«™</b>ğŸ‘‰<a href="https://sqlzoo.net/">sqlzoo</a></p><h1 id="selectç»“æ„"><a href="#selectç»“æ„" class="headerlink" title="selectç»“æ„"></a>selectç»“æ„</h1><p>åŸºæœ¬ç»“æ„</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token punctuation">[</span>field<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token keyword">FROM</span>   <span class="token punctuation">[</span><span class="token keyword">table</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">|</span><span class="token keyword">view</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token keyword">WHERE</span>  <span class="token punctuation">[</span>condition<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¸¸ç”¨çš„selectç»“æ„</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> <span class="token operator">&lt;</span><span class="token operator">*</span><span class="token operator">|</span>select_list<span class="token operator">&gt;</span><span class="token keyword">FROM</span> <span class="token operator">&lt;</span>left_table<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>join_type<span class="token operator">&gt;</span> <span class="token keyword">JOIN</span> <span class="token operator">&lt;</span>right_table<span class="token operator">&gt;</span><span class="token keyword">ON</span> <span class="token operator">&lt;</span>join_condition<span class="token operator">&gt;</span><span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>where_condition<span class="token operator">&gt;</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>group_by_list<span class="token operator">&gt;</span> <span class="token keyword">WITH</span><span class="token operator">&lt;</span>CUBE<span class="token operator">|</span>ROLLUP<span class="token operator">&gt;</span> <span class="token keyword">HAVING</span> <span class="token operator">&lt;</span>having_condition<span class="token operator">&gt;</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>order_by_list<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token keyword">ASC</span><span class="token operator">|</span><span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token keyword">LIMIT</span> <span class="token punctuation">[</span><span class="token keyword">offset</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>limit_number<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®˜æ–¹å®Œæ•´ç‰ˆç»“æ„</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span>    <span class="token punctuation">[</span><span class="token keyword">ALL</span> <span class="token operator">|</span> <span class="token keyword">DISTINCT</span> <span class="token operator">|</span> <span class="token keyword">DISTINCTROW</span> <span class="token punctuation">]</span>      <span class="token punctuation">[</span>HIGH_PRIORITY<span class="token punctuation">]</span>      <span class="token punctuation">[</span>STRAIGHT_JOIN<span class="token punctuation">]</span>      <span class="token punctuation">[</span>SQL_SMALL_RESULT<span class="token punctuation">]</span> <span class="token punctuation">[</span>SQL_BIG_RESULT<span class="token punctuation">]</span> <span class="token punctuation">[</span>SQL_BUFFER_RESULT<span class="token punctuation">]</span>      <span class="token punctuation">[</span>SQL_CACHE <span class="token operator">|</span> SQL_NO_CACHE<span class="token punctuation">]</span> <span class="token punctuation">[</span>SQL_CALC_FOUND_ROWS<span class="token punctuation">]</span>    select_expr<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    <span class="token punctuation">[</span><span class="token keyword">INTO</span> <span class="token keyword">OUTFILE</span> <span class="token string">'file_name'</span> export_options<span class="token operator">|</span> <span class="token keyword">INTO</span> <span class="token keyword">DUMPFILE</span> <span class="token string">'file_name'</span><span class="token punctuation">]</span>    <span class="token punctuation">[</span><span class="token keyword">FROM</span> table_references    <span class="token punctuation">[</span><span class="token keyword">WHERE</span> where_definition<span class="token punctuation">]</span>    <span class="token punctuation">[</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> {col_name <span class="token operator">|</span> expr <span class="token operator">|</span> position} <span class="token punctuation">[</span><span class="token keyword">ASC</span> <span class="token operator">|</span> <span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">[</span><span class="token keyword">WITH ROLLUP</span><span class="token punctuation">]</span><span class="token punctuation">]</span>    <span class="token punctuation">[</span><span class="token keyword">HAVING</span> where_definition<span class="token punctuation">]</span>    <span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> {col_name <span class="token operator">|</span> expr <span class="token operator">|</span> position} <span class="token punctuation">[</span><span class="token keyword">ASC</span> <span class="token operator">|</span> <span class="token keyword">DESC</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>    <span class="token punctuation">[</span><span class="token keyword">LIMIT</span> {<span class="token punctuation">[</span><span class="token keyword">offset</span><span class="token punctuation">,</span><span class="token punctuation">]</span> row_count <span class="token operator">|</span> row_count <span class="token keyword">OFFSET</span> <span class="token keyword">offset</span>}<span class="token punctuation">]</span>    <span class="token punctuation">[</span><span class="token keyword">PROCEDURE</span> procedure_name<span class="token punctuation">(</span>argument_list<span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token punctuation">[</span><span class="token keyword">FOR</span> <span class="token keyword">UPDATE</span> <span class="token operator">|</span> <span class="token keyword">LOCK</span> <span class="token operator">IN</span> <span class="token keyword">SHARE</span> <span class="token keyword">MODE</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…³äºå®Œæ•´ç»“æ„ä¸­å„ä¸ªå­å¥çš„å«ä¹‰ï¼Œå¯ä»¥åœ¨åé¢çš„ä¾‹å­ç¨‹åºä¸­ç†è§£ä½¿ç”¨ï¼</p><h2 id="æ‰§è¡Œé¡ºåº"><a href="#æ‰§è¡Œé¡ºåº" class="headerlink" title="æ‰§è¡Œé¡ºåº"></a>æ‰§è¡Œé¡ºåº</h2><p>è¿™é‡Œå°±ä¸æŒ‰ç…§å®˜æ–¹å®Œæ•´ç‰ˆç»“æ„å»æè¿°è¯­å¥æ‰§è¡Œé¡ºåºï¼Œå¤ªå¤šï¼å¤ªçƒ¦ï¼å¤ªéš¾ï¼  æˆ‘ä»¬å°±åªè¦ç†Ÿç»ƒæŒæ¡å¸¸ç”¨çš„è¯­å¥å³å¯ï¼åœ¨æ•´ä¸ªæŸ¥è¯¢æ“ä½œçš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€æ¬¡æ“ä½œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼ˆvirtual tableï¼‰ï¼Œåªæœ‰æœ€å¥½çš„ç»“æœè¡¨ä¼šè¢«è¿”å›ã€‚</p><p styleÂ ="color: hotpink">    ï¼ˆ1ï¼‰FROMï¼šå¯¹å…³ç³»è¡¨è¿›è¡Œç¬›å¡å°”ç§¯ï¼Œäº§ç”Ÿè™šè¡¨vt1<br>    ï¼ˆ2ï¼‰ONï¼šå¯¹vt1åšç­›é€‰ï¼Œå°†æ»¡è¶³æ¡ä»¶çš„å…ƒç»„åŠ å…¥æ–°çš„è™šè¡¨vt2<br>    ï¼ˆ3ï¼‰JOINï¼šå¯¹äºæŒ‡å®šäº†OUTER JOINæ“ä½œï¼Œé‚£ä¹ˆå®Œæˆå¯¹åº”çš„å¤–è¿æ¥æ“ä½œï¼Œäº§ç”Ÿè™šè¡¨vt3<br>    ï¼ˆ4ï¼‰WHEREï¼šå¯¹vt3å…ƒç»„è¿›è¡Œæ¡ä»¶ç­›é€‰ï¼Œå°†æ»¡è¶³æ¡ä»¶çš„å…ƒç»„åŠ å…¥æ–°çš„è™šè¡¨vt4<br>    ï¼ˆ5ï¼‰GROUP BYï¼šå¯¹vt4ç»“æœåˆ†ç»„ï¼Œå¦‚æœå­˜åœ¨ CUBE/ROLLUPæ“ä½œï¼Œé‚£ä¹ˆå°†æ“ä½œå¤„ç†åçš„ç»“æœåŠ å…¥vt5<br>    ï¼ˆ6ï¼‰HAVINGï¼šæ ¹æ®è¿‡æ»¤æ¡ä»¶å»é™¤å…ƒç»„ï¼Œäº§ç”Ÿè™šè¡¨vt6<br>    ï¼ˆ7ï¼‰SELECTï¼šæŠ•å½±æŒ‡å®šçš„åˆ—ï¼Œå¦‚æœå­˜åœ¨DISTINCTæ“ä½œï¼Œé‚£ä¹ˆå»é™¤é‡å¤åˆ—åäº§ç”Ÿè™šè¡¨vt7<br>    ï¼ˆ8ï¼‰ORDER BYï¼šæ ¹æ®æ’åºçš„åˆ—è¿›è¡Œå‡é™åºï¼Œäº§ç”Ÿè™šè¡¨vt8<br>    ï¼ˆ9ï¼‰LIMITï¼šæ ¹æ®åç§»é‡/è¡Œæ•°è¦æ±‚ï¼Œäº§ç”Ÿvt9ï¼Œå¹¶å°†ç»“æœè¡¨ï¼ˆresult tableï¼‰è¿”å›</p><h1 id="å•è¡¨æŸ¥è¯¢"><a href="#å•è¡¨æŸ¥è¯¢" class="headerlink" title="å•è¡¨æŸ¥è¯¢"></a>å•è¡¨æŸ¥è¯¢</h1><h2 id="æ —å­å…³ç³»è¡¨"><a href="#æ —å­å…³ç³»è¡¨" class="headerlink" title="æ —å­å…³ç³»è¡¨"></a>æ —å­å…³ç³»è¡¨</h2><p>ä¾‹å­å…³ç³»è¡¨<code>fruits</code></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># create tb_fruits</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> fruits<span class="token punctuation">(</span>    f_id    <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    s_id    <span class="token keyword">INT</span>        <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    f_name  <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    f_price <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>f_id<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># insert data into tb_fruits</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> fruits <span class="token punctuation">(</span>f_id<span class="token punctuation">,</span> s_id<span class="token punctuation">,</span> f_name<span class="token punctuation">,</span> f_price<span class="token punctuation">)</span><span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'a1'</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token punctuation">,</span><span class="token string">'apple'</span><span class="token punctuation">,</span><span class="token number">5.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'b1'</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token punctuation">,</span><span class="token string">'blackberry'</span><span class="token punctuation">,</span> <span class="token number">10.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'bs1'</span><span class="token punctuation">,</span><span class="token number">102</span><span class="token punctuation">,</span><span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token number">11.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'bs2'</span><span class="token punctuation">,</span><span class="token number">105</span><span class="token punctuation">,</span><span class="token string">'melon'</span><span class="token punctuation">,</span><span class="token number">8.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'t1'</span><span class="token punctuation">,</span><span class="token number">102</span><span class="token punctuation">,</span><span class="token string">'banana'</span><span class="token punctuation">,</span> <span class="token number">10.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'t2'</span><span class="token punctuation">,</span><span class="token number">102</span><span class="token punctuation">,</span><span class="token string">'grape'</span><span class="token punctuation">,</span> <span class="token number">5.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'o2'</span><span class="token punctuation">,</span><span class="token number">103</span><span class="token punctuation">,</span><span class="token string">'coconut'</span><span class="token punctuation">,</span> <span class="token number">9.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'c0'</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token punctuation">,</span><span class="token string">'cherry'</span><span class="token punctuation">,</span> <span class="token number">3.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'a2'</span><span class="token punctuation">,</span><span class="token number">103</span><span class="token punctuation">,</span> <span class="token string">'apricot'</span><span class="token punctuation">,</span><span class="token number">2.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'l2'</span><span class="token punctuation">,</span><span class="token number">104</span><span class="token punctuation">,</span><span class="token string">'lemon'</span><span class="token punctuation">,</span> <span class="token number">6.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'b2'</span><span class="token punctuation">,</span><span class="token number">104</span><span class="token punctuation">,</span><span class="token string">'berry'</span><span class="token punctuation">,</span> <span class="token number">7.6</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'m1'</span><span class="token punctuation">,</span><span class="token number">106</span><span class="token punctuation">,</span><span class="token string">'mango'</span><span class="token punctuation">,</span> <span class="token number">15.6</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'m2'</span><span class="token punctuation">,</span><span class="token number">105</span><span class="token punctuation">,</span><span class="token string">'xbabay'</span><span class="token punctuation">,</span> <span class="token number">2.6</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'t4'</span><span class="token punctuation">,</span><span class="token number">107</span><span class="token punctuation">,</span><span class="token string">'xbababa'</span><span class="token punctuation">,</span> <span class="token number">3.6</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'m3'</span><span class="token punctuation">,</span><span class="token number">105</span><span class="token punctuation">,</span><span class="token string">'xxtt'</span><span class="token punctuation">,</span> <span class="token number">11.6</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'b5'</span><span class="token punctuation">,</span><span class="token number">107</span><span class="token punctuation">,</span><span class="token string">'xxxx'</span><span class="token punctuation">,</span> <span class="token number">3.6</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¾‹å­å…³ç³»è¡¨<code>customers</code></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># create tb_customers</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> customers<span class="token punctuation">(</span>  c_id      <span class="token keyword">int</span>       <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>  c_name    <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  c_address <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token boolean">NULL</span><span class="token punctuation">,</span>  c_city    <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token boolean">NULL</span><span class="token punctuation">,</span>  c_zip     <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token boolean">NULL</span><span class="token punctuation">,</span>  c_contact <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token boolean">NULL</span><span class="token punctuation">,</span>  c_email   <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>c_id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># insert data into tb_customers</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> customers<span class="token punctuation">(</span>c_id<span class="token punctuation">,</span> c_name<span class="token punctuation">,</span> c_address<span class="token punctuation">,</span> c_city<span class="token punctuation">,</span> c_zip<span class="token punctuation">,</span>  c_contact<span class="token punctuation">,</span> c_email<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">10001</span><span class="token punctuation">,</span> <span class="token string">'RedHook'</span><span class="token punctuation">,</span><span class="token string">'200 Street'</span><span class="token punctuation">,</span><span class="token string">'Tianjin'</span><span class="token punctuation">,</span><span class="token string">'300000'</span><span class="token punctuation">,</span><span class="token string">'LiMing'</span><span class="token punctuation">,</span><span class="token string">'LMing@163.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">10002</span><span class="token punctuation">,</span> <span class="token string">'Stars'</span><span class="token punctuation">,</span><span class="token string">'333 Fromage Lane'</span><span class="token punctuation">,</span><span class="token string">'Dalian'</span><span class="token punctuation">,</span><span class="token string">'116000'</span><span class="token punctuation">,</span><span class="token string">'Zhangbo'</span><span class="token punctuation">,</span><span class="token string">'Jerry@hotmail.com'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">10003</span><span class="token punctuation">,</span> <span class="token string">'Netbhood'</span><span class="token punctuation">,</span><span class="token string">'1 Sunny Place'</span><span class="token punctuation">,</span><span class="token string">'Qingdao'</span><span class="token punctuation">,</span><span class="token string">'266000'</span><span class="token punctuation">,</span><span class="token string">'LuoCong'</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">10004</span><span class="token punctuation">,</span> <span class="token string">'JOTO'</span><span class="token punctuation">,</span><span class="token string">'829 Riverside Drive'</span><span class="token punctuation">,</span><span class="token string">'Haikou'</span><span class="token punctuation">,</span><span class="token string">'570000'</span><span class="token punctuation">,</span><span class="token string">'YangShan'</span><span class="token punctuation">,</span><span class="token string">'sam@hotmail.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¾‹å­å…³ç³»è¡¨<code>orderitems</code></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># create tb_orderitems</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> orderitems<span class="token punctuation">(</span>  o_num      <span class="token keyword">int</span>          <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  o_item     <span class="token keyword">int</span>          <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  f_id       <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>     <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  quantity   <span class="token keyword">int</span>          <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  item_price <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>o_num<span class="token punctuation">,</span>o_item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token comment"># insert data into tb_orderitems</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> orderitems<span class="token punctuation">(</span>o_num<span class="token punctuation">,</span> o_item<span class="token punctuation">,</span> f_id<span class="token punctuation">,</span> quantity<span class="token punctuation">,</span> item_price<span class="token punctuation">)</span><span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">30001</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'a1'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">30001</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'b2'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7.6</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">30001</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'bs1'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">11.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">30001</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'bs2'</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">9.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">30002</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'b3'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">20.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">30003</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'c0'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">30004</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'o2'</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">2.50</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">30005</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'c0'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">30005</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'b1'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">8.99</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">30005</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'a2'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">30005</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'m1'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">14.99</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­—æ®µ"><a href="#å­—æ®µ" class="headerlink" title="å­—æ®µ"></a>å­—æ®µ</h2><p>ç›¸å½“äºå…³ç³»ä»£æ•°ä¸­æŠ•å½±å…³ç³»Rçš„å…¨éƒ¨åˆ—ï¼Œç­‰ä»·äºselectæ‰€æœ‰åˆ—ï¼<br>$$<br>Î _{f_id,s_id,f_name,f_price}(fruits)<br>$$</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> fruits<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+------+------------+---------+</span><span class="token operator">|</span> f_id <span class="token operator">|</span> s_id <span class="token operator">|</span> f_name     <span class="token operator">|</span> f_price <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------+------------+---------+</span><span class="token operator">|</span> a1   <span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> apple      <span class="token operator">|</span>    <span class="token number">5.20</span> <span class="token operator">|</span><span class="token operator">|</span> a2   <span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span> apricot    <span class="token operator">|</span>    <span class="token number">2.20</span> <span class="token operator">|</span><span class="token operator">|</span> b1   <span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> blackberry <span class="token operator">|</span>   <span class="token number">10.20</span> <span class="token operator">|</span><span class="token operator">|</span> b2   <span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span> berry      <span class="token operator">|</span>    <span class="token number">7.60</span> <span class="token operator">|</span><span class="token operator">|</span> b5   <span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> xxxx       <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">|</span> bs1  <span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> orange     <span class="token operator">|</span>   <span class="token number">11.20</span> <span class="token operator">|</span><span class="token operator">|</span> bs2  <span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> melon      <span class="token operator">|</span>    <span class="token number">8.20</span> <span class="token operator">|</span><span class="token operator">|</span> c0   <span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> cherry     <span class="token operator">|</span>    <span class="token number">3.20</span> <span class="token operator">|</span><span class="token operator">|</span> l2   <span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span> lemon      <span class="token operator">|</span>    <span class="token number">6.40</span> <span class="token operator">|</span><span class="token operator">|</span> m1   <span class="token operator">|</span>  <span class="token number">106</span> <span class="token operator">|</span> mango      <span class="token operator">|</span>   <span class="token number">15.60</span> <span class="token operator">|</span><span class="token operator">|</span> m2   <span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> xbabay     <span class="token operator">|</span>    <span class="token number">2.60</span> <span class="token operator">|</span><span class="token operator">|</span> m3   <span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> xxtt       <span class="token operator">|</span>   <span class="token number">11.60</span> <span class="token operator">|</span><span class="token operator">|</span> o2   <span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span> coconut    <span class="token operator">|</span>    <span class="token number">9.20</span> <span class="token operator">|</span><span class="token operator">|</span> t1   <span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> banana     <span class="token operator">|</span>   <span class="token number">10.30</span> <span class="token operator">|</span><span class="token operator">|</span> t2   <span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> grape      <span class="token operator">|</span>    <span class="token number">5.30</span> <span class="token operator">|</span><span class="token operator">|</span> t4   <span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> xbababa    <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------+------------+---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå¯ä»¥æŒ‡å®šæŸä¸ªï¼ˆæŸäº›ï¼‰å­—æ®µï¼Œå¹¶ä¸”å¯ä»¥æ§åˆ¶å­—æ®µæ˜¯å¦å»é™¤é‡å¤çš„å±æ€§å€¼ï¼<br>$$<br>Î _{f_name,f_price}(fruits)<br>$$</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> f_name<span class="token punctuation">,</span> f_price <span class="token keyword">FROM</span> fruits<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------------+---------+</span><span class="token operator">|</span> f_name     <span class="token operator">|</span> f_price <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+---------+</span><span class="token operator">|</span> apple      <span class="token operator">|</span>    <span class="token number">5.20</span> <span class="token operator">|</span><span class="token operator">|</span> apricot    <span class="token operator">|</span>    <span class="token number">2.20</span> <span class="token operator">|</span><span class="token operator">|</span> blackberry <span class="token operator">|</span>   <span class="token number">10.20</span> <span class="token operator">|</span><span class="token operator">|</span> berry      <span class="token operator">|</span>    <span class="token number">7.60</span> <span class="token operator">|</span><span class="token operator">|</span> xxxx       <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">|</span> orange     <span class="token operator">|</span>   <span class="token number">11.20</span> <span class="token operator">|</span><span class="token operator">|</span> melon      <span class="token operator">|</span>    <span class="token number">8.20</span> <span class="token operator">|</span><span class="token operator">|</span> cherry     <span class="token operator">|</span>    <span class="token number">3.20</span> <span class="token operator">|</span><span class="token operator">|</span> lemon      <span class="token operator">|</span>    <span class="token number">6.40</span> <span class="token operator">|</span><span class="token operator">|</span> mango      <span class="token operator">|</span>   <span class="token number">15.60</span> <span class="token operator">|</span><span class="token operator">|</span> xbabay     <span class="token operator">|</span>    <span class="token number">2.60</span> <span class="token operator">|</span><span class="token operator">|</span> xxtt       <span class="token operator">|</span>   <span class="token number">11.60</span> <span class="token operator">|</span><span class="token operator">|</span> coconut    <span class="token operator">|</span>    <span class="token number">9.20</span> <span class="token operator">|</span><span class="token operator">|</span> banana     <span class="token operator">|</span>   <span class="token number">10.30</span> <span class="token operator">|</span><span class="token operator">|</span> grape      <span class="token operator">|</span>    <span class="token number">5.30</span> <span class="token operator">|</span><span class="token operator">|</span> xbababa    <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è®°å½•"><a href="#è®°å½•" class="headerlink" title="è®°å½•"></a>è®°å½•</h2><p>é€šè¿‡<code>WHERE</code>å­å¥å¯¹åˆ—è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œç­›é€‰å‡ºæ»¡è¶³æ¡ä»¶çš„è®°å½•ï¼ç›¸ç­‰äºå…³ç³»ä»£æ•°ä¸­çš„é€‰æ‹©æ“ä½œ<br>$$<br>Î _{f_name,f_price}(Ïƒ_{f_price &lt; 10}(fruits))<br>$$</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> f_name<span class="token punctuation">,</span> f_price<span class="token keyword">FROM</span> fruits<span class="token keyword">WHERE</span> f_price <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">---------+---------+</span><span class="token operator">|</span> f_name  <span class="token operator">|</span> f_price <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+---------+</span><span class="token operator">|</span> apple   <span class="token operator">|</span>    <span class="token number">5.20</span> <span class="token operator">|</span><span class="token operator">|</span> apricot <span class="token operator">|</span>    <span class="token number">2.20</span> <span class="token operator">|</span><span class="token operator">|</span> berry   <span class="token operator">|</span>    <span class="token number">7.60</span> <span class="token operator">|</span><span class="token operator">|</span> xxxx    <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">|</span> melon   <span class="token operator">|</span>    <span class="token number">8.20</span> <span class="token operator">|</span><span class="token operator">|</span> cherry  <span class="token operator">|</span>    <span class="token number">3.20</span> <span class="token operator">|</span><span class="token operator">|</span> lemon   <span class="token operator">|</span>    <span class="token number">6.40</span> <span class="token operator">|</span><span class="token operator">|</span> xbabay  <span class="token operator">|</span>    <span class="token number">2.60</span> <span class="token operator">|</span><span class="token operator">|</span> coconut <span class="token operator">|</span>    <span class="token number">9.20</span> <span class="token operator">|</span><span class="token operator">|</span> grape   <span class="token operator">|</span>    <span class="token number">5.30</span> <span class="token operator">|</span><span class="token operator">|</span> xbababa <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>WHERE</code>æ”¯æŒæ¡ä»¶è¿ç®—ç¬¦ï¼Œä»¥åŠé€»è¾‘è¿æ¥è¯ï¼š<code>AND ã€OR ã€IN ã€BEWTEEN ANDã€ IS NULLã€ NOT ã€ LIKE</code></p><p><code>IN</code>æŸ¥è¯¢ï¼šæŸ¥è¯¢æ‰€æœ‰s_idä¸ç­‰äº101ä¹Ÿä¸ç­‰äº102çš„è®°å½•</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> s_id<span class="token punctuation">,</span>f_name<span class="token punctuation">,</span> f_price<span class="token keyword">FROM</span> fruits<span class="token keyword">WHERE</span> s_id <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">,</span><span class="token number">102</span><span class="token punctuation">)</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> f_name<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+---------+---------+</span><span class="token operator">|</span> s_id <span class="token operator">|</span> f_name  <span class="token operator">|</span> f_price <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+---------+---------+</span><span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span> apricot <span class="token operator">|</span>    <span class="token number">2.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span> berry   <span class="token operator">|</span>    <span class="token number">7.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span> coconut <span class="token operator">|</span>    <span class="token number">9.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span> lemon   <span class="token operator">|</span>    <span class="token number">6.40</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">106</span> <span class="token operator">|</span> mango   <span class="token operator">|</span>   <span class="token number">15.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> melon   <span class="token operator">|</span>    <span class="token number">8.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> xbababa <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> xbabay  <span class="token operator">|</span>    <span class="token number">2.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> xxtt    <span class="token operator">|</span>   <span class="token number">11.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> xxxx    <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+---------+---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>BEWTEEN AND</code>æŸ¥è¯¢ï¼šæŸ¥è¯¢ä»·æ ¼åœ¨2.00å…ƒåˆ°10.20å…ƒä¹‹é—´çš„æ°´æœåç§°å’Œä»·æ ¼</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> f_name<span class="token punctuation">,</span> f_price<span class="token keyword">FROM</span> fruits<span class="token keyword">WHERE</span> f_price <span class="token operator">BETWEEN</span> <span class="token number">2.00</span> <span class="token operator">AND</span> <span class="token number">10.20</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------------+---------+</span><span class="token operator">|</span> f_name     <span class="token operator">|</span> f_price <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+---------+</span><span class="token operator">|</span> apple      <span class="token operator">|</span>    <span class="token number">5.20</span> <span class="token operator">|</span><span class="token operator">|</span> apricot    <span class="token operator">|</span>    <span class="token number">2.20</span> <span class="token operator">|</span><span class="token operator">|</span> blackberry <span class="token operator">|</span>   <span class="token number">10.20</span> <span class="token operator">|</span><span class="token operator">|</span> berry      <span class="token operator">|</span>    <span class="token number">7.60</span> <span class="token operator">|</span><span class="token operator">|</span> xxxx       <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">|</span> melon      <span class="token operator">|</span>    <span class="token number">8.20</span> <span class="token operator">|</span><span class="token operator">|</span> cherry     <span class="token operator">|</span>    <span class="token number">3.20</span> <span class="token operator">|</span><span class="token operator">|</span> lemon      <span class="token operator">|</span>    <span class="token number">6.40</span> <span class="token operator">|</span><span class="token operator">|</span> xbabay     <span class="token operator">|</span>    <span class="token number">2.60</span> <span class="token operator">|</span><span class="token operator">|</span> coconut    <span class="token operator">|</span>    <span class="token number">9.20</span> <span class="token operator">|</span><span class="token operator">|</span> grape      <span class="token operator">|</span>    <span class="token number">5.30</span> <span class="token operator">|</span><span class="token operator">|</span> xbababa    <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>LIKE</code>æŸ¥è¯¢</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># æŸ¥æ‰¾æ‰€æœ‰ä»¥â€™bâ€™å­—æ¯å¼€å¤´çš„æ°´æœ</span><span class="token keyword">SELECT</span> f_id<span class="token punctuation">,</span> f_name<span class="token keyword">FROM</span> fruits<span class="token keyword">WHERE</span> f_name <span class="token operator">LIKE</span> <span class="token string">'b%'</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+------------+</span><span class="token operator">|</span> f_id <span class="token operator">|</span> f_name     <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------------+</span><span class="token operator">|</span> b1   <span class="token operator">|</span> blackberry <span class="token operator">|</span><span class="token operator">|</span> b2   <span class="token operator">|</span> berry      <span class="token operator">|</span><span class="token operator">|</span> t1   <span class="token operator">|</span> banana     <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------------+</span><span class="token comment"># æŸ¥è¯¢f_nameä¸­åŒ…å«å­—æ¯â€™gâ€™çš„è®°å½•</span>mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> f_id<span class="token punctuation">,</span> f_name    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">FROM</span> fruits    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">WHERE</span> f_name <span class="token operator">LIKE</span> <span class="token string">'%g%'</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+--------+</span><span class="token operator">|</span> f_id <span class="token operator">|</span> f_name <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+--------+</span><span class="token operator">|</span> bs1  <span class="token operator">|</span> orange <span class="token operator">|</span><span class="token operator">|</span> m1   <span class="token operator">|</span> mango  <span class="token operator">|</span><span class="token operator">|</span> t2   <span class="token operator">|</span> grape  <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+--------+</span><span class="token comment"># æŸ¥è¯¢ä»¥â€™bâ€™å¼€å¤´ï¼Œå¹¶ä»¥â€™yâ€™ç»“å°¾çš„æ°´æœçš„åç§°</span><span class="token keyword">SELECT</span> f_name<span class="token keyword">FROM</span> fruits<span class="token keyword">WHERE</span> f_name <span class="token operator">LIKE</span> <span class="token string">'b%y'</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------------+</span><span class="token operator">|</span> f_name     <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+</span><span class="token operator">|</span> blackberry <span class="token operator">|</span><span class="token operator">|</span> berry      <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+</span><span class="token comment"># æŸ¥è¯¢ä»¥å­—æ¯â€™yâ€™ç»“å°¾ï¼Œä¸”â€™yâ€™å‰é¢åªæœ‰4ä¸ªå­—æ¯çš„è®°å½•</span><span class="token keyword">SELECT</span> f_id<span class="token punctuation">,</span> f_name<span class="token keyword">FROM</span> fruits<span class="token keyword">WHERE</span> f_name <span class="token operator">LIKE</span> <span class="token string">'____y'</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+--------+</span><span class="token operator">|</span> f_id <span class="token operator">|</span> f_name <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+--------+</span><span class="token operator">|</span> b2   <span class="token operator">|</span> berry  <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+--------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>NULL</code>æŸ¥è¯¢ï¼š</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># æŸ¥è¯¢customersè¡¨ä¸­c_emailä¸ºç©ºçš„è®°å½•çš„c_idã€c_nameå’Œc_emailå­—æ®µå€¼</span><span class="token keyword">SELECT</span> c_id<span class="token punctuation">,</span> c_name<span class="token punctuation">,</span>c_email<span class="token keyword">FROM</span> customers<span class="token keyword">WHERE</span> c_email <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------+----------+---------+</span><span class="token operator">|</span> c_id  <span class="token operator">|</span> c_name   <span class="token operator">|</span> c_email <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+----------+---------+</span><span class="token operator">|</span> <span class="token number">10003</span> <span class="token operator">|</span> Netbhood <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+----------+---------+</span><span class="token comment"># æŸ¥è¯¢customersè¡¨ä¸­c_emailä¸ä¸ºç©ºçš„è®°å½•çš„c_idã€c_nameå’Œc_emailå­—æ®µå€¼</span><span class="token keyword">SELECT</span> c_id<span class="token punctuation">,</span> c_name<span class="token punctuation">,</span>c_email<span class="token keyword">FROM</span> customers<span class="token keyword">WHERE</span> c_email <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------+---------+-------------------+</span><span class="token operator">|</span> c_id  <span class="token operator">|</span> c_name  <span class="token operator">|</span> c_email           <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+---------+-------------------+</span><span class="token operator">|</span> <span class="token number">10001</span> <span class="token operator">|</span> RedHook <span class="token operator">|</span> LMing<span class="token variable">@163.com</span>     <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10002</span> <span class="token operator">|</span> Stars   <span class="token operator">|</span> Jerry<span class="token variable">@hotmail.com</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10004</span> <span class="token operator">|</span> JOTO    <span class="token operator">|</span> sam<span class="token variable">@hotmail.com</span>   <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+---------+-------------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>AND</code>æŸ¥è¯¢ï¼šåœ¨fruitsè¡¨ä¸­æŸ¥è¯¢s_id = 101ï¼Œå¹¶ä¸”f_priceå¤§äºç­‰äº5çš„æ°´æœä»·æ ¼å’Œåç§°</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> f_id<span class="token punctuation">,</span> f_price<span class="token punctuation">,</span> f_name<span class="token keyword">FROM</span> fruits<span class="token keyword">WHERE</span> s_id <span class="token operator">=</span> <span class="token string">'101'</span> <span class="token operator">AND</span> f_price <span class="token operator">&gt;=</span><span class="token number">5</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+---------+------------+</span><span class="token operator">|</span> f_id <span class="token operator">|</span> f_price <span class="token operator">|</span> f_name     <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+---------+------------+</span><span class="token operator">|</span> a1   <span class="token operator">|</span>    <span class="token number">5.20</span> <span class="token operator">|</span> apple      <span class="token operator">|</span><span class="token operator">|</span> b1   <span class="token operator">|</span>   <span class="token number">10.20</span> <span class="token operator">|</span> blackberry <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+---------+------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>OR</code>æŸ¥è¯¢ï¼šæŸ¥è¯¢s_id=101æˆ–è€…s_id=102çš„æ°´æœä¾›åº”å•†çš„f_priceå’Œf_name</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> s_id<span class="token punctuation">,</span>f_name<span class="token punctuation">,</span> f_price<span class="token keyword">FROM</span> fruits<span class="token keyword">WHERE</span> s_id <span class="token operator">=</span> <span class="token number">101</span> <span class="token operator">OR</span> s_id <span class="token operator">=</span> <span class="token number">102</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+------------+---------+</span><span class="token operator">|</span> s_id <span class="token operator">|</span> f_name     <span class="token operator">|</span> f_price <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------------+---------+</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> apple      <span class="token operator">|</span>    <span class="token number">5.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> blackberry <span class="token operator">|</span>   <span class="token number">10.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> orange     <span class="token operator">|</span>   <span class="token number">11.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> cherry     <span class="token operator">|</span>    <span class="token number">3.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> banana     <span class="token operator">|</span>   <span class="token number">10.30</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> grape      <span class="token operator">|</span>    <span class="token number">5.30</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------------+---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h3><p>åˆ©ç”¨<code>ORDER BY</code>å­å¥ï¼Œå¯¹æŒ‡å®šçš„åˆ—è¿›è¡Œæ’åºæ“ä½œï¼Œé»˜è®¤ä¸º<code>ASC</code>è‹¥è¦é™åºå°±å¿…é¡»åˆ©ç”¨<code>DESC</code>æŒ‡å®šé™åºæ“ä½œï¼</p><p><code>ORDER BY</code>æŸ¥è¯¢ï¼šæŸ¥è¯¢fruitsè¡¨ï¼Œå…ˆæŒ‰f_priceé™åºæ’åºï¼Œå†æŒ‰f_nameå­—æ®µå‡åºæ’åº</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> f_price<span class="token punctuation">,</span> f_name<span class="token keyword">FROM</span> fruits<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> f_price <span class="token keyword">DESC</span><span class="token punctuation">,</span> f_name<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">---------+------------+</span><span class="token operator">|</span> f_price <span class="token operator">|</span> f_name     <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+------------+</span><span class="token operator">|</span>   <span class="token number">15.60</span> <span class="token operator">|</span> mango      <span class="token operator">|</span><span class="token operator">|</span>   <span class="token number">11.60</span> <span class="token operator">|</span> xxtt       <span class="token operator">|</span><span class="token operator">|</span>   <span class="token number">11.20</span> <span class="token operator">|</span> orange     <span class="token operator">|</span><span class="token operator">|</span>   <span class="token number">10.30</span> <span class="token operator">|</span> banana     <span class="token operator">|</span><span class="token operator">|</span>   <span class="token number">10.20</span> <span class="token operator">|</span> blackberry <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">9.20</span> <span class="token operator">|</span> coconut    <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">8.20</span> <span class="token operator">|</span> melon      <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">7.60</span> <span class="token operator">|</span> berry      <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">6.40</span> <span class="token operator">|</span> lemon      <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">5.30</span> <span class="token operator">|</span> grape      <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">5.20</span> <span class="token operator">|</span> apple      <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span> xbababa    <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span> xxxx       <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">3.20</span> <span class="token operator">|</span> cherry     <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">2.60</span> <span class="token operator">|</span> xbabay     <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">2.20</span> <span class="token operator">|</span> apricot    <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ†ç»„æŸ¥è¯¢"><a href="#åˆ†ç»„æŸ¥è¯¢" class="headerlink" title="åˆ†ç»„æŸ¥è¯¢"></a>åˆ†ç»„æŸ¥è¯¢</h3><p><code>GROUP BY</code>æŸ¥è¯¢ï¼šæ ¹æ®s_idå¯¹fruitsè¡¨ä¸­çš„æ•°æ®è¿›è¡Œåˆ†ç»„</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> s_id<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> Total<span class="token keyword">FROM</span> fruits<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> s_id<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+-------+</span><span class="token operator">|</span> s_id <span class="token operator">|</span> Total <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+-------+</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">106</span> <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+-------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>â€œæ³¨â€</strong> ï¼šè¿™é‡Œé€šè¿‡ä¸€ä¸ªèšé›†å‡½æ•°<code>COUNT</code>è®¡ç®—å‡ºæ¯ä¸ªåˆ†ç»„å«æœ‰çš„æ•°ç›®</p><p>å½“ç„¶æˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°<code>GROUP_CONCAT</code>å°†æ¯ä¸ªåˆ†ç»„çš„æ°´æœåç§°æ˜¾ç¤ºå‡ºæ¥ï¼Œå¹¶ä¸”é€šè¿‡<code>HAVING</code>å­å¥å¯¹åˆ†ç»„è¿›è¡Œè¿‡æ»¤ï¼Œæ’é™¤åˆ†ç»„æ•°ç›®ä¸ºä¸€ä¸ªçš„ç»„çš„æ°´æœåç§°ï¼</p><p>æ ¹æ®s_idå¯¹fruitsè¡¨ä¸­çš„æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œå¹¶æ˜¾ç¤ºæ°´æœç§ç±»å¤§äº1çš„åˆ†ç»„ä¿¡æ¯</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> s_id<span class="token punctuation">,</span> GROUP_CONCAT<span class="token punctuation">(</span>f_name<span class="token punctuation">)</span> <span class="token keyword">AS</span> Names    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">FROM</span> fruits    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> s_id    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>f_name<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+-------------------------+</span><span class="token operator">|</span> s_id <span class="token operator">|</span> Names                   <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+-------------------------+</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> apple<span class="token punctuation">,</span>blackberry<span class="token punctuation">,</span>cherry <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> orange<span class="token punctuation">,</span>banana<span class="token punctuation">,</span>grape     <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span> apricot<span class="token punctuation">,</span>coconut         <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span> berry<span class="token punctuation">,</span>lemon             <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> melon<span class="token punctuation">,</span>xbabay<span class="token punctuation">,</span>xxtt       <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> xxxx<span class="token punctuation">,</span>xbababa            <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+-------------------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨<code>MySQL</code>ä¸­è¿˜æä¾›äº†ä¸€ä¸ªå…³é”®æ“ä½œ<code>WITH ROLLUP</code>ç»Ÿè®¡è®°å½•çš„æ•°é‡ã€‚<b style="color: chocolate;">ï¼ˆORDER BYä¸WITH ROLLUPå…·æœ‰ä¸å…¼å®¹æ€§ï¼‰</b></p><p>æ ¹æ®s_idå¯¹fruitsè¡¨ä¸­çš„æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œå¹¶æ˜¾ç¤ºè®°å½•æ•°é‡</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> s_id<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> Total    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">FROM</span> fruits    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> s_id <span class="token keyword">WITH ROLLUP</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+-------+</span><span class="token operator">|</span> s_id <span class="token operator">|</span> Total <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+-------+</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">106</span> <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">16</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+-------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“å‰æ‰€æœ‰çš„åˆ†ç»„éƒ½æ˜¯é’ˆå¯¹ä¸€ä¸ªåˆ—ï¼Œé‚£ä¹ˆ<code>GROUP BY</code>ä¾æ—§æ”¯æŒæ˜¯å¤šåˆ—åˆ†ç»„ï¼</p><p>æ ¹æ®s_idå’Œf_nameå­—æ®µå¯¹fruitsè¡¨ä¸­çš„æ•°æ®è¿›è¡Œåˆ†ç»„</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">&gt;</span>  <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> fruits    <span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token keyword">group</span> <span class="token keyword">by</span> s_id<span class="token punctuation">,</span>f_name<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+------+------------+---------+</span><span class="token operator">|</span> f_id <span class="token operator">|</span> s_id <span class="token operator">|</span> f_name     <span class="token operator">|</span> f_price <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------+------------+---------+</span><span class="token operator">|</span> a1   <span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> apple      <span class="token operator">|</span>    <span class="token number">5.20</span> <span class="token operator">|</span><span class="token operator">|</span> a2   <span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span> apricot    <span class="token operator">|</span>    <span class="token number">2.20</span> <span class="token operator">|</span><span class="token operator">|</span> b1   <span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> blackberry <span class="token operator">|</span>   <span class="token number">10.20</span> <span class="token operator">|</span><span class="token operator">|</span> b2   <span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span> berry      <span class="token operator">|</span>    <span class="token number">7.60</span> <span class="token operator">|</span><span class="token operator">|</span> b5   <span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> xxxx       <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">|</span> bs1  <span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> orange     <span class="token operator">|</span>   <span class="token number">11.20</span> <span class="token operator">|</span><span class="token operator">|</span> bs2  <span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> melon      <span class="token operator">|</span>    <span class="token number">8.20</span> <span class="token operator">|</span><span class="token operator">|</span> c0   <span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> cherry     <span class="token operator">|</span>    <span class="token number">3.20</span> <span class="token operator">|</span><span class="token operator">|</span> l2   <span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span> lemon      <span class="token operator">|</span>    <span class="token number">6.40</span> <span class="token operator">|</span><span class="token operator">|</span> m1   <span class="token operator">|</span>  <span class="token number">106</span> <span class="token operator">|</span> mango      <span class="token operator">|</span>   <span class="token number">15.60</span> <span class="token operator">|</span><span class="token operator">|</span> m2   <span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> xbabay     <span class="token operator">|</span>    <span class="token number">2.60</span> <span class="token operator">|</span><span class="token operator">|</span> m3   <span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> xxtt       <span class="token operator">|</span>   <span class="token number">11.60</span> <span class="token operator">|</span><span class="token operator">|</span> o2   <span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span> coconut    <span class="token operator">|</span>    <span class="token number">9.20</span> <span class="token operator">|</span><span class="token operator">|</span> t1   <span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> banana     <span class="token operator">|</span>   <span class="token number">10.30</span> <span class="token operator">|</span><span class="token operator">|</span> t2   <span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> grape      <span class="token operator">|</span>    <span class="token number">5.30</span> <span class="token operator">|</span><span class="token operator">|</span> t4   <span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> xbababa    <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------+------------+---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>GROUP BY</code>å’Œ<code>ORDER BY</code>é…åˆä½¿ç”¨</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> o_num<span class="token punctuation">,</span>  <span class="token function">SUM</span><span class="token punctuation">(</span>quantity <span class="token operator">*</span> item_price<span class="token punctuation">)</span> <span class="token keyword">AS</span> orderTotal    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">FROM</span> orderitems    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> o_num    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">HAVING</span> <span class="token function">SUM</span><span class="token punctuation">(</span>quantity<span class="token operator">*</span>item_price<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">100</span>    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> orderTotal<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------+------------+</span><span class="token operator">|</span> o_num <span class="token operator">|</span> orderTotal <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+------------+</span><span class="token operator">|</span> <span class="token number">30004</span> <span class="token operator">|</span>     <span class="token number">125.00</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">30005</span> <span class="token operator">|</span>     <span class="token number">236.85</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">30001</span> <span class="token operator">|</span>     <span class="token number">268.80</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">30003</span> <span class="token operator">|</span>    <span class="token number">1000.00</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="limité™åˆ¶ç»“æœæ•°é‡"><a href="#limité™åˆ¶ç»“æœæ•°é‡" class="headerlink" title="limité™åˆ¶ç»“æœæ•°é‡"></a>limité™åˆ¶ç»“æœæ•°é‡</h3><p>æ˜¾ç¤ºfruitsè¡¨æŸ¥è¯¢ç»“æœçš„å‰4è¡Œ</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">From</span> fruits <span class="token keyword">LIMIT</span> <span class="token number">4</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+------+------------+---------+</span><span class="token operator">|</span> f_id <span class="token operator">|</span> s_id <span class="token operator">|</span> f_name     <span class="token operator">|</span> f_price <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------+------------+---------+</span><span class="token operator">|</span> a1   <span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> apple      <span class="token operator">|</span>    <span class="token number">5.20</span> <span class="token operator">|</span><span class="token operator">|</span> a2   <span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span> apricot    <span class="token operator">|</span>    <span class="token number">2.20</span> <span class="token operator">|</span><span class="token operator">|</span> b1   <span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> blackberry <span class="token operator">|</span>   <span class="token number">10.20</span> <span class="token operator">|</span><span class="token operator">|</span> b2   <span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span> berry      <span class="token operator">|</span>    <span class="token number">7.60</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------+------------+---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨fruitsè¡¨ä¸­ï¼Œä½¿ç”¨LIMITå­å¥ï¼Œè¿”å›ä»ç¬¬5ä¸ªè®°å½•å¼€å§‹çš„ï¼Œè¡Œæ•°é•¿åº¦ä¸º3çš„è®°å½•</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">From</span> fruits <span class="token keyword">LIMIT</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+------+--------+---------+</span><span class="token operator">|</span> f_id <span class="token operator">|</span> s_id <span class="token operator">|</span> f_name <span class="token operator">|</span> f_price <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------+--------+---------+</span><span class="token operator">|</span> b5   <span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> xxxx   <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">|</span> bs1  <span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> orange <span class="token operator">|</span>   <span class="token number">11.20</span> <span class="token operator">|</span><span class="token operator">|</span> bs2  <span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> melon  <span class="token operator">|</span>    <span class="token number">8.20</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------+--------+---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="èšé›†å‡½æ•°"><a href="#èšé›†å‡½æ•°" class="headerlink" title="èšé›†å‡½æ•°"></a>èšé›†å‡½æ•°</h3><table><thead><tr><th>èšé›†å‡½æ•°</th></tr></thead><tbody><tr><td>MAX()</td></tr><tr><td>MIN()</td></tr><tr><td>AVG()</td></tr><tr><td>COUNT()</td></tr><tr><td>SUM()</td></tr></tbody></table><h1 id="å¤šè¡¨æŸ¥è¯¢"><a href="#å¤šè¡¨æŸ¥è¯¢" class="headerlink" title="å¤šè¡¨æŸ¥è¯¢"></a>å¤šè¡¨æŸ¥è¯¢</h1><p>å¤šè¡¨æŸ¥è¯¢ä¸»è¦æ˜¯åŠ å…¥äº†å¤šä¸ªè¡¨çš„è¿æ¥æŸ¥è¯¢æ“ä½œï¼Œä¸»è¦åˆ†ä¸º <strong>theta-join</strong> å’Œ <strong>outer-join</strong></p><h2 id="æ —å­å…³ç³»è¡¨-1"><a href="#æ —å­å…³ç³»è¡¨-1" class="headerlink" title="æ —å­å…³ç³»è¡¨"></a>æ —å­å…³ç³»è¡¨</h2><p>æ —å­å…³ç³»<code>suppliers</code>ï¼šä¾›åº”å•†</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># create tb_suppliers</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> suppliers<span class="token punctuation">(</span>  s_id      <span class="token keyword">int</span>      <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>  s_name    <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  s_city    <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  s_zip     <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  s_call    <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>s_id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token comment"># insert data into tb_suppliers</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> suppliers<span class="token punctuation">(</span>s_id<span class="token punctuation">,</span> s_name<span class="token punctuation">,</span>s_city<span class="token punctuation">,</span>  s_zip<span class="token punctuation">,</span> s_call<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">,</span><span class="token string">'FastFruit Inc.'</span><span class="token punctuation">,</span><span class="token string">'Tianjin'</span><span class="token punctuation">,</span><span class="token string">'300000'</span><span class="token punctuation">,</span><span class="token string">'48075'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">102</span><span class="token punctuation">,</span><span class="token string">'LT Supplies'</span><span class="token punctuation">,</span><span class="token string">'Chongqing'</span><span class="token punctuation">,</span><span class="token string">'400000'</span><span class="token punctuation">,</span><span class="token string">'44333'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">103</span><span class="token punctuation">,</span><span class="token string">'ACME'</span><span class="token punctuation">,</span><span class="token string">'Shanghai'</span><span class="token punctuation">,</span><span class="token string">'200000'</span><span class="token punctuation">,</span><span class="token string">'90046'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">104</span><span class="token punctuation">,</span><span class="token string">'FNK Inc.'</span><span class="token punctuation">,</span><span class="token string">'Zhongshan'</span><span class="token punctuation">,</span><span class="token string">'528437'</span><span class="token punctuation">,</span><span class="token string">'11111'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">105</span><span class="token punctuation">,</span><span class="token string">'Good Set'</span><span class="token punctuation">,</span><span class="token string">'Taiyuang'</span><span class="token punctuation">,</span><span class="token string">'030000'</span><span class="token punctuation">,</span> <span class="token string">'22222'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">106</span><span class="token punctuation">,</span><span class="token string">'Just Eat Ours'</span><span class="token punctuation">,</span><span class="token string">'Beijing'</span><span class="token punctuation">,</span><span class="token string">'010'</span><span class="token punctuation">,</span> <span class="token string">'45678'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">107</span><span class="token punctuation">,</span><span class="token string">'DK Inc.'</span><span class="token punctuation">,</span><span class="token string">'Zhengzhou'</span><span class="token punctuation">,</span><span class="token string">'450000'</span><span class="token punctuation">,</span> <span class="token string">'33332'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ —å­å…³ç³»è¡¨<code>orders</code>ï¼šè®¢å•</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># create tb_orders</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> orders<span class="token punctuation">(</span>  o_num  <span class="token keyword">int</span>      <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>  o_date <span class="token keyword">datetime</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  c_id   <span class="token keyword">int</span>      <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>o_num<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token comment"># insert data into tb_orders</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> orders<span class="token punctuation">(</span>o_num<span class="token punctuation">,</span> o_date<span class="token punctuation">,</span> c_id<span class="token punctuation">)</span><span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token number">30001</span><span class="token punctuation">,</span> <span class="token string">'2008-09-01'</span><span class="token punctuation">,</span> <span class="token number">10001</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">30002</span><span class="token punctuation">,</span> <span class="token string">'2008-09-12'</span><span class="token punctuation">,</span> <span class="token number">10003</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">30003</span><span class="token punctuation">,</span> <span class="token string">'2008-09-30'</span><span class="token punctuation">,</span> <span class="token number">10004</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">30004</span><span class="token punctuation">,</span> <span class="token string">'2008-10-03'</span><span class="token punctuation">,</span> <span class="token number">10005</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">30005</span><span class="token punctuation">,</span> <span class="token string">'2008-10-08'</span><span class="token punctuation">,</span> <span class="token number">10001</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è¿æ¥"><a href="#è¿æ¥" class="headerlink" title="è¿æ¥"></a>è¿æ¥</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> suppliers<span class="token punctuation">.</span>s_id<span class="token punctuation">,</span> s_name<span class="token punctuation">,</span>f_name<span class="token punctuation">,</span> f_price    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">FROM</span> suppliers <span class="token keyword">natural</span> <span class="token keyword">join</span> fruits<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+----------------+------------+---------+</span><span class="token operator">|</span> s_id <span class="token operator">|</span> s_name         <span class="token operator">|</span> f_name     <span class="token operator">|</span> f_price <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+----------------+------------+---------+</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> FastFruit Inc<span class="token punctuation">.</span> <span class="token operator">|</span> apple      <span class="token operator">|</span>    <span class="token number">5.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span> ACME           <span class="token operator">|</span> apricot    <span class="token operator">|</span>    <span class="token number">2.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> FastFruit Inc<span class="token punctuation">.</span> <span class="token operator">|</span> blackberry <span class="token operator">|</span>   <span class="token number">10.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span> FNK Inc<span class="token punctuation">.</span>       <span class="token operator">|</span> berry      <span class="token operator">|</span>    <span class="token number">7.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> DK Inc<span class="token punctuation">.</span>        <span class="token operator">|</span> xxxx       <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> LT Supplies    <span class="token operator">|</span> orange     <span class="token operator">|</span>   <span class="token number">11.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> Good <span class="token keyword">Set</span>       <span class="token operator">|</span> melon      <span class="token operator">|</span>    <span class="token number">8.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> FastFruit Inc<span class="token punctuation">.</span> <span class="token operator">|</span> cherry     <span class="token operator">|</span>    <span class="token number">3.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span> FNK Inc<span class="token punctuation">.</span>       <span class="token operator">|</span> lemon      <span class="token operator">|</span>    <span class="token number">6.40</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">106</span> <span class="token operator">|</span> Just Eat Ours  <span class="token operator">|</span> mango      <span class="token operator">|</span>   <span class="token number">15.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> Good <span class="token keyword">Set</span>       <span class="token operator">|</span> xbabay     <span class="token operator">|</span>    <span class="token number">2.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> Good <span class="token keyword">Set</span>       <span class="token operator">|</span> xxtt       <span class="token operator">|</span>   <span class="token number">11.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span> ACME           <span class="token operator">|</span> coconut    <span class="token operator">|</span>    <span class="token number">9.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> LT Supplies    <span class="token operator">|</span> banana     <span class="token operator">|</span>   <span class="token number">10.30</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> LT Supplies    <span class="token operator">|</span> grape      <span class="token operator">|</span>    <span class="token number">5.30</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> DK Inc<span class="token punctuation">.</span>        <span class="token operator">|</span> xbababa    <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+----------------+------------+---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å†…è¿æ¥"><a href="#å†…è¿æ¥" class="headerlink" title="å†…è¿æ¥"></a>å†…è¿æ¥</h3><p>é€šè¿‡å¹¿ä¹‰çš„ç¬›å¡å°”ç§¯å®ç°æŸ¥è¯¢ï¼Œä¾›åº”å•†ä¾›åº”çš„åç§°ã€idï¼Œä»¥åŠä¾›åº”æ°´æœçš„åç§°ã€é”€å”®ä»·æ ¼ï¼</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">&gt;</span>  <span class="token keyword">SELECT</span> suppliers<span class="token punctuation">.</span>s_id<span class="token punctuation">,</span> s_name<span class="token punctuation">,</span>f_name<span class="token punctuation">,</span> f_price    <span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token keyword">FROM</span> fruits <span class="token punctuation">,</span>suppliers    <span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token keyword">WHERE</span> fruits<span class="token punctuation">.</span>s_id <span class="token operator">=</span> suppliers<span class="token punctuation">.</span>s_id<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+----------------+------------+---------+</span><span class="token operator">|</span> s_id <span class="token operator">|</span> s_name         <span class="token operator">|</span> f_name     <span class="token operator">|</span> f_price <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+----------------+------------+---------+</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> FastFruit Inc<span class="token punctuation">.</span> <span class="token operator">|</span> apple      <span class="token operator">|</span>    <span class="token number">5.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span> ACME           <span class="token operator">|</span> apricot    <span class="token operator">|</span>    <span class="token number">2.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> FastFruit Inc<span class="token punctuation">.</span> <span class="token operator">|</span> blackberry <span class="token operator">|</span>   <span class="token number">10.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span> FNK Inc<span class="token punctuation">.</span>       <span class="token operator">|</span> berry      <span class="token operator">|</span>    <span class="token number">7.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> DK Inc<span class="token punctuation">.</span>        <span class="token operator">|</span> xxxx       <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> LT Supplies    <span class="token operator">|</span> orange     <span class="token operator">|</span>   <span class="token number">11.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> Good <span class="token keyword">Set</span>       <span class="token operator">|</span> melon      <span class="token operator">|</span>    <span class="token number">8.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> FastFruit Inc<span class="token punctuation">.</span> <span class="token operator">|</span> cherry     <span class="token operator">|</span>    <span class="token number">3.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span> FNK Inc<span class="token punctuation">.</span>       <span class="token operator">|</span> lemon      <span class="token operator">|</span>    <span class="token number">6.40</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">106</span> <span class="token operator">|</span> Just Eat Ours  <span class="token operator">|</span> mango      <span class="token operator">|</span>   <span class="token number">15.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> Good <span class="token keyword">Set</span>       <span class="token operator">|</span> xbabay     <span class="token operator">|</span>    <span class="token number">2.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> Good <span class="token keyword">Set</span>       <span class="token operator">|</span> xxtt       <span class="token operator">|</span>   <span class="token number">11.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span> ACME           <span class="token operator">|</span> coconut    <span class="token operator">|</span>    <span class="token number">9.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> LT Supplies    <span class="token operator">|</span> banana     <span class="token operator">|</span>   <span class="token number">10.30</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> LT Supplies    <span class="token operator">|</span> grape      <span class="token operator">|</span>    <span class="token number">5.30</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> DK Inc<span class="token punctuation">.</span>        <span class="token operator">|</span> xbababa    <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+----------------+------------+---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»ä¸Šé¢çš„æ“ä½œå¾ˆæ˜¾ç„¶è¿™ä¸ªæ˜¯ç­‰ä»·äºè‡ªç„¶è¿æ¥æ“ä½œ<strong>ï¼ˆNatural-Joinï¼‰</strong>ï¼Œä¸Šé¢ä»£ç æœ‰å¦å¤–çš„ç­‰ä»·å†™æ³•ï¼</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">&gt;</span>  <span class="token keyword">SELECT</span> suppliers<span class="token punctuation">.</span>s_id<span class="token punctuation">,</span> s_name<span class="token punctuation">,</span>f_name<span class="token punctuation">,</span> f_price    <span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token keyword">FROM</span> fruits <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> suppliers    <span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token keyword">ON</span> fruits<span class="token punctuation">.</span>s_id <span class="token operator">=</span> suppliers<span class="token punctuation">.</span>s_id<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+----------------+------------+---------+</span><span class="token operator">|</span> s_id <span class="token operator">|</span> s_name         <span class="token operator">|</span> f_name     <span class="token operator">|</span> f_price <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+----------------+------------+---------+</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> FastFruit Inc<span class="token punctuation">.</span> <span class="token operator">|</span> apple      <span class="token operator">|</span>    <span class="token number">5.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span> ACME           <span class="token operator">|</span> apricot    <span class="token operator">|</span>    <span class="token number">2.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> FastFruit Inc<span class="token punctuation">.</span> <span class="token operator">|</span> blackberry <span class="token operator">|</span>   <span class="token number">10.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span> FNK Inc<span class="token punctuation">.</span>       <span class="token operator">|</span> berry      <span class="token operator">|</span>    <span class="token number">7.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> DK Inc<span class="token punctuation">.</span>        <span class="token operator">|</span> xxxx       <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> LT Supplies    <span class="token operator">|</span> orange     <span class="token operator">|</span>   <span class="token number">11.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> Good <span class="token keyword">Set</span>       <span class="token operator">|</span> melon      <span class="token operator">|</span>    <span class="token number">8.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> FastFruit Inc<span class="token punctuation">.</span> <span class="token operator">|</span> cherry     <span class="token operator">|</span>    <span class="token number">3.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span> FNK Inc<span class="token punctuation">.</span>       <span class="token operator">|</span> lemon      <span class="token operator">|</span>    <span class="token number">6.40</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">106</span> <span class="token operator">|</span> Just Eat Ours  <span class="token operator">|</span> mango      <span class="token operator">|</span>   <span class="token number">15.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> Good <span class="token keyword">Set</span>       <span class="token operator">|</span> xbabay     <span class="token operator">|</span>    <span class="token number">2.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> Good <span class="token keyword">Set</span>       <span class="token operator">|</span> xxtt       <span class="token operator">|</span>   <span class="token number">11.60</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span> ACME           <span class="token operator">|</span> coconut    <span class="token operator">|</span>    <span class="token number">9.20</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> LT Supplies    <span class="token operator">|</span> banana     <span class="token operator">|</span>   <span class="token number">10.30</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> LT Supplies    <span class="token operator">|</span> grape      <span class="token operator">|</span>    <span class="token number">5.30</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> DK Inc<span class="token punctuation">.</span>        <span class="token operator">|</span> xbababa    <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+----------------+------------+---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­¤æ—¶æ‰æ˜¯çœŸæ­£çš„è¿æ¥æŸ¥è¯¢ï¼Œï¼ˆINNER JOINâ€¦ONï¼‰çš„è¯­æ³•å±äºä¸€èˆ¬æƒ…å†µçš„ï¼ˆÎ¸-jionï¼‰ã€‚è¿æ¥æ¡ä»¶Î¸ï¼šON å­å¥è¡¨ç¤ºï¼Œå¯¹äºå®ç°è‡ªç„¶è¿æ¥æ—¶ï¼Œä¹Ÿå¯ä»¥åŠ å…¥usingå­å¥ï¼ˆINNER JOINâ€¦USING(col_name)ï¼‰</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span>    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> fruits <span class="token keyword">join</span> suppliers <span class="token keyword">using</span><span class="token punctuation">(</span>s_id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+------+------------+---------+----------------+-----------+--------+--------+</span><span class="token operator">|</span> s_id <span class="token operator">|</span> f_id <span class="token operator">|</span> f_name     <span class="token operator">|</span> f_price <span class="token operator">|</span> s_name         <span class="token operator">|</span> s_city    <span class="token operator">|</span> s_zip  <span class="token operator">|</span> s_call <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------+------------+---------+----------------+-----------+--------+--------+</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> a1   <span class="token operator">|</span> apple      <span class="token operator">|</span>    <span class="token number">5.20</span> <span class="token operator">|</span> FastFruit Inc<span class="token punctuation">.</span> <span class="token operator">|</span> Tianjin   <span class="token operator">|</span> <span class="token number">300000</span> <span class="token operator">|</span> <span class="token number">48075</span>  <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span> a2   <span class="token operator">|</span> apricot    <span class="token operator">|</span>    <span class="token number">2.20</span> <span class="token operator">|</span> ACME           <span class="token operator">|</span> Shanghai  <span class="token operator">|</span> <span class="token number">200000</span> <span class="token operator">|</span> <span class="token number">90046</span>  <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> b1   <span class="token operator">|</span> blackberry <span class="token operator">|</span>   <span class="token number">10.20</span> <span class="token operator">|</span> FastFruit Inc<span class="token punctuation">.</span> <span class="token operator">|</span> Tianjin   <span class="token operator">|</span> <span class="token number">300000</span> <span class="token operator">|</span> <span class="token number">48075</span>  <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span> b2   <span class="token operator">|</span> berry      <span class="token operator">|</span>    <span class="token number">7.60</span> <span class="token operator">|</span> FNK Inc<span class="token punctuation">.</span>       <span class="token operator">|</span> Zhongshan <span class="token operator">|</span> <span class="token number">528437</span> <span class="token operator">|</span> <span class="token number">11111</span>  <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> b5   <span class="token operator">|</span> xxxx       <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span> DK Inc<span class="token punctuation">.</span>        <span class="token operator">|</span> Zhengzhou <span class="token operator">|</span> <span class="token number">450000</span> <span class="token operator">|</span> <span class="token number">33332</span>  <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> bs1  <span class="token operator">|</span> orange     <span class="token operator">|</span>   <span class="token number">11.20</span> <span class="token operator">|</span> LT Supplies    <span class="token operator">|</span> Chongqing <span class="token operator">|</span> <span class="token number">400000</span> <span class="token operator">|</span> <span class="token number">44333</span>  <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> bs2  <span class="token operator">|</span> melon      <span class="token operator">|</span>    <span class="token number">8.20</span> <span class="token operator">|</span> Good <span class="token keyword">Set</span>       <span class="token operator">|</span> Taiyuang  <span class="token operator">|</span> <span class="token number">030000</span> <span class="token operator">|</span> <span class="token number">22222</span>  <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> c0   <span class="token operator">|</span> cherry     <span class="token operator">|</span>    <span class="token number">3.20</span> <span class="token operator">|</span> FastFruit Inc<span class="token punctuation">.</span> <span class="token operator">|</span> Tianjin   <span class="token operator">|</span> <span class="token number">300000</span> <span class="token operator">|</span> <span class="token number">48075</span>  <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">104</span> <span class="token operator">|</span> l2   <span class="token operator">|</span> lemon      <span class="token operator">|</span>    <span class="token number">6.40</span> <span class="token operator">|</span> FNK Inc<span class="token punctuation">.</span>       <span class="token operator">|</span> Zhongshan <span class="token operator">|</span> <span class="token number">528437</span> <span class="token operator">|</span> <span class="token number">11111</span>  <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">106</span> <span class="token operator">|</span> m1   <span class="token operator">|</span> mango      <span class="token operator">|</span>   <span class="token number">15.60</span> <span class="token operator">|</span> Just Eat Ours  <span class="token operator">|</span> Beijing   <span class="token operator">|</span> <span class="token number">010</span>    <span class="token operator">|</span> <span class="token number">45678</span>  <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> m2   <span class="token operator">|</span> xbabay     <span class="token operator">|</span>    <span class="token number">2.60</span> <span class="token operator">|</span> Good <span class="token keyword">Set</span>       <span class="token operator">|</span> Taiyuang  <span class="token operator">|</span> <span class="token number">030000</span> <span class="token operator">|</span> <span class="token number">22222</span>  <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">105</span> <span class="token operator">|</span> m3   <span class="token operator">|</span> xxtt       <span class="token operator">|</span>   <span class="token number">11.60</span> <span class="token operator">|</span> Good <span class="token keyword">Set</span>       <span class="token operator">|</span> Taiyuang  <span class="token operator">|</span> <span class="token number">030000</span> <span class="token operator">|</span> <span class="token number">22222</span>  <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">103</span> <span class="token operator">|</span> o2   <span class="token operator">|</span> coconut    <span class="token operator">|</span>    <span class="token number">9.20</span> <span class="token operator">|</span> ACME           <span class="token operator">|</span> Shanghai  <span class="token operator">|</span> <span class="token number">200000</span> <span class="token operator">|</span> <span class="token number">90046</span>  <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> t1   <span class="token operator">|</span> banana     <span class="token operator">|</span>   <span class="token number">10.30</span> <span class="token operator">|</span> LT Supplies    <span class="token operator">|</span> Chongqing <span class="token operator">|</span> <span class="token number">400000</span> <span class="token operator">|</span> <span class="token number">44333</span>  <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">102</span> <span class="token operator">|</span> t2   <span class="token operator">|</span> grape      <span class="token operator">|</span>    <span class="token number">5.30</span> <span class="token operator">|</span> LT Supplies    <span class="token operator">|</span> Chongqing <span class="token operator">|</span> <span class="token number">400000</span> <span class="token operator">|</span> <span class="token number">44333</span>  <span class="token operator">|</span><span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> t4   <span class="token operator">|</span> xbababa    <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span> DK Inc<span class="token punctuation">.</span>        <span class="token operator">|</span> Zhengzhou <span class="token operator">|</span> <span class="token number">450000</span> <span class="token operator">|</span> <span class="token number">33332</span>  <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------+------------+---------+----------------+-----------+--------+--------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>$$<br>Î _{s_id,s_name,f_name,f_price}(fruitsâ–»â—…suppliers)<br>$$</p><p>$$<br>Î _{s_id,s_name,f_name,f_price}(Ïƒ_{fruits.s_id = suppliers.s_id}(fruitsÃ—suppliers))<br>$$</p><h3 id="å¤–è¿æ¥"><a href="#å¤–è¿æ¥" class="headerlink" title="å¤–è¿æ¥"></a>å¤–è¿æ¥</h3><p>ä¸€èˆ¬çš„ï¼ˆÎ¸-jionï¼‰åªèƒ½ä¿ç•™æ»¡è¶³åŒ¹é…æ¡ä»¶çš„å…ƒç»„ï¼Œå¯¹äºå“ªäº›ä¸æ»¡è¶³çš„å…ƒç»„åˆ é™¤ã€‚æ‰€ä»¥å¼•å…¥äº†å¤–è¿æ¥ï¼Œå¯¹äºä¸æ»¡è¶³è¿æ¥æ¡ä»¶çš„å…ƒç»„ï¼Œé‡‡å–å¯¹åº”å±æ€§åˆ—ç½®ç©ºçš„æƒ…å†µï¼Œä¿ç•™ç›¸åº”çš„ä¸åŒ¹é…å…ƒç»„ã€‚</p><ul><li><strong>LEFT OUTER JOIN</strong></li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token operator">+</span><span class="token comment">-------+----------+---------------------+---------+--------+-----------+-------------------+</span><span class="token operator">|</span> c_id  <span class="token operator">|</span> c_name   <span class="token operator">|</span> c_address           <span class="token operator">|</span> c_city  <span class="token operator">|</span> c_zip  <span class="token operator">|</span> c_contact <span class="token operator">|</span> c_email           <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+----------+---------------------+---------+--------+-----------+-------------------+</span><span class="token operator">|</span> <span class="token number">10001</span> <span class="token operator">|</span> RedHook  <span class="token operator">|</span> <span class="token number">200</span> Street          <span class="token operator">|</span> Tianjin <span class="token operator">|</span> <span class="token number">300000</span> <span class="token operator">|</span> LiMing    <span class="token operator">|</span> LMing<span class="token variable">@163.com</span>     <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10002</span> <span class="token operator">|</span> Stars    <span class="token operator">|</span> <span class="token number">333</span> Fromage Lane    <span class="token operator">|</span> Dalian  <span class="token operator">|</span> <span class="token number">116000</span> <span class="token operator">|</span> Zhangbo   <span class="token operator">|</span> Jerry<span class="token variable">@hotmail.com</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10003</span> <span class="token operator">|</span> Netbhood <span class="token operator">|</span> <span class="token number">1</span> Sunny Place       <span class="token operator">|</span> Qingdao <span class="token operator">|</span> <span class="token number">266000</span> <span class="token operator">|</span> LuoCong   <span class="token operator">|</span> <span class="token boolean">NULL</span>              <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10004</span> <span class="token operator">|</span> JOTO     <span class="token operator">|</span> <span class="token number">829</span> Riverside Drive <span class="token operator">|</span> Haikou  <span class="token operator">|</span> <span class="token number">570000</span> <span class="token operator">|</span> YangShan  <span class="token operator">|</span> sam<span class="token variable">@hotmail.com</span>   <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+----------+---------------------+---------+--------+-----------+-------------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token operator">+</span><span class="token comment">-------+---------------------+-------+</span><span class="token operator">|</span> o_num <span class="token operator">|</span> o_date              <span class="token operator">|</span> c_id  <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+---------------------+-------+</span><span class="token operator">|</span> <span class="token number">30001</span> <span class="token operator">|</span> <span class="token number">2008</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">01</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">10001</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">30002</span> <span class="token operator">|</span> <span class="token number">2008</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">12</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">10003</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">30003</span> <span class="token operator">|</span> <span class="token number">2008</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">30</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">10004</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">30004</span> <span class="token operator">|</span> <span class="token number">2008</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">03</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">10005</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">30005</span> <span class="token operator">|</span> <span class="token number">2008</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token number">10001</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+---------------------+-------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">&gt;</span>  <span class="token keyword">SELECT</span> customers<span class="token punctuation">.</span>c_id<span class="token punctuation">,</span> orders<span class="token punctuation">.</span>o_num    <span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token keyword">FROM</span> customers <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> orders    <span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token keyword">ON</span> customers<span class="token punctuation">.</span>c_id <span class="token operator">=</span> orders<span class="token punctuation">.</span>c_id<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------+-------+</span><span class="token operator">|</span> c_id  <span class="token operator">|</span> o_num <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+-------+</span><span class="token operator">|</span> <span class="token number">10001</span> <span class="token operator">|</span> <span class="token number">30001</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10001</span> <span class="token operator">|</span> <span class="token number">30005</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10002</span> <span class="token operator">|</span>  <span class="token boolean">NULL</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10003</span> <span class="token operator">|</span> <span class="token number">30002</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10004</span> <span class="token operator">|</span> <span class="token number">30003</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+-------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œçœ‹å‡ºï¼Œå¯¹äºæ²¡æœ‰è®¢å•çš„å®¢æˆ· 10002é‡‡å–ä¿ç•™çš„æ–¹å¼ï¼</p><ul><li><strong>RIGHT OUTER JOIN</strong></li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">&gt;</span>  <span class="token keyword">SELECT</span> customers<span class="token punctuation">.</span>c_id<span class="token punctuation">,</span> orders<span class="token punctuation">.</span>o_num    <span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token keyword">FROM</span> customers <span class="token keyword">RIGHT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> orders    <span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token keyword">ON</span> customers<span class="token punctuation">.</span>c_id <span class="token operator">=</span> orders<span class="token punctuation">.</span>c_id<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------+-------+</span><span class="token operator">|</span> c_id  <span class="token operator">|</span> o_num <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+-------+</span><span class="token operator">|</span> <span class="token number">10001</span> <span class="token operator">|</span> <span class="token number">30001</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10003</span> <span class="token operator">|</span> <span class="token number">30002</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10004</span> <span class="token operator">|</span> <span class="token number">30003</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token number">30004</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10001</span> <span class="token operator">|</span> <span class="token number">30005</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+-------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå¯¹äºè®¢å•å· 30004å¯¹åº”çš„å®¢æˆ·idå¹¶æ²¡æœ‰åœ¨å®¢æˆ·ä¿¡æ¯è¡¨å½“ä¸­ï¼Œæ‰€ä»¥ä¾æ—§é‡‡å–ä¿ç•™ã€‚</p><p>å› ä¸ºMySQLä¸æ”¯æŒå…¨å¤–è¿æ¥ï¼Œæ‰€ä»¥ä¸ºäº†å®ç°å…¨å¤–è¿æ¥å°±å¿…é¡»ä¾èµ–äº<strong>ï¼ˆunion[ALL]ï¼‰</strong>åˆå¹¶å·¦å³å¤–è¿æ¥ç»“æœæ¥å®ç°ï¼</p><p>ä¸€èˆ¬æƒ…å†µï¼šæœ€å¥½ä½¿ç”¨ <strong>UNION ALL</strong>è¿™æ ·ä¼šä¿ç•™é‡å¤çš„åˆ—</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> customers<span class="token punctuation">.</span>c_id<span class="token punctuation">,</span> orders<span class="token punctuation">.</span>o_num    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">FROM</span> customers <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> orders    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">ON</span> customers<span class="token punctuation">.</span>c_id <span class="token operator">=</span> orders<span class="token punctuation">.</span>c_id    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">union</span>    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> customers<span class="token punctuation">.</span>c_id<span class="token punctuation">,</span> orders<span class="token punctuation">.</span>o_num    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">FROM</span> customers <span class="token keyword">RIGHT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> orders    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">ON</span> customers<span class="token punctuation">.</span>c_id <span class="token operator">=</span> orders<span class="token punctuation">.</span>c_id<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------+-------+</span><span class="token operator">|</span> c_id  <span class="token operator">|</span> o_num <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+-------+</span><span class="token operator">|</span> <span class="token number">10001</span> <span class="token operator">|</span> <span class="token number">30001</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10001</span> <span class="token operator">|</span> <span class="token number">30005</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10002</span> <span class="token operator">|</span>  <span class="token boolean">NULL</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10003</span> <span class="token operator">|</span> <span class="token number">30002</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10004</span> <span class="token operator">|</span> <span class="token number">30003</span> <span class="token operator">|</span><span class="token operator">|</span>  <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token number">30004</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+-------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œåšä¸€ä¸ªç®€å•çš„æ€»ç»“ï¼šè‡ªç„¶è¿æ¥<strong>ï¼ˆNATURAL JOINï¼‰</strong>ç­‰ä»·äº<strong>ï¼ˆ[INNER] JOINâ€¦USINGâ€¦ï¼‰</strong></p><p>è€Œæ›´ä¸ºä¸€èˆ¬æƒ…å†µçš„<strong>ï¼ˆÎ¸-joinï¼‰</strong>åˆ™å¯ä»¥ä½¿ç”¨<strong>ï¼ˆ[INNER] JOINâ€¦ONâ€¦ï¼‰</strong></p><p>å·¦å¤–è¿æ¥<strong>ï¼ˆLEFT [OUTER] JOINâ€¦ONâ€¦ï¼‰</strong>å³å¤–è¿æ¥<strong>ï¼ˆRIGHT [OUTER] JOINâ€¦ONâ€¦ï¼‰</strong></p><p>å…¨å¤–è¿æ¥ï¼š<strong>ï¼ˆLEFT [OUTER] JOINâ€¦ONâ€¦ï¼‰</strong> <strong>UNION</strong> <strong>ï¼ˆRIGHT [OUTER] JOINâ€¦ONâ€¦ï¼‰</strong></p><h1 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h1><p>å­æŸ¥è¯¢ï¼šåˆ©ç”¨åµŒå¥—çš„å…³ç³»ï¼Œä½¿ç”¨å†…å±‚<strong>select</strong>çš„ç»“æœå»ä½œä¸ºå¤–å±‚æŸ¥è¯¢çš„æ¡ä»¶å®ç°æŸ¥è¯¢åŠŸèƒ½ï¼</p><p>ä¸€èˆ¬æƒ…å†µï¼Œå­æŸ¥è¯¢ä¼šåˆ©ç”¨<code>INã€ALLã€ANYã€SOMEã€EXISTSã€Î¸</code>ä¸€äº›å…³é”®å­—å’Œæ¯”è¾ƒè¿ç®—ç¬¦Î¸</p><p>å…ˆåˆ›å»ºä¸€ä¸ªæ —å­</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">table</span> tbl1 <span class="token punctuation">(</span> num1 <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">table</span> tbl2 <span class="token punctuation">(</span> num2 <span class="token keyword">INT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tbl1 <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> tbl2 <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ANY/SOME</li></ul><p>ä»tbl1ä¸­æ‰¾å‡ºå¤§äºtbl2ä»»æ„ä¸€ä¸ªå€¼çš„num1åˆ—å…ƒç»„</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> num1 <span class="token keyword">FROM</span> tbl1 <span class="token keyword">WHERE</span> num1 <span class="token operator">&gt;</span> <span class="token keyword">ANY</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> num2 <span class="token keyword">FROM</span> tbl2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span> num1 <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span>   <span class="token number">13</span> <span class="token operator">|</span><span class="token operator">|</span>   <span class="token number">27</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ALL</li></ul><p>ä»tbl1ä¸­æ‰¾å‡ºå¤§äºtbl2æ‰€æœ‰å€¼çš„num1åˆ—å…ƒç»„</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> num1 <span class="token keyword">FROM</span> tbl1 <span class="token keyword">WHERE</span> num1 <span class="token operator">&gt;</span> <span class="token keyword">ALL</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> num2 <span class="token keyword">FROM</span> tbl2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span> num1 <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span class="token operator">|</span>   <span class="token number">27</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>EXISTS</li></ul><p>ä»ä¾›åº”å•†è¡¨ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ 107å·ä¾›åº”å•†ï¼Œè‹¥å­˜åœ¨çš„è¯ï¼Œæ‰¾å‡ºç”±å®ƒä¾›åº”çš„æ°´æœæ‰€æœ‰ä¿¡æ¯</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> fruits<span class="token keyword">where</span> s_id <span class="token operator">=</span> <span class="token number">107</span> <span class="token operator">and</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> s_id <span class="token keyword">from</span> suppliers <span class="token keyword">where</span> s_id <span class="token operator">=</span> <span class="token number">107</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------+------+---------+---------+</span><span class="token operator">|</span> f_id <span class="token operator">|</span> s_id <span class="token operator">|</span> f_name  <span class="token operator">|</span> f_price <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------+---------+---------+</span><span class="token operator">|</span> b5   <span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> xxxx    <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">|</span> t4   <span class="token operator">|</span>  <span class="token number">107</span> <span class="token operator">|</span> xbababa <span class="token operator">|</span>    <span class="token number">3.60</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------+---------+---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬é€šè¿‡å­æŸ¥è¯¢çš„ç»“æœåˆ¤æ–­ï¼šè‹¥æŸ¥è¯¢çš„ç»“æœä¸ä¸ºç©ºï¼Œä¹Ÿå°±æ˜¯EXISTSå­˜åœ¨ï¼Œé‚£ä¹ˆå°±è¿”å›trueï¼Œç»§ç»­ä¸‹ä¸€æ­¥å¤–å±‚æŸ¥è¯¢</p><ul><li>IN</li></ul><p>åœ¨orderitemsè¡¨ä¸­æŸ¥è¯¢f_idä¸ºc0çš„è®¢å•å·ï¼Œå¹¶æ ¹æ®è®¢å•å·æŸ¥è¯¢å…·æœ‰è®¢å•å·çš„å®¢æˆ·c_id</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> c_id <span class="token keyword">FROM</span> orders <span class="token keyword">WHERE</span> o_num <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> o_num  <span class="token keyword">FROM</span> orderitems <span class="token keyword">WHERE</span> f_id <span class="token operator">=</span> <span class="token string">'c0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸Šçš„æ­¥éª¤å¯ä»¥åˆ†ä¸ºä¸¤æ­¥è¿›è¡Œï¼š</p><p>ï¼ˆ1ï¼‰ åœ¨è®¢å•ä¿¡æ¯ä¸­æŸ¥è¯¢f_idä¸ºc0çš„è®¢å•å·ç </p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> o_num  <span class="token keyword">FROM</span> orderitems <span class="token keyword">WHERE</span> f_id <span class="token operator">=</span> <span class="token string">'c0'</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">-------+</span><span class="token operator">|</span> o_num <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+</span><span class="token operator">|</span> <span class="token number">30003</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">30005</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ2ï¼‰å¤–å±‚æŸ¥è¯¢æ ¹æ®æŸ¥è¯¢ç»“æœï¼ˆ30003,30005ï¼‰è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> c_id <span class="token keyword">FROM</span> orders <span class="token keyword">WHERE</span> o_num <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">30003</span><span class="token punctuation">,</span> <span class="token number">30005</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># final result</span><span class="token operator">+</span><span class="token comment">-------+</span><span class="token operator">|</span> c_id  <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+</span><span class="token operator">|</span> <span class="token number">10004</span> <span class="token operator">|</span><span class="token operator">|</span> <span class="token number">10001</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ¯”è¾ƒè¿ç®—ç¬¦</li></ul><p>æŸ¥è¯¢ç”±å¤©æ´¥ä¾›åº”å•†ä¾›åº”çš„æ°´æœçš„æ‰€æœ‰ä¿¡æ¯</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> fruits<span class="token keyword">WHERE</span> s_id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> s1<span class="token punctuation">.</span>s_id <span class="token keyword">FROM</span> suppliers <span class="token keyword">AS</span> s1 <span class="token keyword">WHERE</span> s1<span class="token punctuation">.</span>s_city <span class="token operator">=</span> <span class="token string">'Tianjin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># final result</span><span class="token operator">+</span><span class="token comment">------+------+------------+---------+</span><span class="token operator">|</span> f_id <span class="token operator">|</span> s_id <span class="token operator">|</span> f_name     <span class="token operator">|</span> f_price <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------+------------+---------+</span><span class="token operator">|</span> a1   <span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> apple      <span class="token operator">|</span>    <span class="token number">5.20</span> <span class="token operator">|</span><span class="token operator">|</span> b1   <span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> blackberry <span class="token operator">|</span>   <span class="token number">10.20</span> <span class="token operator">|</span><span class="token operator">|</span> c0   <span class="token operator">|</span>  <span class="token number">101</span> <span class="token operator">|</span> cherry     <span class="token operator">|</span>    <span class="token number">3.20</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------+------+------------+---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ1ï¼‰æ ¹æ®cityä¸ºå¤©æ´¥çš„æ¡ä»¶ï¼ŒæŸ¥è¯¢å‡ºä¾›åº”å•†çš„s_id</p><p>ï¼ˆ2ï¼‰æ ¹æ®å­æŸ¥è¯¢çš„s_idæŸ¥è¯¢ç”±è¯¥ä¾›åº”å•†ä¾›åº”çš„æ°´æœ</p><p>è¿™é‡Œåœ¨å­æŸ¥è¯¢ä¸­æ¶‰åŠåˆ°äº†ä¸€æ¬¡<strong>æ”¹å</strong>æ“ä½œï¼Œ<strong>æ”¹åæ“ä½œçš„ä½œç”¨ä¸»è¦ä¸¤ç‚¹ï¼š1.æ–¹ä¾¿å–å 2.é˜²æ­¢åµŒå¥—æˆ–è‡ªè¿æ¥å¸¦æ¥çš„æ­§ä¹‰</strong></p><h1 id="Query-MySQL-ç»ƒä¹ "><a href="#Query-MySQL-ç»ƒä¹ " class="headerlink" title="Query-MySQL-ç»ƒä¹ "></a>Query-MySQL-ç»ƒä¹ </h1><h2 id="ç»ƒä¹ æ•°æ®åº“ç»“æ„"><a href="#ç»ƒä¹ æ•°æ®åº“ç»“æ„" class="headerlink" title="ç»ƒä¹ æ•°æ®åº“ç»“æ„"></a>ç»ƒä¹ æ•°æ®åº“ç»“æ„</h2><p><b style="color: red;">ç»ƒä¹ æ•°æ®åº“SQLæ–‡ä»¶</b>ğŸ‘‰<a href="https://gitee.com/matemaster/master-depository/tree/master/2021-03-22/Query-MySQL-Lianxi">Query-MySQL-Lianxi</a></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token operator">+</span><span class="token comment">-----------------------+</span><span class="token operator">|</span> Tables_in_query<span class="token operator">-</span>mysql <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------------------+</span><span class="token operator">|</span> customers             <span class="token operator">|</span><span class="token operator">|</span> orderitems            <span class="token operator">|</span><span class="token operator">|</span> orders                <span class="token operator">|</span><span class="token operator">|</span> productnotes          <span class="token operator">|</span><span class="token operator">|</span> products              <span class="token operator">|</span><span class="token operator">|</span> vendors               <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥æŸ¥çœ‹ä¸€ä¸‹å„ä¸ªè¡¨æ ¼çš„ç»“æ„ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/image-one/images/20210322215407.png"></p><ul><li><code>vendors</code>ï¼šé”€å”®äº§å“ä¾›åº”å•†</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DESC</span> vendors<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------------+----------+------+-----+---------+----------------+</span><span class="token operator">|</span> Field        <span class="token operator">|</span> <span class="token keyword">Type</span>     <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra          <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------+----------+------+-----+---------+----------------+</span><span class="token operator">|</span> vend_id      <span class="token operator">|</span> <span class="token keyword">int</span>      <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span> PRI <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token keyword">auto_increment</span> <span class="token operator">|</span><span class="token operator">|</span> vend_name    <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span><span class="token operator">|</span> vend_address <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span><span class="token operator">|</span> vend_city    <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span><span class="token operator">|</span> vend_state   <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span><span class="token operator">|</span> vend_zip     <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span><span class="token operator">|</span> vend_country <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------+----------+------+-----+---------+----------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>customers</code>ï¼šé¡¾å®¢</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DESC</span> customers<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">--------------+-----------+------+-----+---------+----------------+</span><span class="token operator">|</span> Field        <span class="token operator">|</span> <span class="token keyword">Type</span>      <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra          <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------+-----------+------+-----+---------+----------------+</span><span class="token operator">|</span> cust_id      <span class="token operator">|</span> <span class="token keyword">int</span>       <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span> PRI <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token keyword">auto_increment</span> <span class="token operator">|</span><span class="token operator">|</span> cust_name    <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span><span class="token operator">|</span> cust_address <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span><span class="token operator">|</span> cust_city    <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span><span class="token operator">|</span> cust_state   <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>   <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span><span class="token operator">|</span> cust_zip     <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span><span class="token operator">|</span> cust_country <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span><span class="token operator">|</span> cust_contact <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>  <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span><span class="token operator">|</span> cust_email   <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">--------------+-----------+------+-----+---------+----------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>products</code>ï¼šäº§å“</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DESC</span> products<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------------+--------------+------+-----+---------+-------+</span><span class="token operator">|</span> Field      <span class="token operator">|</span> <span class="token keyword">Type</span>         <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+--------------+------+-----+---------+-------+</span><span class="token operator">|</span> prod_id    <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>     <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span> PRI <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">|</span> vend_id    <span class="token operator">|</span> <span class="token keyword">int</span>          <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span> MUL <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">|</span> prod_name  <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>    <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">|</span> prod_price <span class="token operator">|</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">|</span> prod_desc  <span class="token operator">|</span> <span class="token keyword">text</span>         <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+--------------+------+-----+---------+-------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>orders</code>ï¼šé¡¾å®¢è®¢å•</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DESC</span> orders<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------------+----------+------+-----+---------+----------------+</span><span class="token operator">|</span> Field      <span class="token operator">|</span> <span class="token keyword">Type</span>     <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra          <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+----------+------+-----+---------+----------------+</span><span class="token operator">|</span> order_num  <span class="token operator">|</span> <span class="token keyword">int</span>      <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span> PRI <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token keyword">auto_increment</span> <span class="token operator">|</span><span class="token operator">|</span> order_date <span class="token operator">|</span> <span class="token keyword">datetime</span> <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span><span class="token operator">|</span> cust_id    <span class="token operator">|</span> <span class="token keyword">int</span>      <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span> MUL <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+----------+------+-----+---------+----------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>orderitems</code>ï¼šè®¢å•è¯¦ç»†ä¿¡æ¯</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DESC</span> orderitems<span class="token punctuation">;</span><span class="token operator">+</span><span class="token comment">------------+--------------+------+-----+---------+-------+</span><span class="token operator">|</span> Field      <span class="token operator">|</span> <span class="token keyword">Type</span>         <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+--------------+------+-----+---------+-------+</span><span class="token operator">|</span> order_num  <span class="token operator">|</span> <span class="token keyword">int</span>          <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span> PRI <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">|</span> order_item <span class="token operator">|</span> <span class="token keyword">int</span>          <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span> PRI <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">|</span> prod_id    <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>     <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span> MUL <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">|</span> quantity   <span class="token operator">|</span> <span class="token keyword">int</span>          <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">|</span> item_price <span class="token operator">|</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">------------+--------------+------+-----+---------+-------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ•°æ®åº“è¡¨æ•°æ®"><a href="#æ•°æ®åº“è¡¨æ•°æ®" class="headerlink" title="æ•°æ®åº“è¡¨æ•°æ®"></a>æ•°æ®åº“è¡¨æ•°æ®</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># data in vendors</span><span class="token operator">+</span><span class="token comment">---------+----------------+-----------------+-------------+------------+----------+--------------+</span><span class="token operator">|</span> vend_id <span class="token operator">|</span> vend_name      <span class="token operator">|</span> vend_address    <span class="token operator">|</span> vend_city   <span class="token operator">|</span> vend_state <span class="token operator">|</span> vend_zip <span class="token operator">|</span> vend_country <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+----------------+-----------------+-------------+------------+----------+--------------+</span><span class="token operator">|</span>    <span class="token number">1001</span> <span class="token operator">|</span> Anvils R Us    <span class="token operator">|</span> <span class="token number">123</span> Main Street <span class="token operator">|</span> Southfield  <span class="token operator">|</span> MI         <span class="token operator">|</span> <span class="token number">48075</span>    <span class="token operator">|</span> USA          <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">1002</span> <span class="token operator">|</span> LT Supplies    <span class="token operator">|</span> <span class="token number">500</span> Park Street <span class="token operator">|</span> Anytown     <span class="token operator">|</span> OH         <span class="token operator">|</span> <span class="token number">44333</span>    <span class="token operator">|</span> USA          <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">1003</span> <span class="token operator">|</span> ACME           <span class="token operator">|</span> <span class="token number">555</span> High Street <span class="token operator">|</span> Los Angeles <span class="token operator">|</span> CA         <span class="token operator">|</span> <span class="token number">90046</span>    <span class="token operator">|</span> USA          <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">1004</span> <span class="token operator">|</span> Furball Inc<span class="token punctuation">.</span>   <span class="token operator">|</span> <span class="token number">1000</span> <span class="token number">5</span>th Avenue <span class="token operator">|</span> New York    <span class="token operator">|</span> NY         <span class="token operator">|</span> <span class="token number">11111</span>    <span class="token operator">|</span> USA          <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">1005</span> <span class="token operator">|</span> Jet <span class="token keyword">Set</span>        <span class="token operator">|</span> <span class="token number">42</span> Galaxy Road  <span class="token operator">|</span> London      <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> N16 <span class="token number">6</span>PS  <span class="token operator">|</span> England      <span class="token operator">|</span><span class="token operator">|</span>    <span class="token number">1006</span> <span class="token operator">|</span> Jouets Et Ours <span class="token operator">|</span> <span class="token number">1</span> Rue Amusement <span class="token operator">|</span> Paris       <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token number">45678</span>    <span class="token operator">|</span> France       <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+----------------+-----------------+-------------+------------+----------+--------------+</span><span class="token comment"># data in customers</span><span class="token operator">+</span><span class="token comment">---------+----------------+---------------------+-----------+------------+----------+--------------+--------------+---------------------+</span><span class="token operator">|</span> cust_id <span class="token operator">|</span> cust_name      <span class="token operator">|</span> cust_address        <span class="token operator">|</span> cust_city <span class="token operator">|</span> cust_state <span class="token operator">|</span> cust_zip <span class="token operator">|</span> cust_country <span class="token operator">|</span> cust_contact <span class="token operator">|</span> cust_email          <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+----------------+---------------------+-----------+------------+----------+--------------+--------------+---------------------+</span><span class="token operator">|</span>   <span class="token number">10001</span> <span class="token operator">|</span> Coyote Inc<span class="token punctuation">.</span>    <span class="token operator">|</span> <span class="token number">200</span> Maple Lane      <span class="token operator">|</span> Detroit   <span class="token operator">|</span> MI         <span class="token operator">|</span> <span class="token number">44444</span>    <span class="token operator">|</span> USA          <span class="token operator">|</span> Y Lee        <span class="token operator">|</span> ylee<span class="token variable">@coyote.com</span>     <span class="token operator">|</span><span class="token operator">|</span>   <span class="token number">10002</span> <span class="token operator">|</span> Mouse House    <span class="token operator">|</span> <span class="token number">333</span> Fromage Lane    <span class="token operator">|</span> Columbus  <span class="token operator">|</span> OH         <span class="token operator">|</span> <span class="token number">43333</span>    <span class="token operator">|</span> USA          <span class="token operator">|</span> Jerry Mouse  <span class="token operator">|</span> <span class="token boolean">NULL</span>                <span class="token operator">|</span><span class="token operator">|</span>   <span class="token number">10003</span> <span class="token operator">|</span> Wascals        <span class="token operator">|</span> <span class="token number">1</span> Sunny Place       <span class="token operator">|</span> Muncie    <span class="token operator">|</span> <span class="token operator">IN</span>         <span class="token operator">|</span> <span class="token number">42222</span>    <span class="token operator">|</span> USA          <span class="token operator">|</span> Jim Jones    <span class="token operator">|</span> rabbit<span class="token variable">@wascally.com</span> <span class="token operator">|</span><span class="token operator">|</span>   <span class="token number">10004</span> <span class="token operator">|</span> Yosemite Place <span class="token operator">|</span> <span class="token number">829</span> Riverside Drive <span class="token operator">|</span> Phoenix   <span class="token operator">|</span> AZ         <span class="token operator">|</span> <span class="token number">88888</span>    <span class="token operator">|</span> USA          <span class="token operator">|</span> Y Sam        <span class="token operator">|</span> sam<span class="token variable">@yosemite.com</span>    <span class="token operator">|</span><span class="token operator">|</span>   <span class="token number">10005</span> <span class="token operator">|</span> E Fudd         <span class="token operator">|</span> <span class="token number">4545</span> <span class="token number">53</span>rd Street    <span class="token operator">|</span> Chicago   <span class="token operator">|</span> IL         <span class="token operator">|</span> <span class="token number">54545</span>    <span class="token operator">|</span> USA          <span class="token operator">|</span> E Fudd       <span class="token operator">|</span> <span class="token boolean">NULL</span>                <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+----------------+---------------------+-----------+------------+----------+--------------+--------------+---------------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># data in products</span><span class="token operator">+</span><span class="token comment">---------+---------+----------------+------------+----------------------------------------------------------------+</span><span class="token operator">|</span> prod_id <span class="token operator">|</span> vend_id <span class="token operator">|</span> prod_name      <span class="token operator">|</span> prod_price <span class="token operator">|</span> prod_desc                                                      <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+---------+----------------+------------+----------------------------------------------------------------+</span><span class="token operator">|</span> ANV01   <span class="token operator">|</span>    <span class="token number">1001</span> <span class="token operator">|</span> <span class="token number">.5</span> ton anvil   <span class="token operator">|</span>       <span class="token number">5.99</span> <span class="token operator">|</span> <span class="token number">.5</span> ton anvil<span class="token punctuation">,</span> black<span class="token punctuation">,</span> complete <span class="token keyword">with</span> handy hook                  <span class="token operator">|</span><span class="token operator">|</span> ANV02   <span class="token operator">|</span>    <span class="token number">1001</span> <span class="token operator">|</span> <span class="token number">1</span> ton anvil    <span class="token operator">|</span>       <span class="token number">9.99</span> <span class="token operator">|</span> <span class="token number">1</span> ton anvil<span class="token punctuation">,</span> black<span class="token punctuation">,</span> complete <span class="token keyword">with</span> handy hook <span class="token operator">and</span> carrying <span class="token keyword">case</span> <span class="token operator">|</span><span class="token operator">|</span> ANV03   <span class="token operator">|</span>    <span class="token number">1001</span> <span class="token operator">|</span> <span class="token number">2</span> ton anvil    <span class="token operator">|</span>      <span class="token number">14.99</span> <span class="token operator">|</span> <span class="token number">2</span> ton anvil<span class="token punctuation">,</span> black<span class="token punctuation">,</span> complete <span class="token keyword">with</span> handy hook <span class="token operator">and</span> carrying <span class="token keyword">case</span> <span class="token operator">|</span><span class="token operator">|</span> DTNTR   <span class="token operator">|</span>    <span class="token number">1003</span> <span class="token operator">|</span> Detonator      <span class="token operator">|</span>      <span class="token number">13.00</span> <span class="token operator">|</span> Detonator <span class="token punctuation">(</span>plunger powered<span class="token punctuation">)</span><span class="token punctuation">,</span> fuses <span class="token operator">not</span> included                <span class="token operator">|</span><span class="token operator">|</span> FB      <span class="token operator">|</span>    <span class="token number">1003</span> <span class="token operator">|</span> Bird seed      <span class="token operator">|</span>      <span class="token number">10.00</span> <span class="token operator">|</span> Large bag <span class="token punctuation">(</span>suitable <span class="token keyword">for</span> road runners<span class="token punctuation">)</span>                          <span class="token operator">|</span><span class="token operator">|</span> FC      <span class="token operator">|</span>    <span class="token number">1003</span> <span class="token operator">|</span> Carrots        <span class="token operator">|</span>       <span class="token number">2.50</span> <span class="token operator">|</span> Carrots <span class="token punctuation">(</span>rabbit hunting season only<span class="token punctuation">)</span>                           <span class="token operator">|</span><span class="token operator">|</span> FU1     <span class="token operator">|</span>    <span class="token number">1002</span> <span class="token operator">|</span> Fuses          <span class="token operator">|</span>       <span class="token number">3.42</span> <span class="token operator">|</span> <span class="token number">1</span> dozen<span class="token punctuation">,</span> extra long                                            <span class="token operator">|</span><span class="token operator">|</span> JP1000  <span class="token operator">|</span>    <span class="token number">1005</span> <span class="token operator">|</span> JetPack <span class="token number">1000</span>   <span class="token operator">|</span>      <span class="token number">35.00</span> <span class="token operator">|</span> JetPack <span class="token number">1000</span><span class="token punctuation">,</span> intended <span class="token keyword">for</span> single <span class="token keyword">use</span>                          <span class="token operator">|</span><span class="token operator">|</span> JP2000  <span class="token operator">|</span>    <span class="token number">1005</span> <span class="token operator">|</span> JetPack <span class="token number">2000</span>   <span class="token operator">|</span>      <span class="token number">55.00</span> <span class="token operator">|</span> JetPack <span class="token number">2000</span><span class="token punctuation">,</span> multi<span class="token operator">-</span><span class="token keyword">use</span>                                        <span class="token operator">|</span><span class="token operator">|</span> OL1     <span class="token operator">|</span>    <span class="token number">1002</span> <span class="token operator">|</span> Oil can        <span class="token operator">|</span>       <span class="token number">8.99</span> <span class="token operator">|</span> Oil can<span class="token punctuation">,</span> red                                                   <span class="token operator">|</span><span class="token operator">|</span> SAFE    <span class="token operator">|</span>    <span class="token number">1003</span> <span class="token operator">|</span> Safe           <span class="token operator">|</span>      <span class="token number">50.00</span> <span class="token operator">|</span> Safe <span class="token keyword">with</span> combination <span class="token keyword">lock</span>                                     <span class="token operator">|</span><span class="token operator">|</span> SLING   <span class="token operator">|</span>    <span class="token number">1003</span> <span class="token operator">|</span> Sling          <span class="token operator">|</span>       <span class="token number">4.49</span> <span class="token operator">|</span> Sling<span class="token punctuation">,</span> one size fits <span class="token keyword">all</span>                                       <span class="token operator">|</span><span class="token operator">|</span> TNT1    <span class="token operator">|</span>    <span class="token number">1003</span> <span class="token operator">|</span> TNT <span class="token punctuation">(</span><span class="token number">1</span> stick<span class="token punctuation">)</span>  <span class="token operator">|</span>       <span class="token number">2.50</span> <span class="token operator">|</span> TNT<span class="token punctuation">,</span> red<span class="token punctuation">,</span> single stick                                         <span class="token operator">|</span><span class="token operator">|</span> TNT2    <span class="token operator">|</span>    <span class="token number">1003</span> <span class="token operator">|</span> TNT <span class="token punctuation">(</span><span class="token number">5</span> sticks<span class="token punctuation">)</span> <span class="token operator">|</span>      <span class="token number">10.00</span> <span class="token operator">|</span> TNT<span class="token punctuation">,</span> red<span class="token punctuation">,</span> pack <span class="token keyword">of</span> <span class="token number">10</span> sticks                                    <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+---------+----------------+------------+----------------------------------------------------------------+</span><span class="token comment"># data in orders</span><span class="token operator">+</span><span class="token comment">-----------+---------------------+---------+</span><span class="token operator">|</span> order_num <span class="token operator">|</span> order_date          <span class="token operator">|</span> cust_id <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------+---------------------+---------+</span><span class="token operator">|</span>     <span class="token number">20005</span> <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">01</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span>   <span class="token number">10001</span> <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">20006</span> <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">12</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span>   <span class="token number">10003</span> <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">20007</span> <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">30</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span>   <span class="token number">10004</span> <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">20008</span> <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">03</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span>   <span class="token number">10005</span> <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">20009</span> <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span>   <span class="token number">10001</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------+---------------------+---------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># data in orderitems</span><span class="token operator">+</span><span class="token comment">-----------+------------+---------+----------+------------+</span><span class="token operator">|</span> order_num <span class="token operator">|</span> order_item <span class="token operator">|</span> prod_id <span class="token operator">|</span> quantity <span class="token operator">|</span> item_price <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------+------------+---------+----------+------------+</span><span class="token operator">|</span>     <span class="token number">20005</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span> ANV01   <span class="token operator">|</span>       <span class="token number">10</span> <span class="token operator">|</span>       <span class="token number">5.99</span> <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">20005</span> <span class="token operator">|</span>          <span class="token number">2</span> <span class="token operator">|</span> ANV02   <span class="token operator">|</span>        <span class="token number">3</span> <span class="token operator">|</span>       <span class="token number">9.99</span> <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">20005</span> <span class="token operator">|</span>          <span class="token number">3</span> <span class="token operator">|</span> TNT2    <span class="token operator">|</span>        <span class="token number">5</span> <span class="token operator">|</span>      <span class="token number">10.00</span> <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">20005</span> <span class="token operator">|</span>          <span class="token number">4</span> <span class="token operator">|</span> FB      <span class="token operator">|</span>        <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">10.00</span> <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">20006</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span> JP2000  <span class="token operator">|</span>        <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">55.00</span> <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">20007</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span> TNT2    <span class="token operator">|</span>      <span class="token number">100</span> <span class="token operator">|</span>      <span class="token number">10.00</span> <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">20008</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span> FC      <span class="token operator">|</span>       <span class="token number">50</span> <span class="token operator">|</span>       <span class="token number">2.50</span> <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">20009</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span> FB      <span class="token operator">|</span>        <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">10.00</span> <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">20009</span> <span class="token operator">|</span>          <span class="token number">2</span> <span class="token operator">|</span> OL1     <span class="token operator">|</span>        <span class="token number">1</span> <span class="token operator">|</span>       <span class="token number">8.99</span> <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">20009</span> <span class="token operator">|</span>          <span class="token number">3</span> <span class="token operator">|</span> SLING   <span class="token operator">|</span>        <span class="token number">1</span> <span class="token operator">|</span>       <span class="token number">4.49</span> <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">20009</span> <span class="token operator">|</span>          <span class="token number">4</span> <span class="token operator">|</span> ANV03   <span class="token operator">|</span>        <span class="token number">1</span> <span class="token operator">|</span>      <span class="token number">14.99</span> <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">-----------+------------+---------+----------+------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># data in productnotes</span><span class="token operator">+</span><span class="token comment">---------+---------+---------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><span class="token operator">|</span> note_id <span class="token operator">|</span> prod_id <span class="token operator">|</span> note_date           <span class="token operator">|</span> note_text                                                                                                                                                  <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+---------+---------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><span class="token operator">|</span>     <span class="token number">101</span> <span class="token operator">|</span> TNT2    <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">17</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> Customer complaint:Sticks <span class="token operator">not</span> individually wrapped<span class="token punctuation">,</span> too easy <span class="token keyword">to</span> mistakenly detonate <span class="token keyword">all</span> at once<span class="token punctuation">.</span>Recommend individual wrapping<span class="token punctuation">.</span>                             <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">102</span> <span class="token operator">|</span> OL1     <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> Can shipped <span class="token keyword">full</span><span class="token punctuation">,</span> refills <span class="token operator">not</span> available<span class="token punctuation">.</span>Need <span class="token keyword">to</span> <span class="token keyword">order</span> new can <span class="token keyword">if</span> refill needed<span class="token punctuation">.</span>                                                                            <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">103</span> <span class="token operator">|</span> SAFE    <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> Safe <span class="token operator">is</span> combination locked<span class="token punctuation">,</span> combination <span class="token operator">not</span> provided <span class="token keyword">with</span> safe<span class="token punctuation">.</span>This <span class="token operator">is</span> rarely a problem <span class="token keyword">as</span> safes are typically blown up <span class="token operator">or</span> dropped <span class="token keyword">by</span> customers<span class="token punctuation">.</span>           <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">104</span> <span class="token operator">|</span> FC      <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">19</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> Quantity varies<span class="token punctuation">,</span> sold <span class="token keyword">by</span> the sack <span class="token keyword">load</span><span class="token punctuation">.</span><span class="token keyword">All</span> guaranteed <span class="token keyword">to</span> be bright <span class="token operator">and</span> orange<span class="token punctuation">,</span> <span class="token operator">and</span> suitable <span class="token keyword">for</span> <span class="token keyword">use</span> <span class="token keyword">as</span> rabbit bait<span class="token punctuation">.</span>                                        <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">105</span> <span class="token operator">|</span> TNT2    <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> Included fuses are short <span class="token operator">and</span> have been known <span class="token keyword">to</span> detonate too quickly <span class="token keyword">for</span> <span class="token keyword">some</span> customers<span class="token punctuation">.</span>Longer fuses are available <span class="token punctuation">(</span>item FU1<span class="token punctuation">)</span> <span class="token operator">and</span> should be recommended<span class="token punctuation">.</span>   <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">106</span> <span class="token operator">|</span> TNT2    <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">22</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> Matches <span class="token operator">not</span> included<span class="token punctuation">,</span> recommend purchase <span class="token keyword">of</span> matches <span class="token operator">or</span> detonator <span class="token punctuation">(</span>item DTNTR<span class="token punctuation">)</span><span class="token punctuation">.</span>                                                                             <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">107</span> <span class="token operator">|</span> SAFE    <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">23</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> Please note that <span class="token keyword">no</span> <span class="token keyword">returns</span> will be accepted <span class="token keyword">if</span> safe opened <span class="token keyword">using</span> explosives<span class="token punctuation">.</span>                                                                              <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">108</span> <span class="token operator">|</span> ANV01   <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">08</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> Multiple customer <span class="token keyword">returns</span><span class="token punctuation">,</span> anvils failing <span class="token keyword">to</span> <span class="token keyword">drop</span> fast enough <span class="token operator">or</span> falling backwards <span class="token keyword">on</span> purchaser<span class="token punctuation">.</span> Recommend that customer considers <span class="token keyword">using</span> heavier anvils<span class="token punctuation">.</span>   <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">109</span> <span class="token operator">|</span> ANV03   <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">01</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> Item <span class="token operator">is</span> extremely heavy<span class="token punctuation">.</span> Designed <span class="token keyword">for</span> dropping<span class="token punctuation">,</span> <span class="token operator">not</span> recommended <span class="token keyword">for</span> <span class="token keyword">use</span> <span class="token keyword">with</span> slings<span class="token punctuation">,</span> ropes<span class="token punctuation">,</span> pulleys<span class="token punctuation">,</span> <span class="token operator">or</span> tightropes<span class="token punctuation">.</span>                                        <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">110</span> <span class="token operator">|</span> FC      <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">01</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> Customer complaint: rabbit has been able <span class="token keyword">to</span> detect trap<span class="token punctuation">,</span> food apparently less effective now<span class="token punctuation">.</span>                                                               <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">111</span> <span class="token operator">|</span> SLING   <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> Shipped unassembled<span class="token punctuation">,</span> requires common tools <span class="token punctuation">(</span>including oversized hammer<span class="token punctuation">)</span><span class="token punctuation">.</span>                                                                                   <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">112</span> <span class="token operator">|</span> SAFE    <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">02</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> Customer complaint:Circular hole <span class="token operator">in</span> safe floor can apparently be easily cut <span class="token keyword">with</span> handsaw<span class="token punctuation">.</span>                                                                  <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">113</span> <span class="token operator">|</span> ANV01   <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">05</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> Customer complaint:<span class="token operator">Not</span> heavy enough <span class="token keyword">to</span> generate flying stars around head <span class="token keyword">of</span> victim<span class="token punctuation">.</span> <span class="token keyword">If</span> being purchased <span class="token keyword">for</span> dropping<span class="token punctuation">,</span> recommend ANV02 <span class="token operator">or</span> ANV03 instead<span class="token punctuation">.</span>     <span class="token operator">|</span><span class="token operator">|</span>     <span class="token number">114</span> <span class="token operator">|</span> SAFE    <span class="token operator">|</span> <span class="token number">2005</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">07</span> <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">|</span> <span class="token keyword">Call</span> <span class="token keyword">from</span> individual trapped <span class="token operator">in</span> safe plummeting <span class="token keyword">to</span> the ground<span class="token punctuation">,</span> suggests an <span class="token keyword">escape</span> hatch be added<span class="token punctuation">.</span><span class="token keyword">Comment</span> forwarded <span class="token keyword">to</span> vendor<span class="token punctuation">.</span>                              <span class="token operator">|</span><span class="token operator">+</span><span class="token comment">---------+---------+---------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç®€å•SQL"><a href="#ç®€å•SQL" class="headerlink" title="ç®€å•SQL"></a>ç®€å•SQL</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># æ£€ç´¢å•ä¸ªåˆ—</span><span class="token keyword">SELECT</span> prod_name<span class="token keyword">FROM</span> products<span class="token punctuation">;</span><span class="token comment"># æ£€ç´¢å¤šä¸ªåˆ—</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token punctuation">,</span>prod_price<span class="token keyword">FROM</span> products<span class="token punctuation">;</span><span class="token comment"># æ£€ç´¢å…¨éƒ¨åˆ—*|lists</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> products<span class="token punctuation">;</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> vend_id<span class="token punctuation">,</span> prod_name<span class="token punctuation">,</span> prod_price<span class="token punctuation">,</span> prod_desc<span class="token keyword">FROM</span> products<span class="token punctuation">;</span><span class="token comment"># æ£€ç´¢ä¸åŒçš„å…ƒç»„ DISTINCT</span><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> vend_id<span class="token keyword">FROM</span> vendors<span class="token punctuation">;</span><span class="token comment"># LIMITé™å®šæŸ¥è¯¢ç»“æœçš„è¡Œæ•°</span><span class="token keyword">SELECT</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">LIMIT</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token comment"># limit offset counts æŒ‡å®šä½ç½®ã€æŒ‡å®šæ•°é‡ï¼ˆå¯¹äºè¡Œæ•°ä¸å¤Ÿçš„ï¼Œå°±ä¸æ˜¾ç¤ºï¼‰</span><span class="token keyword">SELECT</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">LIMIT</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token comment"># å…¨é™å®šå</span><span class="token keyword">SELECT</span> prod_name<span class="token keyword">FROM</span> query<span class="token operator">-</span>mysql<span class="token punctuation">.</span>products <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ’åº</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># å¯¹å•åˆ—æ’åº</span><span class="token keyword">SELECT</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> prod_name<span class="token punctuation">;</span><span class="token comment"># å¤šåˆ—æ’åº ï¼ˆå‰é¢ç›¸åŒæ—¶ï¼Œæ¯”è¾ƒåé¢ï¼Œä»¥æ­¤ç±»æ¨ï¼‰</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token punctuation">,</span> prod_price<span class="token keyword">FROM</span> products<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> prod_price<span class="token punctuation">,</span> prod_name<span class="token comment"># ASC|DESC å®šä¹‰æ’åºæ–¹å‘ï¼ˆé»˜è®¤ASCï¼‰</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token punctuation">,</span> prod_price<span class="token keyword">FROM</span> products<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> prod_price <span class="token keyword">DESC</span><span class="token punctuation">,</span> prod_name<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ•°æ®è¿‡æ»¤</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># WHEREçš„æ¯”è¾ƒæ“ä½œç¬¦</span><span class="token comment">## = æ‰¾å‡ºå•†å“åä¸ºfusesäº§å“</span><span class="token keyword">SELECT</span> prod_name<span class="token punctuation">,</span> prod_price<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_name <span class="token operator">=</span> <span class="token string">'fuses'</span><span class="token punctuation">;</span><span class="token comment">## &lt;=æ‰¾å‡ºä»·æ ¼ä½äº10ç¾å…ƒçš„æ‰€æœ‰äº§å“</span><span class="token keyword">SELECT</span> prod_name<span class="token punctuation">,</span> prod_price<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_price <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment">## BETWEEB AND èŒƒå›´æ£€æŸ¥</span><span class="token keyword">SELECT</span> prod_name<span class="token punctuation">,</span> prod_price<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_price <span class="token operator">BETWEEN</span> <span class="token number">5</span> <span class="token operator">AND</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment"># NULLæ£€æŸ¥</span><span class="token keyword">SELECT</span> cust_id<span class="token keyword">FROM</span> customers<span class="token keyword">WHERE</span> cust_email <span class="token operator">is</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å¸¦æœ‰è¿æ¥è¯çš„æ•°æ®è¿‡æ»¤</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># AND ç”±ä¾›åº”å•†1003æä¾›çš„äº§å“ä¸”ä»·æ ¼ä¸è¶…è¿‡10ç¾å…ƒçš„äº§å“ä¿¡æ¯</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token punctuation">,</span> prod_price<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> vend_id <span class="token operator">=</span> <span class="token number">1003</span> <span class="token operator">AND</span> prod_price <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment"># OR ç”±ä¾›åº”å•†1002å’Œ1003æä¾›çš„äº§å“çš„ä¿¡æ¯</span><span class="token keyword">SELECT</span> prod_name<span class="token punctuation">,</span> prod_price<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> vend_id <span class="token operator">=</span> <span class="token number">1002</span> <span class="token operator">OR</span> vend_id <span class="token operator">=</span> <span class="token number">1003</span><span class="token punctuation">;</span><span class="token comment"># AND å’Œ OR çš„æ‰§è¡Œä¼˜å…ˆçº§ï¼ˆandä¼˜å…ˆï¼‰</span><span class="token comment">## å› ä¸ºä¼˜å…ˆçº§é—®é¢˜ ä¸‹é¢ä¸¤ä¸ªselectè¯­å¥æ‰§è¡Œç»“æœä¸ä¸€è‡´ï¼æ­£ç¡®è¯­ä¹‰æ˜¯ä¸‹é¢</span><span class="token keyword">SELECT</span> prod_name<span class="token punctuation">,</span> prod_price<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> vend_id <span class="token operator">=</span> <span class="token number">1002</span> <span class="token operator">OR</span> vend_id <span class="token operator">=</span> <span class="token number">1003</span> <span class="token operator">AND</span> prod_price <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> prod_name<span class="token punctuation">,</span> prod_price<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> <span class="token punctuation">(</span>vend_id <span class="token operator">=</span> <span class="token number">1002</span> <span class="token operator">OR</span> vend_id <span class="token operator">=</span> <span class="token number">1003</span><span class="token punctuation">)</span> <span class="token operator">AND</span> prod_price <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment"># IN(values) iné€šè¿‡åŒ¹é…æ‹¬å·ä¸­çš„å€¼ è¿”å›true|falseã€‚ä¸‹é¢ä¸¤å¥ç­‰ä»·</span><span class="token keyword">SELECT</span> prod_name<span class="token punctuation">,</span> prod_price<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> vend_id <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">,</span><span class="token number">1003</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> prod_name<span class="token punctuation">,</span> prod_price<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> vend_id <span class="token operator">=</span> <span class="token number">1002</span> <span class="token operator">OR</span> vend_id <span class="token operator">=</span> <span class="token number">1003</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># NOT çš„å…¨å¦å®šåŠŸèƒ½</span><span class="token keyword">SELECT</span> prod_name<span class="token punctuation">,</span> prod_price<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> vend_id <span class="token operator">NOT</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1002</span><span class="token punctuation">,</span><span class="token number">1003</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>LIKEåŒ¹é…</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># æ‰¾å‡ºæ‰€æœ‰ä»¥jetå¼€å¤´çš„äº§å“(%ä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²)</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_name <span class="token operator">LIKE</span> <span class="token string">'jet%'</span><span class="token punctuation">;</span><span class="token comment"># æ‰¾å‡ºä»¥_ ton anvilï¼ˆ_ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼‰</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_name <span class="token operator">LIKE</span> <span class="token string">'_ ton anvil'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ­£åˆ™è¡¨è¾¾å¼</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># äºŒè€…éƒ½ä¼šåŒ¹é…ï¼Œä½†æ˜¯LIKEä¸ä¼šè¿”å›ç»“æœï¼ŒREGEXPè¿”å›ç»“æœ</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_name <span class="token operator">LIKE</span> <span class="token string">'1000'</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_name <span class="token operator">REGEXP</span> <span class="token string">'1000'</span><span class="token punctuation">;</span><span class="token comment"># å¦‚æœéœ€è¦å®ç°æ­£åˆ™è¡¨è¾¾å¼å¿½ç•¥å¤§å°å†™ BINARY</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_name <span class="token operator">REGEXP</span> <span class="token keyword">BINARY</span> <span class="token string">'JetPack'</span><span class="token punctuation">;</span><span class="token comment"># æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„OR</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_name <span class="token operator">REGEXP</span> <span class="token string">'1000|2000'</span><span class="token punctuation">;</span><span class="token comment"># åŒ¹é…å‡ ä¸ªå­—ç¬¦ä¹‹ä¸€(ä¸‹é¢äºŒè€…ç­‰ä»·)</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_name <span class="token operator">REGEXP</span> <span class="token string">'[1,2,3] ton'</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_name <span class="token operator">REGEXP</span> <span class="token string">'[1|2|3] ton'</span><span class="token punctuation">;</span>  <span class="token comment"># è¿™é‡Œå¿…é¡»æœ‰[]ï¼Œå¦åˆ™å‡ºé”™</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_name <span class="token operator">REGEXP</span> <span class="token string">'1|2|3 ton'</span><span class="token punctuation">;</span> <span class="token comment">#è¿™é‡ŒåŒ¹é…çš„æ˜¯ï¼š 1 ï¼Œ2 ï¼Œ3 ton</span><span class="token comment"># èŒƒå›´æŸ¥è¯¢ï¼ˆä¸‹é¢ä¸¤è€…ç­‰ä»·ï¼‰</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_name <span class="token operator">REGEXP</span> <span class="token string">'[0123456789] ton'</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_name <span class="token operator">REGEXP</span> <span class="token string">'[0-9] ton'</span><span class="token punctuation">;</span><span class="token comment"># åŒ¹é…ç‰¹æ®Šå­—ç¬¦ ï¼ˆå¯ä»¥ä½¿ç”¨\\è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼‰</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_name <span class="token operator">REGEXP</span> <span class="token string">'.'</span><span class="token punctuation">;</span><span class="token comment"># é‡å¤å…ƒå­—ç¬¦ï¼ˆ* ? + {n} {n,} {n,m}(m&lt;=255)ï¼‰</span><span class="token keyword">SELECT</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_name <span class="token operator">REGEXP</span> <span class="token string">'\\([0-9] sticks?\\)'</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> prod_name<span class="token keyword">FROM</span> products<span class="token keyword">WHERE</span> prod_name <span class="token operator">REGEXP</span> <span class="token string">'[[:digit:]]{4}'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å­—æ®µæ“ä½œ</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> concat<span class="token punctuation">(</span>vend_name<span class="token punctuation">,</span><span class="token string">'('</span><span class="token punctuation">,</span>vend_country<span class="token punctuation">,</span><span class="token string">')'</span><span class="token punctuation">)</span><span class="token keyword">FROM</span> vendors<span class="token punctuation">;</span><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> quantity<span class="token punctuation">,</span> item_price<span class="token punctuation">,</span>   <span class="token punctuation">(</span>quantity<span class="token operator">*</span>item_price<span class="token punctuation">)</span> <span class="token keyword">AS</span> expanded_price<span class="token keyword">FROM</span> orderitems<span class="token keyword">WHERE</span> order_num <span class="token operator">=</span> <span class="token number">20005</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å‡½æ•°å¤„ç†</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># å¤§å†™å¤„ç†</span><span class="token keyword">SELECT</span> vend_name<span class="token punctuation">,</span> Upper<span class="token punctuation">(</span>vend_name<span class="token punctuation">)</span> <span class="token keyword">AS</span> vend_name_upcase<span class="token keyword">FROM</span> vendors<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> vend_name<span class="token punctuation">;</span><span class="token comment"># æ—¶é—´å¤„ç†</span><span class="token keyword">SELECT</span> cust_id<span class="token punctuation">,</span> order_num<span class="token keyword">FROM</span> orders<span class="token keyword">WHERE</span> <span class="token keyword">Date</span><span class="token punctuation">(</span>order_date<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">'2005-09-01'</span><span class="token punctuation">;</span><span class="token comment"># äº”ä¸ªaggregate functions</span><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>prod_price<span class="token punctuation">)</span> <span class="token keyword">AS</span> avg_price<span class="token keyword">FROM</span> products<span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> number_cust<span class="token keyword">FROM</span> customers<span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>cust_email<span class="token punctuation">)</span> <span class="token keyword">AS</span> number_cust<span class="token keyword">FROM</span> customers<span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>prod_price<span class="token punctuation">)</span> <span class="token keyword">AS</span> max_price<span class="token keyword">FROM</span> products<span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>prod_price<span class="token punctuation">)</span> <span class="token keyword">AS</span> min_price<span class="token keyword">FROM</span> products<span class="token punctuation">;</span><span class="token keyword">SELECT</span> <span class="token function">SUM</span><span class="token punctuation">(</span>quantity<span class="token punctuation">)</span> <span class="token keyword">AS</span> items_ordered<span class="token keyword">FROM</span> orderitems<span class="token keyword">WHERE</span> order_num <span class="token operator">=</span> <span class="token number">20005</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>èšé›†å‡½æ•°</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> items_quantity<span class="token punctuation">,</span>   <span class="token function">MAX</span><span class="token punctuation">(</span>prod_price<span class="token punctuation">)</span> <span class="token keyword">AS</span> price_max<span class="token punctuation">,</span>   <span class="token function">MIN</span><span class="token punctuation">(</span>prod_price<span class="token punctuation">)</span> <span class="token keyword">AS</span> price_min<span class="token punctuation">,</span>   <span class="token function">AVG</span><span class="token punctuation">(</span>prod_price<span class="token punctuation">)</span> <span class="token keyword">AS</span> price_avg<span class="token punctuation">,</span>   <span class="token function">SUM</span><span class="token punctuation">(</span>prod_price<span class="token punctuation">)</span> <span class="token keyword">AS</span> price_total<span class="token keyword">FROM</span> products<span class="token punctuation">;</span>   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>ç›¸å…³å­æŸ¥è¯¢</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> cust_name   <span class="token punctuation">(</span>        <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>        <span class="token keyword">FROM</span> orders        <span class="token keyword">WHERE</span> orders<span class="token punctuation">.</span>cust_id <span class="token operator">=</span> customers<span class="token punctuation">.</span>cust_id       <span class="token punctuation">)</span> <span class="token keyword">AS</span> orders<span class="token keyword">FROM</span> customers<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸåˆ› </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu</title>
      <link href="posts/2216.html"/>
      <url>posts/2216.html</url>
      
        <content type="html"><![CDATA[<h1 id="å¦‚ä½•ç”¨Linux"><a href="#å¦‚ä½•ç”¨Linux" class="headerlink" title="å¦‚ä½•ç”¨Linux"></a>å¦‚ä½•ç”¨Linux</h1><h2 id="ä¸‹è½½Ubuntué•œåƒ"><a href="#ä¸‹è½½Ubuntué•œåƒ" class="headerlink" title="ä¸‹è½½Ubuntué•œåƒ"></a>ä¸‹è½½Ubuntué•œåƒ</h2><p>ğŸ‘‰<a href="https://mirrors.tuna.tsinghua.edu.cn/">æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç½‘ç«™</a></p><p>ğŸ‘‰<a href="http://mirrors.ustc.edu.cn/">ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦å¼€æºé•œåƒç½‘ç«™</a></p><p>ğŸ‘‰<a href="https://ubuntu.com/">Ubuntuå®˜æ–¹</a></p><h2 id="ä¸‹è½½vm"><a href="#ä¸‹è½½vm" class="headerlink" title="ä¸‹è½½vm"></a>ä¸‹è½½vm</h2><p><a href="https://www.virtualbox.org/">Oracle vm virtualBox</a></p><h2 id="åˆ›å»ºLinuxè™šæ‹Ÿæœº"><a href="#åˆ›å»ºLinuxè™šæ‹Ÿæœº" class="headerlink" title="åˆ›å»ºLinuxè™šæ‹Ÿæœº"></a>åˆ›å»ºLinuxè™šæ‹Ÿæœº</h2>]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸåˆ› </tag>
            
            <tag> Linux </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LinkedList&lt;E&gt;åº•å±‚åŸç†</title>
      <link href="posts/53096.html"/>
      <url>posts/53096.html</url>
      
        <content type="html"><![CDATA[<h1 id="ç»§æ‰¿ä½“ç³»"><a href="#ç»§æ‰¿ä½“ç³»" class="headerlink" title="ç»§æ‰¿ä½“ç³»"></a>ç»§æ‰¿ä½“ç³»</h1><img src="https://cdn.jsdelivr.net/gh/matemaster9/image-one/images/20210319151231.jpg" style="width:80%;border:solid"><h1 id="LinkedList-lt-E-gt-åº•å±‚ç»“æ„"><a href="#LinkedList-lt-E-gt-åº•å±‚ç»“æ„" class="headerlink" title="LinkedList<E>åº•å±‚ç»“æ„"></a>LinkedList&lt;E&gt;åº•å±‚ç»“æ„</h1><p><code>LinkedList&lt;E&gt;</code>ä½œä¸ºä¸€ç§é“¾è¡¨å‹çš„åˆ—è¡¨ï¼Œåº•å±‚çš„æ•°æ®ç»“æ„å½“ç„¶å°±æ˜¯é“¾è¡¨ï¼Œå…·ä½“åˆ°å†…éƒ¨ç±»ï¼šç»“ç‚¹<code>Node&lt;E&gt;</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> item<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>        <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev<span class="token punctuation">,</span> <span class="token class-name">E</span> item<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>item <span class="token operator">=</span> item<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é™¤äº†åŸºæœ¬çš„å†…éƒ¨èŠ‚ç‚¹<code>Node</code>ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸‰ä¸ªä¸å¯åºåˆ—åŒ–çš„å˜é‡ï¼š<code>firstï¼ˆå¤´ç»“ç‚¹ï¼‰</code>ã€<code>lastï¼ˆå°¾ç»“ç‚¹ï¼‰</code>ã€<code>size</code></p><p>first(null,item,next)</p><p>last(prev,item,null)</p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<table><tbody><tr><td style="background-color:white">prev == null</td><td style="background-color:silver">first.item</td>        <td style="background-color:gray">next != null</td></tr></tbody></table><table>    <tbody><tr>        <td style="background-color:gray">prev != null</td>        <td style="background-color:silver">last.item&nbsp;</td>        <td style="background-color:white">next == null</td>    </tr></tbody></table><h1 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h1><h2 id="List-lt-E-gt-æ¥å£"><a href="#List-lt-E-gt-æ¥å£" class="headerlink" title="List<E>æ¥å£"></a>List&lt;E&gt;æ¥å£</h2><p><code>LinkedList&lt;E&gt;</code>ä½œä¸ºä¸€ç§é“¾è¡¨å‹çš„åˆ—è¡¨ï¼Œé¦–å…ˆå°±æœ‰ç€åˆ—è¡¨çš„ç›¸å…³æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯<code>List&lt;E&gt;</code>æ¥å£ä¸­çš„æ–¹æ³•ã€‚</p><p><span class="github-emoji"><span>ğŸ‘€</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f440.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹<code>List&lt;E&gt;</code>è‡ªå·±åœ¨<code>Collection&lt;E&gt;</code>æ¥å£ä¹‹ä¸Šå¢åŠ çš„æ–¹æ³• </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token class-name">E</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">E</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">listIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// LinkedListç›´æ¥ç»§æ‰¿AbstractListçš„å®ç°</span>    <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">listIterator</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">subList</span><span class="token punctuation">(</span><span class="token keyword">int</span> fromIndex<span class="token punctuation">,</span> <span class="token keyword">int</span> toIndex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// LinkedListç›´æ¥ç»§æ‰¿AbstractListçš„å®ç°</span>    <span class="token keyword">boolean</span> <span class="token function">addAll</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><span class="github-emoji"><span>ğŸ‘€</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f440.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æˆ‘ä»¬å†çœ‹ä¸€ä¸‹<code>List&lt;E&gt;</code>è‡ªå·±è‡ªå·±å¢åŠ çš„ <strong>default-method</strong> ä»¥åŠè¦†ç›–<code>Collection&lt;E&gt;</code>çš„æ–¹æ³•</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token class-name">UnaryOperator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> operator<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>operator<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">final</span> <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> li <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">listIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>li<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            li<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>operator<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>li<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>        <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"unchecked"</span><span class="token punctuation">,</span> <span class="token string">"rawtypes"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">)</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> i <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">listIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> e <span class="token operator">:</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>            i<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            i<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>        <span class="token annotation punctuation">@Override</span>    <span class="token keyword">default</span> <span class="token class-name">Spliterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">spliterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token class-name">Spliterators</span><span class="token punctuation">.</span><span class="token function">spliterator</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">Spliterator</span><span class="token punctuation">.</span>ORDERED<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="LinkedListå®ç°"><a href="#LinkedListå®ç°" class="headerlink" title="LinkedListå®ç°"></a>LinkedListå®ç°</h2><h3 id="ä¿®æ”¹"><a href="#ä¿®æ”¹" class="headerlink" title="ä¿®æ”¹"></a>ä¿®æ”¹</h3><p>å°†LinkListè§†ä¸ºåˆ—è¡¨ï¼Œè®¾ç½®æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œä»¥åŠè·å–æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">checkElementIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">node</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">.</span>item<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">checkElementIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> <span class="token function">node</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">E</span> oldVal <span class="token operator">=</span> x<span class="token punctuation">.</span>item<span class="token punctuation">;</span>    x<span class="token punctuation">.</span>item <span class="token operator">=</span> element<span class="token punctuation">;</span>    <span class="token keyword">return</span> oldVal<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>get</code>ä¸<code>set</code>è¾…åŠ©æ“ä½œæ–¹æ³•<span class="github-emoji"><span>ğŸ‘‡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f447.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">checkElementIndex</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isElementIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token function">outOfBoundsMsg</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">isElementIndex</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> index <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">&lt;</span> size<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">node</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// assert isElementIndex(index);  ä¸ºäº†ä¿è¯ç´¢å¼•çš„æ­£ç¡®æ€§</span>    <span class="token comment">// äºŒåˆ†æŸ¥æ‰¾ï¼Œåˆ¤æ–­ç´¢å¼•å±äºå‰åŠæ®µè¿˜æ˜¯ååŠæ®µï¼Œç„¶åé‡‡å–é“¾è¡¨çš„é¡ºåºéå†å¾—åˆ°å¯¹åº”ä½ç½®çš„å…ƒç´ </span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token punctuation">(</span>size <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> first<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> index<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            x <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token keyword">return</span> x<span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> last<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> index<span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>            x <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>        <span class="token keyword">return</span> x<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»node(int)æ–¹æ³•ä¸­å¯ä»¥çœ‹å‡ºï¼ŒLinkedListçš„å…ƒç´ ä½ç½®æ˜¯ä»0å¼€å§‹è®¡æ•°ï¼æ‰€ä»¥[0,1,2,3,4,5,6,7,8,9]</p><h3 id="æ·»åŠ "><a href="#æ·»åŠ " class="headerlink" title="æ·»åŠ "></a>æ·»åŠ </h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">checkPositionIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// åˆ¤æ–­æ’å…¥çš„ä½ç½®æ˜¯ï¼šå°¾éƒ¨è¿˜æ˜¯ä¸­é—´ä»»æ„ä½ç½®</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> size<span class="token punctuation">)</span>        <span class="token function">linkLast</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>        <span class="token function">linkBefore</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token function">node</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">checkPositionIndex</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isPositionIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token function">outOfBoundsMsg</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">isPositionIndex</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> index <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> index <span class="token operator">&lt;=</span> size<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>add(int,E)</code>çš„è¾…åŠ©æ“ä½œ </p><p>ğŸ‘‰<strong>å°¾æ’</strong></p><table>    <tbody><tr>        <td style="background-color:gray">prev == last</td>        <td style="background-color:silver">add.item&nbsp;</td>        <td style="background-color:white">next == null</td>    </tr></tbody></table>ç®—æ³•æ€æƒ³ï¼š<p>1ï¼‰ä¿ç•™å°¾ç»“ç‚¹çš„å†…å®¹</p><p>2ï¼‰ç”Ÿæˆå‰é©±ç»“ç‚¹ä¸ºlastçš„æ’å…¥ç»“ç‚¹</p><p>3ï¼‰å°†lastæŒ‡å‘æ–°æ’å…¥çš„ç»“ç‚¹</p><p>4ï¼‰éªŒè¯ç©ºè¡¨çš„æƒ…å†µï¼š</p><ul><li>æ˜¯ç©ºé“¾è¡¨æ—¶ï¼Œå°†firstæŒ‡å‘æ–°æ’å…¥çš„ç»“ç‚¹</li><li>ä¸æ˜¯ç©ºé“¾è¡¨æ—¶ï¼Œå°†lastæŒ‡å‘æ–°æ’å…¥çš„ç»“ç‚¹</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">void</span> <span class="token function">linkLast</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l <span class="token operator">=</span> last<span class="token punctuation">;</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> e<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    last <span class="token operator">=</span> newNode<span class="token punctuation">;</span>    <span class="token comment">// è¿™é‡Œçš„if-elseæ˜¯ä¸ºäº†é˜²æ­¢é“¾è¡¨ä¸ºç©ºçš„æƒ…å†µ</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        first <span class="token operator">=</span> newNode<span class="token punctuation">;</span>    <span class="token keyword">else</span>        l<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>    size<span class="token operator">++</span><span class="token punctuation">;</span>    modCount<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ğŸ‘‰<strong>ä¸­é—´ä»»æ„ä½ç½®å…ƒç´ ä¹‹å‰æ’å…¥</strong></p><table>    <tbody><tr>        <td style="background-color:gray">prev == succ.prev</td>        <td style="background-color:silver">&nbsp;&nbsp;&nbsp;&nbsp;add.item&nbsp;</td>        <td style="background-color:white">next == succ</td>    </tr></tbody></table>ç®—æ³•æ€æƒ³ï¼š<p>1ï¼‰ä¿ç•™å¾…æ’å…¥ä½ç½®ç»“ç‚¹succçš„å‰é©±å¼•ç”¨</p><p>2ï¼‰ç”Ÿæˆä¸€ä¸ª(succ.prev,item,succ)çš„æ’å…¥ç»“ç‚¹</p><p>3)å°†succ.repvæŒ‡å‘æ–°çš„ç»“ç‚¹</p><p>4ï¼‰éªŒè¯å½“å‰æ’å…¥çš„ç»“ç‚¹æ˜¯ä¸æ˜¯å¤´ç»“ç‚¹first</p><ul><li>æ˜¯firstæ—¶ï¼ŒfirstæŒ‡å‘æ–°çš„æ’å…¥ç»“ç‚¹</li><li>ä¸æ˜¯firstæ—¶ï¼Œå°†æ–°æ’å…¥çš„ç»“ç‚¹nextæŒ‡å‘succ</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">void</span> <span class="token function">linkBefore</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">,</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> succ<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// assert succ != null;</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> pred <span class="token operator">=</span> succ<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>pred<span class="token punctuation">,</span> e<span class="token punctuation">,</span> succ<span class="token punctuation">)</span><span class="token punctuation">;</span>    succ<span class="token punctuation">.</span>prev <span class="token operator">=</span> newNode<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>pred <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        first <span class="token operator">=</span> newNode<span class="token punctuation">;</span>    <span class="token keyword">else</span>        pred<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>    size<span class="token operator">++</span><span class="token punctuation">;</span>    modCount<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">checkElementIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">unlink</span><span class="token punctuation">(</span><span class="token function">node</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><code>remove(int)</code>çš„è¾…åŠ©æ“ä½œ</p><p>ğŸ‘‰<strong>å»é™¤ç‰¹å®šçš„ç»“ç‚¹</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// æ­¤æ–¹æ³•ä¼šæ¸…ç©ºç»“ç‚¹çš„å†…å®¹ï¼Œè®©ç»“ç‚¹è„±ç¦»äºé“¾è¡¨ï¼Œä½†æ˜¯æŒ‡å‘è¯¥ç»“ç‚¹çš„å¼•ç”¨ä¾æ—§å­˜åœ¨ï¼Œæ²¡æœ‰nullå¤„ç†</span><span class="token class-name">E</span> <span class="token function">unlink</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// assert x != null;</span>    <span class="token keyword">final</span> <span class="token class-name">E</span> element <span class="token operator">=</span> x<span class="token punctuation">.</span>item<span class="token punctuation">;</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> prev <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>    <span class="token comment">// æŸ¥çœ‹è¦åˆ é™¤çš„xå‰é©±ç»“ç‚¹æ˜¯å¦ä¸ºfirst</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>prev <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        first <span class="token operator">=</span> next<span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        prev<span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>        x<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// æŸ¥çœ‹è¦åˆ é™¤çš„xåç»§ç»“ç‚¹æ˜¯å¦ä¸ºlast</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        last <span class="token operator">=</span> prev<span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        next<span class="token punctuation">.</span>prev <span class="token operator">=</span> prev<span class="token punctuation">;</span>        x<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// è¿›è¡Œxå­˜å‚¨å†…å®¹çš„åˆ é™¤ï¼Œä»¥åŠé“¾è¡¨é•¿åº¦çš„è°ƒæ•´</span>    x<span class="token punctuation">.</span>item <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    size<span class="token operator">--</span><span class="token punctuation">;</span>    modCount<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> element<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æŸ¥æ‰¾"><a href="#æŸ¥æ‰¾" class="headerlink" title="æŸ¥æ‰¾"></a>æŸ¥æ‰¾</h3><p>è¿™é‡Œå°±æ˜¯ç®€å•çš„ä¸€ä¸ªé¡ºåºéå†é“¾è¡¨å¾—åˆ°æ‰€æŸ¥å…ƒç´ oåœ¨é“¾è¡¨çš„ä½ç½®ï¼Œé‡‡å–è¦†ç›–çˆ¶ç±»<code>AbstractList&lt;E&gt;</code>çš„æ–¹æ³•ï¼Œå› ä¸ºåœ¨<code>AbstractList&lt;E&gt;</code>ä¸­è¿™ä¸¤ç§ç´¢å–å…ƒç´ ä½ç½®çš„æ–¹å¼ï¼Œéƒ½æ˜¯ä¾é äº<code>ListItreator</code>è¿­ä»£å™¨ï¼</p><p>ï¼ˆå·¦ -&gt; å³ï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> first<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>item <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> index<span class="token punctuation">;</span>            index<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> first<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> index<span class="token punctuation">;</span>            index<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆå·¦ &lt;- å³ï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> index <span class="token operator">=</span> size<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> last<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">)</span> <span class="token punctuation">{</span>            index<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>item <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> index<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> x <span class="token operator">=</span> last<span class="token punctuation">;</span> x <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> x <span class="token operator">=</span> x<span class="token punctuation">.</span>prev<span class="token punctuation">)</span> <span class="token punctuation">{</span>            index<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> index<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ·»åŠ é›†åˆ"><a href="#æ·»åŠ é›†åˆ" class="headerlink" title="æ·»åŠ é›†åˆ*"></a>æ·»åŠ é›†åˆ*</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addAll</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">checkPositionIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> numNew <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>numNew <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> pred<span class="token punctuation">,</span> succ<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>        succ <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        pred <span class="token operator">=</span> last<span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        succ <span class="token operator">=</span> <span class="token function">node</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>        pred <span class="token operator">=</span> succ<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> o <span class="token operator">:</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span> <span class="token class-name">E</span> e <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> o<span class="token punctuation">;</span>        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>pred<span class="token punctuation">,</span> e<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>pred <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            first <span class="token operator">=</span> newNode<span class="token punctuation">;</span>        <span class="token keyword">else</span>            pred<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>        pred <span class="token operator">=</span> newNode<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>succ <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        last <span class="token operator">=</span> pred<span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        pred<span class="token punctuation">.</span>next <span class="token operator">=</span> succ<span class="token punctuation">;</span>        succ<span class="token punctuation">.</span>prev <span class="token operator">=</span> pred<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    size <span class="token operator">+=</span> numNew<span class="token punctuation">;</span>    modCount<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="è¿­ä»£å™¨"><a href="#è¿­ä»£å™¨" class="headerlink" title="è¿­ä»£å™¨"></a>è¿­ä»£å™¨</h1><h2 id="ListItreator"><a href="#ListItreator" class="headerlink" title="ListItreator"></a>ListItreator</h2><table><thead><tr><th align="left">ListItreator&lt;E&gt;</th></tr></thead><tbody><tr><td align="left"><strong>boolean hasNext()</strong></td></tr><tr><td align="left"><strong>E next()</strong></td></tr><tr><td align="left"><strong>boolean hasPrevious()</strong></td></tr><tr><td align="left"><strong>E previous()</strong></td></tr><tr><td align="left"><strong>int nextIndex()</strong></td></tr><tr><td align="left"><strong>int previousIndex()</strong></td></tr><tr><td align="left"><strong>void remove()</strong></td></tr><tr><td align="left"><strong>void set(E e)</strong></td></tr><tr><td align="left"><strong>void add(E e)</strong></td></tr></tbody></table><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">ListItr</span> <span class="token keyword">implements</span> <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> lastReturned<span class="token punctuation">;</span>           <span class="token comment">// ä¸Šæ¬¡è¿”å›çš„ç»“ç‚¹</span>    <span class="token keyword">private</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next<span class="token punctuation">;</span>                   <span class="token comment">// ä¸‹ä¸€æ¬¡å°†è¿­ä»£è®¿é—®çš„ç»“ç‚¹</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> nextIndex<span class="token punctuation">;</span>                  <span class="token comment">// ä¸‹ä¸€æ¬¡å°†è¿­ä»£è®¿é—®çš„ç»“ç‚¹çš„ä½ç½®</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> expectedModCount <span class="token operator">=</span> modCount<span class="token punctuation">;</span><span class="token comment">// é›†åˆä¿®æ”¹æ¬¡æ•°</span>    <span class="token comment">// æ„é€ èµ·å§‹ä½ç½®ä¸ºindexçš„è¿­ä»£å™¨æŒ‡é’ˆå¼•ç”¨</span>    <span class="token class-name">ListItr</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// assert isPositionIndex(index);</span>        next <span class="token operator">=</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> size<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token function">node</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>        nextIndex <span class="token operator">=</span> index<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> nextIndex <span class="token operator">&lt;</span> size<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// nextæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯è¿­ä»£å™¨èµ·ç‚¹å…ƒç´  æ¯”å¦‚listIterator(3) : å°±æ˜¯link[3]</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¿ç•™è·¨è¶Šå…ƒç´ ï¼Œå†è·¨è¶Šå…ƒç´ </span>        lastReturned <span class="token operator">=</span> next<span class="token punctuation">;</span>        next <span class="token operator">=</span> next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        nextIndex<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> lastReturned<span class="token punctuation">.</span>item<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasPrevious</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> nextIndex <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// previousçš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯è¿­ä»£å™¨èµ·ç‚¹å…ƒç´ çš„å‰ä¸€ä¸ªå…ƒç´  æ¯”å¦‚listIterator(3) : å°±æ˜¯link[2]</span>    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">previous</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasPrevious</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        lastReturned <span class="token operator">=</span> next <span class="token operator">=</span> <span class="token punctuation">(</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> last <span class="token operator">:</span> next<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>        nextIndex<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> lastReturned<span class="token punctuation">.</span>item<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">nextIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> nextIndex<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">previousIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> nextIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>lastReturned <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> lastNext <span class="token operator">=</span> lastReturned<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        <span class="token function">unlink</span><span class="token punctuation">(</span>lastReturned<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>next <span class="token operator">==</span> lastReturned<span class="token punctuation">)</span>            next <span class="token operator">=</span> lastNext<span class="token punctuation">;</span>        <span class="token keyword">else</span>            nextIndex<span class="token operator">--</span><span class="token punctuation">;</span>        lastReturned <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        expectedModCount<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>lastReturned <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        lastReturned<span class="token punctuation">.</span>item <span class="token operator">=</span> e<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        lastReturned <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token function">linkLast</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>            <span class="token function">linkBefore</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">;</span>        nextIndex<span class="token operator">++</span><span class="token punctuation">;</span>        expectedModCount<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">forEachRemaining</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>modCount <span class="token operator">==</span> expectedModCount <span class="token operator">&amp;&amp;</span> nextIndex <span class="token operator">&lt;</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>            action<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>            lastReturned <span class="token operator">=</span> next<span class="token punctuation">;</span>            next <span class="token operator">=</span> next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>            nextIndex<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>modCount <span class="token operator">!=</span> expectedModCount<span class="token punctuation">)</span>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Javaé›†åˆæ¥å£ä¸­çš„è¿­ä»£å™¨å¯è§†ä¸ºï¼šä½äºä¸¤ä¸ªå…ƒç´ ä¹‹é—´çš„ä½ç½®ã€‚æ¯æ¬¡éå†æŒ‡é’ˆåœ¨è·¨è¿‡å…ƒç´ ä¹‹å‰éƒ½å°†ä¿ç•™å…ƒç´ ï¼Œå†è·¨è¿‡</p><p>è¿™é‡Œå…³äº<code>previous()</code>å’Œ<code>next()</code>æ–¹æ³•çš„èµ·ç‚¹å…ƒç´ (æ³¨é‡Šä¸­å·²ç»è§£é‡Š) </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StartIndex</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"mate0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"mate1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"mate2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"mate3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"mate4"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ListIterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">listIterator</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// index {0,1,2,3,4,5}</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">nextIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// console: 3</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">previousIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// console: 2</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œçš„<code>listIteratoræ–¹æ³•</code>å‚æ•°indexèŒƒå›´å¯ä»¥åœ¨[0,size]ï¼Œæ˜¯å› ä¸ºç´¢å¼•æ ¡éªŒæœºåˆ¶é‡‡å–çš„<code>isPositionIndex</code></p><p>è€Œè·å–å™¨å’Œæ›´æ”¹å™¨æ–¹æ³•å‚æ•°indexèŒƒå›´åªèƒ½åœ¨[0,size-1]ï¼Œæ˜¯å› ä¸ºç´¢å¼•æ ¡éªŒæœºåˆ¶é‡‡å–çš„<code>isElementIndex</code></p><p>åœ¨<code>ListIterator</code>ä¸­å­˜åœ¨ä¸€ä¸ªåŒäºçš„åˆ é™¤æ–¹æ³•<code>remove</code>ã€‚ä¸ºäº†å¹³è¡¡<code>previous</code>å’Œ<code>next</code>èµ·å§‹å…ƒç´ çš„ä¸åŒï¼Œè¿™é‡Œåœ¨removeé‡Œé¢åŠ å…¥äº†ä¸€ä¸ªåˆ¤æ–­è¯­å¥</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">if</span><span class="token punctuation">(</span>next <span class="token operator">==</span> lastReturned<span class="token punctuation">)</span> <span class="token punctuation">{</span>    next <span class="token operator">=</span> lastNext<span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>    nextIndex<span class="token operator">--</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“<code>if</code>æ¡ä»¶æ»¡è¶³æ—¶ï¼Œè¡¨ç¤ºæ­¤æ—¶è°ƒç”¨çš„æ˜¯<code>previous</code>ã€‚å½“<code>else</code>æ¡ä»¶æ»¡è¶³æ—¶ï¼Œè¡¨ç¤ºè°ƒç”¨çš„æ˜¯<code>next</code>ã€‚</p><h1 id="æ‹“å±•ç»“æ„"><a href="#æ‹“å±•ç»“æ„" class="headerlink" title="æ‹“å±•ç»“æ„"></a>æ‹“å±•ç»“æ„</h1><h2 id="Deque-lt-E-gt"><a href="#Deque-lt-E-gt" class="headerlink" title="Deque<E>"></a>Deque&lt;E&gt;</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// è‡ªæ‹“å±•åŒå‘é˜Ÿåˆ—æ–¹æ³•</span><span class="token keyword">void</span> <span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">void</span> <span class="token function">addLast</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> <span class="token function">offerFirst</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> <span class="token function">offerLast</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">E</span> <span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">E</span> <span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">E</span> <span class="token function">pollFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">E</span> <span class="token function">pollLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">E</span> <span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">E</span> <span class="token function">getLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">E</span> <span class="token function">peekFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">E</span> <span class="token function">peekLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> <span class="token function">removeFirstOccurrence</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> <span class="token function">removeLastOccurrence</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// *** Queue methods ***</span><span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> <span class="token function">offer</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">E</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">E</span> <span class="token function">element</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// å †æ ˆå’Œé˜Ÿåˆ—çš„å…±æ€§æ“ä½œ</span><span class="token class-name">E</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// *** Stack methods ***</span><span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">E</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// *** Collection methods ***</span><span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è‡ªå®šä¹‰é™åºè¿­ä»£å™¨</span><span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">descendingIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»ç»§æ‰¿ä½“ç³»çœ‹å‡ºï¼Œåœ¨å®ç°<code>Deque&lt;E&gt;</code>æ¥å£ä¸­ï¼Œä¸»è¦æ˜¯ä»¥é˜Ÿåˆ—å’Œå †æ ˆä»¥åŠç‰¹å®šçš„é™åºè¿­ä»£å™¨ï¼</p><p>æ­¤æ¥å£æ‰©å±•äº† <code>Queue</code> æ¥å£ã€‚</p><p><b style="color:hotpink">åœ¨å°†åŒç«¯é˜Ÿåˆ—ç”¨ä½œé˜Ÿåˆ—æ—¶</b>ï¼Œå°†å¾—åˆ°  FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰è¡Œä¸ºã€‚å°†å…ƒç´ æ·»åŠ åˆ°åŒç«¯é˜Ÿåˆ—çš„æœ«å°¾ï¼Œä»åŒç«¯é˜Ÿåˆ—çš„å¼€å¤´ç§»é™¤å…ƒç´ ã€‚ä» <code>Queue</code> æ¥å£ç»§æ‰¿çš„æ–¹æ³•å®Œå…¨ç­‰æ•ˆäº  <code>Deque</code> æ–¹æ³•ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š </p><table><thead><tr><th><strong><code>Queue</code> æ–¹æ³•</strong></th><th><strong>ç­‰æ•ˆ <code>Deque</code> æ–¹æ³•</strong></th></tr></thead><tbody><tr><td><code>add(e)</code></td><td><code>addLast(e)</code></td></tr><tr><td><code>offer(e)</code></td><td><code>offerLast(e)</code></td></tr><tr><td><code>remove()</code></td><td><code>removeFirst()</code></td></tr><tr><td><code>poll()</code></td><td><code>pollFirst()</code></td></tr><tr><td><code>element()</code></td><td><code>getFirst()</code></td></tr><tr><td><code>peek()</code></td><td><code>peekFirst()</code></td></tr></tbody></table><p><b style="color:hotpink">åŒç«¯é˜Ÿåˆ—ä½œ LIFOï¼ˆåè¿›å…ˆå‡ºï¼‰å †æ ˆæ—¶</b>ã€‚åº”ä¼˜å…ˆä½¿ç”¨æ­¤æ¥å£è€Œä¸æ˜¯é—ç•™ <code>Stack</code> ç±»ã€‚åœ¨å°†åŒç«¯é˜Ÿåˆ—ç”¨ä½œå †æ ˆæ—¶ï¼Œå…ƒç´ è¢«æ¨å…¥åŒç«¯é˜Ÿåˆ—çš„å¼€å¤´å¹¶ä»åŒç«¯é˜Ÿåˆ—å¼€å¤´å¼¹å‡ºã€‚å †æ ˆæ–¹æ³•å®Œå…¨ç­‰æ•ˆäº <code>Deque</code> æ–¹æ³•ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š </p><table><thead><tr><th><strong>å †æ ˆæ–¹æ³•</strong></th><th><strong>ç­‰æ•ˆ <code>Deque</code> æ–¹æ³•</strong></th></tr></thead><tbody><tr><td><code>push(e)</code></td><td><code>addFirst(e)</code></td></tr><tr><td><code>pop()</code></td><td><code>removeFirst()</code></td></tr><tr><td><code>peek()</code></td><td><code>peekFirst()</code>)</td></tr></tbody></table><p>æ³¨æ„ï¼Œåœ¨å°†åŒç«¯é˜Ÿåˆ—ç”¨ä½œé˜Ÿåˆ—æˆ–å †æ ˆæ—¶ï¼Œ<code>peek</code>  æ–¹æ³•åŒæ ·æ­£å¸¸å·¥ä½œï¼›æ— è®ºå“ªç§æƒ…å†µä¸‹ï¼Œéƒ½ä»åŒç«¯é˜Ÿåˆ—çš„å¼€å¤´æŠ½å–å…ƒç´ </p><h2 id="å †æ ˆæ“ä½œ"><a href="#å †æ ˆæ“ä½œ" class="headerlink" title="å †æ ˆæ“ä½œ"></a>å †æ ˆæ“ä½œ</h2><h3 id="å‹å…¥æ ˆé¡¶"><a href="#å‹å…¥æ ˆé¡¶" class="headerlink" title="å‹å…¥æ ˆé¡¶"></a>å‹å…¥æ ˆé¡¶</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">addFirst</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// pushä¸addFirstç­‰ä»·æ€§</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">linkFirst</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">linkFirst</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> e<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>        first <span class="token operator">=</span> newNode<span class="token punctuation">;</span>        <span class="token comment">// è¿™é‡Œåˆ¤æ–­ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢ç©ºè¡¨çš„æƒ…å†µ</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            last <span class="token operator">=</span> newNode<span class="token punctuation">;</span>        <span class="token keyword">else</span>            f<span class="token punctuation">.</span>prev <span class="token operator">=</span> newNode<span class="token punctuation">;</span>        size<span class="token operator">++</span><span class="token punctuation">;</span>        modCount<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¼¹å‡ºæ ˆé¡¶"><a href="#å¼¹å‡ºæ ˆé¡¶" class="headerlink" title="å¼¹å‡ºæ ˆé¡¶"></a>å¼¹å‡ºæ ˆé¡¶</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// popä¸removeFirstç­‰ä»·æ€§</span><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">unlinkFirst</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">private</span> <span class="token class-name">E</span> <span class="token function">unlinkFirst</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// assert f == first &amp;&amp; f != null;</span>        <span class="token keyword">final</span> <span class="token class-name">E</span> element <span class="token operator">=</span> f<span class="token punctuation">.</span>item<span class="token punctuation">;</span>        <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next <span class="token operator">=</span> f<span class="token punctuation">.</span>next<span class="token punctuation">;</span>        f<span class="token punctuation">.</span>item <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        f<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// help GC</span>        first <span class="token operator">=</span> next<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            last <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>            next<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        size<span class="token operator">--</span><span class="token punctuation">;</span>        modCount<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> element<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è·å–æ ˆé¡¶å…ƒç´ "><a href="#è·å–æ ˆé¡¶å…ƒç´ " class="headerlink" title="è·å–æ ˆé¡¶å…ƒç´ "></a>è·å–æ ˆé¡¶å…ƒç´ </h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> f<span class="token punctuation">.</span>item<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å•å‘é˜Ÿåˆ—"><a href="#å•å‘é˜Ÿåˆ—" class="headerlink" title="å•å‘é˜Ÿåˆ—"></a>å•å‘é˜Ÿåˆ—</h2><h3 id="é˜Ÿå°¾æ·»åŠ "><a href="#é˜Ÿå°¾æ·»åŠ " class="headerlink" title="é˜Ÿå°¾æ·»åŠ "></a>é˜Ÿå°¾æ·»åŠ </h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">offer</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">add</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">linkLast</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token comment">// addä¸addfirstç­‰ä»·æ€§åœ¨äºéƒ½è°ƒç”¨äº†linkLast</span>        <span class="token keyword">void</span> <span class="token function">linkLast</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l <span class="token operator">=</span> last<span class="token punctuation">;</span>            <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> e<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            last <span class="token operator">=</span> newNode<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>                first <span class="token operator">=</span> newNode<span class="token punctuation">;</span>            <span class="token keyword">else</span>                l<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>            size<span class="token operator">++</span><span class="token punctuation">;</span>            modCount<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ é™¤é˜Ÿå¤´å…ƒç´ "><a href="#åˆ é™¤é˜Ÿå¤´å…ƒç´ " class="headerlink" title="åˆ é™¤é˜Ÿå¤´å…ƒç´ "></a>åˆ é™¤é˜Ÿå¤´å…ƒç´ </h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">unlinkFirst</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token function">unlinkFirst</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å…±æ€§æ“ä½œ<code>unlinkFirst</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">E</span> <span class="token function">unlinkFirst</span><span class="token punctuation">(</span><span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// ä¿æŒå¤´ç»“ç‚¹ä¿¡æ¯</span>    <span class="token class-name">E</span> elem <span class="token operator">=</span> f<span class="token punctuation">.</span>item<span class="token punctuation">;</span>    <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> next <span class="token operator">=</span> f<span class="token punctuation">.</span>next<span class="token punctuation">;</span>    <span class="token comment">// é”€æ¯å¤´ç»“ç‚¹</span>    f<span class="token punctuation">.</span>item <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    f<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token comment">// å°†firstæŒ‡å‘æ–°çš„å¤´ç»“ç‚¹</span>    first <span class="token operator">=</span> next<span class="token punctuation">;</span>        <span class="token comment">// åˆ¤æ–­ç»“æ„æ˜¯ä¸ºäº†é˜²æ­¢é“¾è¡¨åªå«æœ‰ä¸€ä¸ªå…ƒç´ çš„æƒ…å†µ</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>next <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        last <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">else</span>         next<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    size<span class="token operator">--</span><span class="token punctuation">;</span>    modCount<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> elem<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è·å–é˜Ÿå¤´å…ƒç´ "><a href="#è·å–é˜Ÿå¤´å…ƒç´ " class="headerlink" title="è·å–é˜Ÿå¤´å…ƒç´ "></a>è·å–é˜Ÿå¤´å…ƒç´ </h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">element</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> f<span class="token punctuation">.</span>item<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åŒå‘é˜Ÿåˆ—"><a href="#åŒå‘é˜Ÿåˆ—" class="headerlink" title="åŒå‘é˜Ÿåˆ—*"></a>åŒå‘é˜Ÿåˆ—*</h2><h3 id="æ’å…¥å…ƒç´ "><a href="#æ’å…¥å…ƒç´ " class="headerlink" title="æ’å…¥å…ƒç´ "></a>æ’å…¥å…ƒç´ </h3><ul><li>æ­£å‘é˜Ÿåˆ—-add</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addFirst</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">linkFirst</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">linkFirst</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// ä¿å­˜å¤´ç»“ç‚¹ä¿¡æ¯</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>    <span class="token comment">// ç”Ÿæˆéœ€è¦æ’å…¥çš„ç»“ç‚¹</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>e<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å°†æ–°ç»“ç‚¹ç½®ä¸ºfirst</span>    first <span class="token operator">=</span> newNode<span class="token punctuation">;</span>        <span class="token comment">// åˆ¤æ–­æ¡ä»¶æ˜¯ä¸ºäº†é˜²æ­¢åŸæ¥é“¾è¡¨ä¸ºç©ºçš„æƒ…å†µ</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        last <span class="token operator">=</span> newNode<span class="token punctuation">;</span>    <span class="token keyword">else</span>         f<span class="token punctuation">.</span>prev <span class="token operator">=</span> newNode<span class="token punctuation">;</span>    size<span class="token operator">++</span><span class="token punctuation">;</span>    modCount<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åå‘é˜Ÿåˆ—-add</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addLast</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">linkLast</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">linkLast</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l <span class="token operator">=</span> last<span class="token punctuation">;</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> newNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>e<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    last <span class="token operator">=</span> newNode<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        first <span class="token operator">=</span> newNode<span class="token punctuation">;</span>    <span class="token keyword">else</span>        l<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>    size<span class="token operator">++</span><span class="token punctuation">;</span>    modCount<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ­£å‘-offer</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">offerFirst</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">addFirst</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åå‘-offer</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">offerLast</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">addLast</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="åˆ é™¤å…ƒç´ "><a href="#åˆ é™¤å…ƒç´ " class="headerlink" title="åˆ é™¤å…ƒç´ "></a>åˆ é™¤å…ƒç´ </h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">pollFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token function">unlinkFirst</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">pollLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l <span class="token operator">=</span> last<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token function">unlinkLast</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">removeFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">unlinkFirst</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">removeLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l <span class="token operator">=</span> last<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">unlinkLast</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è·å–å…ƒç´ "><a href="#è·å–å…ƒç´ " class="headerlink" title="è·å–å…ƒç´ "></a>è·å–å…ƒç´ </h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">peekFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> f <span class="token operator">=</span> first<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token punctuation">(</span>f <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> f<span class="token punctuation">.</span>item<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">peekLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">final</span> <span class="token class-name">Node</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> l <span class="token operator">=</span> last<span class="token punctuation">;</span><span class="token keyword">return</span> <span class="token punctuation">(</span>l <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> l<span class="token punctuation">.</span>item<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> CoreJava </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åŸåˆ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºMySQLçš„æ•°æ®åº“æ“ä½œ</title>
      <link href="posts/53808.html"/>
      <url>posts/53808.html</url>
      
        <content type="html"><![CDATA[<h1 id="ç¤ºä¾‹è¡¨"><a href="#ç¤ºä¾‹è¡¨" class="headerlink" title="ç¤ºä¾‹è¡¨"></a>ç¤ºä¾‹è¡¨</h1><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs/20210330170535.jpg" style="width:80%;border:solid"><h1 id="MySQLæ“ä½œ"><a href="#MySQLæ“ä½œ" class="headerlink" title="MySQLæ“ä½œ"></a>MySQLæ“ä½œ</h1><h2 id="INå­æŸ¥è¯¢"><a href="#INå­æŸ¥è¯¢" class="headerlink" title="INå­æŸ¥è¯¢"></a>INå­æŸ¥è¯¢</h2><p>ä¸ºä»€ä¹ˆéœ€è¦å­æŸ¥è¯¢ï¼Ÿ</p><p>1ï¼‰é›†åˆæˆå‘˜èµ„æ ¼ï¼šåˆ¤æ–­æŸä¸€ä¸ªå…ƒç´ æ˜¯å¦æ˜¯è¯¥é›†åˆçš„æˆå‘˜ï¼ˆIN å­æŸ¥è¯¢ï¼‰</p><p>2ï¼‰é›†åˆä¹‹é—´çš„æ¯”è¾ƒï¼šåˆ¤æ–­ä¸€ä¸ªé›†åˆæ˜¯å¦æ˜¯å¦å¤–ä¸€ä¸ªé›†åˆçš„å­é›†ï¼ˆÎ¸å­æŸ¥è¯¢ï¼‰</p><p>3ï¼‰é›†åˆåŸºæ•°æµ‹è¯•ï¼šé›†åˆæ˜¯å¦ä¸ºç©ºï¼Ÿé›†åˆæ˜¯å¦å­˜åœ¨é‡å¤å…ƒç»„ï¼ˆEXISTS å­æŸ¥è¯¢ï¼‰</p><p>å­æŸ¥è¯¢ï¼šå°±æ˜¯åœ¨<strong>where</strong>å­å¥ä¸­å‡ºç°çš„<strong>select</strong>å­å¥</p><p><code>INå­æŸ¥è¯¢</code>ï¼šåˆ¤æ–­æŸä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼æ˜¯å¦åœ¨å­æŸ¥è¯¢çš„ç»“æœå½“ä¸­</p><ul><li>åˆ—å‡ºé€‰ä¿®äº†001å·è¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·å’Œå§“å</li></ul><p>1ï¼‰æŸ¥å‡ºé€‰ä¿®é€‰ä¿®001å·è¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·</p><p>2ï¼‰æ ¹æ®å­¦å·æ¥ç­›é€‰å‡ºå­¦ç”Ÿçš„å­¦å·ä¸å§“å</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> Sid<span class="token punctuation">,</span>Sname<span class="token keyword">FROM</span> student<span class="token keyword">WHERE</span> Sid <span class="token operator">IN</span><span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> Sid    <span class="token keyword">FROM</span> sc    <span class="token keyword">WHERE</span> Cid <span class="token operator">=</span> <span class="token string">'001'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é™¤äº†ä¸Šé¢è¿™ç§å¸¦æœ‰<code>INå­æŸ¥è¯¢</code>ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨è‡ªç„¶è¿æ¥çš„æ–¹å¼ï¼Œè¿›è¡ŒæŸ¥è¯¢</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> student<span class="token punctuation">.</span>Sid <span class="token punctuation">,</span>Sname<span class="token keyword">FROM</span> sc<span class="token punctuation">,</span>student<span class="token keyword">WHERE</span> sc<span class="token punctuation">.</span>Sid <span class="token operator">=</span> student<span class="token punctuation">.</span>Sid <span class="token operator">AND</span> Cid <span class="token operator">=</span><span class="token string">'001'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>åˆ—å‡ºæ—¢é€‰ä¿®äº†001å·è¯¾ç¨‹ï¼Œåˆé€‰ä¿®äº†002å·è¯¾ç¨‹å­¦ç”Ÿçš„å­¦å·</li></ul><p>1ï¼‰æ‰¾å‡ºé€‰ä¿®äº†002å·è¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·</p><p>2ï¼‰åœ¨é€‰è¯¾è¡¨ä¸­æ‰¾å‡ºé€‰ä¿®äº†001å·è¯¾ç¨‹å¹¶ä¸”å­¦å·åœ¨ä¸Šé¢æŸ¥è¯¢ç»“æœä¹‹ä¸­</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># æ‰¾å‡ºé€‰ä¿®äº†002å·è¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·</span><span class="token keyword">SELECT</span> Sid<span class="token keyword">FROM</span> sc<span class="token keyword">WHERE</span> Cid <span class="token operator">=</span> <span class="token string">'002'</span><span class="token punctuation">;</span><span class="token comment"># æ‰¾å‡ºé€‰ä¿®äº†001å·è¯¾ç¨‹å¹¶ä¸”å­¦å·åœ¨ä¸Šé¢æŸ¥è¯¢ç»“æœä¹‹ä¸­</span><span class="token keyword">SELECT</span> Sid<span class="token keyword">FROM</span> sc<span class="token keyword">WHERE</span> Cid <span class="token operator">=</span> <span class="token string">'001'</span> <span class="token operator">AND</span> Sid <span class="token operator">IN</span><span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> Sid    <span class="token keyword">FROM</span> sc    <span class="token keyword">WHERE</span> Cid <span class="token operator">=</span> <span class="token string">'002'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è‡ªè¿æ¥å®ç°æŸ¥è¯¢</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> s1<span class="token punctuation">.</span>Sid<span class="token keyword">FROM</span> sc s1<span class="token punctuation">,</span>sc s2<span class="token keyword">WHERE</span> s1<span class="token punctuation">.</span>Sid <span class="token operator">=</span>s2<span class="token punctuation">.</span>Sid <span class="token operator">AND</span> s1<span class="token punctuation">.</span>Cid <span class="token operator">=</span><span class="token string">'001'</span> <span class="token operator">AND</span> s2<span class="token punctuation">.</span>Cid <span class="token operator">=</span> <span class="token string">'002'</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>åˆ—å‡ºæ²¡æœ‰é€‰ä¿®HUAWEIè¯¾ç¨‹çš„æ‰€æœ‰åŒå­¦å§“å</li></ul><p>1ï¼‰æ‰¾å‡ºé€‰ä¿®HUAWEIè¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·</p><p>2ï¼‰åœ¨å­¦ç”Ÿæ ‡å‡†æ‰¾å‡ºä¸åœ¨ä¸Šé¢æŸ¥è¯¢ç»“æœä¹‹ä¸­çš„å­¦ç”Ÿå­¦å·</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># æ‰¾å‡ºé€‰ä¿®HUAWEIè¯¾ç¨‹çš„å­¦ç”Ÿå­¦å·</span><span class="token keyword">SELECT</span> Sid<span class="token keyword">FROM</span> sc<span class="token punctuation">,</span>teacher<span class="token punctuation">,</span>course<span class="token keyword">WHERE</span> sc<span class="token punctuation">.</span>Cid <span class="token operator">=</span> course<span class="token punctuation">.</span>Cid <span class="token operator">AND</span> teacher<span class="token punctuation">.</span>Tid <span class="token operator">=</span> course<span class="token punctuation">.</span>Tid <span class="token operator">AND</span> teacher<span class="token punctuation">.</span>Tname <span class="token operator">=</span> <span class="token string">'HUAWEI'</span><span class="token punctuation">;</span><span class="token comment"># ä¸åœ¨ä¸Šé¢çš„æŸ¥è¯¢å¯»ç»“æœä¹‹ä¸­</span><span class="token keyword">SELECT</span> Sid<span class="token keyword">FROM</span> student<span class="token keyword">WHERE</span> Sid <span class="token operator">NOT</span> <span class="token operator">IN</span><span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> Sid    <span class="token keyword">FROM</span> sc<span class="token punctuation">,</span>teacher<span class="token punctuation">,</span>course    <span class="token keyword">WHERE</span> sc<span class="token punctuation">.</span>Cid <span class="token operator">=</span> course<span class="token punctuation">.</span>Cid <span class="token operator">AND</span> teacher<span class="token punctuation">.</span>Tid <span class="token operator">=</span> course<span class="token punctuation">.</span>Tid <span class="token operator">AND</span> teacher<span class="token punctuation">.</span>Tname <span class="token operator">=</span> <span class="token string">'HUAWEI'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æŸ¥è¯¢å‡ºé€‰ä¿®001å·è¯¾ç¨‹å­¦ç”Ÿçš„å§“å</li></ul><p>1ï¼‰æŸ¥è¯¢å‡ºé€‰ä¿®äº†001å·è¯¾ç¨‹å­¦ç”Ÿçš„å­¦å·</p><p>2ï¼‰æ ¹æ®æŸ¥è¯¢å‡ºæ¥çš„å­¦å·ï¼ŒæŸ¥è¯¢å­¦ç”Ÿçš„å§“å</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># æŸ¥è¯¢å‡ºé€‰ä¿®äº†001å·è¯¾ç¨‹å­¦ç”Ÿçš„å­¦å·</span><span class="token keyword">SELECT</span> Sid<span class="token keyword">FROM</span> sc<span class="token punctuation">,</span>student<span class="token keyword">WHERE</span> sc<span class="token punctuation">.</span>Sid <span class="token operator">=</span> student<span class="token punctuation">.</span>Sid <span class="token operator">AND</span> sc<span class="token punctuation">.</span>Cid <span class="token operator">=</span> <span class="token string">'001'</span><span class="token punctuation">;</span><span class="token comment"># æ ¹æ®æŸ¥è¯¢å‡ºæ¥çš„å­¦å·ï¼ŒæŸ¥è¯¢å­¦ç”Ÿçš„å§“å</span><span class="token keyword">SELECT</span> Sname<span class="token keyword">FROM</span> student<span class="token keyword">WHERE</span> Sid <span class="token operator">IN</span> <span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> Sid<span class="token keyword">FROM</span> sc<span class="token punctuation">,</span>student<span class="token keyword">WHERE</span> sc<span class="token punctuation">.</span>Sid <span class="token operator">=</span> student<span class="token punctuation">.</span>Sid <span class="token operator">AND</span> sc<span class="token punctuation">.</span>Cid <span class="token operator">=</span> <span class="token string">'001'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬ä»SQLè¯­å¥ä¸­çœ‹åˆ°ï¼Œå†…å±‚å­æŸ¥è¯¢è°ƒç”¨äº†å¤–å±‚çš„å‚æ•°studentã€‚è¿™ç§å…³ç³»å«åšç›¸å…³å­æŸ¥è¯¢ï¼Œå¹¶ä¸”å‚æ•°åªèƒ½ç”±å¤–åˆ°å†…å±‚ä¼ é€’ï¼</p><h2 id="Î¸å­æŸ¥è¯¢"><a href="#Î¸å­æŸ¥è¯¢" class="headerlink" title="Î¸å­æŸ¥è¯¢"></a>Î¸å­æŸ¥è¯¢</h2><p><code>theta some</code>å’Œ<code>theta all</code>ï¼šÎ¸æ˜¯æ¯”è¾ƒè¿ç®—ç¬¦</p><p>1.å¦‚æœè¡¨è¾¾å¼çš„å€¼ä¸å­æŸ¥è¯¢çš„ç»“æœçš„æŸä¸€ä¸ªå€¼æ»¡è¶³Î¸å…³ç³»ï¼Œé‚£ä¹ˆ<code>theta some = true</code></p><p>2.å¦‚æœè¡¨è¾¾å¼çš„å€¼ä¸å­æŸ¥è¯¢çš„ç»“æœçš„æ‰€æœ‰å€¼æ»¡è¶³Î¸å…³ç³»ï¼Œé‚£ä¹ˆ<code>theta all = true</code></p><ul><li>æ‰¾å‡ºå·¥èµ„æœ€ä½çš„æ•™å¸ˆå§“å</li></ul><p>1ï¼‰æŸ¥è¯¢å‡ºæ‰€æœ‰æ•™å¸ˆçš„å·¥èµ„</p><p>2ï¼‰æ¯”è¾ƒæŸ¥è¯¢å‡ºå·¥èµ„æœ€å°çš„ï¼ˆå·¥èµ„æ¯”ä¸Šé¢çš„æ‰€æœ‰æ•™å¸ˆå·¥èµ„éƒ½å°ï¼‰å§“å</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># æŸ¥è¯¢å‡ºæ‰€æœ‰æ•™å¸ˆçš„å·¥èµ„</span><span class="token keyword">SELECT</span> Salary<span class="token keyword">FROM</span> teacher<span class="token punctuation">;</span><span class="token comment"># æ¯”è¾ƒæŸ¥è¯¢å‡ºå·¥èµ„æœ€å°çš„</span><span class="token keyword">SELECT</span> Tname<span class="token keyword">FROM</span> teacher<span class="token keyword">WHERE</span> Salary <span class="token operator">&lt;=</span> <span class="token keyword">ALL</span><span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> Salary<span class="token keyword">FROM</span> teacher<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ‰¾å‡º001å·è¯¾ç¨‹æˆç»©ä¸æ˜¯æœ€é«˜çš„å­¦ç”Ÿå§“å</li></ul><p>1ï¼‰æŸ¥è¯¢å‡ºæ‰€æœ‰é€‰ä¿®001å·è¯¾ç¨‹å­¦ç”Ÿçš„æˆç»©</p><p>2ï¼‰æ¯”è¾ƒæŸ¥è¯¢å‡ºæˆç»©ä¸æ˜¯æœ€é«˜ï¼ˆåœ¨ä¸Šé¢çš„æŸ¥è¯¢ç»“æœä¸­ï¼Œè‡³å°‘å­˜åœ¨ä¸€ä¸ªå­¦ç”Ÿæˆç»©æ¯”æŸ¥è¯¢ç»“æœé«˜çš„ï¼‰çš„å­¦å·</p><p>3ï¼‰æ ¹æ®å­¦å·æŸ¥è¯¢å‡ºå­¦ç”Ÿå§“å</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># æŸ¥è¯¢å‡ºæ‰€æœ‰é€‰ä¿®001å·è¯¾ç¨‹å­¦ç”Ÿçš„æˆç»©</span><span class="token keyword">SELECT</span> Score<span class="token keyword">FROM</span> sc<span class="token keyword">WHERE</span> Cid <span class="token operator">=</span> <span class="token string">'001'</span><span class="token punctuation">;</span><span class="token comment"># æŸ¥è¯¢å‡ºå­¦å·</span><span class="token keyword">SELECT</span> Sid<span class="token keyword">FROM</span> sc<span class="token keyword">WHERE</span> Cid <span class="token operator">=</span> <span class="token string">'001'</span> <span class="token operator">AND</span> Score <span class="token operator">&lt;</span> <span class="token keyword">SOME</span> <span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> Score<span class="token keyword">FROM</span> sc    <span class="token keyword">WHERE</span> Cid <span class="token operator">=</span> <span class="token string">'001'</span><span class="token punctuation">)</span><span class="token comment"># æ ¹æ®å­¦å·æŸ¥è¯¢å‡ºå§“å</span><span class="token keyword">SELECT</span> Sname<span class="token keyword">FROM</span> student<span class="token keyword">WHERE</span> Sid <span class="token operator">IN</span><span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> Sid    <span class="token keyword">FROM</span> sc    <span class="token keyword">WHERE</span> Cid <span class="token operator">=</span> <span class="token string">'001'</span> <span class="token operator">AND</span> Score <span class="token operator">&lt;</span> <span class="token keyword">SOME</span> <span class="token punctuation">(</span>        <span class="token keyword">SELECT</span> Score        <span class="token keyword">FROM</span> sc        <span class="token keyword">WHERE</span> Cid <span class="token operator">=</span> <span class="token string">'001'</span>    <span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æŸ¥è¯¢å‡ºæ‰€æœ‰è¯¾ç¨‹ä¸åŠæ ¼çš„å­¦ç”Ÿå§“åï¼ˆç›¸å…³å­æŸ¥è¯¢ï¼‰</li></ul><p>1ï¼‰æŸ¥è¯¢å‡ºæ‰€æœ‰å­¦ç”Ÿçš„åˆ†æ•°</p><p>2ï¼‰æ ¹æ®æ‰€æœ‰è¯¾ç¨‹æˆç»©å°äº60çš„æ¡ä»¶ç­›é€‰å‡ºå§“å</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> Sname<span class="token keyword">FROM</span> student<span class="token keyword">WHERE</span> <span class="token number">60</span> <span class="token operator">&gt;</span> <span class="token keyword">ALL</span><span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> Score    <span class="token keyword">FROM</span> sc    <span class="token keyword">WHERE</span> sc<span class="token punctuation">.</span>Sid <span class="token operator">=</span> student<span class="token punctuation">.</span>Sid<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æŸ¥è¯¢å‡ºé€‰ä¿®äº†001å·è¯¾ç¨‹ï¼Œä¸”æˆç»©æœ€é«˜çš„åŒå­¦çš„å­¦å·</li></ul><p>1ï¼‰æŸ¥è¯¢å‡ºé€‰ä¿®äº†001å·è¯¾ç¨‹çš„æˆç»©</p><p>2ï¼‰åœ¨é€‰ä¿®äº†001å·è¯¾ç¨‹çš„å­¦ç”Ÿå½“ä¸­æ‰¾å‡ºæˆç»©æœ€é«˜çš„å­¦å·</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> Score<span class="token keyword">FROM</span> sc<span class="token keyword">WHERE</span> Cid <span class="token operator">=</span> <span class="token string">'001'</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> Sid<span class="token keyword">FROM</span> sc<span class="token keyword">WHERE</span> Cid <span class="token operator">=</span> <span class="token string">'001'</span> <span class="token operator">AND</span> Score <span class="token operator">&gt;=</span> <span class="token keyword">ALL</span><span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> Score<span class="token keyword">FROM</span> sc<span class="token keyword">WHERE</span> Cid <span class="token operator">=</span> <span class="token string">'001'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ‰¾å‡º98030101å­¦ç”Ÿæ‰€ä¿®è¯¾ç¨‹åˆ†æ•°æœ€ä½çš„è¯¾ç¨‹å·</li></ul><p>1ï¼‰æ‰¾å‡º98030101å­¦ç”Ÿæ‰€ä¿®è¯¾ç¨‹çš„æ‰€æœ‰åˆ†æ•°</p><p>2ï¼‰é€‰å‡ºæœ€ä½åˆ†æ•°</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># æ‰¾å‡º98030101å­¦ç”Ÿæ‰€ä¿®è¯¾ç¨‹çš„æ‰€æœ‰åˆ†æ•°</span><span class="token keyword">SELECT</span> Score<span class="token keyword">FROM</span> sc<span class="token keyword">WHERE</span> Sid <span class="token operator">=</span> <span class="token string">'98030101'</span><span class="token punctuation">;</span><span class="token comment"># é€‰å‡ºæœ€ä½åˆ†æ•°</span><span class="token keyword">SELECT</span> Cid<span class="token keyword">FROM</span> sc<span class="token keyword">WHERE</span> Sid <span class="token operator">=</span> <span class="token string">'98030101'</span> <span class="token operator">AND</span> Score <span class="token operator">&lt;=</span> <span class="token keyword">ALL</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> Score<span class="token keyword">FROM</span> sc<span class="token keyword">WHERE</span> Sid <span class="token operator">=</span> <span class="token string">'98030101'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æ‰¾å‡ºMSé€‰ä¿®è¯¾ç¨‹çš„æœ€ä½æˆç»©çš„è¯¾ç¨‹å·</li></ul><p>1ï¼‰æ‰¾å‡ºMSåŒå­¦å¯¹äºçš„Sid(MS-Sid)é€‰ä¿®è¯¾ç¨‹çš„æ‰€æœ‰åˆ†æ•°</p><p>2ï¼‰é€‰å‡ºæœ€ä½</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> Score<span class="token keyword">FROM</span> sc<span class="token punctuation">,</span>student<span class="token keyword">WHERE</span> sc<span class="token punctuation">.</span>Sid <span class="token operator">=</span> student<span class="token punctuation">.</span>Sid <span class="token operator">AND</span> student<span class="token punctuation">.</span>Sname <span class="token operator">=</span> <span class="token string">'MS'</span><span class="token punctuation">;</span><span class="token keyword">SELECT</span> Cid<span class="token keyword">FROM</span> sc<span class="token keyword">WHERE</span> Score <span class="token operator">&lt;=</span> <span class="token keyword">ALL</span><span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> Score    <span class="token keyword">FROM</span> sc<span class="token punctuation">,</span>student    <span class="token keyword">WHERE</span> sc<span class="token punctuation">.</span>Sid <span class="token operator">=</span> student<span class="token punctuation">.</span>Sid <span class="token operator">AND</span> student<span class="token punctuation">.</span>Sname <span class="token operator">=</span> <span class="token string">'MS'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸‹é¢ä»£ç ä¹Ÿå¯ä»¥å®ç°ï¼ˆç›¸å…³å­æŸ¥è¯¢ï¼‰</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> Cid<span class="token keyword">FROM</span> sc<span class="token punctuation">,</span>student<span class="token keyword">WHERE</span> sc<span class="token punctuation">.</span>Sid<span class="token operator">=</span>student<span class="token punctuation">.</span>Sid <span class="token operator">AND</span> student<span class="token punctuation">.</span>Sname<span class="token operator">=</span><span class="token string">'MS'</span> <span class="token operator">and</span>Score <span class="token operator">&lt;=</span> <span class="token keyword">ALL</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> Score <span class="token keyword">FROM</span> sc <span class="token keyword">WHERE</span> sc<span class="token punctuation">.</span>Sid<span class="token operator">=</span>student<span class="token punctuation">.</span>Sid<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: chocolate;">ç­‰ä»·å˜åŒ–ï¼š</b></p><p><code>= SOME(å­æŸ¥è¯¢) ç­‰ä»·äº IN(å­æŸ¥è¯¢)</code></p><p><code>!= ALL(å­æŸ¥è¯¢) ç­‰ä»·äºNOT IN(å­æŸ¥è¯¢) </code></p><h2 id="EXISTSå­æŸ¥è¯¢"><a href="#EXISTSå­æŸ¥è¯¢" class="headerlink" title="EXISTSå­æŸ¥è¯¢"></a>EXISTSå­æŸ¥è¯¢</h2><ul><li>é€‰ä¿®äº†<code>JetBrains</code>è¯¾ç¨‹çš„æ‰€æœ‰å­¦ç”Ÿå§“å</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> Sname<span class="token keyword">FROM</span> teacher T<span class="token punctuation">,</span>course C<span class="token punctuation">,</span>sc<span class="token punctuation">,</span>student S<span class="token keyword">WHERE</span> T<span class="token punctuation">.</span>Tid <span class="token operator">=</span> C<span class="token punctuation">.</span>Tid <span class="token operator">AND</span> C<span class="token punctuation">.</span>Cid <span class="token operator">=</span> sc<span class="token punctuation">.</span>Cid <span class="token operator">AND</span> sc<span class="token punctuation">.</span>Sid <span class="token operator">=</span> S<span class="token punctuation">.</span>Sid <span class="token operator">AND</span> T<span class="token punctuation">.</span>Tname <span class="token operator">=</span> <span class="token string">'JetBrains'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><code>NOT EXISTS</code>æŸ¥è¯¢æ‰€æœ‰</p><ul><li>åˆ—å‡ºæ²¡æœ‰é€‰ä¿®<code>JetBrains</code>æ•™æˆè¯¾ç¨‹çš„å­¦ç”Ÿçš„å§“å</li></ul><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># é€‰å‡ºJetBrainsæ•™æˆè¯¾ç¨‹çš„é€‰ä¿®æƒ…å†µ</span><span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> teacher<span class="token punctuation">,</span>course<span class="token punctuation">,</span>sc<span class="token keyword">WHERE</span> teacher<span class="token punctuation">.</span>Tid <span class="token operator">=</span> course<span class="token punctuation">.</span>Tid <span class="token operator">AND</span> course<span class="token punctuation">.</span>Cid <span class="token operator">=</span> sc<span class="token punctuation">.</span>Cid <span class="token operator">AND</span> teacher<span class="token punctuation">.</span>Tname <span class="token operator">=</span><span class="token string">'JetBrains'</span><span class="token punctuation">;</span><span class="token comment">#  æ‰¾å‡ºä¸å­˜åœ¨é€‰ä¿®äº†JetBrainsè¯¾ç¨‹çš„å­¦ç”Ÿ</span><span class="token keyword">SELECT</span> Sname<span class="token keyword">FROM</span> student stu<span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> teacher t<span class="token punctuation">,</span>course c<span class="token punctuation">,</span>sc<span class="token keyword">WHERE</span> t<span class="token punctuation">.</span>Tid <span class="token operator">=</span> c<span class="token punctuation">.</span>Tid <span class="token operator">AND</span> c<span class="token punctuation">.</span>Cid <span class="token operator">=</span> sc<span class="token punctuation">.</span>Cid <span class="token operator">AND</span> stu<span class="token punctuation">.</span>Sid <span class="token operator">=</span> sc<span class="token punctuation">.</span>Sid <span class="token operator">AND</span> t<span class="token punctuation">.</span>Tname <span class="token operator">=</span><span class="token string">'JetBrains'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>æŸ¥è¯¢å‡ºé€‰ä¿®001å·æ•™å¸ˆä¸»è®²çš„æ‰€æœ‰è¯¾ç¨‹çš„æ‰€æœ‰å­¦ç”Ÿå§“å</li></ul><p>è½¬ä¹‰è¯­å¥ï¼šä¸å­˜åœ¨æœ‰ä¸€é—¨001å·æ•™å¸ˆä¸»è®²è¯¾ç¨‹è¯¥åŒå­¦æ²¡æœ‰å­¦è¿‡</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> course<span class="token keyword">WHERE</span> Cid <span class="token operator">=</span> <span class="token string">'001'</span> <span class="token operator">AND</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> <span class="token operator">*</span>    <span class="token keyword">FROM</span> sc<span class="token punctuation">,</span>student    <span class="token keyword">WHERE</span> sc<span class="token punctuation">.</span>Sid <span class="token operator">=</span> student<span class="token punctuation">.</span>Sid <span class="token operator">AND</span> course<span class="token punctuation">.</span>Cid <span class="token operator">=</span> sc<span class="token punctuation">.</span>Cid<span class="token punctuation">)</span><span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> student<span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> course<span class="token keyword">WHERE</span> Tid <span class="token operator">=</span> <span class="token string">'001'</span> <span class="token operator">AND</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> <span class="token operator">*</span>    <span class="token keyword">FROM</span> sc    <span class="token keyword">WHERE</span> sc<span class="token punctuation">.</span>Sid <span class="token operator">=</span> student<span class="token punctuation">.</span>Sid <span class="token operator">AND</span> course<span class="token punctuation">.</span>Cid <span class="token operator">=</span> sc<span class="token punctuation">.</span>Cid<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>åˆ—å‡ºè‡³å°‘å­¦è¿‡98030101å·åŒå­¦é€‰ä¿®è¿‡çš„æ‰€æœ‰è¯¾ç¨‹çš„åŒå­¦å­¦å·</li></ul><p>è½¬ç§»è¯­å¥ï¼šä¸å­˜åœ¨ä¸€é—¨98030101å·åŒå­¦é€‰ä¿®çš„è¯¾ç¨‹è¯¥åŒå­¦æ²¡æœ‰å­¦è¿‡</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> Sid<span class="token keyword">FROM</span> sc sc1<span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> <span class="token operator">*</span>    <span class="token keyword">FROM</span> sc sc2    <span class="token keyword">WHERE</span> sc2<span class="token punctuation">.</span>Sid <span class="token operator">=</span> <span class="token string">'98030101'</span> <span class="token operator">AND</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">(</span>        <span class="token keyword">SELECT</span> <span class="token operator">*</span>        <span class="token keyword">FROM</span> sc        <span class="token keyword">WHERE</span> Cid <span class="token operator">=</span> sc2<span class="token punctuation">.</span>Cid <span class="token operator">AND</span> Sid <span class="token operator">=</span> sc1<span class="token punctuation">.</span>Sid    <span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å­˜åœ¨å…³ç³»è¡¨SPJ(Sno,Pno,Jno,Qty) ä¾›åº”å•†ã€é›¶ä»¶å·ã€å·¥ç¨‹å·ã€æ•°é‡</li><li>åˆ—å‡ºè‡³å°‘ä½¿ç”¨ä¾›åº”å•†S1ä¾›åº”çš„å…¨éƒ¨é›¶ä»¶çš„å·¥ç¨‹å·</li></ul><p>è½¬ç§»è¯­å¥ï¼šä¸å­˜åœ¨ä¸€ä¸ªæœ‰S1ä¾›åº”çš„é›¶ä»¶è¯¥å·¥ç¨‹æ²¡æœ‰ç”¨è¿‡</p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> Jno<span class="token keyword">FROM</span> SPJ SPJ1<span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">(</span>    <span class="token keyword">SELECT</span> <span class="token operator">*</span>    <span class="token keyword">FROM</span> SPJ SPJ2    <span class="token keyword">WHERE</span> Sno <span class="token operator">=</span> <span class="token string">'S1'</span> <span class="token operator">AND</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">(</span>        <span class="token keyword">SELECT</span> <span class="token operator">*</span>        <span class="token keyword">FROM</span> SPJ SPJ3        <span class="token keyword">WHERE</span> SPJ1<span class="token punctuation">.</span>Jno <span class="token operator">=</span> Jno <span class="token operator">AND</span> SPJ2<span class="token punctuation">.</span>Pno <span class="token operator">=</span> Pno    <span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç°ä»£æ“ä½œç³»ç»Ÿ</title>
      <link href="posts/10779.html"/>
      <url>posts/10779.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> æ“ä½œç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸåˆ› </tag>
            
            <tag> OS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DDL DML for MySQL</title>
      <link href="posts/11059.html"/>
      <url>posts/11059.html</url>
      
        <content type="html"><![CDATA[<h1 id="SCTæ•°æ®åº“"><a href="#SCTæ•°æ®åº“" class="headerlink" title="SCTæ•°æ®åº“"></a>SCTæ•°æ®åº“</h1><p>è¿™é‡Œä»¥å­¦ç”Ÿé€‰è¯¾æ•°æ®åº“<code>SCT-DB</code></p><p><code>student{ Sid char(8), Sname char(10), Ssex char(2), Sage int, Did char(2), Sclass char(6) }</code></p><table><thead><tr><th>sid</th><th>Sname</th><th>Ssex</th><th>Sage</th><th>Did</th><th>Sclass</th></tr></thead><tbody><tr><td>98030101</td><td>JB</td><td>ç”·</td><td>20</td><td>03</td><td>980301</td></tr><tr><td>98030102</td><td>MS</td><td>å¥³</td><td>20</td><td>03</td><td>980301</td></tr><tr><td>98030103</td><td>HW</td><td>ç”·</td><td>19</td><td>03</td><td>980301</td></tr><tr><td>98040201</td><td>ali</td><td>ç”·</td><td>20</td><td>04</td><td>980402</td></tr><tr><td>98040202</td><td>JD</td><td>ç”·</td><td>21</td><td>04</td><td>980402</td></tr><tr><td>98040203</td><td>IBM</td><td>å¥³</td><td>19</td><td>04</td><td>980402</td></tr></tbody></table><p><code>dept{ Did char(2), Dname char(10), Dean char(10) }</code></p><table><thead><tr><th>Did</th><th>Dname</th><th>Dean</th></tr></thead><tbody><tr><td>01</td><td>æœºç”µ</td><td>baidu</td></tr><tr><td>02</td><td>èƒ½æº</td><td>apple</td></tr><tr><td>03</td><td>è®¡ç®—æœº</td><td>google</td></tr><tr><td>04</td><td>è‡ªåŠ¨æ§åˆ¶</td><td>bytedance</td></tr></tbody></table><p><code>course{ Cid char(3), Cname char(12), Chours int, Credit float(1), Tid char(3) }</code></p><table><thead><tr><th>Cid</th><th>Cname</th><th>Chours</th><th>Credit</th><th>Tid</th></tr></thead><tbody><tr><td>001</td><td>æ•°æ®åº“</td><td>40</td><td>6</td><td>001</td></tr><tr><td>003</td><td>æ•°æ®ç»“æ„</td><td>40</td><td>6</td><td>003</td></tr><tr><td>004</td><td>ç¼–è¯‘åŸç†</td><td>40</td><td>6</td><td>001</td></tr><tr><td>005</td><td>Cè¯­è¨€</td><td>30</td><td>4.5</td><td>003</td></tr><tr><td>002</td><td>é«˜ç­‰æ•°å­¦</td><td>80</td><td>12</td><td>004</td></tr></tbody></table><p><code>teacher{ Tid char(3), Tname char(10), Did char(2), Salary float(2) }</code></p><table><thead><tr><th>Tid</th><th>Tname</th><th>Did</th><th>Salary</th></tr></thead><tbody><tr><td>001</td><td>JetBrains</td><td>01</td><td>1200.00</td></tr><tr><td>002</td><td>MicroSoft</td><td>02</td><td>1400.00</td></tr><tr><td>003</td><td>HUAWEI</td><td>03</td><td>1000.00</td></tr><tr><td>004</td><td>Alibaba</td><td>04</td><td>1100.00</td></tr></tbody></table><p><code>sc{ Sid char(8), Cid char(3), Score float(1) }</code></p><table><thead><tr><th>Sid</th><th>Cid</th><th>Score</th></tr></thead><tbody><tr><td>98030101</td><td>001</td><td>92</td></tr><tr><td>98030101</td><td>002</td><td>85</td></tr><tr><td>98030101</td><td>003</td><td>88</td></tr><tr><td>98040202</td><td>002</td><td>90</td></tr><tr><td>98040202</td><td>003</td><td>80</td></tr><tr><td>98040202</td><td>001</td><td>55</td></tr><tr><td>98040203</td><td>003</td><td>56</td></tr><tr><td>98030102</td><td>001</td><td>54</td></tr><tr><td>98030102</td><td>002</td><td>85</td></tr><tr><td>98030102</td><td>003</td><td>48</td></tr></tbody></table><h1 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h1><h2 id="åˆ›å»ºSCTæ•°æ®åº“"><a href="#åˆ›å»ºSCTæ•°æ®åº“" class="headerlink" title="åˆ›å»ºSCTæ•°æ®åº“"></a>åˆ›å»ºSCTæ•°æ®åº“</h2><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create database SCT;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="åˆ›å»ºå…³ç³»è¡¨"><a href="#åˆ›å»ºå…³ç³»è¡¨" class="headerlink" title="åˆ›å»ºå…³ç³»è¡¨"></a>åˆ›å»ºå…³ç³»è¡¨</h2><p><code>student{ Sid char(8), Sname char(10), Ssex char(2), Sage int, Did char(2), Sclass char(6) }</code></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create table student(    Sid char(8),    Sname char(10),    Ssex char(2),    Sage int,    Did char(2),    Sclass char(6))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>dept{ Did char(2), Dname char(10), Dean char(10) }</code></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create table dept(    Did char(2),    Dname char(10),    Dean char(10))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>course{ Cid char(3), Cname char(12), Chours int, Credit float(1), Tid char(3) }</code></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create table course(    Cid char(3),    Cname char(12),    Chours int,    Credit float(1),    Tid char(3))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>teacher{ Tid char(3), Tname char(10), Did char(2), Salary float(2) }</code></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create table teacher(    Tid char(3),    Tname char(10),    Did char(2),    Salary float(2))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>sc{ Sid char(8), Cid char(3), Score float(1) }</code></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">create table sc(    Sid char(8),    Cid char(3),    Score float(1))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ’å…¥å…³ç³»è¡¨æ•°æ®"><a href="#æ’å…¥å…³ç³»è¡¨æ•°æ®" class="headerlink" title="æ’å…¥å…³ç³»è¡¨æ•°æ®"></a>æ’å…¥å…³ç³»è¡¨æ•°æ®</h2><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql"># studentinsert into SCT.student(Sid, Sname, Ssex, Sage, Did, Sclass) values('98030101','JB','ç”·',20,'03','980301'),('98030102','MS','å¥³',20,'03','980301'),('98030103','HW','ç”·',19,'03','980301'),('98040201','ali','ç”·',20,'04','980402'),('98040202','JD','ç”·',21,'04','980402'),('98040203','IBM','å¥³',19,'04','980402');# deptinsert into SCT.dept(Did, Dname, Dean) values('01','æœºç”µ','baidu'),('02','èƒ½æº','apple'),('03','è®¡ç®—æœº','google'),('04','è‡ªåŠ¨æ§åˆ¶','bytedance');# courseinsert into SCT.course(Cid, Cname, Chours, Credit, Tid) values('001','æ•°æ®åº“',40,6,'001'),('003','æ•°æ®ç»“æ„',40,6,'003'),('004','ç¼–è¯‘åŸç†',40,6,'001'),('005','Cè¯­è¨€',30,4.5,'003'),('002','é«˜ç­‰æ•°å­¦',80,12,'004');# teacherinsert into SCT.teacher(Tid, Tname, Did, Salary) values('001','JetBrains','01',1200.00),('002','MicroSoft','02',1400.00),('003','HUAWEI','03',1000.00),('004','Alibaba','04',1100.00);# scinsert into SCT.sc(Sid, Cid, Score) values('98030101','001',92),('98030101','002',85),('98030101','003',88),('98040202','002',90),('98040202','003',80),('98040202','001',55),('98040203','003',56),('98030102','001',54),('98030102','002',85),('98030102','003',48);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="DDLæºç "><a href="#DDLæºç " class="headerlink" title="DDLæºç "></a>DDLæºç </h2><p>ğŸ‘‰<a href="https://gitee.com/matemaster/master-depository/blob/master/2021-03-21/SCT.sql">SCT.sql</a></p><h1 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h1><p><b style="color: yellowgreen;">å…³äºMySQL-selectè¯­å¥çš„ä½¿ç”¨ï¼Œä½†æ˜¯ä¸ä»‹ç»</b><br><b style="color: yellowgreen;">è¿™é‡Œå…ˆç®€å•æµè§ˆä¸€ä¸‹ï¼Œå®Œæ•´ç‰ˆæœ¬çš„<code>MySQL-select</code>ç³»åˆ—è¯­å¥ç»“æ„ï¼</b></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">select (select_list)[into new_tb_name]from (tb_name|view_name)[where condition][group by expression][having search_condition][order by expression [desc|asc]]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å…¶ä»–DML"><a href="#å…¶ä»–DML" class="headerlink" title="å…¶ä»–DML"></a>å…¶ä»–DML</h2><p>ï¼ˆ1ï¼‰insertè¯­å¥å¯ä»¥å‚è€ƒæºç ä¸­çš„æ•°æ®æ’å…¥ï¼</p><p>è¿™é‡Œæ¼”ç¤ºä¸€ä¸‹å‘è¡¨ä¸­åŠ å…¥ä¸€ä¸ªselectæ£€ç´¢ç»“æœï¼ˆåŠ å…¥æˆç»©åŠæ ¼çš„åŒå­¦ï¼‰ï¼š<code>insert -&gt; select</code></p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql"># å…ˆåˆ›å»ºnewscå…³ç³»è¡¨insert into SCT.newsc(Sid, Cid, Score)select Sid, Cid, Scorefrom SCwhere (Score &gt;= 60)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ2ï¼‰æ ¹æ®whereå­å¥çš„æ¡ä»¶ï¼Œåˆ é™¤ç¬¦åˆè¦æ±‚çš„å…ƒç´ ï¼ˆå»é™¤æˆç»©ä¸åŠæ ¼çš„åŒå­¦è®°å½•ï¼‰</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">delete from scwhere (Score &lt; 60)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ï¼ˆ3ï¼‰updateæ›´æ–°æŒ‡å®šå±æ€§åˆ—çš„å€¼ï¼ˆæé«˜è®¡ç®—æœºæ•™å¸ˆçš„å·¥èµ„ï¼ˆ1.5å€ï¼‰ï¼‰</p><pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">update teacherset Salary = Salary(1+0.5)where Did in select Didfrom deptWhere (Dname = 'è®¡ç®—æœº')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸåˆ› </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Materyä¸»é¢˜ä¸­æ–‡å‚è€ƒæ–‡æ¡£</title>
      <link href="posts/43043.html"/>
      <url>posts/43043.html</url>
      
        <content type="html"><![CDATA[<h1 id="Materyä¸»é¢˜"><a href="#Materyä¸»é¢˜" class="headerlink" title="Materyä¸»é¢˜"></a>Materyä¸»é¢˜</h1><p><a href="README.md">ğŸ‡ºğŸ‡¸English Document</a> | <a href="http://blinkfox.com/">å›½å†…è®¿é—®ç¤ºä¾‹ (http://blinkfox.com)</a> | <a href="https://blinkfox.github.io/">Github éƒ¨ç½²æ¼”ç¤ºç¤ºä¾‹ (https://blinkfox.github.io)</a> | QQ äº¤æµç¾¤1ï¼ˆå·²æ»¡ï¼‰: <a href="https://jq.qq.com/?_wv=1027&amp;k=5zMDYHT"><code>926552981</code></a> | QQ äº¤æµç¾¤2ï¼ˆæ¨èï¼‰: <a href="https://jq.qq.com/?_wv=1027&amp;k=53q2Ayp"><code>971887688</code></a></p><blockquote><p>è¿™æ˜¯ä¸€ä¸ªé‡‡ç”¨ <code>Material Design</code> å’Œå“åº”å¼è®¾è®¡çš„ Hexo åšå®¢ä¸»é¢˜ã€‚</p></blockquote><h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><ul><li>ç®€å•æ¼‚äº®ï¼Œæ–‡ç« å†…å®¹ç¾è§‚æ˜“è¯»</li><li><a href="https://material.io/">Material Design</a> è®¾è®¡</li><li>å“åº”å¼è®¾è®¡ï¼Œåšå®¢åœ¨æ¡Œé¢ç«¯ã€å¹³æ¿ã€æ‰‹æœºç­‰è®¾å¤‡ä¸Šå‡èƒ½å¾ˆå¥½çš„å±•ç°</li><li>é¦–é¡µè½®æ’­æ–‡ç« åŠæ¯å¤©åŠ¨æ€åˆ‡æ¢ <code>Banner</code> å›¾ç‰‡</li><li>ç€‘å¸ƒæµå¼çš„åšå®¢æ–‡ç« åˆ—è¡¨ï¼ˆæ–‡ç« æ— ç‰¹è‰²å›¾ç‰‡æ—¶ä¼šæœ‰ <code>24</code> å¼ æ¼‚äº®çš„å›¾ç‰‡ä»£æ›¿ï¼‰</li><li>æ—¶é—´è½´å¼çš„å½’æ¡£é¡µ</li><li><strong>è¯äº‘</strong>çš„æ ‡ç­¾é¡µå’Œ<strong>é›·è¾¾å›¾</strong>çš„åˆ†ç±»é¡µ</li><li>ä¸°å¯Œçš„å…³äºæˆ‘é¡µé¢ï¼ˆåŒ…æ‹¬å…³äºæˆ‘ã€æ–‡ç« ç»Ÿè®¡å›¾ã€æˆ‘çš„é¡¹ç›®ã€æˆ‘çš„æŠ€èƒ½ã€ç›¸å†Œç­‰ï¼‰</li><li>å¯è‡ªå®šä¹‰çš„æ•°æ®çš„å‹æƒ…é“¾æ¥é¡µé¢</li><li>æ”¯æŒæ–‡ç« ç½®é¡¶å’Œæ–‡ç« æ‰“èµ</li><li>æ”¯æŒ <code>MathJax</code></li><li><code>TOC</code> ç›®å½•</li><li>å¯è®¾ç½®å¤åˆ¶æ–‡ç« å†…å®¹æ—¶è¿½åŠ ç‰ˆæƒä¿¡æ¯</li><li>å¯è®¾ç½®é˜…è¯»æ–‡ç« æ—¶åšå¯†ç éªŒè¯</li><li><a href="https://gitalk.github.io/">Gitalk</a>ã€<a href="https://imsun.github.io/gitment/">Gitment</a>ã€<a href="https://valine.js.org/">Valine</a> å’Œ <a href="https://disqus.com/">Disqus</a> è¯„è®ºæ¨¡å—ï¼ˆæ¨èä½¿ç”¨ <code>Gitalk</code>ï¼‰</li><li>é›†æˆäº†<a href="http://busuanzi.ibruce.info/">ä¸è’œå­ç»Ÿè®¡</a>ã€è°·æ­Œåˆ†æï¼ˆ<code>Google Analytics</code>ï¼‰å’Œæ–‡ç« å­—æ•°ç»Ÿè®¡ç­‰åŠŸèƒ½</li><li>æ”¯æŒåœ¨é¦–é¡µçš„éŸ³ä¹æ’­æ”¾å’Œè§†é¢‘æ’­æ”¾åŠŸèƒ½</li><li>æ”¯æŒ<code>emoji</code>è¡¨æƒ…ï¼Œç”¨<code>markdown emoji</code>è¯­æ³•ä¹¦å†™ç›´æ¥ç”Ÿæˆå¯¹åº”çš„èƒ½<strong>è·³è·ƒ</strong>çš„è¡¨æƒ…ã€‚</li><li>æ”¯æŒ <a href="http://www.daovoice.io/">DaoVoice</a>ã€<a href="https://www.tidio.com/">Tidio</a> åœ¨çº¿èŠå¤©åŠŸèƒ½ã€‚</li></ul><h2 id="è´¡çŒ®è€…"><a href="#è´¡çŒ®è€…" class="headerlink" title="è´¡çŒ®è€…"></a>è´¡çŒ®è€…</h2><p>æ„Ÿè°¢ä¸‹é¢åˆ—å‡ºçš„è´¡çŒ®è€…ï¼Œæ²¡æœ‰ä»–ä»¬ï¼Œhexo-theme-matery ä¸ä¼šè¿™ä¹ˆå®Œç¾ã€‚</p><ul><li><a href="https://github.com/HarborZeng">@HarborZeng</a></li><li><a href="https://github.com/shw2018">@shw2018</a></li><li><a href="https://github.com/L1cardo">@L1cardo</a></li><li><a href="https://github.com/Five-great">@Five-great</a></li></ul><h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><p>æœ¬ä¸»é¢˜<strong>æ¨èä½ ä½¿ç”¨ Hexo 5.0.0 åŠä»¥ä¸Šçš„ç‰ˆæœ¬</strong>ã€‚å¦‚æœï¼Œä½ å·²ç»æœ‰ä¸€ä¸ªè‡ªå·±çš„ <a href="https://hexo.io/zh-cn/">Hexo</a> åšå®¢äº†ï¼Œå»ºè®®ä½ å°† Hexo å‡çº§åˆ°æœ€æ–°ç¨³å®šçš„ç‰ˆæœ¬ã€‚</p><p>ç‚¹å‡» <a href="https://codeload.github.com/blinkfox/hexo-theme-matery/zip/master">è¿™é‡Œ</a> ä¸‹è½½ <code>master</code> åˆ†æ”¯çš„æœ€æ–°ç¨³å®šç‰ˆçš„ä»£ç ï¼Œè§£å‹ç¼©åï¼Œå°† <code>hexo-theme-matery</code> çš„æ–‡ä»¶å¤¹å¤åˆ¶åˆ°ä½  Hexo çš„ <code>themes</code> æ–‡ä»¶å¤¹ä¸­å³å¯ã€‚</p><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨ä½ çš„ <code>themes</code> æ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨ <code>git clone</code> å‘½ä»¤æ¥ä¸‹è½½:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/blinkfox/hexo-theme-matery.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><h3 id="åˆ‡æ¢ä¸»é¢˜"><a href="#åˆ‡æ¢ä¸»é¢˜" class="headerlink" title="åˆ‡æ¢ä¸»é¢˜"></a>åˆ‡æ¢ä¸»é¢˜</h3><p>ä¿®æ”¹ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> çš„  <code>theme</code> çš„å€¼ï¼š<code>theme: hexo-theme-matery</code></p><h4 id="config-yml-æ–‡ä»¶çš„å…¶å®ƒä¿®æ”¹å»ºè®®"><a href="#config-yml-æ–‡ä»¶çš„å…¶å®ƒä¿®æ”¹å»ºè®®" class="headerlink" title="_config.yml æ–‡ä»¶çš„å…¶å®ƒä¿®æ”¹å»ºè®®:"></a><code>_config.yml</code> æ–‡ä»¶çš„å…¶å®ƒä¿®æ”¹å»ºè®®:</h4><ul><li>è¯·ä¿®æ”¹ <code>_config.yml</code> çš„ <code>url</code> çš„å€¼ä¸ºä½ çš„ç½‘ç«™ä¸» <code>URL</code>ï¼ˆå¦‚ï¼š<code>http://xxx.github.io</code>ï¼‰ã€‚</li><li>å»ºè®®ä¿®æ”¹ä¸¤ä¸ª <code>per_page</code> çš„åˆ†é¡µæ¡æ•°å€¼ä¸º <code>6</code> çš„å€æ•°ï¼Œå¦‚ï¼š<code>12</code>ã€<code>18</code> ç­‰ï¼Œè¿™æ ·æ–‡ç« åˆ—è¡¨åœ¨å„ä¸ªå±å¹•ä¸‹éƒ½èƒ½è¾ƒå¥½çš„æ˜¾ç¤ºã€‚</li><li>å¦‚æœä½ æ˜¯ä¸­æ–‡ç”¨æˆ·ï¼Œåˆ™å»ºè®®ä¿®æ”¹ <code>language</code> çš„å€¼ä¸º <code>zh-CN</code>ã€‚</li></ul><h3 id="æ–°å»ºåˆ†ç±»-categories-é¡µ"><a href="#æ–°å»ºåˆ†ç±»-categories-é¡µ" class="headerlink" title="æ–°å»ºåˆ†ç±» categories é¡µ"></a>æ–°å»ºåˆ†ç±» categories é¡µ</h3><p><code>categories</code> é¡µæ˜¯ç”¨æ¥å±•ç¤ºæ‰€æœ‰åˆ†ç±»çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>categories/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page <span class="token string">"categories"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/categories/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> categories<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-30 17:25:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"categories"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"categories"</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ–°å»ºæ ‡ç­¾-tags-é¡µ"><a href="#æ–°å»ºæ ‡ç­¾-tags-é¡µ" class="headerlink" title="æ–°å»ºæ ‡ç­¾ tags é¡µ"></a>æ–°å»ºæ ‡ç­¾ tags é¡µ</h3><p><code>tags</code> é¡µæ˜¯ç”¨æ¥å±•ç¤ºæ‰€æœ‰æ ‡ç­¾çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>tags/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page <span class="token string">"tags"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/tags/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> tags<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-30 18:23:38</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"tags"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"tags"</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ–°å»ºå…³äºæˆ‘-about-é¡µ"><a href="#æ–°å»ºå…³äºæˆ‘-about-é¡µ" class="headerlink" title="æ–°å»ºå…³äºæˆ‘ about é¡µ"></a>æ–°å»ºå…³äºæˆ‘ about é¡µ</h3><p><code>about</code> é¡µæ˜¯ç”¨æ¥å±•ç¤º<strong>å…³äºæˆ‘å’Œæˆ‘çš„åšå®¢</strong>ä¿¡æ¯çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>about/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page <span class="token string">"about"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/about/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> about<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-30 17:25:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"about"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"about"</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ–°å»ºç•™è¨€æ¿-contact-é¡µï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ–°å»ºç•™è¨€æ¿-contact-é¡µï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ–°å»ºç•™è¨€æ¿ contact é¡µï¼ˆå¯é€‰çš„ï¼‰"></a>æ–°å»ºç•™è¨€æ¿ contact é¡µï¼ˆå¯é€‰çš„ï¼‰</h3><p><code>contact</code> é¡µæ˜¯ç”¨æ¥å±•ç¤º<strong>ç•™è¨€æ¿</strong>ä¿¡æ¯çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>contact/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page <span class="token string">"contact"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/contact/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> contact<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-30 17:25:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"contact"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"contact"</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼šæœ¬ç•™è¨€æ¿åŠŸèƒ½ä¾èµ–äºç¬¬ä¸‰æ–¹è¯„è®ºç³»ç»Ÿï¼Œè¯·<strong>æ¿€æ´»</strong>ä½ çš„è¯„è®ºç³»ç»Ÿæ‰æœ‰æ•ˆæœã€‚å¹¶ä¸”åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œç¬¬ <code>19</code> è‡³ <code>21</code> è¡Œçš„â€œ<strong>èœå•</strong>â€é…ç½®ï¼Œå–æ¶ˆå…³äºç•™è¨€æ¿çš„æ³¨é‡Šå³å¯ã€‚</p></blockquote><h3 id="æ–°å»ºå‹æƒ…é“¾æ¥-friends-é¡µï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ–°å»ºå‹æƒ…é“¾æ¥-friends-é¡µï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ–°å»ºå‹æƒ…é“¾æ¥ friends é¡µï¼ˆå¯é€‰çš„ï¼‰"></a>æ–°å»ºå‹æƒ…é“¾æ¥ friends é¡µï¼ˆå¯é€‰çš„ï¼‰</h3><p><code>friends</code> é¡µæ˜¯ç”¨æ¥å±•ç¤º<strong>å‹æƒ…é“¾æ¥</strong>ä¿¡æ¯çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>friends/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page <span class="token string">"friends"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/friends/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> friends<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-12-12 21:25:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"friends"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"friends"</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åŒæ—¶ï¼Œåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹æ–°å»º <code>_data</code> ç›®å½•ï¼Œåœ¨ <code>_data</code> ç›®å½•ä¸­æ–°å»º <code>friends.json</code> æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span><span class="token punctuation">{</span>    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://image.luokangyuan.com/1_qq_27922023.jpg"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ç é…±"</span><span class="token punctuation">,</span>    <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"http://luokangyuan.com/"</span><span class="token punctuation">,</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"å‰å»å­¦ä¹ "</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://image.luokangyuan.com/4027734.jpeg"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"é—ªçƒä¹‹ç‹"</span><span class="token punctuation">,</span>    <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://blinkfox.github.io/"</span><span class="token punctuation">,</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"å‰å»å­¦ä¹ "</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://image.luokangyuan.com/avatar.jpg"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ja_rome"</span><span class="token punctuation">,</span>    <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://me.csdn.net/jlh912008548"</span><span class="token punctuation">,</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"å‰å»å­¦ä¹ "</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ–°å»º-404-é¡µ"><a href="#æ–°å»º-404-é¡µ" class="headerlink" title="æ–°å»º 404 é¡µ"></a>æ–°å»º 404 é¡µ</h3><p>å¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>404.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ª</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page <span class="token number">404</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/404/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token number">404</span><span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-30 17:25:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"404"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"404"</span><span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">"Oopsï½ï¼Œæˆ‘å´©æºƒäº†ï¼æ‰¾ä¸åˆ°ä½ æƒ³è¦çš„é¡µé¢ :("</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="èœå•å¯¼èˆªé…ç½®"><a href="#èœå•å¯¼èˆªé…ç½®" class="headerlink" title="èœå•å¯¼èˆªé…ç½®"></a>èœå•å¯¼èˆªé…ç½®</h3><h4 id="é…ç½®åŸºæœ¬èœå•å¯¼èˆªçš„åç§°ã€è·¯å¾„urlå’Œå›¾æ ‡icon"><a href="#é…ç½®åŸºæœ¬èœå•å¯¼èˆªçš„åç§°ã€è·¯å¾„urlå’Œå›¾æ ‡icon" class="headerlink" title="é…ç½®åŸºæœ¬èœå•å¯¼èˆªçš„åç§°ã€è·¯å¾„urlå’Œå›¾æ ‡icon."></a>é…ç½®åŸºæœ¬èœå•å¯¼èˆªçš„åç§°ã€è·¯å¾„urlå’Œå›¾æ ‡icon.</h4><p>1.èœå•å¯¼èˆªåç§°å¯ä»¥æ˜¯ä¸­æ–‡ä¹Ÿå¯ä»¥æ˜¯è‹±æ–‡(å¦‚ï¼š<code>Index</code>æˆ–<code>ä¸»é¡µ</code>)<br>2.å›¾æ ‡icon å¯ä»¥åœ¨<a href="https://fontawesome.com/icons">Font Awesome</a> ä¸­æŸ¥æ‰¾   </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">menu</span><span class="token punctuation">:</span>  <span class="token key atrule">Index</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>home  <span class="token key atrule">Tags</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /tags    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>tags  <span class="token key atrule">Categories</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /categories    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>bookmark  <span class="token key atrule">Archives</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /archives    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>archive  <span class="token key atrule">About</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /about    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>user<span class="token punctuation">-</span>circle  <span class="token key atrule">Friends</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /friends    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>address<span class="token punctuation">-</span>book<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="äºŒçº§èœå•é…ç½®æ–¹æ³•"><a href="#äºŒçº§èœå•é…ç½®æ–¹æ³•" class="headerlink" title="äºŒçº§èœå•é…ç½®æ–¹æ³•"></a>äºŒçº§èœå•é…ç½®æ–¹æ³•</h4><p>å¦‚æœä½ éœ€è¦äºŒçº§èœå•åˆ™å¯ä»¥åœ¨åŸåŸºæœ¬èœå•å¯¼èˆªçš„åŸºç¡€ä¸Šå¦‚ä¸‹æ“ä½œ</p><ol><li>åœ¨éœ€è¦æ·»åŠ äºŒçº§èœå•çš„ä¸€çº§èœå•ä¸‹æ·»åŠ <code>children</code>å…³é”®å­—(å¦‚:<code>About</code>èœå•ä¸‹æ·»åŠ <code>children</code>)     </li><li>åœ¨<code>children</code>ä¸‹åˆ›å»ºäºŒçº§èœå•çš„ åç§°name,è·¯å¾„urlå’Œå›¾æ ‡icon.      </li><li>æ³¨æ„æ¯ä¸ªäºŒçº§èœå•æ¨¡å—å‰è¦åŠ  <code>-</code>.     </li><li>æ³¨æ„ç¼©è¿›æ ¼å¼  </li></ol><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">menu</span><span class="token punctuation">:</span>  <span class="token key atrule">Index</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>home  <span class="token key atrule">Tags</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /tags    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>tags  <span class="token key atrule">Categories</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /categories    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>bookmark  <span class="token key atrule">Archives</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /archives    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>archive  <span class="token key atrule">About</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /about    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>user<span class="token punctuation">-</span>circle<span class="token punctuation">-</span>o  <span class="token key atrule">Friends</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /friends    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>address<span class="token punctuation">-</span>book  <span class="token key atrule">Medias</span><span class="token punctuation">:</span>    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>list    <span class="token key atrule">children</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Music        <span class="token key atrule">url</span><span class="token punctuation">:</span> /music        <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>music      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Movies        <span class="token key atrule">url</span><span class="token punctuation">:</span> /movies        <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>film      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Books        <span class="token key atrule">url</span><span class="token punctuation">:</span> /books        <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>book      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Galleries        <span class="token key atrule">url</span><span class="token punctuation">:</span> /galleries        <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>image<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä»£ç é«˜äº®"><a href="#ä»£ç é«˜äº®" class="headerlink" title="ä»£ç é«˜äº®"></a>ä»£ç é«˜äº®</h3><p>ä» Hexo5.0 ç‰ˆæœ¬å¼€å§‹è‡ªå¸¦äº† <code>prismjs</code> ä»£ç è¯­æ³•é«˜äº®çš„æ”¯æŒï¼Œæœ¬ä¸»é¢˜å¯¹æ­¤è¿›è¡Œäº†æ”¹é€ æ”¯æŒã€‚</p><p>å¦‚æœä½ çš„åšå®¢ä¸­æ›¾ç»å®‰è£…è¿‡ <code>hexo-prism-plugin</code> çš„æ’ä»¶ï¼Œé‚£ä¹ˆä½ é¡»è¦æ‰§è¡Œ <code>npm uninstall hexo-prism-plugin</code> æ¥å¸è½½æ‰å®ƒï¼Œå¦åˆ™ç”Ÿæˆçš„ä»£ç ä¸­ä¼šæœ‰ <code>&amp;#123;</code> å’Œ <code>&amp;#125;</code> çš„è½¬ä¹‰å­—ç¬¦ã€‚</p><p>ç„¶åï¼Œä¿®æ”¹ Hexo æ ¹ç›®å½•ä¸‹ <code>_config.yml</code> æ–‡ä»¶ä¸­ <code>highlight.enable</code> çš„å€¼ä¸º <code>false</code>ï¼Œå¹¶å°† <code>prismjs.enable</code> çš„å€¼è®¾ç½®ä¸º <code>true</code>ï¼Œä¸»è¦é…ç½®å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">highlight</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">line_number</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">auto_detect</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">tab_replace</span><span class="token punctuation">:</span> <span class="token string">''</span>  <span class="token key atrule">wrap</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">hljs</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">prismjs</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">preprocess</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">line_number</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">tab_replace</span><span class="token punctuation">:</span> <span class="token string">''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸»é¢˜ä¸­é»˜è®¤çš„ <code>prismjs</code> ä¸»é¢˜æ˜¯ <code>Tomorrow Night</code>ï¼Œå¦‚æœä½ æƒ³å®šåˆ¶è‡ªå·±çš„ä¸»é¢˜ï¼Œå¯ä»¥å‰å¾€ <a href="https://prismjs.com/download.html">prismjs ä¸‹è½½é¡µé¢</a> å®šåˆ¶ä¸‹è½½è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜ <code>css</code> æ–‡ä»¶ï¼Œç„¶åå°†æ­¤ css ä¸»é¢˜æ–‡ä»¶å–åä¸º <code>prism.css</code>ï¼Œæ›¿æ¢æ‰ <code>hexo-theme-matery</code> ä¸»é¢˜æ–‡ä»¶å¤¹ä¸­çš„ <code>source/libs/prism/prism.css</code> æ–‡ä»¶å³å¯ã€‚</p><h3 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h3><p>æœ¬ä¸»é¢˜ä¸­è¿˜ä½¿ç”¨åˆ°äº† <a href="https://github.com/wzpan/hexo-generator-search">hexo-generator-search</a> çš„ Hexo æ’ä»¶æ¥åšå†…å®¹æœç´¢ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-search --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">search</span><span class="token punctuation">:</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> search.xml  <span class="token key atrule">field</span><span class="token punctuation">:</span> post<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³ï¼ˆå»ºè®®å®‰è£…ï¼‰"><a href="#ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³ï¼ˆå»ºè®®å®‰è£…ï¼‰" class="headerlink" title="ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³ï¼ˆå»ºè®®å®‰è£…ï¼‰"></a>ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³ï¼ˆå»ºè®®å®‰è£…ï¼‰</h3><p>å¦‚æœä½ çš„æ–‡ç« åç§°æ˜¯ä¸­æ–‡çš„ï¼Œé‚£ä¹ˆ Hexo é»˜è®¤ç”Ÿæˆçš„æ°¸ä¹…é“¾æ¥ä¹Ÿä¼šæœ‰ä¸­æ–‡ï¼Œè¿™æ ·ä¸åˆ©äº <code>SEO</code>ï¼Œä¸” <code>gitment</code> è¯„è®ºå¯¹ä¸­æ–‡é“¾æ¥ä¹Ÿä¸æ”¯æŒã€‚æˆ‘ä»¬å¯ä»¥ç”¨ <a href="https://github.com/viko16/hexo-permalink-pinyin">hexo-permalink-pinyin</a> Hexo æ’ä»¶ä½¿åœ¨ç”Ÿæˆæ–‡ç« æ—¶ç”Ÿæˆä¸­æ–‡æ‹¼éŸ³çš„æ°¸ä¹…é“¾æ¥ã€‚</p><p>å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i hexo-permalink-pinyin --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">permalink_pinyin</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">separator</span><span class="token punctuation">:</span> <span class="token string">'-'</span> <span class="token comment"># default: '-'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼šé™¤äº†æ­¤æ’ä»¶å¤–ï¼Œ<a href="https://github.com/rozbo/hexo-abbrlink">hexo-abbrlink</a> æ’ä»¶ä¹Ÿå¯ä»¥ç”Ÿæˆéä¸­æ–‡çš„é“¾æ¥ã€‚</p></blockquote><h3 id="æ–‡ç« å­—æ•°ç»Ÿè®¡æ’ä»¶ï¼ˆå»ºè®®å®‰è£…ï¼‰"><a href="#æ–‡ç« å­—æ•°ç»Ÿè®¡æ’ä»¶ï¼ˆå»ºè®®å®‰è£…ï¼‰" class="headerlink" title="æ–‡ç« å­—æ•°ç»Ÿè®¡æ’ä»¶ï¼ˆå»ºè®®å®‰è£…ï¼‰"></a>æ–‡ç« å­—æ•°ç»Ÿè®¡æ’ä»¶ï¼ˆå»ºè®®å®‰è£…ï¼‰</h3><p>å¦‚æœä½ æƒ³è¦åœ¨æ–‡ç« ä¸­æ˜¾ç¤ºæ–‡ç« å­—æ•°ã€é˜…è¯»æ—¶é•¿ä¿¡æ¯ï¼Œå¯ä»¥å®‰è£… <a href="https://github.com/willin/hexo-wordcount">hexo-wordcount</a>æ’ä»¶ã€‚</p><p>å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i --save hexo-wordcount<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç„¶ååªéœ€åœ¨æœ¬ä¸»é¢˜ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œå°†å„ä¸ªæ–‡ç« å­—æ•°ç›¸å…³çš„é…ç½®æ¿€æ´»å³å¯ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">postInfo</span><span class="token punctuation">:</span>  <span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">update</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">wordCount</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># è®¾ç½®æ–‡ç« å­—æ•°ç»Ÿè®¡ä¸º true.</span>  <span class="token key atrule">totalCount</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># è®¾ç½®ç«™ç‚¹æ–‡ç« æ€»å­—æ•°ç»Ÿè®¡ä¸º true.</span>  <span class="token key atrule">min2read</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># é˜…è¯»æ—¶é•¿.</span>  <span class="token key atrule">readCount</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># é˜…è¯»æ¬¡æ•°.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ·»åŠ emojiè¡¨æƒ…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ·»åŠ emojiè¡¨æƒ…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ·»åŠ emojiè¡¨æƒ…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰"></a>æ·»åŠ emojiè¡¨æƒ…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰</h3><p>æœ¬ä¸»é¢˜æ–°å¢äº†å¯¹<code>emoji</code>è¡¨æƒ…çš„æ”¯æŒï¼Œä½¿ç”¨åˆ°äº† <a href="https://npm.taobao.org/package/hexo-filter-github-emojis">hexo-filter-github-emojis</a> çš„ Hexo æ’ä»¶æ¥æ”¯æŒ <code>emoji</code>è¡¨æƒ…çš„ç”Ÿæˆï¼ŒæŠŠå¯¹åº”çš„<code>markdown emoji</code>è¯­æ³•ï¼ˆ<code>::</code>,ä¾‹å¦‚ï¼š<code>:smile:</code>ï¼‰è½¬å˜æˆä¼šè·³è·ƒçš„<code>emoji</code>è¡¨æƒ…ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-filter-github-emojis --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">githubEmojis</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">className</span><span class="token punctuation">:</span> github<span class="token punctuation">-</span>emoji  <span class="token key atrule">inject</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">styles</span><span class="token punctuation">:</span>  customEmojis<span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œ <code>hexo clean &amp;&amp; hexo g</code> é‡æ–°ç”Ÿæˆåšå®¢æ–‡ä»¶ï¼Œç„¶åå°±å¯ä»¥åœ¨æ–‡ç« ä¸­å¯¹åº”ä½ç½®çœ‹åˆ°ä½ ç”¨<code>emoji</code>è¯­æ³•å†™çš„è¡¨æƒ…äº†ã€‚</p><h3 id="æ·»åŠ -RSS-è®¢é˜…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ·»åŠ -RSS-è®¢é˜…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ·»åŠ  RSS è®¢é˜…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰"></a>æ·»åŠ  RSS è®¢é˜…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰</h3><p>æœ¬ä¸»é¢˜ä¸­è¿˜ä½¿ç”¨åˆ°äº† <a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a> çš„ Hexo æ’ä»¶æ¥åš <code>RSS</code>ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-feed --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">feed</span><span class="token punctuation">:</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> atom  <span class="token key atrule">path</span><span class="token punctuation">:</span> atom.xml  <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">20</span>  <span class="token key atrule">hub</span><span class="token punctuation">:</span>  <span class="token key atrule">content</span><span class="token punctuation">:</span>  <span class="token key atrule">content_limit</span><span class="token punctuation">:</span> <span class="token number">140</span>  <span class="token key atrule">content_limit_delim</span><span class="token punctuation">:</span> <span class="token string">' '</span>  <span class="token key atrule">order_by</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>date<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œ <code>hexo clean &amp;&amp; hexo g</code> é‡æ–°ç”Ÿæˆåšå®¢æ–‡ä»¶ï¼Œç„¶ååœ¨ <code>public</code> æ–‡ä»¶å¤¹ä¸­å³å¯çœ‹åˆ° <code>atom.xml</code> æ–‡ä»¶ï¼Œè¯´æ˜ä½ å·²ç»å®‰è£…æˆåŠŸäº†ã€‚</p><h3 id="æ·»åŠ -DaoVoice-åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ·»åŠ -DaoVoice-åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ·»åŠ  DaoVoice åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼ˆå¯é€‰çš„ï¼‰"></a>æ·»åŠ  <a href="http://www.daovoice.io/">DaoVoice</a> åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼ˆå¯é€‰çš„ï¼‰</h3><p>å‰å¾€ <a href="http://www.daovoice.io/">DaoVoice</a> å®˜ç½‘æ³¨å†Œå¹¶ä¸”è·å– <code>app_id</code>ï¼Œå¹¶å°† <code>app_id</code> å¡«å…¥ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ã€‚</p><h3 id="æ·»åŠ -Tidio-åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ·»åŠ -Tidio-åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ·»åŠ  Tidio åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼ˆå¯é€‰çš„ï¼‰"></a>æ·»åŠ  <a href="https://www.tidio.com/">Tidio</a> åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼ˆå¯é€‰çš„ï¼‰</h3><p>å‰å¾€ <a href="https://www.tidio.com/">Tidio</a> å®˜ç½‘æ³¨å†Œå¹¶ä¸”è·å– <code>Public Key</code>ï¼Œå¹¶å°† <code>Public Key</code> å¡«å…¥ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ã€‚</p><h3 id="ä¿®æ”¹é¡µè„š"><a href="#ä¿®æ”¹é¡µè„š" class="headerlink" title="ä¿®æ”¹é¡µè„š"></a>ä¿®æ”¹é¡µè„š</h3><p>é¡µè„šä¿¡æ¯å¯èƒ½éœ€è¦åšå®šåˆ¶åŒ–ä¿®æ”¹ï¼Œè€Œä¸”å®ƒä¸ä¾¿äºåšæˆé…ç½®ä¿¡æ¯ï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦ä½ è‡ªå·±å»å†ä¿®æ”¹å’ŒåŠ å·¥ã€‚ä¿®æ”¹çš„åœ°æ–¹åœ¨ä¸»é¢˜æ–‡ä»¶çš„ <code>/layout/_partial/footer.ejs</code> æ–‡ä»¶ä¸­ï¼ŒåŒ…æ‹¬ç«™ç‚¹ã€ä½¿ç”¨çš„ä¸»é¢˜ã€è®¿é—®é‡ç­‰ã€‚</p><h3 id="ä¿®æ”¹ç¤¾äº¤é“¾æ¥"><a href="#ä¿®æ”¹ç¤¾äº¤é“¾æ¥" class="headerlink" title="ä¿®æ”¹ç¤¾äº¤é“¾æ¥"></a>ä¿®æ”¹ç¤¾äº¤é“¾æ¥</h3><p>åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œé»˜è®¤æ”¯æŒ <code>QQ</code>ã€<code>GitHub</code> å’Œé‚®ç®±ç­‰çš„é…ç½®ï¼Œä½ å¯ä»¥åœ¨ä¸»é¢˜æ–‡ä»¶çš„ <code>/layout/_partial/social-link.ejs</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ã€ä¿®æ”¹ä½ éœ€è¦çš„ç¤¾äº¤é“¾æ¥åœ°å€ï¼Œå¢åŠ é“¾æ¥å¯å‚è€ƒå¦‚ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">&lt;% if (theme.socialLink.github) { %&gt;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&lt;%= theme.socialLink.github %&gt;<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tooltipped<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span> <span class="token attr-name">data-tooltip</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>è®¿é—®æˆ‘çš„GitHub<span class="token punctuation">"</span></span> <span class="token attr-name">data-position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top<span class="token punctuation">"</span></span> <span class="token attr-name">data-delay</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fab fa-github<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>&lt;% } %&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ï¼Œç¤¾äº¤å›¾æ ‡ï¼ˆå¦‚ï¼š<code>fa-github</code>ï¼‰ä½ å¯ä»¥åœ¨ <a href="https://fontawesome.com/icons">Font Awesome</a> ä¸­æœç´¢æ‰¾åˆ°ã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨ç¤¾äº¤å›¾æ ‡çš„æ ‡è¯†ï¼Œä¾›ä½ å‚è€ƒï¼š</p><ul><li>Facebook: <code>fab fa-facebook</code></li><li>Twitter: <code>fab fa-twitter</code></li><li>Google-plus: <code>fab fa-google-plus</code></li><li>Linkedin: <code>fab fa-linkedin</code></li><li>Tumblr: <code>fab fa-tumblr</code></li><li>Medium: <code>fab fa-medium</code></li><li>Slack: <code>fab fa-slack</code></li><li>Sina Weibo: <code>fab fa-weibo</code></li><li>Wechat: <code>fab fa-weixin</code></li><li>QQ: <code>fab fa-qq</code></li><li>Zhihu: <code>fab fa-zhihu</code></li></ul><blockquote><p><strong>æ³¨æ„</strong>: æœ¬ä¸»é¢˜ä¸­ä½¿ç”¨çš„ <code>Font Awesome</code> ç‰ˆæœ¬ä¸º <code>5.11.0</code>ã€‚</p></blockquote><h3 id="ä¿®æ”¹æ‰“èµçš„äºŒç»´ç å›¾ç‰‡"><a href="#ä¿®æ”¹æ‰“èµçš„äºŒç»´ç å›¾ç‰‡" class="headerlink" title="ä¿®æ”¹æ‰“èµçš„äºŒç»´ç å›¾ç‰‡"></a>ä¿®æ”¹æ‰“èµçš„äºŒç»´ç å›¾ç‰‡</h3><p>åœ¨ä¸»é¢˜æ–‡ä»¶çš„ <code>source/medias/reward</code> æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥æ›¿æ¢æˆä½ çš„çš„å¾®ä¿¡å’Œæ”¯ä»˜å®çš„æ‰“èµäºŒç»´ç å›¾ç‰‡ã€‚</p><h3 id="é…ç½®éŸ³ä¹æ’­æ”¾å™¨ï¼ˆå¯é€‰çš„ï¼‰"><a href="#é…ç½®éŸ³ä¹æ’­æ”¾å™¨ï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="é…ç½®éŸ³ä¹æ’­æ”¾å™¨ï¼ˆå¯é€‰çš„ï¼‰"></a>é…ç½®éŸ³ä¹æ’­æ”¾å™¨ï¼ˆå¯é€‰çš„ï¼‰</h3><p>è¦æ”¯æŒéŸ³ä¹æ’­æ”¾ï¼Œåœ¨ä¸»é¢˜çš„ <code>_config.yml</code> é…ç½®æ–‡ä»¶ä¸­æ¿€æ´»musicé…ç½®å³å¯ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># æ˜¯å¦åœ¨é¦–é¡µæ˜¾ç¤ºéŸ³ä¹</span><span class="token key atrule">music</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">title</span><span class="token punctuation">:</span>         <span class="token comment"># éå¸åº•æ¨¡å¼æœ‰æ•ˆ</span>    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>    <span class="token key atrule">show</span><span class="token punctuation">:</span> å¬å¬éŸ³ä¹  <span class="token key atrule">server</span><span class="token punctuation">:</span> netease   <span class="token comment"># require music platform: netease, tencent, kugou, xiami, baidu</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> playlist    <span class="token comment"># require song, playlist, album, search, artist</span>  <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">503838841</span>     <span class="token comment"># require song id / playlist id / album id / search keyword</span>  <span class="token key atrule">fixed</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>      <span class="token comment"># å¼€å¯å¸åº•æ¨¡å¼</span>  <span class="token key atrule">autoplay</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>   <span class="token comment"># æ˜¯å¦è‡ªåŠ¨æ’­æ”¾</span>  <span class="token key atrule">theme</span><span class="token punctuation">:</span> <span class="token string">'#42b983'</span>  <span class="token key atrule">loop</span><span class="token punctuation">:</span> <span class="token string">'all'</span>       <span class="token comment"># éŸ³é¢‘å¾ªç¯æ’­æ”¾, å¯é€‰å€¼: 'all', 'one', 'none'</span>  <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token string">'random'</span>   <span class="token comment"># éŸ³é¢‘å¾ªç¯é¡ºåº, å¯é€‰å€¼: 'list', 'random'</span>  <span class="token key atrule">preload</span><span class="token punctuation">:</span> <span class="token string">'auto'</span>   <span class="token comment"># é¢„åŠ è½½ï¼Œå¯é€‰å€¼: 'none', 'metadata', 'auto'</span>  <span class="token key atrule">volume</span><span class="token punctuation">:</span> <span class="token number">0.7</span>       <span class="token comment"># é»˜è®¤éŸ³é‡ï¼Œè¯·æ³¨æ„æ’­æ”¾å™¨ä¼šè®°å¿†ç”¨æˆ·è®¾ç½®ï¼Œç”¨æˆ·æ‰‹åŠ¨è®¾ç½®éŸ³é‡åé»˜è®¤éŸ³é‡å³å¤±æ•ˆ</span>  <span class="token key atrule">listFolded</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># åˆ—è¡¨é»˜è®¤æŠ˜å </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><code>server</code>å¯é€‰<code>netease</code>ï¼ˆç½‘æ˜“äº‘éŸ³ä¹ï¼‰ï¼Œ<code>tencent</code>ï¼ˆQQéŸ³ä¹ï¼‰ï¼Œ<code>kugou</code>ï¼ˆé…·ç‹—éŸ³ä¹ï¼‰ï¼Œ<code>xiami</code>ï¼ˆè™¾ç±³éŸ³ä¹ï¼‰ï¼Œ</p><p><code>baidu</code>ï¼ˆç™¾åº¦éŸ³ä¹ï¼‰ã€‚</p><p><code>type</code>å¯é€‰<code>song</code>ï¼ˆæ­Œæ›²ï¼‰ï¼Œ<code>playlist</code>ï¼ˆæ­Œå•ï¼‰ï¼Œ<code>album</code>ï¼ˆä¸“è¾‘ï¼‰ï¼Œ<code>search</code>ï¼ˆæœç´¢å…³é”®å­—ï¼‰ï¼Œ<code>artist</code>ï¼ˆæ­Œæ‰‹ï¼‰</p><p><code>id</code>è·å–æ–¹æ³•ç¤ºä¾‹: æµè§ˆå™¨æ‰“å¼€ç½‘æ˜“äº‘éŸ³ä¹ï¼Œç‚¹å‡»æˆ‘å–œæ¬¢çš„éŸ³ä¹æ­Œå•ï¼Œæµè§ˆå™¨åœ°å€æ åé¢ä¼šæœ‰ä¸€ä¸²æ•°å­—ï¼Œ<code>playlist</code>çš„<code>id</code></p><p>å³ä¸ºè¿™ä¸²æ•°å­—ã€‚</p></blockquote><h2 id="æ–‡ç« -Front-matter-ä»‹ç»"><a href="#æ–‡ç« -Front-matter-ä»‹ç»" class="headerlink" title="æ–‡ç«  Front-matter ä»‹ç»"></a>æ–‡ç«  Front-matter ä»‹ç»</h2><h3 id="Front-matter-é€‰é¡¹è¯¦è§£"><a href="#Front-matter-é€‰é¡¹è¯¦è§£" class="headerlink" title="Front-matter é€‰é¡¹è¯¦è§£"></a>Front-matter é€‰é¡¹è¯¦è§£</h3><p><code>Front-matter</code> é€‰é¡¹ä¸­çš„æ‰€æœ‰å†…å®¹å‡ä¸º<strong>éå¿…å¡«</strong>çš„ã€‚ä½†æˆ‘ä»ç„¶å»ºè®®è‡³å°‘å¡«å†™ <code>title</code> å’Œ <code>date</code> çš„å€¼ã€‚</p><table><thead><tr><th>é…ç½®é€‰é¡¹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>title</td><td><code>Markdown</code> çš„æ–‡ä»¶æ ‡é¢˜</td><td>æ–‡ç« æ ‡é¢˜ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹</td></tr><tr><td>date</td><td>æ–‡ä»¶åˆ›å»ºæ—¶çš„æ—¥æœŸæ—¶é—´</td><td>å‘å¸ƒæ—¶é—´ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹ï¼Œä¸”æœ€å¥½ä¿è¯å…¨å±€å”¯ä¸€</td></tr><tr><td>author</td><td>æ ¹ <code>_config.yml</code> ä¸­çš„ <code>author</code></td><td>æ–‡ç« ä½œè€…</td></tr><tr><td>img</td><td><code>featureImages</code> ä¸­çš„æŸä¸ªå€¼</td><td>æ–‡ç« ç‰¹å¾å›¾ï¼Œæ¨èä½¿ç”¨å›¾åºŠ(è…¾è®¯äº‘ã€ä¸ƒç‰›äº‘ã€åˆæ‹äº‘ç­‰)æ¥åšå›¾ç‰‡çš„è·¯å¾„.å¦‚: <code>http://xxx.com/xxx.jpg</code></td></tr><tr><td>top</td><td><code>true</code></td><td>æ¨èæ–‡ç« ï¼ˆæ–‡ç« æ˜¯å¦ç½®é¡¶ï¼‰ï¼Œå¦‚æœ <code>top</code> å€¼ä¸º <code>true</code>ï¼Œåˆ™ä¼šä½œä¸ºé¦–é¡µæ¨èæ–‡ç« </td></tr><tr><td>cover</td><td><code>false</code></td><td><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« æ˜¯å¦éœ€è¦åŠ å…¥åˆ°é¦–é¡µè½®æ’­å°é¢ä¸­</td></tr><tr><td>coverImg</td><td>æ— </td><td><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« åœ¨é¦–é¡µè½®æ’­å°é¢éœ€è¦æ˜¾ç¤ºçš„å›¾ç‰‡è·¯å¾„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™é»˜è®¤ä½¿ç”¨æ–‡ç« çš„ç‰¹è‰²å›¾ç‰‡</td></tr><tr><td>password</td><td>æ— </td><td>æ–‡ç« é˜…è¯»å¯†ç ï¼Œå¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„è¯ï¼Œå°±å¯ä»¥è®¾ç½® <code>password</code> çš„å€¼ï¼Œè¯¥å€¼å¿…é¡»æ˜¯ç”¨ <code>SHA256</code> åŠ å¯†åçš„å¯†ç ï¼Œé˜²æ­¢è¢«ä»–äººè¯†ç ´ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>verifyPassword</code> é€‰é¡¹</td></tr><tr><td>toc</td><td><code>true</code></td><td>æ˜¯å¦å¼€å¯ TOCï¼Œå¯ä»¥é’ˆå¯¹æŸç¯‡æ–‡ç« å•ç‹¬å…³é—­ TOC çš„åŠŸèƒ½ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>toc</code> é€‰é¡¹</td></tr><tr><td>mathjax</td><td><code>false</code></td><td>æ˜¯å¦å¼€å¯æ•°å­¦å…¬å¼æ”¯æŒ ï¼Œæœ¬æ–‡ç« æ˜¯å¦å¼€å¯ <code>mathjax</code>ï¼Œä¸”éœ€è¦åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦å¼€å¯æ‰è¡Œ</td></tr><tr><td>summary</td><td>æ— </td><td>æ–‡ç« æ‘˜è¦ï¼Œè‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦</td></tr><tr><td>categories</td><td>æ— </td><td>æ–‡ç« åˆ†ç±»ï¼Œæœ¬ä¸»é¢˜çš„åˆ†ç±»è¡¨ç¤ºå®è§‚ä¸Šå¤§çš„åˆ†ç±»ï¼Œåªå»ºè®®ä¸€ç¯‡æ–‡ç« ä¸€ä¸ªåˆ†ç±»</td></tr><tr><td>tags</td><td>æ— </td><td>æ–‡ç« æ ‡ç­¾ï¼Œä¸€ç¯‡æ–‡ç« å¯ä»¥å¤šä¸ªæ ‡ç­¾</td></tr><tr><td>keywords</td><td>æ–‡ç« æ ‡é¢˜</td><td>æ–‡ç« å…³é”®å­—ï¼ŒSEO æ—¶éœ€è¦</td></tr><tr><td>reprintPolicy</td><td>cc_by</td><td>æ–‡ç« è½¬è½½è§„åˆ™ï¼Œ å¯ä»¥æ˜¯ cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint æˆ– pay ä¸­çš„ä¸€ä¸ª</td></tr></tbody></table><blockquote><p><strong>æ³¨æ„</strong>:</p><ol><li>å¦‚æœ <code>img</code> å±æ€§ä¸å¡«å†™çš„è¯ï¼Œæ–‡ç« ç‰¹è‰²å›¾ä¼šæ ¹æ®æ–‡ç« æ ‡é¢˜çš„ <code>hashcode</code> çš„å€¼å–ä½™ï¼Œç„¶åé€‰å–ä¸»é¢˜ä¸­å¯¹åº”çš„ç‰¹è‰²å›¾ç‰‡ï¼Œä»è€Œè¾¾åˆ°è®©æ‰€æœ‰æ–‡ç« çš„ç‰¹è‰²å›¾<strong>å„æœ‰ç‰¹è‰²</strong>ã€‚</li><li><code>date</code> çš„å€¼å°½é‡ä¿è¯æ¯ç¯‡æ–‡ç« æ˜¯å”¯ä¸€çš„ï¼Œå› ä¸ºæœ¬ä¸»é¢˜ä¸­ <code>Gitalk</code> å’Œ <code>Gitment</code> è¯†åˆ« <code>id</code> æ˜¯é€šè¿‡ <code>date</code> çš„å€¼æ¥ä½œä¸ºå”¯ä¸€æ ‡è¯†çš„ã€‚</li><li>å¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„åŠŸèƒ½ï¼Œä¸ä»…è¦åœ¨ Front-matter ä¸­è®¾ç½®é‡‡ç”¨äº† SHA256 åŠ å¯†çš„ password çš„å€¼ï¼Œè¿˜éœ€è¦åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> ä¸­æ¿€æ´»äº†é…ç½®ã€‚æœ‰äº›åœ¨çº¿çš„ SHA256 åŠ å¯†çš„åœ°å€ï¼Œå¯ä¾›ä½ ä½¿ç”¨ï¼š<a href="http://tool.oschina.net/encrypt?type=2">å¼€æºä¸­å›½åœ¨çº¿å·¥å…·</a>ã€<a href="http://encode.chahuo.com/">chahuo</a>ã€<a href="http://tool.chinaz.com/tools/hash.aspx">ç«™é•¿å·¥å…·</a>ã€‚</li><li>æ‚¨å¯ä»¥åœ¨æ–‡ç« mdæ–‡ä»¶çš„ front-matter ä¸­æŒ‡å®š reprintPolicy æ¥ç»™å•ä¸ªæ–‡ç« é…ç½®è½¬è½½è§„åˆ™</li></ol></blockquote><p>ä»¥ä¸‹ä¸ºæ–‡ç« çš„ <code>Front-matter</code> ç¤ºä¾‹ã€‚</p><h3 id="æœ€ç®€ç¤ºä¾‹"><a href="#æœ€ç®€ç¤ºä¾‹" class="headerlink" title="æœ€ç®€ç¤ºä¾‹"></a>æœ€ç®€ç¤ºä¾‹</h3><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> typora<span class="token punctuation">-</span>vue<span class="token punctuation">-</span>themeä¸»é¢˜ä»‹ç»<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-07 09:25:00</span><span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æœ€å…¨ç¤ºä¾‹"><a href="#æœ€å…¨ç¤ºä¾‹" class="headerlink" title="æœ€å…¨ç¤ºä¾‹"></a>æœ€å…¨ç¤ºä¾‹</h3><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> typora<span class="token punctuation">-</span>vue<span class="token punctuation">-</span>themeä¸»é¢˜ä»‹ç»<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-07 09:25:00</span><span class="token key atrule">author</span><span class="token punctuation">:</span> èµµå¥‡<span class="token key atrule">img</span><span class="token punctuation">:</span> /source/images/xxx.jpg<span class="token key atrule">top</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">cover</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">coverImg</span><span class="token punctuation">:</span> /images/1.jpg<span class="token key atrule">password</span><span class="token punctuation">:</span> 8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92<span class="token key atrule">toc</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">mathjax</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">summary</span><span class="token punctuation">:</span> è¿™æ˜¯ä½ è‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦<span class="token key atrule">categories</span><span class="token punctuation">:</span> Markdown<span class="token key atrule">tags</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> Typora  <span class="token punctuation">-</span> Markdown<span class="token punctuation">---</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ•ˆæœæˆªå›¾"><a href="#æ•ˆæœæˆªå›¾" class="headerlink" title="æ•ˆæœæˆªå›¾"></a>æ•ˆæœæˆªå›¾</h2><p><img src="http://static.blinkfox.com/matery-20181202-1.png" alt="é¦–é¡µ"></p><p><img src="http://static.blinkfox.com/matery-20181202-2.png" alt="é¦–é¡µæ¨èæ–‡ç« "></p><p><img src="http://static.blinkfox.com/matery-20181202-3.png" alt="é¦–é¡µæ–‡ç« åˆ—è¡¨"></p><p><img src="http://static.blinkfox.com/matery-20181202-7.png" alt="é¦–é¡µæ–‡ç« åˆ—è¡¨"></p><p><img src="http://static.blinkfox.com/matery-20181202-8.png" alt="é¦–é¡µæ–‡ç« åˆ—è¡¨"></p><h2 id="è‡ªå®šåˆ¶ä¿®æ”¹"><a href="#è‡ªå®šåˆ¶ä¿®æ”¹" class="headerlink" title="è‡ªå®šåˆ¶ä¿®æ”¹"></a>è‡ªå®šåˆ¶ä¿®æ”¹</h2><p>åœ¨æœ¬ä¸»é¢˜çš„ <code>_config.yml</code> ä¸­å¯ä»¥ä¿®æ”¹éƒ¨åˆ†è‡ªå®šä¹‰ä¿¡æ¯ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>èœå•</li><li>æˆ‘çš„æ¢¦æƒ³</li><li>é¦–é¡µçš„éŸ³ä¹æ’­æ”¾å™¨å’Œè§†é¢‘æ’­æ”¾å™¨é…ç½®</li><li>æ˜¯å¦æ˜¾ç¤ºæ¨èæ–‡ç« åç§°å’ŒæŒ‰é’®é…ç½®</li><li><code>favicon</code> å’Œ <code>Logo</code></li><li>ä¸ªäººä¿¡æ¯</li><li>TOC ç›®å½•</li><li>æ–‡ç« æ‰“èµä¿¡æ¯</li><li>å¤åˆ¶æ–‡ç« å†…å®¹æ—¶è¿½åŠ ç‰ˆæƒä¿¡æ¯</li><li>MathJax</li><li>æ–‡ç« å­—æ•°ç»Ÿè®¡ã€é˜…è¯»æ—¶é•¿</li><li>ç‚¹å‡»é¡µé¢çš„â€™çˆ±å¿ƒâ€™æ•ˆæœ</li><li>æˆ‘çš„é¡¹ç›®</li><li>æˆ‘çš„æŠ€èƒ½</li><li>æˆ‘çš„ç›¸å†Œ</li><li><code>Gitalk</code>ã€<code>Gitment</code>ã€<code>Valine</code> å’Œ <code>disqus</code> è¯„è®ºé…ç½®</li><li><a href="http://busuanzi.ibruce.info/">ä¸è’œå­ç»Ÿè®¡</a>å’Œè°·æ­Œåˆ†æï¼ˆ<code>Google Analytics</code>ï¼‰</li><li>é»˜è®¤ç‰¹è‰²å›¾çš„é›†åˆã€‚å½“æ–‡ç« æ²¡æœ‰è®¾ç½®ç‰¹è‰²å›¾æ—¶ï¼Œæœ¬ä¸»é¢˜ä¼šæ ¹æ®æ–‡ç« æ ‡é¢˜çš„ <code>hashcode</code> å€¼å–ä½™ï¼Œæ¥é€‰æ‹©å±•ç¤ºå¯¹åº”çš„ç‰¹è‰²å›¾</li></ul><p><strong>æˆ‘è®¤ä¸ºä¸ªäººåšå®¢åº”è¯¥éƒ½æœ‰è‡ªå·±çš„é£æ ¼å’Œç‰¹è‰²</strong>ã€‚å¦‚æœæœ¬ä¸»é¢˜ä¸­çš„è¯¸å¤šåŠŸèƒ½å’Œä¸»é¢˜è‰²å½©ä½ ä¸æ»¡æ„ï¼Œå¯ä»¥åœ¨ä¸»é¢˜ä¸­è‡ªå®šä¹‰ä¿®æ”¹ï¼Œå¾ˆå¤šæ›´è‡ªç”±çš„åŠŸèƒ½å’Œç»†èŠ‚ç‚¹çš„ä¿®æ”¹éš¾ä»¥åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> ä¸­å®Œæˆï¼Œéœ€è¦ä¿®æ”¹æºä»£ç æ‰æ¥å®Œæˆã€‚ä»¥ä¸‹åˆ—å‡ºäº†å¯èƒ½å¯¹ä½ æœ‰ç”¨çš„åœ°æ–¹ï¼š</p><h3 id="ä¿®æ”¹ä¸»é¢˜é¢œè‰²"><a href="#ä¿®æ”¹ä¸»é¢˜é¢œè‰²" class="headerlink" title="ä¿®æ”¹ä¸»é¢˜é¢œè‰²"></a>ä¿®æ”¹ä¸»é¢˜é¢œè‰²</h3><p>åœ¨ä¸»é¢˜æ–‡ä»¶çš„ <code>/source/css/matery.css</code> æ–‡ä»¶ä¸­ï¼Œæœç´¢ <code>.bg-color</code> æ¥ä¿®æ”¹èƒŒæ™¯é¢œè‰²ï¼š</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* æ•´ä½“èƒŒæ™¯é¢œè‰²ï¼ŒåŒ…æ‹¬å¯¼èˆªã€ç§»åŠ¨ç«¯çš„å¯¼èˆªã€é¡µå°¾ã€æ ‡ç­¾é¡µç­‰çš„èƒŒæ™¯é¢œè‰². */</span><span class="token selector">.bg-color</span> <span class="token punctuation">{</span>    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #4cbf30 0%<span class="token punctuation">,</span> #0f9d58 100%<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@-webkit-keyframes</span> rainbow</span> <span class="token punctuation">{</span>   <span class="token comment">/* åŠ¨æ€åˆ‡æ¢èƒŒæ™¯é¢œè‰². */</span><span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@keyframes</span> rainbow</span> <span class="token punctuation">{</span>    <span class="token comment">/* åŠ¨æ€åˆ‡æ¢èƒŒæ™¯é¢œè‰². */</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä¿®æ”¹-banner-å›¾å’Œæ–‡ç« ç‰¹è‰²å›¾"><a href="#ä¿®æ”¹-banner-å›¾å’Œæ–‡ç« ç‰¹è‰²å›¾" class="headerlink" title="ä¿®æ”¹ banner å›¾å’Œæ–‡ç« ç‰¹è‰²å›¾"></a>ä¿®æ”¹ banner å›¾å’Œæ–‡ç« ç‰¹è‰²å›¾</h3><p>ä½ å¯ä»¥ç›´æ¥åœ¨ <code>/source/medias/banner</code> æ–‡ä»¶å¤¹ä¸­æ›´æ¢ä½ å–œæ¬¢çš„ <code>banner</code> å›¾ç‰‡ï¼Œä¸»é¢˜ä»£ç ä¸­æ˜¯æ¯å¤©åŠ¨æ€åˆ‡æ¢ä¸€å¼ ï¼Œåªéœ€ <code>7</code> å¼ å³å¯ã€‚å¦‚æœä½ ä¼š <code>JavaScript</code> ä»£ç ï¼Œå¯ä»¥ä¿®æ”¹æˆä½ è‡ªå·±å–œæ¬¢åˆ‡æ¢é€»è¾‘ï¼Œå¦‚ï¼šéšæœºåˆ‡æ¢ç­‰ï¼Œ<code>banner</code> åˆ‡æ¢çš„ä»£ç ä½ç½®åœ¨ <code>/layout/_partial/bg-cover-content.ejs</code> æ–‡ä»¶çš„ <code>&lt;script&gt;&lt;/script&gt;</code> ä»£ç ä¸­ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.bg-cover'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background-image'</span><span class="token punctuation">,</span> <span class="token string">'url(/medias/banner/'</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.jpg)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ <code>/source/medias/featureimages</code> æ–‡ä»¶å¤¹ä¸­é»˜è®¤æœ‰ 24 å¼ ç‰¹è‰²å›¾ç‰‡ï¼Œä½ å¯ä»¥å†å¢åŠ æˆ–è€…å‡å°‘ï¼Œå¹¶éœ€è¦åœ¨ <code>_config.yml</code> åšåŒæ­¥ä¿®æ”¹ã€‚</p><h2 id="ç‰ˆæœ¬å˜æ›´è®°å½•"><a href="#ç‰ˆæœ¬å˜æ›´è®°å½•" class="headerlink" title="ç‰ˆæœ¬å˜æ›´è®°å½•"></a>ç‰ˆæœ¬å˜æ›´è®°å½•</h2><p>å‚è§ <a href="https://github.com/blinkfox/hexo-theme-matery/blob/master/README.md">CHANGELOG.md</a></p>]]></content>
      
      
      <categories>
          
          <category> MasterStudio </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¬è½½ </tag>
            
            <tag> Matery </tag>
            
            <tag> ä¸»é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java lambda</title>
      <link href="posts/55404.html"/>
      <url>posts/55404.html</url>
      
        <content type="html"><![CDATA[<h1 id="lambdaæ¼”ç¤º"><a href="#lambdaæ¼”ç¤º" class="headerlink" title="lambdaæ¼”ç¤º"></a>lambdaæ¼”ç¤º</h1><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Lambda</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" is running !"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸‹ä»£ç ä¸ä¸Šé¢çš„<strong>main</strong>æ–¹æ³•ä½“ä¸­çš„ä»£ç ç­‰æ•ˆ <span class="github-emoji"><span>ğŸ˜®</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f62e.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><br>è¿™ä¾¿æ˜¯åº”ç”¨äº†<strong>lambda</strong>è¡¨è¾¾å¼çš„åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" is running !"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><b style="color: chocolate;">æˆ‘ä»¬é€šè¿‡è¿™ä¸ªæ¼”ç¤ºæ¡ˆä¾‹å¯ä»¥çŸ¥é“lambdaè¡¨è¾¾å¼çš„å¥½å¤„ï¼šç®€åŒ–åŒ¿åå†…éƒ¨ç±»çš„ä½¿ç”¨ï¼Œå¤§å¤§ç®€åŒ–äº†ä»£ç å†—ä½™çš„é—®é¢˜ï¼</b></p><h2 id="lambdaï¼Ÿ"><a href="#lambdaï¼Ÿ" class="headerlink" title="lambdaï¼Ÿ"></a>lambdaï¼Ÿ</h2><p>çŸ¥æ™“äº†<strong>lambda</strong>è¡¨è¾¾å¼çš„å¥½å¤„ï¼Œé‚£ä¹ˆ<strong>lambda</strong>è¡¨è¾¾å¼åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>é€šè¿‡ä¸€ä¸ªç®€å•çš„ä»£ç ç¤ºä¾‹ç†è§£ï¼Œ<strong>what is lambda expression?</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LengthComparatorTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> strings <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"i"</span><span class="token punctuation">,</span><span class="token string">"am"</span><span class="token punctuation">,</span><span class="token string">"second"</span><span class="token punctuation">,</span><span class="token string">"your"</span><span class="token punctuation">,</span><span class="token string">"you"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>strings<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">LengthComparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>strings<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">LengthComparator</span> <span class="token keyword">implements</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">String</span> first<span class="token punctuation">,</span><span class="token class-name">String</span> second<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> first<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> second<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæˆ‘ä»¬çœ‹è§ä¸€å¥å…³é”®çš„ä»£ç ï¼š<code>Arrays.sort(strings,new LengthComparator())</code> è¿™ä¸ªé’ˆå¯¹å­—ç¬¦ä¸²ç±»å‹é•¿åº¦æ¯”è¾ƒå™¨ï¼Œç›®çš„æ˜¯ä¸ºäº†å°†â€œæ¯”è¾ƒä»£ç å—â€ <code>compare</code> ä¼ å…¥åˆ° <strong>Arrays.sort</strong> æ–¹æ³•ä¸­ã€‚è€Œ<strong>lambda</strong>è¡¨è¾¾å¼å°±æ˜¯ä¸ºäº†è¿™ä¸€ç›®çš„è¯ç”Ÿçš„ã€‚</p><p>æˆ‘ä»¬çœ‹ä¸‹é¢çš„æ“ä½œ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LambdaDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> strings <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"i"</span><span class="token punctuation">,</span><span class="token string">"am"</span><span class="token punctuation">,</span><span class="token string">"second"</span><span class="token punctuation">,</span><span class="token string">"your"</span><span class="token punctuation">,</span><span class="token string">"you"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>strings<span class="token punctuation">,</span>                    <span class="token punctuation">(</span><span class="token class-name">String</span> first<span class="token punctuation">,</span> <span class="token class-name">String</span> second<span class="token punctuation">)</span>                     <span class="token operator">-&gt;</span> <span class="token punctuation">{</span><span class="token keyword">return</span> first<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> second<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>strings<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> <code>(String first, String second) -&gt; {return first.length() - second.length();}</code> : <strong>lambda</strong>è¡¨è¾¾å¼æˆåŠŸçš„å°†æ¯”è¾ƒä»£ç å— <code>compare</code> ä¼ å…¥åˆ° <strong>Arrays.sort</strong> æ–¹æ³•ä¸­ã€‚ </p><p>ä¹Ÿå¾—å‡ºä»€ä¹ˆæ˜¯lambdaè¡¨è¾¾å¼çš„ç­”æ¡ˆï¼<span class="github-emoji"><span>ğŸ˜‰</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f609.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p><b style="color: purple;">lambdaè¡¨è¾¾å¼ï¼šæ˜¯ä¸€ä¸ªå¯ä¼ é€’çš„ä»£ç å—ï¼Œå¯ä»¥åœ¨åé¢è¢«æ‰§è¡Œä¸€æ¬¡æˆ–è€…å¤šæ¬¡ï¼</b></p><h1 id="lambda-å‡½æ•°å¼æ¥å£"><a href="#lambda-å‡½æ•°å¼æ¥å£" class="headerlink" title="lambda-å‡½æ•°å¼æ¥å£"></a>lambda-å‡½æ•°å¼æ¥å£</h1><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@FunctionalInterface</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡ä¸Šé¢çš„ä»£ç æˆ‘ä»¬çœ‹è§äº†ä¸€ä¸ªç‰¹åˆ«çš„æ³¨è§£ï¼š<b style="color: aqua;">@FunctionalInterface</b> è¿™ä¾¿æ˜¯å‡½æ•°æ¥å£çš„æ³¨è§£ï¼</p><p><b style="color: orangered;">å‡½æ•°å¼æ¥å£ï¼šåªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œåœ¨ä½¿ç”¨è¿™äº›æ¥å£æ—¶ï¼Œå°±å¯ä»¥æä¾›ä¸€ä¸ªlambdaè¡¨è¾¾å¼</b></p><p>æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹å‡½æ•°æ¥å£çš„<strong>ç‰¹ç‚¹</strong>ï¼š</p><p>ï¼ˆ1ï¼‰å‡½æ•°æ¥å£åªèƒ½æœ‰<strong>â€œä¸€ä¸ªæ–¹æ³•â€</strong> </p><p>ï¼ˆ2ï¼‰å‡½æ•°æ¥å£å¯ä»¥æœ‰é»˜è®¤æ–¹æ³• <strong>default-method</strong></p><p>ï¼ˆ3ï¼‰å‡½æ•°æ¥å£è¦†ç›–<strong>Object</strong>ç¥–å…ˆç±»çš„æ–¹æ³•</p><p><b style="color: chocolate;">ä¸€ä¸ªæ–¹æ³•çš„è¯´æ³•è¡¨ç¤ºæ˜¯ï¼šé™¤äº†defaultæ–¹æ³•å’ŒObjectæ–¹æ³•ä¹‹å¤–ï¼Œæˆ‘ä»¬åªèƒ½å®šä¹‰ä¸€ä¸ªè‡ªå·±çš„æŠ½è±¡æ–¹æ³•ï¼</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@FunctionalInterface</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MyFuncInterface</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">diyMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">defaultMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‡½æ•°æ¥å£çš„é»˜è®¤æ–¹æ³•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥æ¼”ç¤ºä¸€ä¸‹è¿™ä¸ªlambdaè¡¨è¾¾å¼å®ç°å‡½æ•°å¼æ¥å£çš„è¿‡ç¨‹</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">FuncInerfaceImpl</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">/**         *åŒ¿åå†…éƒ¨ç±»å®ç°å‡½æ•°å¼æ¥å£         * new MyFuncInterface() {         *@override         *public void diyMethod() {         *System.out.prinln("Impl diyMethod!");         *}         *}         *lambdaä»£æ›¿åŒ¿åå†…éƒ¨ç±»å®ç°ç±»å‡½æ•°å¼æ¥å£ï¼ˆç²¾ç®€å†™æ³•ï¼‰         *((MyFuncInterface) () -&gt; System.out.prinln("Impl diyMethod!"))         *         *         */</span>                <span class="token class-name">MyFuncInterface</span> funcImpl <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">prinln</span><span class="token punctuation">(</span><span class="token string">"Impl diyMethod!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è½¬æ¢"><a href="#è½¬æ¢" class="headerlink" title="è½¬æ¢"></a>è½¬æ¢</h2><p><code>lambda</code>è¡¨è¾¾å¼æœ€å¤§çš„å¸å¼•åŠ›å°±æ˜¯å¯ä»¥ä¸<code>å‡½æ•°å¼æ¥å£</code>è¿›è¡Œè½¬æ¢ï¼</p><p>å¯¹äºé‚£äº›æœ‰ç€ç‰¹åˆ«ç”¨å¤„çš„å‡½æ•°å¼æ¥å£ï¼ˆ<code>Comparator</code>ï¼‰ï¼Œè€Œä¸æ˜¯å•çº¯çš„éœ€è¦ä¸€ä¸ªå‚æ•°å’Œè¿”å›å€¼çš„æ–¹æ³•ã€‚æ¢è€Œè¨€ä¹‹ï¼šå°±æ˜¯<strong>æƒ³è¦lambdaè¡¨è¾¾å¼åšäº›ç¨å¾®å¤æ‚ä¸€ç‚¹çš„å¤„ç†</strong> é‚£ä¹ˆå°±å¯ä»¥ä¸ºå®ƒå»ºç«‹ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼</p><p>æ¯”å¦‚ä¹‹å‰åœ¨<a href="">ArrayListåº•å±‚åŸç†åˆ†æ</a>ä¸­ï¼Œè°ˆåˆ°äº†ä¸€ä¸ª <code>removeIf(Predicate&lt;? super E&gt;)</code>æ–¹æ³•è¿™é‡Œå°±æœ‰ä¸€ä¸ªæ¥å£</p><p><b style="color: yellow;">Predicate&lt;T&gt;</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@FunctionalInterface</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">boolean</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// default-methodã€static-method</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªæ¥å£ä¸“é—¨ç”¨æ¥ä¼ é€’lambdaè¡¨è¾¾å¼ï¼Œæ‰€ä»¥æ¯ä¸ªlistä¸‹çš„ç±»éƒ½å¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥åº”ç”¨lambdaè¡¨è¾¾å¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// listæ¸…ç©ºæ‰€æœ‰å…ƒç´ </span>list<span class="token punctuation">.</span><span class="token function">reomveIf</span><span class="token punctuation">(</span>e <span class="token operator">-&gt;</span> e <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><b style="color: red;">æ³¨ï¼š</b> lambdaè¡¨è¾¾å¼ä¸èƒ½ç›´æ¥èµ‹å€¼ç»™Objectç±»å‹å˜é‡ï¼Œå› ä¸ºè¿™é‡Œçš„Objectä¸æ˜¯å‡½æ•°å¼æ¥å£ï¼</p><h1 id="lambdaè¯­æ³•åŠåº”ç”¨"><a href="#lambdaè¯­æ³•åŠåº”ç”¨" class="headerlink" title="lambdaè¯­æ³•åŠåº”ç”¨"></a>lambdaè¯­æ³•åŠåº”ç”¨</h1><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token punctuation">(</span>parameters<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> expressions<span class="token punctuation">;</span><span class="token punctuation">(</span>parameters<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¸Šè¿°ä»£ç æ˜¯æ ‡å‡†çš„lambdaè¡¨è¾¾å¼è¯­æ³•ï¼Œå½“ç„¶è¿˜æ ¹æ®æœ‰æ— å‚æ•°åˆ†ä¸ºï¼šæœ‰å‚ã€æ— å‚ï¼ä»¥åŠæ˜¯å¦å­˜åœ¨è¿”å›å€¼çš„æƒ…å†µï¼</p><p>ä¸‹é¢æˆ‘ä»¬ä»¥ä¸Šé¢æåˆ°çš„æ¯”è¾ƒå™¨ä¸ºä¾‹å­ <span class="github-emoji"><span>ğŸ‘‡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f447.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// LengthComparator </span><span class="token punctuation">(</span><span class="token class-name">String</span> first<span class="token punctuation">,</span> <span class="token class-name">String</span> second<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> result <span class="token operator">=</span> first<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> second<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>result <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">// å¯ä»¥æ¨æµ‹å‚æ•°ç±»å‹çš„èµ‹å€¼</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> comp <span class="token operator">=</span> <span class="token punctuation">(</span>first<span class="token punctuation">,</span>second<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span><span class="token keyword">return</span> first<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> second<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// è¿”å›ç±»å‹é€šè¿‡ä¸Šä¸‹æ–‡æ¨å¯¼å‡ºçš„æƒ…å†µ</span><span class="token punctuation">(</span><span class="token class-name">String</span> first<span class="token punctuation">,</span> <span class="token class-name">String</span> second<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> first<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> second<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>lambdaè¡¨è¾¾å¼è¿˜æœ‰éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š</p><p>ï¼ˆ1ï¼‰å˜é‡åä¸èƒ½ä¸lambdaè¡¨è¾¾å¼ä¸­çš„å±€éƒ¨å˜é‡é‡åï¼</p><p>ï¼ˆ2ï¼‰lambdaè¡¨è¾¾å¼ä¸å…è®¸åœ¨æŸäº›åˆ†æ”¯è¿”å›å€¼ï¼Œè€Œåœ¨å¦å¤–ä¸€äº›åˆ†æ”¯ä¸è¿”å›ï¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// error</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> first <span class="token operator">=</span> <span class="token punctuation">(</span>first<span class="token punctuation">,</span> second<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> first<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> second<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Illgeal</span><span class="token punctuation">(</span><span class="token class-name">String</span> first<span class="token punctuation">,</span> <span class="token class-name">String</span> second<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>first<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> second<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="lambdaéå†é›†åˆæ“ä½œ"><a href="#lambdaéå†é›†åˆæ“ä½œ" class="headerlink" title="lambdaéå†é›†åˆæ“ä½œ"></a>lambdaéå†é›†åˆæ“ä½œ</h2><p>åœ¨Javaé›†åˆæ¡†æ¶ä¸­çš„é¡¶å±‚æ¥å£ <strong>Iterable</strong> ä¸­å­˜åœ¨ä¸€ä¸ª<code>defaultï¼šforEach</code>æ–¹æ³•,æ‰€æœ‰çš„å…·ä½“é›†åˆç±»éƒ½å¯ä»¥åˆ©ç”¨lambdaè¡¨è¾¾å¼è¿›è¡Œå¯¹é›†åˆçš„éå†æ“ä½œ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LambdaItr</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"mate"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"master"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"matemaster"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"masterstudio"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//        list.forEach(new Consumer&lt;String&gt;() {</span><span class="token comment">//            @Override</span><span class="token comment">//            public void accept(String s) {</span><span class="token comment">//                System.out.println(s);</span><span class="token comment">//            }</span><span class="token comment">//        });        </span>        list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">// mate</span><span class="token comment">// master</span><span class="token comment">// matemaster</span><span class="token comment">// masterstudio</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="lambdaé›†åˆæ’åº"><a href="#lambdaé›†åˆæ’åº" class="headerlink" title="lambdaé›†åˆæ’åº"></a>lambdaé›†åˆæ’åº</h2><p>æ¯”å¦‚åœ¨<code>ArrayList</code>ç±»ä¸­æ˜¯å®ç°äº†<code>List</code>æ¥å£ä¸­ä¸€ä¸ªæ”¯æŒlambdaè¡¨è¾¾å¼çš„ä¸€ä¸ª<strong>sort</strong>æ–¹æ³•ï¼Œæ‰€ä»¥ç›´æ¥åˆ©ç”¨lambdaæ’åº</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LambdaSort</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Corporation</span><span class="token punctuation">&gt;</span></span>  list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Corporation</span><span class="token punctuation">(</span><span class="token string">"HUAWEI"</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Corporation</span><span class="token punctuation">(</span><span class="token string">"Microsoft"</span><span class="token punctuation">,</span><span class="token number">46</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Corporation</span><span class="token punctuation">(</span><span class="token string">"Apple"</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Corporation</span><span class="token punctuation">(</span><span class="token string">"IBM"</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//        list.sort(new Comparator&lt;Corporation&gt;() {</span><span class="token comment">//            @Override</span><span class="token comment">//            public int compare(Corporation o1, Corporation o2) {</span><span class="token comment">//                return o1.getAge()-o2.getAge();</span><span class="token comment">//            }</span><span class="token comment">//        });</span>                list<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> o1<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>o2<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Corporation</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Corporation</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> age<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Corporation{"</span> <span class="token operator">+</span>                <span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", age="</span> <span class="token operator">+</span> age <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="lambdaåœ¨çº¿ç¨‹ä¸­è°ƒç”¨"><a href="#lambdaåœ¨çº¿ç¨‹ä¸­è°ƒç”¨" class="headerlink" title="lambdaåœ¨çº¿ç¨‹ä¸­è°ƒç”¨"></a>lambdaåœ¨çº¿ç¨‹ä¸­è°ƒç”¨</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LambdaThread</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//        new Thread(new Runnable() {</span><span class="token comment">//            @Override</span><span class="token comment">//            public void run() {</span><span class="token comment">//                System.out.println("å½“å‰è¿è¡Œçº¿ç¨‹ï¼š" + Thread.currentThread().getName());</span><span class="token comment">//            }</span><span class="token comment">//        });</span>        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>            <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å½“å‰è¿è¡Œçº¿ç¨‹ï¼š"</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">// console: å½“å‰è¿è¡Œçº¿ç¨‹ï¼šThread-0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="lambda-cupid"><a href="#lambda-cupid" class="headerlink" title="lambda:cupid:"></a>lambda<span class="github-emoji"><span>ğŸ’˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f498.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h1><h2 id="è¯­æ³•ç³–"><a href="#è¯­æ³•ç³–" class="headerlink" title="è¯­æ³•ç³–"></a>è¯­æ³•ç³–</h2><p>å¯¹äºä¸€äº›å·²ç»å­˜åœ¨äºJavaæ ‡å‡†åº“çš„æ–¹æ³•ï¼ˆæˆ–è€…æ˜¯å·²æœ‰çš„æ–¹æ³•ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ›´åŠ ç®€æ´çš„æ–¹å¼ç¼–å†™lambdaã€‚</p><p style="color:brown">â—è¯­æ³•ç³–ï¼š<br>ï¼ˆ1ï¼‰æ–¹æ³•å¼•ç”¨<br>ï¼ˆ2ï¼‰æ„é€ å™¨å¼•ç”¨</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å±•ç¤ºä¸€ä¸‹ï¼Œåˆ©ç”¨å·²æœ‰çš„æ–¹æ³•å»ç›´æ¥å®ç°å¿½ç•¥å¤§å°å†™çš„å­—ç¬¦ä¸²æ’åº</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"Mate"</span><span class="token punctuation">,</span><span class="token string">"mate"</span><span class="token punctuation">,</span><span class="token string">"Master"</span><span class="token punctuation">,</span><span class="token string">"master"</span><span class="token punctuation">,</span><span class="token string">"abc"</span><span class="token punctuation">,</span><span class="token string">"CBD"</span><span class="token punctuation">}</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token operator">::</span><span class="token function">compareToIgnoreCase</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç­‰ä»·äºåˆ©ç”¨lambdaå®ç°ä¸€ä¸ªå¿½ç•¥å¤§å°å†™çš„æ¯”è¾ƒå™¨</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åˆ©ç”¨æ„é€ å™¨å¼•ç”¨ï¼Œå°†å­—ç¬¦ä¸²åˆ—è¡¨è½¬åŒ–ä¸ºå¦å¤–ä¸€ç§ç±»å‹åˆ—è¡¨</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> names <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//è¿™é‡Œçœå»åŠ å…¥å…ƒç´ çš„è¿‡ç¨‹</span><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> stream <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>list<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> people <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¦å¤–æ–¹æ³•å¼•ç”¨è¿˜å¯ä»¥åº”ç”¨åœ¨ <strong>this</strong> å’Œ <strong>super</strong> ä¸¤ä¸ªå…³é”®å­—</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">this</span><span class="token operator">::</span><span class="token function">equals</span><span class="token punctuation">;</span>  <span class="token comment">// ç­‰ä»·äº: this.equals(x)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">prinln</span><span class="token punctuation">(</span><span class="token string">"Hello World!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">TimeGreeter</span> <span class="token keyword">extends</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Timer</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timer</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">super</span><span class="token operator">::</span><span class="token function">greet</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">// è¿™é‡Œ super::greet  ç­‰ä»·äº super.greet()</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: navy;">è¯­æ³•ç³–æ€»ç»“</b> <span class="github-emoji"><span>ğŸ‘‡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f447.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><pre class="line-numbers language-code" data-language="code"><code class="language-code">object::instaceMethod;Class::staticMethod;Class::instaceMethod;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="å˜é‡ä½œç”¨åŸŸ"><a href="#å˜é‡ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡ä½œç”¨åŸŸ"></a>å˜é‡ä½œç”¨åŸŸ</h2><p style="color:gray">lambdaè¡¨è¾¾å¼çš„ç»„æˆéƒ¨åˆ†ï¼š<code>() -&gt; {}</code><br>1ï¼‰å‚æ•°<br>2ï¼‰ä»£ç å— <br>3ï¼‰è‡ªç”±å˜é‡å€¼ï¼šéå‚æ•°ï¼Œè€Œä¸”ä¸åœ¨lambdaè¡¨è¾¾å¼å†…éƒ¨å®šä¹‰çš„å˜é‡</p><p>å…ˆçœ‹ä¸ªæ —å­â˜•</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">repeatMsg</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">,</span> <span class="token keyword">int</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">ActionListener</span> listener <span class="token operator">=</span> event <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Toolkit</span><span class="token punctuation">.</span><span class="token function">getDefaultToolkit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">beep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token keyword">new</span> <span class="token class-name">Timer</span><span class="token punctuation">(</span>delay<span class="token punctuation">,</span> listener<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">repeatMsg</span><span class="token punctuation">(</span><span class="token string">"Master"</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// æ¯éš”10ç§’æ‰“å°ä¸€ä¸‹Master</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œ <strong>msg</strong> å°±æ˜¯è‡ªç”±å˜é‡ï¼Œå®ƒæ˜¯åœ¨ <strong>repeatMsg</strong> æ–¹æ³•ä¸­å®šä¹‰çš„å‚æ•°å˜é‡ã€‚å®ƒæ˜¯ä¸€ä¸ªä¸å¯å˜é‡<strong>ï¼ˆfinal Stringï¼‰</strong></p><p>ä¸ºä»€ä¹ˆè¿™é‡Œéœ€è¦å¼ºè°ƒ <strong>è‡ªç”±å˜é‡msgæ˜¯ä¸€ä¸ªä¸å¯å˜é‡</strong>â”</p><p>ç­”ï¼šå› ä¸ºåœ¨lambdaè¡¨è¾¾å¼ä¸­ï¼Œè‡ªç”±å˜é‡ä¸ºæœ€ç»ˆå˜é‡ï¼Œä¹Ÿå°±æ˜¯ä¸€ç»åˆå§‹åŒ–å°†ä¸å†å…è®¸å®ƒåœ¨ä¸lambdaè¡¨è¾¾å¼åŒä½œç”¨åŸŸå†…æ”¹å˜ã€‚æ— è®ºæ˜¯lambdaè¡¨è¾¾å¼å†…éƒ¨è¿˜æ˜¯å¤–éƒ¨ï¼</p><p>ä¹Ÿå°±æ˜¯è¯´ä¸‹é¢ä¸¤ä¸ªåšæ³•éƒ½æ˜¯<strong>error</strong> â</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">countDown</span><span class="token punctuation">(</span><span class="token keyword">int</span> start<span class="token punctuation">,</span> <span class="token keyword">int</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">ActionListener</span> listener <span class="token operator">=</span> event <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>        start<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// error: ä¸å…è®¸æ”¹å˜è‡ªç”±å˜é‡ start</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Timer</span><span class="token punctuation">(</span>delay<span class="token punctuation">,</span> listener<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">ActionListener</span> listener <span class="token operator">=</span> event <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i <span class="token operator">+</span><span class="token string">":"</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// error: ä¸å…è®¸æ”¹å˜è‡ªç”±å˜é‡ i</span>        <span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Timer</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> listener<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//é»˜è®¤ä¸€åƒæ¬¡é‡å¤</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¤„ç†lambda"><a href="#å¤„ç†lambda" class="headerlink" title="å¤„ç†lambda"></a>å¤„ç†lambda</h2><p>å‰é¢è¯´çš„å…¨éƒ½æ˜¯æ€ä¹ˆåœ¨æ–¹æ³•ä¸­åº”ç”¨lambdaï¼é‚£ä¹ˆæ€ä¹ˆè‡ªå·±ç¼–å†™ä¸€ä¸ªå¯ä»¥åº”ç”¨lambdaè¡¨è¾¾å¼çš„æ–¹æ³•å‘¢â“</p><p>æˆ‘ä»¬ä¸€èˆ¬æŠŠä»£ç å—åŒ…è£…åœ¨lambdaè¡¨è¾¾å¼ä¸­ï¼Œä¸»è¦ç›®çš„ï¼šå»¶è¿Ÿæ‰§è¡Œï¼<br>å»¶è¿Ÿæ‰§è¡Œçš„åŸå› ï¼š</p><ul><li>åœ¨å•ç‹¬çº¿ç¨‹è¿è¡Œä»£ç </li><li>å¤šæ¬¡æ‰§è¡Œä»£ç </li><li>åœ¨ç®—æ³•çš„åˆé€‚ä½ç½®æ‰§è¡Œä»£ç ï¼ˆArray.sortçš„æ¯”è¾ƒå™¨ï¼‰</li><li>å›è°ƒ</li><li>å¿…è¦æ—¶æ‰è¿è¡Œ</li></ul><p>å†çœ‹<strong>repeatMsg</strong> â˜•</p><p>è¿™æ¬¡æˆ‘ä»¬å¸Œæœ›å¯ä»¥è¿™æ ·è°ƒç”¨ <strong>repeatMsg</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token function">repeatMsg</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Master"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>é‚£ä¹ˆå¦‚ä½•è®¾è®¡è¿™æ ·çš„æ–¹æ³•ï¼Œä¾¿æ˜¯ä¸»è¦è€ƒè™‘å†…å®¹ï¼è¯·çœ‹ä¸‹é¢çš„è®¾è®¡æ–¹å¼â¬‡ï¸</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">repeatMsg</span><span class="token punctuation">(</span><span class="token keyword">int</span> count<span class="token punctuation">,</span> <span class="token class-name">Runnable</span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        action<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: silver;">æˆ‘ä»¬å¾—å‡ºè®¾è®¡ä¸€ä¸ªåº”ç”¨lambdaè¡¨è¾¾å¼çš„æ–¹æ³•ï¼Œå°±éœ€è¦åˆ©ç”¨å·²æœ‰çš„å‡½æ•°å¼æ¥å£æˆ–è€…æä¾›diyçš„å‡½æ•°å¼æ¥å£</b></p><p>â³çœ‹çœ‹Javaæ ‡å‡†åº“ä¸­çš„<strong>å¸¸ç”¨å‡½æ•°å¼æ¥å£</strong></p>&nbsp;&nbsp;&nbsp;&nbsp;<trÂ style="background-color:Â chocolate;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</trÂ style="background-color:Â chocolate;"><table><tbody><tr><th>å‡½æ•°å¼æ¥å£</th><th>å‚æ•°ç±»å‹</th>        <th>è¿”å›ç±»å‹</th>        <th>æŠ½è±¡æ–¹æ³•å</th>        <th>æè¿°</th>        <th>å…¶ä»–æ–¹æ³•</th></tr>    <tr>        <td>Runable</td>        <td>æ— </td>        <td>void</td>        <td>run</td>        <td>ä½œæ— å‚è¿”å›å€¼çš„åŠ¨ä½œè¿è¡Œ</td>        <td></td>    </tr>    <tr>        <td>Suppiler&lt;T&gt;</td>        <td>æ— </td>        <td>T</td>        <td>get</td>        <td>è¿”å›Tå‹çš„å€¼</td>        <td></td>    </tr>     <tr>        <td>Consumer&lt;T&gt;</td>        <td>T</td>        <td>void</td>        <td>accept</td>        <td>å¤„ç†Tå‹å€¼</td>        <td>andThen</td>    </tr>     <tr>        <td>BiConsumer&lt;T,U&gt;</td>        <td>T,U</td>        <td>void</td>        <td>accept</td>        <td>å¤„ç†T,Uç±»å‹çš„å€¼</td>        <td>andThen</td>    </tr>     <tr>        <td>Function&lt;T,R&gt;</td>        <td>T</td>        <td>R</td>        <td>apply</td>        <td>æœ‰ä¸ªTç±»å‹çš„å‡½æ•°</td>        <td>compose,andThen,identity</td>    </tr>     <tr>        <td>BiFunction&lt;T,U,R&gt;</td>        <td>T,U</td>        <td>R</td>        <td>apply</td>        <td>æœ‰T,Uç±»å‹å€¼çš„å‡½æ•°</td>        <td>andThen</td>    </tr>     <tr>        <td>UnaryOperator&lt;T&gt;</td>        <td>T</td>        <td>T</td>        <td>apply</td>        <td>ç±»å‹Tçš„ä¸€å…ƒæ“ä½œç¬¦</td>        <td>compose,andThen,identity</td>    </tr>     <tr>        <td>BinaryOperator&lt;T&gt;</td>        <td>T,T</td>        <td>T</td>        <td>apply</td>        <td>ç±»å‹Tçš„äºŒå…ƒæ“ä½œç¬¦</td>        <td>andThen,maxBy,minBy</td>    </tr>     <tr>        <td>Predicate&lt;T&gt;</td>        <td>T</td>        <td>boolean</td>        <td>test</td>        <td>å¸ƒå°”å‡½æ•°</td>        <td>and,or,negate,isEqual</td>    </tr>     <tr>        <td>BiPredicate&lt;T,U&gt;</td>        <td>T,U</td>        <td>boolean</td>        <td>test</td>        <td>ä¸¤ä¸ªå‚æ•°çš„å¸ƒå°”å‡½æ•°</td>        <td>and,or,negate</td>    </tr></tbody></table>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<p>âŒ›åŸºæœ¬ç±»å‹çš„å‡½æ•°å¼æ¥å£ï¼šè¿™äº›æ¥å£å¯ä»¥å‡å°‘è‡ªåŠ¨è£…ç®±</p>]]></content>
      
      
      <categories>
          
          <category> CoreJava </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åŸåˆ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaæ¥å£æŠ€æœ¯</title>
      <link href="posts/35488.html"/>
      <url>posts/35488.html</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯æ¥å£"><a href="#ä»€ä¹ˆæ˜¯æ¥å£" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¥å£"></a>ä»€ä¹ˆæ˜¯æ¥å£</h1><p>æ¥å£æŠ€æœ¯ä¸»è¦æ¥æè¿°ç±»å…·æœ‰ä»€ä¹ˆåŠŸèƒ½ï¼Œä¹Ÿå°±è¯´æ˜Javaæ¥å£ä¸ä¼šå…·ä½“å®ç°æ–¹æ³•ã€‚æ¥å£å°±ç›¸å½“äºä¸€ä¸ªç±»çš„åŠŸèƒ½è¯´æ˜ä¹¦ï¼Œå½“ä¸€ä¸ªç±»å»å®ç°äº†ä¸€ä¸ªç‰¹å®šçš„æ¥å£ï¼Œå°±è¡¨é¢è¿™ä¸ªç±»å…·æœ‰æ¥å£ä¸­æ‰€æåŠçš„åŠŸèƒ½ã€‚<br>æ¥å£ä¹Ÿæ˜¯Javaå®ç°å¤šç»§æ‰¿çš„ä¼˜åŒ–æ–¹å¼ã€‚</p><p>æˆ‘ä»¬ä¸¾ä¸ªæ —å­<span class="github-emoji"><span>âœŒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/270c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><br>ä¸€èˆ¬æƒ…å†µä¸‹ æˆ‘ä»¬åœ¨ä½¿ç”¨ <code>Arrays.(Obejct[])</code> æ–¹æ³•æ—¶ï¼Œè¿™é‡Œä¼ å…¥çš„å‚æ•°æ•°ç»„å°±å¿…é¡»è¦å®ç° <code>Comparable</code>æ¥å£ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Comparable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> <span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token class-name">T</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬å¾—å‡ºæ¯ä¸€ä¸ªå®ç°äº† <strong>Comparable</strong> æ¥å£çš„ç±»ï¼Œéƒ½å°†å…·æœ‰è¿™ä¸ª <strong>compareTo(T)</strong> ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨åœ¨æ‰§è¡Œä»£ç æ—¶ï¼Œå°±ä¸ç”¨é™„åŠ åˆ¤æ–­è¿™ä¸ªæ–¹æ³•æ˜¯ä¸æ˜¯å¯¹åº”ç±»å‹ã€‚ç›¸å½“äºæ¥å£çš„åŠŸèƒ½æ€§æ ‡è®°ï¼</p><h1 id="æ¥å£çš„ç‰¹æ€§"><a href="#æ¥å£çš„ç‰¹æ€§" class="headerlink" title="æ¥å£çš„ç‰¹æ€§"></a>æ¥å£çš„ç‰¹æ€§</h1><p><span class="github-emoji"><span>1âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0031-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ¥å£ä¸æ˜¯ç±»ï¼Œæ²¡æœ‰æ„é€ å™¨ï¼Œä¹Ÿå°±æ˜¯ä¸å­˜åœ¨æ¥å£å¯¹è±¡ï¼Œä½†æ˜¯å’ŒæŠ½è±¡ç±»ä¸€è‡´ï¼Œæ²¡æœ‰å¯¹è±¡ä¹Ÿå¯ä»¥æœ‰æ¥å£å˜é‡ã€‚æ¥å£å˜é‡é€šè¿‡æ¥å—å®ç°ç±»çš„å¯¹è±¡å®ä¾‹å¼•ç”¨ï¼Œå¯ä»¥è°ƒç”¨å®ç°çš„æ¥å£æ–¹æ³•ã€‚å½“ç„¶åŒæ ·ä¹Ÿå¯ä»¥ä½¿ç”¨ <strong>instanceof</strong> å»åˆ¤æ–­ç±»æ˜¯å¦æ¥å£ä»¥ä¸‹ä»£ç è¯´æ˜äº†ä¸Šé¢çš„è¿™æ®µè¯</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestImpl</span> <span class="token keyword">implements</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Impl Test !"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">TestImpl</span> ti <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TestImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Test</span> t <span class="token operator">=</span> ti<span class="token punctuation">;</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>ti <span class="token keyword">instanceof</span> <span class="token class-name">Test</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            ti<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">// console : Impl Test !</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><span class="github-emoji"><span>2âƒ£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/0032-20e3.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ¥å£ä¸­ä¸èƒ½å®šä¹‰å®ä¾‹åŸŸå’Œé™æ€æ–¹æ³•ï¼ˆè™½ç„¶Java8ä¹‹åæ”¯æŒï¼Œä½†æ˜¯ä¹Ÿä¸ä¼šè¿™ä¹ˆåšï¼‰ã€‚ä½†æ˜¯æ¥å£ä¸­å¯ä»¥å®šä¹‰å¸¸é‡ï¼Œå¹¶ä¸”å«æœ‰è‡ªåŠ¨çš„ä¿®é¥°è¯ <code>public static final</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Movable</span> <span class="token punctuation">{</span>    <span class="token keyword">double</span> SPEED_LIMIT <span class="token operator">=</span> <span class="token number">100</span> <span class="token punctuation">;</span> <span class="token comment">// (public static final) double SPEED_LIMIT</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h1 id="æ¥å£ä¸­çš„æ–¹æ³•"><a href="#æ¥å£ä¸­çš„æ–¹æ³•" class="headerlink" title="æ¥å£ä¸­çš„æ–¹æ³•"></a>æ¥å£ä¸­çš„æ–¹æ³•</h1><p><span class="github-emoji"><span>â­</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2b50.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ¥å£ä¸­çš„æ–¹æ³•éƒ½æ˜¯æŠ½è±¡æ–¹æ³•ï¼ˆé™¤äº† <b style="color: red;">default</b>å…³é”®è¯ä¿®é¥°çš„æ–¹æ³•ï¼‰ï¼Œä¹Ÿå°±æ˜¯å«æœ‰è‡ªå¸¦çš„ä¿®é¥°è¯<code>public abstract</code></p><p>æ¥ä¸‹æ¥ä¸¾ä¸ª<code>Iterable</code>æ —å­ <span class="github-emoji"><span>ğŸ†—</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f197.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token comment">//è¿­ä»£å™¨</span>    <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// å¢å¼ºforå¾ªç¯</span>    <span class="token keyword">default</span> <span class="token keyword">void</span> <span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> action<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">T</span> t <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            action<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// æ‹†åˆ†å™¨</span>    <span class="token keyword">default</span> <span class="token class-name">Spliterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">spliterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token class-name">Spliterators</span><span class="token punctuation">.</span><span class="token function">spliteratorUnknownSize</span><span class="token punctuation">(</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ1ï¼‰æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™ä¸ªæ¥å£æœ‰ä¸¤ä¸ªé»˜è®¤çš„æ–¹æ³•ã€‚è™½ç„¶è¿˜ä¸æ˜¯å¾ˆæ¸…æ¥šç¬¬äºŒä¸ªå…·ä½“å¹²å•¥ï¼Œä½†æ˜¯å¯ä»¥æ¸…æ¥šçš„çŸ¥é“ï¼Œæ‰€æœ‰å®ç°è¿™ä¸ªæ¥å£çš„ç±»éƒ½å°†èƒ½ä½¿ç”¨ å¢å¼ºforå¾ªç¯ã€æ‹†åˆ†å™¨ï¼ˆå…³é”®æ˜¯ä¸ç”¨è‡ªå·±å»å®ç°äº†ï¼‰ã€‚è¿™å°±æ˜¯é»˜è®¤æ–¹æ³•çš„å¥½å¤„ã€‚å½“ç„¶è¿™é‡Œçš„è¿­ä»£å™¨æ–¹æ³•ä¹Ÿå‘Šè¯‰äº†ç¼–è¯‘å™¨ï¼Œå®ƒçš„å®ç°ç±»éƒ½æ‹¥æœ‰è·å–è¿­ä»£å™¨çš„èƒ½åŠ›ã€‚è€Œå…·ä½“çš„è¿­ä»£å™¨åŠŸèƒ½éœ€è¦å…¶å®ç°ç±»å»å®ç°<code>Iterator</code>æ¥å£ã€‚</p><p>ï¼ˆ2ï¼‰ä»£ç ä¸­å‘Šè¯‰æˆ‘ä»¬ï¼Œ defaultæ–¹æ³•å¯ä»¥è°ƒç”¨å…¶ä»–ä»»ä½•æ–¹æ³•ï¼</p><h2 id="è§£å†³æ¥å£å†²çª"><a href="#è§£å†³æ¥å£å†²çª" class="headerlink" title="è§£å†³æ¥å£å†²çª"></a>è§£å†³æ¥å£å†²çª</h2><p>ä¹‹å‰è¯´åˆ°è¿‡ï¼šæ¥å£æœ€å¤§ä¼˜ç‚¹å°±æ˜¯å¾ˆå¥½çš„è§£å†³äº†å¤šç»§æ‰¿å¸¦æ¥çš„å›°æ‰°ï¼Œä½†æ˜¯å…¶å®è¿™æ ·ä¹Ÿä¼šæœ‰é—®é¢˜ã€‚<span class="github-emoji"><span>â“</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2753.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><br>æ¯”å¦‚ï¼š 1. æˆ‘å®ç°çš„å¤šä¸ªæ¥å£ï¼Œå«æœ‰æ–¹æ³•ç­¾åå®Œå…¨ä¸€è‡´çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™å®ç°çš„æ–¹æ³•åº”è¯¥æ€ä¹ˆåšï¼Ÿ 2.æˆ‘ä»çˆ¶ç±»ç»§æ‰¿äº†ä¸€ä¸ªå’Œå®ç°æ¥å£ä¸­ä¸€æ ·çš„æ–¹æ³•ï¼Œé‚£ä¹ˆåˆæ€ä¹ˆåŠï¼Ÿ</p><p>Javaçš„è§£å†³è§„åˆ™ï¼š</p><p>ï¼ˆ1ï¼‰å…¨è¦†ç›–ï¼Œå¯¹äºæ¥å£é‡å¤çš„æ–¹æ³•ï¼Œç›´æ¥è¦†ç›–ã€‚</p><p>ï¼ˆ2ï¼‰è¶…ç±»ä¼˜å…ˆï¼Œä¸ç®¡æ¥å£çš„å®ç°æ–¹æ³•ï¼Œç›´æ¥å¿½ç•¥ï¼Œåªæ‰¿è®¤ç»§æ‰¿çš„æ–¹æ³•</p><h1 id="æ¥å£å›è°ƒ"><a href="#æ¥å£å›è°ƒ" class="headerlink" title="æ¥å£å›è°ƒ"></a>æ¥å£å›è°ƒ</h1><p><strong>callback</strong> ä½œä¸ºä¸€ç§å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Œå›è°ƒå°±æ˜¯åœ¨ç‰¹å®šçš„æ—¶é—´å‘ç”Ÿæ—¶æ‰€éœ€è¦é‡‡å–çš„ä¸€ç§åº”å¯¹æ–¹æ³•ã€‚</p><p>è¯·çœ‹ä¸‹é¢ä»£ç ğŸ‘‡</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo08</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">ActionListener</span> listener <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TimePrinter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Timer</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timer</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span>listener<span class="token punctuation">)</span><span class="token punctuation">;</span>        t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">JOptionPane</span><span class="token punctuation">.</span><span class="token function">showMessageDialog</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">"Quit program?"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">TimePrinter</span> <span class="token keyword">implements</span> <span class="token class-name">ActionListener</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">actionPerformed</span><span class="token punctuation">(</span><span class="token class-name">ActionEvent</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"At the tone the time is : "</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Toolkit</span><span class="token punctuation">.</span><span class="token function">getDefaultToolkit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">beep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ActionListener</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">actionPerformed</span><span class="token punctuation">(</span><span class="token class-name">ActionEvent</span> event<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å¯¹è±¡å…‹éš†"><a href="#å¯¹è±¡å…‹éš†" class="headerlink" title="å¯¹è±¡å…‹éš†"></a>å¯¹è±¡å…‹éš†</h1><p>è¿™é‡Œåˆ›å»ºä¸€ä¸ªä¾‹å­ <code>Company(name,foundedTime,founder)</code>ç±»è¿›è¡Œå…‹éš†æ¼”ç¤º</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Company</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Date</span> foundedTime<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> founder<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Date</span> foundedTime<span class="token punctuation">,</span> <span class="token class-name">String</span> founder<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>foundedTime <span class="token operator">=</span> foundedTime<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>founder <span class="token operator">=</span> founder<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">// getterã€setter</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬å†çœ‹ä¸‹é¢çš„ä»£ç æ“ä½œ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// copy</span><span class="token class-name">Company</span> alibaba <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token string">"Alibaba"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">"1999"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token class-name">JackMa</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Company</span> copyAli <span class="token operator">=</span> alibaba<span class="token punctuation">;</span>copyAli<span class="token punctuation">.</span><span class="token function">setFoundedTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Data</span><span class="token punctuation">(</span><span class="token string">"1999-9-9"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// clone</span><span class="token class-name">Company</span> huawei <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token string">"HUAWEI"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">"1987"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>RZF<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Company</span> hwClone <span class="token operator">=</span> huawei<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>hwClone<span class="token punctuation">.</span><span class="token function">setFoundedTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Data</span><span class="token punctuation">(</span><span class="token string">"1987-9-15"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/image-one/images/20210317215740.jpg"></p><p>æˆ‘ä»¬ä»ä¸Šé¢è¿™ä¸ªç®€å•çš„å›¾ä¾‹å°±èƒ½çœ‹å‡ºæ¥ï¼Œæ‹·è´å°±æ˜¯ç®€å•çš„å¯¹è±¡å…±äº«ï¼Œè€Œå…‹éš†åˆ™æ˜¯åˆ›å»ºäº†ä¸¤ä¸ªå†…å®¹ç›¸åŒçš„ä¸åŒå¯¹è±¡ã€‚ è¿™æ ·çš„è¯ <strong>alibaba</strong> å’Œ <strong>copyAli</strong> ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜å¦å¤–ä¸€ä¸ªå¯¹è±¡éƒ½ä¼šéšç€æ”¹å˜ã€‚è€Œå¯¹äº <strong>huawei</strong> å’Œ <strong>hwclone</strong> æ¯ä¸€ä¸ªå¯¹è±¡éƒ½ä¼šæœ‰å•ç‹¬çš„å±äºè‡ªå·±çš„çŠ¶æ€ï¼Œå½¼æ­¤ä¹‹é—´å¹¶æ²¡æœ‰å½±å“ã€‚</p><h2 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// clone</span><span class="token class-name">Company</span> huawei <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token string">"HUAWEI"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">"1987"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>RZF<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Company</span> hwClone <span class="token operator">=</span> huawei<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>hwClone<span class="token punctuation">.</span><span class="token function">setFoundedTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">"1987-9-15"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: yellowgreen;">æµ…æ‹·è´</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Company</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">Date</span> foundedTime<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> founder<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Date</span> foundedTime<span class="token punctuation">,</span> <span class="token class-name">String</span> founder<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>foundedTime <span class="token operator">=</span> foundedTime<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>founder <span class="token operator">=</span> founder<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFoundedTime</span><span class="token punctuation">(</span><span class="token class-name">Date</span> foundedTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>foundedTime <span class="token operator">=</span> foundedTime<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// ä¿®æ”¹æ–¹æ³•çš„æƒé™ä¸ºï¼špublic ï¼Œè¿”å›ç±»å‹æ”¹ä¸ºï¼šCompany</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Company</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Company</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Company{"</span> <span class="token operator">+</span>                <span class="token string">"name='"</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">", foundedTime="</span> <span class="token operator">+</span> foundedTime <span class="token operator">+</span>                <span class="token string">", founder='"</span> <span class="token operator">+</span> founder <span class="token operator">+</span> <span class="token string">'\''</span> <span class="token operator">+</span>                <span class="token string">'}'</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/image-one/images/20210317221453.jpg"></p><p>è¿™é‡Œä»£ç çš„å›¾è§£çœ‹å‡ºæ¥ï¼Œå¯¹äº <strong>Company</strong> å¯¹è±¡çš„æ•°æ®åŸŸå­˜åœ¨ç€ä¸¤ç±»å­å¯¹è±¡å¼•ç”¨ã€‚å½“ç„¶å¯¹äºåƒ <strong>String</strong> è¿™ç§ä¸å¯å˜çš„ <strong>final</strong> ç±»ï¼Œæˆ‘ä»¬å¹¶ä¸å¿…è¦æ‹…å¿ƒæµ…æ‹·è´çš„å¼Šç«¯ã€‚å› ä¸ºæºå¯¹è±¡ <strong>huawei</strong> å’Œ æµ…æ‹·è´å¯¹è±¡ <strong>hwclone</strong> å…±äº«çš„å­å¯¹è±¡æ˜¯ä¸å¯å˜çš„ ï¼ˆè¿™é‡Œå¦‚æœå­å¯¹è±¡åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¹‹å†…ï¼ŒåŒ…å«ä¸å˜çš„å¸¸é‡ï¼Œæ²¡æœ‰æ›´æ”¹å™¨ä¼šæ›´æ”¹å®ƒçš„çŠ¶æ€ï¼Œæ²¡æœ‰æ–¹æ³•ç”Ÿæˆå®ƒçš„å¼•ç”¨ï¼‰ è¿™æ ·éƒ½æ˜¯ä¸€æ ·å®‰å…¨çš„ã€‚<span class="github-emoji"><span>ğŸ˜“</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f613.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> </p><p>ä½†æ˜¯å¯¹äºåƒ <strong>Date</strong> è¿™ç§å­å¯¹è±¡å¯å˜çš„ï¼Œæˆ‘ä»¬å§‹ç»ˆæ— æ³•ä¿æŒ <strong>huawei</strong> å’Œ <strong>hwclone</strong> çŠ¶æ€èƒ½å¤Ÿä¿æŒä¸€è‡´ã€‚æˆ‘ç°åœ¨å‡è®¾ æ‰§è¡Œäº†ä¸Šé¢ä»£ç å—çš„ç±»ä¼¼ä»£ç ï¼Œé‚£ä¹ˆè™½ç„¶æ˜¯<code>hwclone.setFoundedTime(new Data("1987-9-15"))</code> æˆ‘ä»¬å¯ä»¥å¤§è‡´æ¨æµ‹å‡ºæ­¤æ—¶ <strong>huawei</strong> çš„åˆ›ç«‹æ—¶é—´è¢«æ”¹å˜ã€‚</p><p>ä¸ºäº†é¿å…ç±»ä¼¼ä¸Šè¿°æƒ…å†µï¼Œæˆ‘ä»¬å¼•å…¥æ·±æ‹·è´çš„æ“ä½œï¼ <span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60e.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><h2 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// clone</span><span class="token class-name">Company</span> huawei <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token string">"HUAWEI"</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">"1987"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>RZF<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">Company</span> hwClone <span class="token operator">=</span> huawei<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>hwClone<span class="token punctuation">.</span><span class="token function">setFoundedTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">"1987-9-15"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: orange;">æ·±æ‹·è´</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Company</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">{</span>        <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Company</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>        <span class="token class-name">Company</span> comClone <span class="token operator">=</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        comClone<span class="token punctuation">.</span>foundedTime <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Date</span><span class="token punctuation">)</span> foundedTime<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> comClone<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·å¯¹äºè¿™äº›å¯å˜çš„å­å¯¹è±¡å¼•ç”¨ï¼Œæ¯ä¸€ä¸ªéƒ½æœ‰è¿™ä¸ªè‡ªå·±ç‹¬ç«‹çš„çŠ¶æ€ï¼Œå½¼æ­¤ä¹‹é—´äº’ä¸å½±å“ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> CoreJava </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åŸåˆ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¿¡å°åŠ¨ç”»</title>
      <link href="posts/64199.html"/>
      <url>posts/64199.html</url>
      
        <content type="html"><![CDATA[<h1 id="ç”µè„‘ç«¯ä¿¡å°éª¨æ¶ç»“æ„"><a href="#ç”µè„‘ç«¯ä¿¡å°éª¨æ¶ç»“æ„" class="headerlink" title="ç”µè„‘ç«¯ä¿¡å°éª¨æ¶ç»“æ„"></a>ç”µè„‘ç«¯ä¿¡å°éª¨æ¶ç»“æ„</h1><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>computer<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>maincontent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>form-wrap<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>beforeimg<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>envelope<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>formmain<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>              <span class="token comment">&lt;!--è¿™é‡Œå­˜æ”¾çš„æ˜¯è‡ªå·±æƒ³å±•ç¤ºçš„ä¿¡å°å†…å®¹ï¼Œæ³¨æ„å›¾ç‰‡å¤§å°ï¼Œä¼šå½±å“æ¼”ç¤ºæ•ˆæœ--&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>headerimg<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">padding</span><span class="token punctuation">:</span> 5px 20px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>                <span class="token comment">&lt;!--ä»¥ä¸‹æ˜¯è‡ªå·±æƒ³è¦å†™å…¥çš„å†…å®¹--&gt;</span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>center</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">calss</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>æ¥è‡ªMateMasterçš„ç•™è¨€:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>center</span><span class="token punctuation">&gt;</span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>center</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comments<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>                æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>                æœ‰ä»€ä¹ˆæƒ³åæ§½çš„ï¼Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>                æœ‰ä»€ä¹ˆæ–°å¥‡çš„æƒ³æ³•ï¼Œä¹Ÿéƒ½å¯ä»¥å‘Šè¯‰æˆ‘å“¦~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>center</span><span class="token punctuation">&gt;</span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottomcontent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottomimg<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottomhr<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>è‡ªåŠ¨ä¹¦è®°äººå¶ç«­è¯šä¸ºæ‚¨æœåŠ¡ï¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>afterimg<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ç§»åŠ¨ç«¯ä¿¡å°éª¨æ¶ç»“æ„"><a href="#ç§»åŠ¨ç«¯ä¿¡å°éª¨æ¶ç»“æ„" class="headerlink" title="ç§»åŠ¨ç«¯ä¿¡å°éª¨æ¶ç»“æ„"></a>ç§»åŠ¨ç«¯ä¿¡å°éª¨æ¶ç»“æ„</h1><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mobile<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>formmain<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>headerimg<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token style-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token style language-css"><span class="token property">padding</span><span class="token punctuation">:</span> 5px 20px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>center</span><span class="token punctuation">&gt;</span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>æ¥è‡ªMateMasterçš„ç•™è¨€:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>center</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>center</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comments<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>          æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>          æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>          æœ‰ä»€ä¹ˆæƒ³åæ§½çš„ï¼Ÿ<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>          æœ‰ä»€ä¹ˆæ–°å¥‡çš„æƒ³æ³•ï¼Œä¹Ÿéƒ½å¯ä»¥å‘Šè¯‰æˆ‘å“¦~<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>center</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottomcontent<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottomhr<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottomhr<span class="token punctuation">"</span></span><span class="token attr-name">"</span><span class="token punctuation">&gt;</span></span>è‡ªåŠ¨ä¹¦è®°äººå¶ç«­è¯šä¸ºæ‚¨æœåŠ¡ï¼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="cssæ¸²æŸ“åŠ¨ç”»"><a href="#cssæ¸²æŸ“åŠ¨ç”»" class="headerlink" title="cssæ¸²æŸ“åŠ¨ç”»"></a>cssæ¸²æŸ“åŠ¨ç”»</h1><pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/css/envelope.css<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å°†cssæ–‡ä»¶æ”¾åœ¨ <strong>hexo-theme-matery</strong> ä¸»é¢˜æ–‡ä»¶å¤¹çš„ <strong>source/css</strong> ç›®å½•ä¸‹ï¼Œ<strong>ç„¶åç›´æ¥æŒ‰ç…§æ­¤æ–¹å¼å¼•ç”¨å³å¯ï¼ æºç ä¸­æˆ‘å†™çš„linkä¸ºäº†æ¼”ç¤ºæ•ˆæœï¼Œä¸è¿™é‡Œå¼•ç”¨çš„hrefä¸ä¸€è‡´ï¼Œæ³¨æ„ä¿®æ”¹</strong></p><img src="https://cdn.jsdelivr.net/gh/matemaster9/image-one/images/20210319145308.gif" style="width: 75%;border:solid"><h1 id="å®Œæ•´æºç èµ„æº"><a href="#å®Œæ•´æºç èµ„æº" class="headerlink" title="å®Œæ•´æºç èµ„æº"></a>å®Œæ•´æºç èµ„æº</h1><p>è¿™é‡Œéª¨æ¶ç»“æ„ï¼Œä¸ºäº†ä»£ç æ¼”ç¤ºç¾è§‚ï¼Œæˆ‘å°±ç›´æ¥æŠŠå›¾ç‰‡çš„<strong>src</strong>çœç•¥äº†ï¼Œå…·ä½“çš„å¯ä»¥ç›´æ¥åœ¨æˆ‘çš„<strong>gitee</strong>ä»“åº“ä¸­ä¸‹è½½æºç </p><p><strong>é¦–é¡µå°±æœ‰giteeä»“åº“çš„ç›´é€šè½¦O(âˆ©_âˆ©)O</strong></p><p>ğŸ‘‰ <a href="https://gitee.com/matemaster/master-depository/tree/master/2021-03-17"><b>ä¿¡å°åŠ¨ç”»çš„æºä»£ç </b></a></p>]]></content>
      
      
      <categories>
          
          <category> MasterStudio </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java Collection&lt;E&gt;</title>
      <link href="posts/46419.html"/>
      <url>posts/46419.html</url>
      
        <content type="html"><![CDATA[<h1 id="é›†åˆæ¡†æ¶å›¾"><a href="#é›†åˆæ¡†æ¶å›¾" class="headerlink" title="é›†åˆæ¡†æ¶å›¾"></a>é›†åˆæ¡†æ¶å›¾</h1><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/image-blog/Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E5%9B%BE.png"></p><h2 id="collectionæ¡†æ¶å›¾"><a href="#collectionæ¡†æ¶å›¾" class="headerlink" title="collectionæ¡†æ¶å›¾"></a>collectionæ¡†æ¶å›¾</h2><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/image-blog/Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E5%9B%BE.jpg"></p><h1 id="Javaé›†åˆå…·ä½“æ¡†æ¶ç±»"><a href="#Javaé›†åˆå…·ä½“æ¡†æ¶ç±»" class="headerlink" title="Javaé›†åˆå…·ä½“æ¡†æ¶ç±»"></a>Javaé›†åˆå…·ä½“æ¡†æ¶ç±»</h1><table><thead><tr><th>list</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>ArrayList</strong></td><td>ä¸€ç§å¯ä»¥åŠ¨æ€å¢é•¿å’Œç¼©å‡çš„ç´¢å¼•åºåˆ—</td></tr><tr><td><strong>LinkedList</strong></td><td>ä¸€ç§å¯ä»¥åœ¨ä»»ä½•ä½ç½®è¿›è¡Œé«˜æ•ˆåœ°æ’äººå’Œåˆ é™¤æ“ä½œçš„æœ‰åºåºåˆ—</td></tr><tr><td><strong>Vector</strong></td><td>Vectorç±»å®ç°äº†ä¸€ä¸ªå¯å¢é•¿çš„å¯¹è±¡æ•°ç»„</td></tr><tr><td><strong>Stack</strong></td><td>å †æ ˆç±»è¡¨ç¤ºå¯¹è±¡çš„æœ€åä¸€ä¸ªå…ˆå‡ºï¼ˆLIFOï¼‰å †æ ˆã€‚å®ƒç”¨äº”ä¸ªæ“ä½œæ‰©å±•ç±»å‘é‡ï¼Œä½¿å‘é‡å¯ä»¥è¢«è§†ä¸ºå †æ ˆã€‚</td></tr></tbody></table><table><thead><tr><th>set</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>HashSet</strong></td><td>ä¸€ç§æ²¡æœ‰é‡å¤å…ƒæ¡ˆçš„æ— åºé›†åˆ</td></tr><tr><td><strong>TreeSet</strong></td><td>ä¸€ç§æœ‰åºé›†</td></tr><tr><td><strong>EnumSet</strong></td><td>ä¸€ç§åŒ…å«æšä¸¾ç±»å‹å€¼çš„é›†</td></tr><tr><td><strong>LinkedHashSet</strong></td><td>ä¸€ç§å¯ä»¥è®°ä½å…ƒç´ æ’äººæ¬¡åºçš„é›†</td></tr></tbody></table><table><thead><tr><th>queue</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>ArrayDeque</strong></td><td>ä¸€ç§ç”¨å¾ªç¯æ•°ç»„å®ç°çš„åŒç«¯é˜Ÿåˆ—</td></tr><tr><td><strong>PriorityQueue</strong></td><td>ä¸€ç§å…è®¸é«˜æ•ˆåˆ é™¤æœ€å°å…ƒç´ çš„é›†åˆ</td></tr></tbody></table><table><thead><tr><th>map</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>HashMap</strong></td><td>ä¸€ç§å­˜å‚¨é”®/å€¼å…³è”çš„æ•°æ®ç»“æ„</td></tr><tr><td><strong>TreeMap</strong></td><td>ä¸€ç§é”®å€¼æœ‰åºæ’åˆ—çš„æ˜ å°„è¡¨</td></tr><tr><td><strong>EnumMap</strong></td><td>ä¸€ç§é”®å€¼å±äºæšä¸¾ç±»å‹çš„æ˜ å°„è¡¨</td></tr><tr><td><strong>LinkedHashMap</strong></td><td>ä¸€ç§å¯ä»¥è®°ä½é”®/å€¼é¡¹æ·»åŠ æ¬¡åºåºçš„æ˜ å°„è¡¨</td></tr><tr><td><strong>WeakHashMap</strong></td><td>ä¸€ç§å…¶å€¼æ— ç”¨æ­¦ä¹‹åœ°åå¯ä»¥è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶çš„æ˜ å°„è¡¨</td></tr><tr><td><strong>IdentityHashMap</strong></td><td>ä¸€ç§ç”¨ == è€Œä¸æ˜¯ç”¨ equals æ¯”è¾ƒé”®å€¼çš„æ˜ å°„è¡¨</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> CoreJava </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åŸåˆ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ArrayList&lt;E&gt;åº•å±‚åŸç†</title>
      <link href="posts/49605.html"/>
      <url>posts/49605.html</url>
      
        <content type="html"><![CDATA[<h1 id="åŸç†åˆ†æå›¾"><a href="#åŸç†åˆ†æå›¾" class="headerlink" title="åŸç†åˆ†æå›¾"></a>åŸç†åˆ†æå›¾</h1><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/image-blog/ArrayList.png"></p><h1 id="ç»§æ‰¿å…³ç³»"><a href="#ç»§æ‰¿å…³ç³»" class="headerlink" title="ç»§æ‰¿å…³ç³»"></a>ç»§æ‰¿å…³ç³»</h1><h2 id="å®Œæ•´å…³ç³»å›¾"><a href="#å®Œæ•´å…³ç³»å›¾" class="headerlink" title="å®Œæ•´å…³ç³»å›¾"></a>å®Œæ•´å…³ç³»å›¾</h2><img src="https://cdn.jsdelivr.net/gh/matemaster9/image-blog/ArrayListç»§æ‰¿å…³ç³».jpg" style="zoom: 50%;"><p>â€”â€”â€”â€”â€“&gt;æ­¤ç»§æ‰¿å…³ç³»å›¾æ¥èµ„æºidea</p><h1 id="â˜…æºç åˆ†æ"><a href="#â˜…æºç åˆ†æ" class="headerlink" title="â˜…æºç åˆ†æ"></a>â˜…æºç åˆ†æ</h1><p style="color: red; font-size :36px">    JDK-8U281</p><h2 id="æ„é€ æ–¹æ³•"><a href="#æ„é€ æ–¹æ³•" class="headerlink" title="æ„é€ æ–¹æ³•"></a>æ„é€ æ–¹æ³•</h2><table><thead><tr><th>æ„é€ æ–¹æ³•</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>public ArrayList()</strong></td><td>åˆ›å»ºåˆå§‹å®¹é‡ä¸º10çš„ç©ºåˆ—è¡¨ï¼ˆé€»è¾‘é•¿åº¦ä¸º0ï¼‰</td></tr><tr><td><strong>public ArrayList(int initialCapacity)</strong></td><td>åˆ›å»ºåˆå§‹å®¹é‡ä¸ºinitialCapacityçš„åˆ—è¡¨</td></tr><tr><td>â˜…<strong>public ArrayList(Collection&lt;? extends E&gt; c)</strong></td><td>åˆ›å»ºä¸€ä¸ªåŒ…å«collectionå…ƒç´ çš„åˆ—è¡¨ï¼ŒæŒ‰ç…§collectionçš„è¿­ä»£å™¨è¿”å›çš„é¡ºåºæ¥æ’åˆ—</td></tr></tbody></table><p style="color : hotpink">    <b>(1) public ArrayList()</b>æ˜¯å¦‚ä½•å®ç°åˆ›å»ºä¸€ä¸ªåˆå§‹å®¹é‡ä¸º10çš„ç©ºåˆ—è¡¨ï¼ˆé€»è¾‘é•¿åº¦ä¸º0ï¼‰ï¼Ÿ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> DEFAULTCAPACITY_EMPTY_ELEMENTDATA<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬ä»è¿™é‡Œçš„ä»£ç å¯èƒ½çœ‹å‡ºï¼Œæ­¤æ—¶çš„åˆ—è¡¨å­˜å‚¨ <strong>elementData</strong> æ˜¯ä¸€ä¸ªç©ºçš„æ•°ç»„ã€‚é‚£ä¹ˆä½•æ¥çš„åˆå§‹å®¹é‡ä¸º10ï¼Ÿ<br>è¿™é‡Œçš„10æ˜¯åœ¨æ·»åŠ å…ƒç´ æ—¶ï¼Œæ‰èƒ½ä½“ç°å‡ºæ¥çš„ä½œç”¨ã€‚</p><img src="https://cdn.jsdelivr.net/gh/matemaster9/image-blog/åˆå§‹å®¹é‡10çš„åˆ›å»ºè¿‡ç¨‹.jpg" style="zoom: 50%;"><p>ä»ä¸Šè¿°ä»£ç å…³ç³»å›¾å¯ä»¥çœ‹å‡ºï¼Œåœ¨å‘<strong>elementData</strong>  <strong>add</strong> ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæ•°ç»„<strong>elementData</strong>ä¼šè¿›è¡Œä¸é»˜è®¤å®¹é‡çš„ç©ºæ•°ç»„ <strong>DEFAULTCAPACITY_EMPTY_ELEMENTDATA</strong> è¿›è¡Œæ¯”å¯¹ã€‚å¦‚æœæ¯”å¯¹æˆåŠŸçš„æƒ…å†µä¸‹ï¼Œä¼šè‡ªåŠ¨å¯¹è¿”å›é»˜è®¤çš„åˆå§‹å®¹é‡ <strong>DEFAULT_CAPACITY = 10</strong>ã€‚æ‰€ä»¥è¯´æ­¤æ—¶åˆ›å»ºçš„åˆ—è¡¨è™½ç„¶åˆå§‹å®¹é‡ä¸º10ï¼Œä½†æ˜¯é€»è¾‘é•¿åº¦ä¸º0ã€‚â€œé€»è¾‘é•¿åº¦ï¼šæ•°ç»„å®é™…å«æœ‰çš„å…ƒç´ ï¼Œä¹Ÿæ˜¯size()æ–¹æ³•çš„è¿”å›å€¼ã€‚â€</p><p style="color : hotpink">    <b>(2) public ArrayList(int initialCapacity)</b>æ˜¯å¦‚ä½•å®ç°åˆ›å»ºä¸€ä¸ªåˆå§‹å®¹é‡ä¸ºinitialCapacityçš„åˆ—è¡¨ï¼Ÿ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// if...else if...elseç»“æ„å®Œæˆä¸‰ç§æƒ…å†µçš„è®¨è®º</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>initialCapacity<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>elementData <span class="token operator">=</span> EMPTY_ELEMENTDATA<span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">"Illegal Capacity: "</span><span class="token operator">+</span> initialCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p style="color : hotpink">    <b>(3) public ArrayList(Collection&lt;? extends E&gt; c)</b>æ˜¯å¦‚ä½•å®ç°åˆ›å»ºä¸€ä¸ªåŒ…å«collectionå…ƒç´ çš„åˆ—è¡¨ï¼ŒæŒ‰ç…§collectionçš„è¿­ä»£å™¨è¿”å›çš„é¡ºåºæ¥æ’åˆ—ï¼Ÿ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// é›†åˆå…ƒç´ è½¬æˆæ•°ç»„</span>    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//ç¬¬ä¸€æ¬¡åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©ºã€å¹¶å®Œæˆé€»è¾‘é•¿åº¦çš„èµ‹å€¼</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>size <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// ç¬¬äºŒæ¬¡ç±»å‹åˆ¤æ–­ã€å®Œæˆæ•°ç»„çš„æ‹·è´</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            elementData <span class="token operator">=</span> a<span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> size<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        elementData <span class="token operator">=</span> EMPTY_ELEMENTDATA<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ·»åŠ æ–¹æ³•"><a href="#æ·»åŠ æ–¹æ³•" class="headerlink" title="æ·»åŠ æ–¹æ³•"></a>æ·»åŠ æ–¹æ³•</h2><table><thead><tr><th>add</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>public boolean add(E e)</strong></td><td>æ·»åŠ å…ƒç´ eï¼Œè¿”å›å€¼ä»£è¡¨æ˜¯å¦åŠ å…¥æˆåŠŸ</td></tr><tr><td><strong>public void add(int index, E element)</strong></td><td>åœ¨æŒ‡å®šçš„indexå¤„ï¼ŒåŠ å…¥å…ƒç´ element</td></tr></tbody></table><p style="color: hotpink">    <b>æ•°ç»„æ‰©å®¹çš„æ ¸å¿ƒæ€æƒ³ : capacity</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span><span class="token function">calculateCapacity</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> minCapacity<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">calculateCapacity</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">,</span> <span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData <span class="token operator">==</span> DEFAULTCAPACITY_EMPTY_ELEMENTDATA<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>DEFAULT_CAPACITY<span class="token punctuation">,</span> minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> minCapacity<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>    modCount<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token comment">// overflow-conscious code</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">-</span> elementData<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token function">grow</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MAX_ARRAY_SIZE <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// overflow-conscious code</span>    <span class="token keyword">int</span> oldCapacity <span class="token operator">=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">int</span> newCapacity <span class="token operator">=</span> oldCapacity <span class="token operator">+</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>        newCapacity <span class="token operator">=</span> minCapacity<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> MAX_ARRAY_SIZE <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>        newCapacity <span class="token operator">=</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// minCapacity is usually close to size, so this is a win:</span>    elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> newCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// overflow</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">OutOfMemoryError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&gt;</span> MAX_ARRAY_SIZE<span class="token punctuation">)</span> <span class="token operator">?</span>        <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE <span class="token operator">:</span>    MAX_ARRAY_SIZE<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p style="color : hotpink">    <b>public boolean add(E e)</b>æ˜¯å¦‚ä½•å®ç°åŠ å…¥ä¸€ä¸ªeï¼Œå¹¶ä¸”è¿”å›æˆåŠŸæ ‡å¿—ï¼Œä»¥åŠå¯¹æ•°ç»„çš„åŠ¨æ€è°ƒæ•´ï¼Ÿ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** addæºç åˆ†æ * @author MateMaster * @version JDK-8U281 */</span><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Increments modCount!!</span>    elementData<span class="token punctuation">[</span>size<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p style="color : hotpink">    <b>public void add(int index, E element)</b>æ˜¯å¦‚ä½•å®ç°åœ¨æŒ‡å®šä½ç½®indexåŠ å…¥å…ƒç´ eï¼Œå¹¶ä¸”å®Œæˆå¯¹æ•°ç»„çš„åŠ¨æ€è°ƒæ•´ï¼Ÿ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">rangeCheckForAdd</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//System.arraycopy : å®Œæˆæ’å…¥å‰ï¼Œæ’å…¥ä½ç½®æ•°ç»„å…ƒç´ åœ°å³ç§»</span>    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> size<span class="token operator">-</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>    elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>    size<span class="token operator">++</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">rangeCheckForAdd</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">&gt;</span> size <span class="token operator">||</span> index <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token function">outOfBoundsMsg</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">outOfBoundsMsg</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token string">"Index:"</span> <span class="token operator">+</span>index<span class="token operator">+</span> <span class="token string">",Size:"</span> <span class="token operator">+</span>size<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//å…³äº ensureCapacityInternal()ç³»åˆ—çš„æ–¹æ³•ï¼Œå¯ä»¥å‚è€ƒä¸Šé¢çš„addæ–¹æ³•</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th>addAll</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>public boolean addAll(Collection&lt;? extends E&gt; c)</strong></td><td>å°†é›†åˆcollectionå…ƒç´ åŠ å…¥åˆ°åˆ—è¡¨ä¸­</td></tr><tr><td><strong>public boolean addAll(int index, Collection&lt;? extends E&gt; c)</strong></td><td>åœ¨æŒ‡å®šçš„ä½ç½®åŠ å…¥é›†åˆå…ƒç´ </td></tr></tbody></table><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addAll</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">//ç”ŸæˆåŒ…å«é›†åˆå…ƒç´ çš„æ•°ç»„ã€å¹¶å°†é€»è¾‘é•¿åº¦å¤åˆ¶ä¸ºnumNew</span>    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> numNew <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token comment">//ensureCapacityInternal : ç¡®ä¿æ•°ç»„çš„å®¹é‡</span>    <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//System.arraycopy : å°†é›†åˆcé‡Œçš„å…ƒç´ å¤åˆ¶åˆ°åˆ—è¡¨é‡Œé¢</span>    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> size<span class="token punctuation">,</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>    size <span class="token operator">+=</span> numNew<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>numNew <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">addAll</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">rangeCheckForAdd</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> numNew <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span>size <span class="token operator">+</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> numMoved <span class="token operator">=</span> size <span class="token operator">-</span> index<span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>numMoved <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//System.arraycopy : å®Œæˆå¯¹æ•°ç»„å…ƒç´ çš„ç§»åŠ¨</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index<span class="token operator">+</span>numNew<span class="token punctuation">,</span> numMoved<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//System.arraycopy : å°†é›†åˆcå…ƒç´ å¤åˆ¶åˆ°ç›¸åº”çš„ä½ç½®</span>    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> numNew<span class="token punctuation">)</span><span class="token punctuation">;</span>    size <span class="token operator">+=</span> numNew<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>numNew <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color : red">æ€»ç»“ï¼š</b> <b style="color : hotpink">ä»ä¸Šè¿°çš„ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå…³äºå…ƒç´ çš„æ·»åŠ çš„æ ¸å¿ƒå†…å®¹ä¸»è¦åœ¨äºï¼š1.æ•°ç»„å®¹é‡çš„æ­£ç¡®è°ƒæ•´ã€‚2.æ•°ç»„å…ƒç´ çš„æ­£ç¡®å¤åˆ¶ã€‚ä¹Ÿå°±æ˜¯ä»¥ensureCapacityInternal()ç³»åˆ—æ–¹æ³•ä¸ºæ ¸å¿ƒçš„å®¹é‡çš„åŠ¨æ€è°ƒæ•´ï¼Œä»¥åŠSystem.arraycopy()æ–¹æ³•çš„ä¸¤ç§ä½œç”¨â€”â€”å…ƒç´ ç§»åŠ¨ã€å…ƒç´ å¤åˆ¶ã€‚</b></p><h2 id="â˜…åˆ é™¤æ–¹æ³•ï¼Ÿ"><a href="#â˜…åˆ é™¤æ–¹æ³•ï¼Ÿ" class="headerlink" title="â˜…åˆ é™¤æ–¹æ³•ï¼Ÿ"></a>â˜…åˆ é™¤æ–¹æ³•ï¼Ÿ</h2><table><thead><tr><th>remove</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>public E remove(int index)</strong></td><td>åˆ é™¤æŒ‡å®šä½ç½®ï¼Œå¹¶è¿”å›åˆ é™¤çš„å…ƒç´ </td></tr><tr><td><strong>public boolean remove(Object o)</strong></td><td>åˆ é™¤å…ƒç´ oï¼Œå¹¶ä¸”è¿”å›æˆåŠŸæ ‡å¿—</td></tr></tbody></table><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// é¦–å…ˆåˆ¤æ–­ç´¢å¼•ä½ç½®æ˜¯å¦åˆç†</span>    <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>        modCount<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token comment">// å…¶æ¬¡ä¿ç•™åˆ é™¤å†…å®¹</span>    <span class="token class-name">E</span> oldValue <span class="token operator">=</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç¡®å®šéœ€è¦ç§»åŠ¨å…ƒç´ çš„ä¸ªæ•°</span>    <span class="token keyword">int</span> numMoved <span class="token operator">=</span> size <span class="token operator">-</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">// åˆ¤æ–­ä¸ªæ•°ï¼Œå¹¶ä¸”å®Œæˆç§»åŠ¨</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>numMoved <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> numMoved<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">//ç§»åŠ¨ç»“æŸåï¼Œåˆ—è¡¨å°¾éƒ¨ç½®ç©ºï¼Œå®Œæˆåˆ é™¤æ“ä½œ</span>    elementData<span class="token punctuation">[</span><span class="token operator">--</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//check index</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">rangeCheck</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token function">outOfBoundsMsg</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">outOfBoundMsg</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">"Index:"</span> <span class="token operator">+</span> index<span class="token operator">+</span> <span class="token string">", Size:"</span> <span class="token operator">+</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//positional access</span><span class="token keyword">private</span> <span class="token class-name">E</span> <span class="token function">elementData</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color:hotpink">E remove(int)æ€»ç»“ï¼š</b> ä»ä¸Šè¿°ä»£ç å¯ä»¥çœ‹å‡ºï¼Œåˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ æ“ä½œå¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><p>ï¼ˆ1ï¼‰ ç´¢å¼•æ ¡éªŒ<br>ï¼ˆ2ï¼‰ ä¿ç•™å¾…åˆ é™¤çš„å…ƒç´ <br>ï¼ˆ3ï¼‰ ç¡®å®šåˆ é™¤å‰ï¼Œéœ€è¦ç§»åŠ¨çš„å…ƒç´ ä¸ªæ•°<br>ï¼ˆ4ï¼‰ åˆ¤æ–­ä¸ªæ•°ï¼Œå®Œæˆindexåå…ƒç´ çš„å‰ç§»åŠ¨ä½œ<br>ï¼ˆ5ï¼‰ å°¾éƒ¨ä½ç½®å…ƒç´ ç½®ç©ºï¼Œå¹¶å°†size-1</p><p>è¿™é‡Œç†è§£çš„éš¾ç‚¹åœ¨äºï¼šç§»åŠ¨å…ƒç´ çš„ä¸ªæ•°ï¼ˆsize-index-1ï¼‰ã€System.arraycopyæ–¹æ³•ä¸­æº-ç›®çš„æ•°ç»„å¤åˆ¶çš„èµ·å§‹ä½ç½®ã€size-1ä¸å°¾éƒ¨ç½®ç©ºæ“ä½œçš„å…ˆåé¡ºåº</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token function">fastRemove</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">fastRemove</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// fastRemove</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">fastRemove</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    modCount<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> numMoved <span class="token operator">=</span> size <span class="token operator">-</span> index <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>numMoved <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> index<span class="token punctuation">,</span> numMoved<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    elementData<span class="token punctuation">[</span><span class="token operator">--</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color:hotpink">boolean remove(Object)æ€»ç»“ï¼š</b> ä»ä¸Šè¿°ä»£ç çœ‹å‡ºï¼Œæ•´ä¸ªåˆ é™¤æ“ä½œçš„æ ¸å¿ƒè¿‡ç¨‹å°±åœ¨å»ä¸¤ä¸ªï¼šæ‰¾å…ƒç´ ã€å¿«åˆ é™¤ã€‚è¿™é‡Œä¸ºäº†é¿å…nullå¼•èµ·çš„è°ƒç”¨equalsæ–¹æ³•çš„å¼‚å¸¸ï¼Œæ‰€ä»¥å°†nullå•ç‹¬æå‡ºæ¥è®¨è®ºã€‚å…¶æ¬¡å°±æ˜¯æ•°ç»„éå†ï¼Œæ‰¾å‡ºå…ƒç´ ä½ç½®ï¼Œç„¶åè¿›è¡Œå¿«é€Ÿåˆ é™¤ã€‚è¿™é‡Œçš„å¿«é€Ÿåˆ é™¤ä¸ä¸Šé¢removeä¿æŒä¸€è‡´ã€‚</p><table><thead><tr><th>removeAll</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>â˜…<strong>public boolean removeAll(Collection&lt;?&gt; c)</strong></td><td>ä»æ­¤åˆ—è¡¨ä¸­ç§»é™¤åŒ…å«åœ¨æŒ‡å®šé›†åˆcä¸­çš„æ‰€æœ‰å…ƒç´ </td></tr></tbody></table><table><thead><tr><th>retainAll</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>â˜…<strong>public boolean retainAll(Collection&lt;?&gt; c)</strong></td><td>ä»æ­¤åˆ—è¡¨ä¸­ç§»é™¤ä¸åŒ…å«åœ¨æŒ‡å®šé›†åˆcä¸­çš„æ‰€æœ‰å…ƒç´ </td></tr></tbody></table><p style="color:hotpink">    è¿™é‡Œåˆ©ç”¨ä¸€ä¸ªæ•°å­¦è¡¨è¾¾å¼æ¥è¡¨ç¤ºè¿™ä¸¤ä¸ªæ–¹æ³•çš„ä½œç”¨ï¼š<br>    <b>ï¼ˆ1ï¼‰list.removeAll(c) : list - list âˆ© c</b><br>    <b>ï¼ˆ2ï¼‰list.retainAll(c) : list âˆ© c</b>   </p>    <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">removeAll</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯ç©º</span>    <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ‰¹åˆ é™¤æ“ä½œ</span>    <span class="token keyword">return</span> <span class="token function">batchRemove</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">retainAll</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">requireNonNull</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">batchRemove</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹äºè¿™ä¸ªæ–¹æ³•æœ€ä¸ºé‡è¦çš„ä¾¿æ˜¯ç†è§£ä¸‹é¢è¿™ä¸¤ä¸ªæ–¹æ³•ï¼š</p><p><b style="color:hotpink">ï¼ˆ1ï¼‰requireNonNull</b></p><p><b style="color:hotpink">ï¼ˆ2ï¼‰batchRemove ï¼Ÿ</b></p><p>è€Œï¼ˆ1ï¼‰æ–¹æ³•åªæ˜¯å•çº¯çš„ç”¨äºåˆ¤æ–­é›†åˆå¯¹è±¡æ˜¯å¦ä¸ºç©ºã€ç»ˆç‚¹éƒ½åœ¨ç¬¬äºŒä¸ª <strong>batchRemove</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">batchRemove</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">,</span> <span class="token keyword">boolean</span> complement<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">final</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> copyData <span class="token operator">=</span> elementData<span class="token punctuation">;</span>    <span class="token keyword">int</span> read <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> write <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">boolean</span> modified <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span> read <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> read<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>copyData<span class="token punctuation">[</span>read<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> complement<span class="token punctuation">)</span>                elementData<span class="token punctuation">[</span>write<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> copyData<span class="token punctuation">[</span>read<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>read <span class="token operator">!=</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>copyData<span class="token punctuation">,</span> read<span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> write<span class="token punctuation">,</span> size <span class="token operator">-</span> read<span class="token punctuation">)</span><span class="token punctuation">;</span>            write <span class="token operator">+=</span> size <span class="token operator">-</span> read<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>write <span class="token operator">!=</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// clear to let GC do its work</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> write<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>                copyData<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>            modCount <span class="token operator">+=</span> size <span class="token operator">-</span> write<span class="token punctuation">;</span>            size <span class="token operator">=</span> write<span class="token punctuation">;</span>            modified <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>     <span class="token punctuation">}</span>    <span class="token keyword">return</span> modified<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color:hotpink">batchRemoveæ€»ç»“ï¼š</b> è¿™ä¸€éƒ¨åˆ†ç›¸è¾ƒäºåº•å±‚æºç åœ¨ä¸€äº›å˜é‡ä¸Šé¢è¿›è¡Œäº†ä¸€äº›å˜åŠ¨ï¼Œå› ä¸ºåº•å±‚æºç ä¸å¤ªå¥½ç†è§£ï¼Œæ‰€ä»¥å°±æŒ‰ç…§è‡ªå·±çš„ç†è§£æ„æ€è¿›è¡Œäº†ä¿®æ”¹ï¼Œæµ‹è¯•åŠŸèƒ½ä¸€è‡´ã€‚è¿™éƒ¨åˆ†ç†è§£éš¾ç‚¹å°±åœ¨äº <strong>try</strong> è¯­å¥å—ã€‚æˆ‘ä»¬ä»è¡¥å……æ ‡å¿— <strong>complement</strong> å†³å®šæ˜¯åˆ é™¤ã€è¿˜æ˜¯ä¿ç•™ã€‚</p><p>å½“ <strong>complement == false</strong> æ—¶ï¼Œè¡¨é¢<strong>ä¸ä¼šä¿ç•™å…±åŒå…ƒç´ </strong>ï¼Œä¹Ÿå°±æ˜¯ä¼š<strong>åˆ é™¤</strong>åˆ—è¡¨ä¸­æ‰€æœ‰ä¸é›†åˆc<strong>ç›¸åŒ</strong>çš„å…ƒç´ ã€‚<br>å½“ <strong>complement == true</strong> æ—¶ï¼Œè¡¨æ˜<strong>ä¼šä¿ç•™å…±åŒå…ƒç´ </strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼š<strong>åˆ é™¤</strong>åˆ—è¡¨ä¸­æ‰€æœ‰ä¸é›†åˆc<strong>ä¸ç›¸åŒ</strong>çš„å…ƒç´ ã€‚</p><p>å…³äºfinallyè¯­å¥å—é‡Œé¢æåˆ°çš„ä¸¤ä¸ªifæ¡ä»¶åˆ¤æ–­çš„æƒ…å†µï¼Œç›®å‰ç†è§£å°±æ˜¯ä¿æŒä¸AbstractCollectionçš„å…¼å®¹æ€§ã€‚</p><table><thead><tr><th>èŒƒå›´åˆ é™¤</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>protected void removeRange(int fromIndex, int toIndex)</strong></td><td>åˆ é™¤[fromIndex,toIndex)å…ƒç´ </td></tr></tbody></table><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">removeRange</span><span class="token punctuation">(</span><span class="token keyword">int</span> fromIndex<span class="token punctuation">,</span> <span class="token keyword">int</span> toIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>    modCount<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token comment">// ç¡®å®šç§»åŠ¨ä¸ªæ•°ï¼Œå¹¶ç§»åŠ¨</span>    <span class="token keyword">int</span> numMoved <span class="token operator">=</span> size <span class="token operator">-</span> toIndex<span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> toIndex<span class="token punctuation">,</span> elementData<span class="token punctuation">,</span> fromIndex<span class="token punctuation">,</span> numMoved<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ç¡®å®šæ–°çš„sizeã€å¹¶ä¸”å°† [size - (toIndex - fromIndex),size)çš„å…ƒç´ æ¸…ç©º</span>    <span class="token keyword">int</span> newSize <span class="token operator">=</span> size <span class="token operator">-</span> <span class="token punctuation">(</span>toIndex <span class="token operator">-</span> fromIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span>newSize<span class="token punctuation">;</span> i<span class="token operator">&lt;</span>size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">// é‡æ–°è®¾ç½®size</span>    size <span class="token operator">=</span> newSize<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color:hotpink">removeRangeæ€»ç»“ï¼š</b>æ­¤æ–¹æ³•ä¸­å½“ <strong>fromIndex &lt;= toIndex</strong> æ—¶,æ–¹æ³•ä¼šåˆ é™¤åˆ—è¡¨ä¸­[from,to)å…ƒç´ ã€‚ä½†æ˜¯å½“ä¸ä¼šæ»¡è¶³ä¸Šé¢æ¡ä»¶æ—¶ï¼Œæ–¹æ³•å°±æ˜¯æ— æ•ˆï¼Œå¹¶ä¸”æŠ›å‡º <strong>IndexOutOfBoundsException</strong></p><h2 id="ç®€å•æ–¹æ³•"><a href="#ç®€å•æ–¹æ³•" class="headerlink" title="ç®€å•æ–¹æ³•"></a>ç®€å•æ–¹æ³•</h2><table><thead><tr><th>set</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>public E set(int index, E element)</strong></td><td>å°†æŒ‡å®šä½ç½®indexçš„å…ƒç´ è®¾ç½®ä¸ºelement</td></tr></tbody></table><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">,</span> <span class="token class-name">E</span> element<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// ç´¢å¼•æ ¡éªŒ : rangeCheck(index)</span>    <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä½ç½®å­˜å–æ“ä½œ : E elementData(index)</span>    <span class="token class-name">E</span> oldValue <span class="token operator">=</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>        elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">;</span>        <span class="token keyword">return</span> oldValue<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th>get</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>public E get(int index)</strong></td><td>è·å–æŒ‡å®šä½ç½®indexå¤„çš„å…ƒç´ </td></tr></tbody></table><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">rangeCheck</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">elementData</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color:hotpink">set/getæ€»ç»“: ç´¢å¼•æ ¡éªŒã€ä½ç½®å­˜å–æ“ä½œ</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//check index</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">rangeCheck</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token function">outOfBoundsMsg</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">outOfBoundsMsg</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">"Index:"</span> <span class="token operator">+</span>index<span class="token operator">+</span><span class="token string">", Size:"</span><span class="token operator">+</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">//positional access</span><span class="token keyword">private</span> <span class="token class-name">E</span> <span class="token function">elementData</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> elementData<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th>clear</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>public void clear()</strong></td><td>æƒ…å†µåˆ—è¡¨çš„å…ƒç´ </td></tr></tbody></table><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    modCount<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th>contains</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>public boolean contains(Object o)</strong></td><td>åˆ¤æ–­æ­¤åˆ—è¡¨æ˜¯å¦åŒ…å«è‡³å°‘ä¸€ä¸ªæ»¡è¶³ (o==null ? e==null : o.equals(e)) çš„å…ƒç´  e</td></tr></tbody></table><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">indexOf</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// è·å–å…ƒç´ oåœ¨åˆ—è¡¨ä¸­çš„ä½ç½® å·¦-&gt;å³</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> i<span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> i<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// è·å–å…ƒç´ oåœ¨åˆ—è¡¨ä¸­çš„ä½ç½® å·¦&lt;-å³</span><span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>o <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> size<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&gt;=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> i<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> size<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&gt;=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>elementData<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> i<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è½¬æ¢æ–¹æ³•"><a href="#è½¬æ¢æ–¹æ³•" class="headerlink" title="è½¬æ¢æ–¹æ³•"></a>è½¬æ¢æ–¹æ³•</h2><table><thead><tr><th>toArray</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>public Object[] toArray()</strong></td><td>å°†é›†åˆå¯¹è±¡è½¬æ¢æˆæ•°ç»„</td></tr><tr><td><strong>public &lt;T&gt; T[] toArray(T[] arrayToFill)</strong></td><td>é›†åˆå¯¹è±¡è½¬æ¢æˆTç±»å‹æ•°ç»„ã€å¹¶å°†å¤šä½™éƒ¨åˆ†ä½¿ç”¨aé‡Œçš„å…ƒç´ å¡«å……</td></tr></tbody></table><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">toArray</span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> size<span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>        a<span class="token punctuation">[</span>size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> a<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color:hotpink">T[] toArray(T[] a)æ€»ç»“ï¼š</b> ä¸»è¦åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š</p><p>ï¼ˆ1ï¼‰å½“æ•°ç»„açš„é•¿åº¦å°äºåˆ—è¡¨é•¿åº¦æ—¶ï¼Œåˆ™ä¼šç›´æ¥å°†åˆ—è¡¨è½¬åŒ–ä¸ºTç±»å‹çš„æ•°ç»„ã€‚<br>ï¼ˆ2ï¼‰å½“æ•°ç»„açš„é•¿åº¦å¤§äºæˆ–ç­‰äºåˆ—è¡¨é•¿åº¦æ—¶ï¼Œåˆ™ä¼šè¶…å‡ºé•¿åº¦çš„éƒ¨åˆ†éƒ½å°†ä¼šä½¿ç”¨æ•°ç»„aé‡Œé¢çš„å…ƒç´ è¿›è¡Œå¡«å……ã€‚</p><p>ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ints <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">}</span>list1 <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">}</span>æ­¤æ—¶ä¼šå¾—åˆ°æ–°çš„æ•°ç»„ <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> T1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">}</span>list2 <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">}</span>æ­¤æ—¶ä¼šå¾—åˆ°æ–°æ•°ç»„ <span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> T2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th>toString</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>public String toString()</strong></td><td>å°†åˆ—è¡¨ä»¥æ•°ç»„çš„å­—ç¬¦ä¸²å½¢å¼è¾“å‡ºï¼ˆç»§æ‰¿è‡ªAbstractCollectionï¼‰</td></tr></tbody></table><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractCollection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// è·å–è¿­ä»£å™¨</span>        <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// åˆ¤æ–­æ˜¯å¦æœ‰å…ƒç´ </span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span> it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">"[]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token comment">// æ”¶é›†å…ƒç´ è½¬æ¢æˆå­—ç¬¦ä¸²</span>        <span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"["</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">E</span> e <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>e <span class="token operator">==</span> <span class="token keyword">this</span> <span class="token operator">?</span> <span class="token string">"(this collection)"</span> <span class="token operator">:</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span> it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"]"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toString<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="â˜…è¿­ä»£å™¨"><a href="#â˜…è¿­ä»£å™¨" class="headerlink" title="â˜…è¿­ä»£å™¨"></a>â˜…è¿­ä»£å™¨</h1><table><thead><tr><th align="center">iterator</th></tr></thead><tbody><tr><td align="center"><strong>public Iterator&lt;E&gt; iterator()</strong></td></tr></tbody></table><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>        <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">Itr</span> <span class="token keyword">implements</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> cursor<span class="token punctuation">;</span>        <span class="token keyword">int</span> lastRet <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> exceptedModCount <span class="token operator">=</span> modCount<span class="token punctuation">;</span>                <span class="token class-name">Itr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>                <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span>cursor <span class="token operator">!=</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>                <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">int</span> current <span class="token operator">=</span> cursor<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>current <span class="token operator">&gt;=</span> size<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NoSuchElementException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token class-name">ArrayList</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">.</span>elementData<span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>current <span class="token operator">&gt;=</span> data<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>                 <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>                        cursor <span class="token operator">=</span> current <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> data<span class="token punctuation">[</span>lastRet <span class="token operator">=</span> current<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>                        <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">checkForComodification</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>modCount <span class="token operator">!=</span> expectedModCount<span class="token punctuation">)</span>                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentModificationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="åŠ¨æ€æ‰©å®¹å’Œç¼©å‡"><a href="#åŠ¨æ€æ‰©å®¹å’Œç¼©å‡" class="headerlink" title="åŠ¨æ€æ‰©å®¹å’Œç¼©å‡"></a>åŠ¨æ€æ‰©å®¹å’Œç¼©å‡</h1><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureCapacityInternal</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span><span class="token function">calculateCapacity</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> minCapacity<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">calculateCapacity</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> elementData<span class="token punctuation">,</span> <span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>elementData <span class="token operator">==</span> DEFAULTCAPACITY_EMPTY_ELEMENTDATA<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>DEFAULT_CAPACITY<span class="token punctuation">,</span> minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> minCapacity<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">ensureExplicitCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>    modCount<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token comment">// overflow-conscious code</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">-</span> elementData<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token function">grow</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> MAX_ARRAY_SIZE <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE <span class="token operator">-</span> <span class="token number">8</span><span class="token punctuation">;</span><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">grow</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// overflow-conscious code</span>    <span class="token keyword">int</span> oldCapacity <span class="token operator">=</span> elementData<span class="token punctuation">.</span>length<span class="token punctuation">;</span>    <span class="token keyword">int</span> newCapacity <span class="token operator">=</span> oldCapacity <span class="token operator">+</span> <span class="token punctuation">(</span>oldCapacity <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>        newCapacity <span class="token operator">=</span> minCapacity<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>newCapacity <span class="token operator">-</span> MAX_ARRAY_SIZE <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>        newCapacity <span class="token operator">=</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span>minCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// minCapacity is usually close to size, so this is a win:</span>    elementData <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>elementData<span class="token punctuation">,</span> newCapacity<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">hugeCapacity</span><span class="token punctuation">(</span><span class="token keyword">int</span> minCapacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// overflow</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">OutOfMemoryError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>minCapacity <span class="token operator">&gt;</span> MAX_ARRAY_SIZE<span class="token punctuation">)</span> <span class="token operator">?</span>        <span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE <span class="token operator">:</span>    MAX_ARRAY_SIZE<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="gt-demo"><a href="#gt-demo" class="headerlink" title="-> demo"></a>-&gt; demo</h1><p>è¿™é‡Œæ˜¯ArrayListå¸¸ç”¨æ–¹æ³•çš„æ¼”ç¤ºä»£ç ï¼Œè¾ƒé•¿ä½†ç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ªæµ‹è¯•çš„demoã€‚å…·ä½“çš„ç›¸å…³æµ‹è¯•ä»£ç åŠArrayListæºç ã€å¯ä»¥è®¿é—®æˆ‘çš„giteeä»“åº“è¿›è¡Œä¸‹è½½æŸ¥çœ‹ ğŸ‘‰ <a href="https://gitee.com/matemaster/master-depository/tree/master/2021-03-14"><b>ArrayListåŸç†åˆ†æçš„ç›¸å…³ä»£ç </b></a></p>]]></content>
      
      
      <categories>
          
          <category> CoreJava </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åŸåˆ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CoreJavaç¬”è®°æ€»ç»“</title>
      <link href="posts/63231.html"/>
      <url>posts/63231.html</url>
      
        <content type="html"><![CDATA[<h1 id="Javaç¨‹åºè®¾è®¡"><a href="#Javaç¨‹åºè®¾è®¡" class="headerlink" title="Javaç¨‹åºè®¾è®¡"></a>Javaç¨‹åºè®¾è®¡</h1><h2 id="Javaé¢å‘å¯¹è±¡"><a href="#Javaé¢å‘å¯¹è±¡" class="headerlink" title="Javaé¢å‘å¯¹è±¡"></a>Javaé¢å‘å¯¹è±¡</h2><h2 id="Javaå¼‚å¸¸"><a href="#Javaå¼‚å¸¸" class="headerlink" title="Javaå¼‚å¸¸"></a>Javaå¼‚å¸¸</h2><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210524202505.svg"></p><p>Java æ ¹æ®å„ä¸ªç±»åº“ä¹Ÿå®šä¹‰äº†ä¸€äº›å…¶ä»–çš„å¼‚å¸¸ï¼Œä¸‹é¢çš„è¡¨ä¸­åˆ—å‡ºäº† Java çš„éæ£€æŸ¥æ€§å¼‚å¸¸ã€‚ï¼ˆç†Ÿç»ƒæŒæ¡å¯¹åº”å¼‚å¸¸æ‰€æè¿°çš„ä¿¡æ¯ï¼‰</p><table><thead><tr><th align="left"><strong>å¼‚å¸¸</strong></th><th align="left"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td align="left">ArithmeticException</td><td align="left">å½“å‡ºç°å¼‚å¸¸çš„è¿ç®—æ¡ä»¶æ—¶ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ•´æ•°â€é™¤ä»¥é›¶â€æ—¶ï¼ŒæŠ›å‡ºæ­¤ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚</td></tr><tr><td align="left">ArrayIndexOutOfBoundsException</td><td align="left">ç”¨éæ³•ç´¢å¼•è®¿é—®æ•°ç»„æ—¶æŠ›å‡ºçš„å¼‚å¸¸ã€‚å¦‚æœç´¢å¼•ä¸ºè´Ÿæˆ–å¤§äºç­‰äºæ•°ç»„å¤§å°ï¼Œåˆ™è¯¥ç´¢å¼•ä¸ºéæ³•ç´¢å¼•ã€‚</td></tr><tr><td align="left">ArrayStoreException</td><td align="left">è¯•å›¾å°†é”™è¯¯ç±»å‹çš„å¯¹è±¡å­˜å‚¨åˆ°ä¸€ä¸ªå¯¹è±¡æ•°ç»„æ—¶æŠ›å‡ºçš„å¼‚å¸¸ã€‚</td></tr><tr><td align="left">ClassCastException</td><td align="left">å½“è¯•å›¾å°†å¯¹è±¡å¼ºåˆ¶è½¬æ¢ä¸ºä¸æ˜¯å®ä¾‹çš„å­ç±»æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr><tr><td align="left">IllegalArgumentException</td><td align="left">æŠ›å‡ºçš„å¼‚å¸¸è¡¨æ˜å‘æ–¹æ³•ä¼ é€’äº†ä¸€ä¸ªä¸åˆæ³•æˆ–ä¸æ­£ç¡®çš„å‚æ•°ã€‚</td></tr><tr><td align="left">IllegalMonitorStateException</td><td align="left">æŠ›å‡ºçš„å¼‚å¸¸è¡¨æ˜æŸä¸€çº¿ç¨‹å·²ç»è¯•å›¾ç­‰å¾…å¯¹è±¡çš„ç›‘è§†å™¨ï¼Œæˆ–è€…è¯•å›¾é€šçŸ¥å…¶ä»–æ­£åœ¨ç­‰å¾…å¯¹è±¡çš„ç›‘è§†å™¨è€Œæœ¬èº«æ²¡æœ‰æŒ‡å®šç›‘è§†å™¨çš„çº¿ç¨‹ã€‚</td></tr><tr><td align="left">IllegalStateException</td><td align="left">åœ¨éæ³•æˆ–ä¸é€‚å½“çš„æ—¶é—´è°ƒç”¨æ–¹æ³•æ—¶äº§ç”Ÿçš„ä¿¡å·ã€‚æ¢å¥è¯è¯´ï¼Œå³ Java ç¯å¢ƒæˆ– Java åº”ç”¨ç¨‹åºæ²¡æœ‰å¤„äºè¯·æ±‚æ“ä½œæ‰€è¦æ±‚çš„é€‚å½“çŠ¶æ€ä¸‹ã€‚</td></tr><tr><td align="left">IllegalThreadStateException</td><td align="left">çº¿ç¨‹æ²¡æœ‰å¤„äºè¯·æ±‚æ“ä½œæ‰€è¦æ±‚çš„é€‚å½“çŠ¶æ€æ—¶æŠ›å‡ºçš„å¼‚å¸¸ã€‚</td></tr><tr><td align="left">IndexOutOfBoundsException</td><td align="left">æŒ‡ç¤ºæŸæ’åºç´¢å¼•ï¼ˆä¾‹å¦‚å¯¹æ•°ç»„ã€å­—ç¬¦ä¸²æˆ–å‘é‡çš„æ’åºï¼‰è¶…å‡ºèŒƒå›´æ—¶æŠ›å‡ºã€‚</td></tr><tr><td align="left">NegativeArraySizeException</td><td align="left">å¦‚æœåº”ç”¨ç¨‹åºè¯•å›¾åˆ›å»ºå¤§å°ä¸ºè´Ÿçš„æ•°ç»„ï¼Œåˆ™æŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr><tr><td align="left">NullPointerException</td><td align="left">å½“åº”ç”¨ç¨‹åºè¯•å›¾åœ¨éœ€è¦å¯¹è±¡çš„åœ°æ–¹ä½¿ç”¨ <code>null</code> æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸</td></tr><tr><td align="left">NumberFormatException</td><td align="left">å½“åº”ç”¨ç¨‹åºè¯•å›¾å°†å­—ç¬¦ä¸²è½¬æ¢æˆä¸€ç§æ•°å€¼ç±»å‹ï¼Œä½†è¯¥å­—ç¬¦ä¸²ä¸èƒ½è½¬æ¢ä¸ºé€‚å½“æ ¼å¼æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr><tr><td align="left">SecurityException</td><td align="left">ç”±å®‰å…¨ç®¡ç†å™¨æŠ›å‡ºçš„å¼‚å¸¸ï¼ŒæŒ‡ç¤ºå­˜åœ¨å®‰å…¨ä¾µçŠ¯ã€‚</td></tr><tr><td align="left">StringIndexOutOfBoundsException</td><td align="left">æ­¤å¼‚å¸¸ç”± <code>String</code> æ–¹æ³•æŠ›å‡ºï¼ŒæŒ‡ç¤ºç´¢å¼•æˆ–è€…ä¸ºè´Ÿï¼Œæˆ–è€…è¶…å‡ºå­—ç¬¦ä¸²çš„å¤§å°ã€‚</td></tr><tr><td align="left">UnsupportedOperationException</td><td align="left">å½“ä¸æ”¯æŒè¯·æ±‚çš„æ“ä½œæ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr></tbody></table><p>ä¸‹é¢çš„è¡¨ä¸­åˆ—å‡ºäº† Java å®šä¹‰åœ¨ java.lang åŒ…ä¸­çš„æ£€æŸ¥æ€§å¼‚å¸¸ç±»ã€‚</p><table><thead><tr><th align="left"><strong>å¼‚å¸¸</strong></th><th align="left"><strong>æè¿°</strong></th></tr></thead><tbody><tr><td align="left">ClassNotFoundException</td><td align="left">åº”ç”¨ç¨‹åºè¯•å›¾åŠ è½½ç±»æ—¶ï¼Œæ‰¾ä¸åˆ°ç›¸åº”çš„ç±»ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr><tr><td align="left">CloneNotSupportedException</td><td align="left">å½“è°ƒç”¨ <code>Object</code> ç±»ä¸­çš„ <code>clone</code> æ–¹æ³•å…‹éš†å¯¹è±¡ï¼Œä½†è¯¥å¯¹è±¡çš„ç±»æ— æ³•å®ç° <code>Cloneable</code> æ¥å£æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr><tr><td align="left">IllegalAccessException</td><td align="left">æ‹’ç»è®¿é—®ä¸€ä¸ªç±»çš„æ—¶å€™ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr><tr><td align="left">InstantiationException</td><td align="left">å½“è¯•å›¾ä½¿ç”¨ <code>Class</code> ç±»ä¸­çš„ <code>newInstance</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹ï¼Œè€ŒæŒ‡å®šçš„ç±»å¯¹è±¡å› ä¸ºæ˜¯ä¸€ä¸ªæ¥å£æˆ–æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»è€Œæ— æ³•å®ä¾‹åŒ–æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr><tr><td align="left">InterruptedException</td><td align="left">ä¸€ä¸ªçº¿ç¨‹è¢«å¦ä¸€ä¸ªçº¿ç¨‹ä¸­æ–­ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</td></tr><tr><td align="left">NoSuchFieldException</td><td align="left">è¯·æ±‚çš„å˜é‡ä¸å­˜åœ¨</td></tr><tr><td align="left">NoSuchMethodException</td><td align="left">è¯·æ±‚çš„æ–¹æ³•ä¸å­˜åœ¨</td></tr></tbody></table><p>ä¸‹é¢çš„åˆ—è¡¨æ˜¯ <code>Throwable</code> ç±»çš„ä¸»è¦æ–¹æ³•:</p><table><thead><tr><th align="left"><strong>åºå·</strong></th><th align="left"><strong>æ–¹æ³•åŠè¯´æ˜</strong></th></tr></thead><tbody><tr><td align="left">1</td><td align="left"><strong>public String getMessage()</strong> è¿”å›å…³äºå‘ç”Ÿçš„å¼‚å¸¸çš„è¯¦ç»†ä¿¡æ¯ã€‚è¿™ä¸ªæ¶ˆæ¯åœ¨Throwable ç±»çš„æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–äº†ã€‚</td></tr><tr><td align="left">2</td><td align="left"><strong>public Throwable getCause()</strong> è¿”å›ä¸€ä¸ªThrowable å¯¹è±¡ä»£è¡¨å¼‚å¸¸åŸå› ã€‚</td></tr><tr><td align="left">3</td><td align="left"><strong>public String toString()</strong> ä½¿ç”¨getMessage()çš„ç»“æœè¿”å›ç±»çš„ä¸²çº§åå­—ã€‚</td></tr><tr><td align="left">4</td><td align="left"><strong>public void printStackTrace()</strong> æ‰“å°toString()ç»“æœå’Œæ ˆå±‚æ¬¡åˆ°System.errï¼Œå³é”™è¯¯è¾“å‡ºæµã€‚</td></tr><tr><td align="left">5</td><td align="left"><strong>public StackTraceElement [] getStackTrace()</strong> è¿”å›ä¸€ä¸ªåŒ…å«å †æ ˆå±‚æ¬¡çš„æ•°ç»„ã€‚ä¸‹æ ‡ä¸º0çš„å…ƒç´ ä»£è¡¨æ ˆé¡¶ï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä»£è¡¨æ–¹æ³•è°ƒç”¨å †æ ˆçš„æ ˆåº•ã€‚</td></tr><tr><td align="left">6</td><td align="left"><strong>public Throwable fillInStackTrace()</strong> ç”¨å½“å‰çš„è°ƒç”¨æ ˆå±‚æ¬¡å¡«å……Throwable å¯¹è±¡æ ˆå±‚æ¬¡ï¼Œæ·»åŠ åˆ°æ ˆå±‚æ¬¡ä»»ä½•å…ˆå‰ä¿¡æ¯ä¸­ã€‚</td></tr></tbody></table><p><strong>å£°æ˜å—æŸ¥å¼‚å¸¸</strong>ï¼šåˆ©ç”¨<code>throws</code>å­å¥ï¼Œå£°æ˜ä¸€ä¸ªæ–¹æ³•å¯èƒ½æŠ›å‡ºçš„æ‰€æœ‰å—æŸ¥å¼‚å¸¸</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> demo <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><strong>æŠ›å‡ºå¼‚å¸¸</strong>ï¼š</p><ul><li>å¯»æ‰¾åˆé€‚çš„å¼‚å¸¸ç±»ï¼ˆå¿…é¡»æ˜¯å·²ç»å­˜åœ¨çš„ï¼‰</li><li>åˆ›å»ºå¼‚å¸¸å¯¹è±¡</li><li>åˆ©ç”¨<code>throw</code>å­å¥æŠ›å‡º</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ•è·å¼‚å¸¸</strong>ï¼šåˆ©ç”¨<code>try{}catch(excetpion){}</code>è¯­å¥</p><p>åªè¦tryè¯­å¥å—å‡ºç°äº†catchä¸­å£°æ˜çš„å¼‚å¸¸ï¼Œé‚£ä¹ˆç¨‹åºå°†ä¼šè‡ªåŠ¨è·³è½¬åˆ°catchè¯­å¥å—å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚</p><p>é‚£ä¹ˆå¦‚æœcatchæ²¡æœ‰å¯¹åº”çš„å¼‚å¸¸ï¼Ÿ<br>ç­”ï¼šæ–¹æ³•ä¼šç«‹åˆ»é€€å‡ºï¼Œä»¥è¡¨æ˜è®©è°ƒç”¨è€…è®¾è®¡å¯¹åº”çš„å¼‚å¸¸</p><p>å½“æˆ‘ä»¬ç¡®å®æ²¡æœ‰catchå¼‚å¸¸çš„æœ¬é¢†æ—¶ï¼Œåº”è¯¥æ€ä¹ˆåŠï¼Ÿ<br>ç­”ï¼šå°†å¼‚å¸¸ä¼ é€’ä¸‹å»ï¼Œé€šè¿‡throwsè¯´æ˜ç¬¦å‘ŠçŸ¥è°ƒç”¨è€…è¿™ä¸ªæ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸</p><p><b style="color:red">æ³¨æ„ï¼š</b>è¿™é‡Œå­˜åœ¨ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå°±æ˜¯å¦‚æœå­ç±»åœ¨è¦†ç›–çˆ¶ç±»çš„ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œæ°å¥½çˆ¶ç±»æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆå­ç±»å°±å¿…é¡»æ•è·è¿™ä¸ªå¼‚å¸¸ã€‚æ¢è€Œè¨€ä¹‹å°±æ˜¯ï¼šå­ç±»çš„throwsè¯´æ˜ç¬¦ä¸èƒ½å‡ºç°è¶…è¿‡çˆ¶ç±»æ–¹æ³•æ‰€åˆ—å‡ºçš„å¼‚å¸¸èŒƒå›´</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">try</span><span class="token punctuation">{</span>   <span class="token comment">// ç¨‹åºä»£ç </span><span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception1</span> e1<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// ç¨‹åºä»£ç </span><span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception2</span> e2<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// ç¨‹åºä»£ç </span><span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception3</span> e3<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// ç¨‹åºä»£ç </span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>catchå†æ¬¡æŠ›å‡ºå¼‚å¸¸å’Œå¼‚å¸¸é“¾</strong>ï¼š</p><p>catchå†æ¬¡æŠ›å‡ºå¼‚å¸¸çš„ä¸€ä¸ªç›Šå¤„åœ¨äºï¼šæˆ‘ä»¬å¯ä»¥é‡æ–°åŒ…è£…å¼‚å¸¸çš„ç±»å‹ï¼Œè¿™æ ·å°±å¯ä»¥æŠ›å‡ºé«˜çº§å¼‚å¸¸çš„åŒæ—¶ï¼Œä¹Ÿä¸ä¼šä¸¢å¤±åŸå§‹å¼‚å¸¸çš„ä¿¡æ¯ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token comment">// access the database</span><span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Throwable</span> se <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletException</span><span class="token punctuation">(</span><span class="token string">"database error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    se<span class="token punctuation">.</span><span class="token function">initCause</span><span class="token punctuation">(</span>se<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">throw</span> se<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“å†æ¬¡æ•è·åˆ°seå¼‚å¸¸æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸‹é¢ä»£ç é‡æ–°è·å–å¼‚å¸¸</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Throwable</span> e <span class="token operator">=</span> se<span class="token punctuation">.</span><span class="token function">getCause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>finallyå­å¥</strong>ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token comment">// 1</span>    <span class="token comment">// 2</span>    <span class="token comment">// ...</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 3</span>    <span class="token comment">// 4</span>    <span class="token comment">// ...</span><span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>    <span class="token comment">// 5</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>a. å¦‚æœtryæ­£å¸¸æ‰§è¡Œã€‚ æ­¤æ—¶æ‰§è¡Œçš„è¯­å¥æœ‰ï¼š1ã€2ã€5</p><p>b. å¦‚æœtryåœ¨2å¤„å‘ç”Ÿå¼‚å¸¸ï¼Œæ­¤æ—¶catchæ•è·ç›¸åº”çš„å¼‚å¸¸ï¼Œè‹¥æ˜¯catchä¸æŠ›å‡ºï¼Œåˆ™æ‰§è¡Œï¼š1ã€3ã€4ã€5ã€‚è‹¥æ˜¯catchåœ¨4å¤„æŠ›å‡ºï¼Œåˆ™æ‰§è¡Œï¼š1ã€3ã€5</p><p>c. å¦‚æœtryåœ¨2å¤„å‘ç”Ÿå¼‚å¸¸ï¼Œcatchæ²¡æœ‰ç›¸åº”çš„å¼‚å¸¸ï¼Œåˆ™æ‰§è¡Œï¼š1ã€5</p><p><strong>è‡ªå®šä¹‰å¼‚å¸¸</strong>ï¼šJavaæ ‡å‡†åº“ä¸å¯èƒ½æè¿°æ‰€æœ‰å‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µã€‚è¿™æ—¶å€™å°±éœ€è¦æˆ‘ä»¬è‡ªå®šä¹‰æè¿°å¼‚å¸¸ï¼ŒJavaä¸­æ‰€æœ‰çš„å¼‚å¸¸ç±»ï¼Œéƒ½å¯ä»¥åˆ©ç”¨ç»§æ‰¿Exceptionæˆ–è€…å…¶å­ç±»ï¼Œæ¥å®ç°å®šä¹‰å¼‚å¸¸ã€‚</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DiyException</span> <span class="token keyword">extends</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="Java-array"><a href="#Java-array" class="headerlink" title="Java array"></a>Java array</h2><h3 id="æ•°ç»„å…ƒç´ çš„åˆå§‹å€¼"><a href="#æ•°ç»„å…ƒç´ çš„åˆå§‹å€¼" class="headerlink" title="æ•°ç»„å…ƒç´ çš„åˆå§‹å€¼"></a>æ•°ç»„å…ƒç´ çš„åˆå§‹å€¼</h3><p>Javaä¸­æ•°ç»„çš„å£°æ˜ä»¥åŠåˆå§‹åŒ–ï¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">InitVal</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">short</span><span class="token punctuation">[</span><span class="token punctuation">]</span> shorts <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">short</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ints <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> longs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">long</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">double</span><span class="token punctuation">[</span><span class="token punctuation">]</span> doubles <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">double</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">float</span><span class="token punctuation">[</span><span class="token punctuation">]</span> floats <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">float</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token punctuation">]</span> booleans <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">boolean</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span> chars <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> strings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>shorts<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>ints<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>longs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>doubles<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>floats<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>booleans<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>chars<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>strings<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œç©¿æ’ä¸€ä¸‹ï¼Œæ•°ç»„å£°æ˜ä»¥åŠåŒ¿åæ•°ç»„çš„æ¦‚å¿µ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> anonymous<span class="token punctuation">;</span>anonymous <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">;</span>anonymous <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="æ•°ç»„çš„å¾ªç¯"><a href="#æ•°ç»„çš„å¾ªç¯" class="headerlink" title="æ•°ç»„çš„å¾ªç¯"></a>æ•°ç»„çš„å¾ªç¯</h3><p>åœ¨æ•°ç»„çš„å¾ªç¯è¯­å¥ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„ä¸‹æ ‡çš„<code>for i</code>å¾ªç¯å’Œä¸ä½¿ç”¨ä¸‹æ ‡çš„å¾ªç¯<code>for each</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">ArrLoop</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> numbers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token comment">// for i</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> numbers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            numbers<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> randoms <span class="token operator">=</span> numbers<span class="token punctuation">;</span>                <span class="token comment">// randoms.for</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> random <span class="token operator">:</span> randoms<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ•°ç»„å…ƒç´ ï¼š"</span> <span class="token operator">+</span> random<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ•°ç»„å·¥å…·ç±»Arrays"><a href="#æ•°ç»„å·¥å…·ç±»Arrays" class="headerlink" title="æ•°ç»„å·¥å…·ç±»Arrays"></a>æ•°ç»„å·¥å…·ç±»Arrays</h3><p>è¿™é‡Œæ¼”ç¤ºä¸€ä¸‹å¸¸ç”¨çš„åŠŸèƒ½ï¼Œå…·ä½“çš„è¯¦ç»†ç”¨æ³•å¯ä»¥å‚è€ƒapiæˆ–è€…æ˜¯å‚è€ƒæˆ‘çš„è¿™ç¯‡æ€»ç»“ <a href="https://matemaster.gitee.io/2021/02/05/web-jse-7/">Arrays</a></p><ul><li><b style="color: blue;">æ•°ç»„çš„å¤åˆ¶</b></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> copyNums <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>copyNums<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><b style="color: blue;">æ•°ç»„çš„æ’åº</b></li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> randoms <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token class-name">Random</span> rd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> randoms<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        randoms<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> rd<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>randoms<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>randoms<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>randoms<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¤šç»´æ•°ç»„"><a href="#å¤šç»´æ•°ç»„" class="headerlink" title="å¤šç»´æ•°ç»„"></a>å¤šç»´æ•°ç»„</h3><p>å…ˆå±•ç¤ºäºŒç»´æ•°ç»„çš„ä¸€èˆ¬éå†æ¡ä»¶</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> matrix <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token class-name">Random</span> rd <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// çŸ©é˜µçš„æ•°ç»„ä¸‹æ ‡éå†</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> matrix<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> rd<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// çŸ©é˜µçš„æ•°ç»„å…ƒç´ åˆ—è¡¨</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">deepToString</span><span class="token punctuation">(</span>matrix<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// åŒå±‚for eachå¾ªç¯éå†çŸ©é˜µå…ƒç´ </span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> row <span class="token operator">:</span> matrix<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> colValue <span class="token operator">:</span> row<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>colValue <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Java-Stream"><a href="#Java-Stream" class="headerlink" title="Java Stream"></a>Java Stream</h2><h3 id="ç”Ÿæˆè½¬æ¢ç»ˆæ­¢"><a href="#ç”Ÿæˆè½¬æ¢ç»ˆæ­¢" class="headerlink" title="ç”Ÿæˆè½¬æ¢ç»ˆæ­¢"></a>ç”Ÿæˆè½¬æ¢ç»ˆæ­¢</h3><p><b style="color: RED;">Streamï¼š</b>æµæä¾›äº†ä¸€ç§è®©æˆ‘ä»¬å¯ä»¥åœ¨æ¯”é›†åˆæ›´é«˜æ¦‚å¿µçº§åˆ«çš„æŒ‡å®šè®¡ç®—çš„<strong>æ•°æ®è§†å›¾</strong>ã€‚æµå‘Šè¯‰æˆ‘ä»¬ç”¨æ¥ä»¥åšä»€ä¹ˆè€Œä¸æ˜¯æ€ä¹ˆåšçš„æ–¹å¼å»å¤„ç†æ•°æ®æºï¼ˆé›†åˆï¼‰ï¼</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> alphabet <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span>asList            <span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token string">"D"</span><span class="token punctuation">,</span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token string">"F"</span><span class="token punctuation">,</span><span class="token string">"G"</span><span class="token punctuation">,</span><span class="token string">"H"</span><span class="token punctuation">,</span><span class="token string">"I"</span><span class="token punctuation">,</span><span class="token string">"J"</span><span class="token punctuation">,</span><span class="token string">"K"</span><span class="token punctuation">,</span><span class="token string">"L"</span><span class="token punctuation">,</span><span class="token string">"M"</span><span class="token punctuation">,</span>             <span class="token string">"N"</span><span class="token punctuation">,</span><span class="token string">"O"</span><span class="token punctuation">,</span><span class="token string">"P"</span><span class="token punctuation">,</span><span class="token string">"Q"</span><span class="token punctuation">,</span><span class="token string">"R"</span><span class="token punctuation">,</span><span class="token string">"S"</span><span class="token punctuation">,</span><span class="token string">"T"</span><span class="token punctuation">,</span><span class="token string">"U"</span><span class="token punctuation">,</span><span class="token string">"V"</span><span class="token punctuation">,</span><span class="token string">"W"</span><span class="token punctuation">,</span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token string">"Y"</span><span class="token punctuation">,</span><span class="token string">"Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stream <span class="token operator">=</span> alphabet<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stream1 <span class="token operator">=</span> stream<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toLowerCase</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> collect <span class="token operator">=</span> stream1<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// console: [a, b, c, d, e, f, g, h, i, j, k, l, m,</span>    <span class="token comment">//           n, o, p, q, r, s, t, u, v, w, x, y, z]</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>collect<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµçš„æ¥æºä¸€èˆ¬æ˜¯ï¼šcollectionsã€listsã€setsã€intsã€longsã€doublesã€arraysã€lines of file</p><p>é›†åˆçš„é¡ºåºæµæˆ–è€…å¹¶è¡Œæµ</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">extends</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token keyword">default</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token keyword">default</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token function">parallelStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æµçš„ä¸»è¦ç”Ÿæˆæ–¹å¼ï¼š</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StreamCreator</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> alphabet <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span>of            <span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span> <span class="token string">"B"</span><span class="token punctuation">,</span> <span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token string">"D"</span><span class="token punctuation">,</span> <span class="token string">"E"</span><span class="token punctuation">,</span> <span class="token string">"F"</span><span class="token punctuation">,</span> <span class="token string">"G"</span><span class="token punctuation">,</span> <span class="token string">"H"</span><span class="token punctuation">,</span> <span class="token string">"I"</span><span class="token punctuation">,</span> <span class="token string">"J"</span><span class="token punctuation">,</span> <span class="token string">"K"</span><span class="token punctuation">,</span> <span class="token string">"L"</span><span class="token punctuation">,</span> <span class="token string">"M"</span><span class="token punctuation">,</span>                <span class="token string">"N"</span><span class="token punctuation">,</span> <span class="token string">"O"</span><span class="token punctuation">,</span> <span class="token string">"P"</span><span class="token punctuation">,</span> <span class="token string">"Q"</span><span class="token punctuation">,</span> <span class="token string">"R"</span><span class="token punctuation">,</span> <span class="token string">"S"</span><span class="token punctuation">,</span> <span class="token string">"T"</span><span class="token punctuation">,</span> <span class="token string">"U"</span><span class="token punctuation">,</span> <span class="token string">"V"</span><span class="token punctuation">,</span> <span class="token string">"W"</span><span class="token punctuation">,</span> <span class="token string">"X"</span><span class="token punctuation">,</span> <span class="token string">"Y"</span><span class="token punctuation">,</span> <span class="token string">"Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"alphabet"</span><span class="token punctuation">,</span>alphabet<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> empty <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"empty"</span><span class="token punctuation">,</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> generate <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token operator">::</span><span class="token function">random</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"random"</span><span class="token punctuation">,</span>generate<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BigInteger</span><span class="token punctuation">&gt;</span></span> iterate <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span>iterate            <span class="token punctuation">(</span><span class="token class-name">BigInteger</span><span class="token punctuation">.</span>ZERO<span class="token punctuation">,</span> num <span class="token operator">-&gt;</span> num<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">BigInteger</span><span class="token punctuation">.</span>ONE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"BigInteger"</span><span class="token punctuation">,</span>iterate<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> letter <span class="token operator">=</span> <span class="token string">"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z"</span><span class="token punctuation">;</span>        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> pattern <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">"\\p{Punct}"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">splitAsStream</span><span class="token punctuation">(</span>letter<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"Pattern"</span><span class="token punctuation">,</span>pattern<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> limit <span class="token operator">=</span> <span class="token number">26</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> collect <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span>limit<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span><span class="token string">" : "</span><span class="token operator">+</span> collect<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>Stream.of</code>ï¼šå¯ä»¥å°†å‚æ•°åˆ—è¡¨è¿›è¡ŒæµåŒ–<br><code>Stream.empty</code>ï¼šç”Ÿæˆä¸€ä¸ªä¸åŒ…å«ä»»ä½•å…ƒç´ çš„ç©ºæµ<br><code>Stream.generate</code>ï¼šç”Ÿæˆä¸€ä¸ªæ— é™æµï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ç»è¿‡æ¥å£å‡½æ•°çš„å¤„ç†<br><code>Stream.iterate</code>ï¼šç”Ÿæˆæ— é™æµï¼Œä¼šä»¥åŠç§å­å€¼æ— é™é€’å½’ç”Ÿæˆ seedã€f(seed)ã€f(f(seed))<br><code>Pattern.compile().splitAsStream</code>ï¼šä¾æ®æ­£åˆ™è¡¨è¾¾å¼å¯¹å­—èŠ‚åºåˆ—å¯¹è±¡è¿›è¡Œåˆ†å‰²è·å¾—æµ</p><p>è·å–äº†æµï¼Œå°±å¾—åˆ°äº†å¯ä»¥è®¡ç®—æ“ä½œçš„æ•°æ®è§†å›¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åˆ©ç”¨ä¸­é—´æ“ä½œç¬¦ï¼ˆè½¬æ¢ï¼‰ï¼Œå¯¹æµè¿›è¡Œè®¡ç®—å¤„ç†ï¼Ÿ</p><p>1ï¼‰<code>filter</code>ã€<code>map</code>ã€<code>flatmap</code></p><p>2ï¼‰<code>limit</code>ã€<code>skip</code>ã€<code>concat</code></p><p>3ï¼‰<code>distinct</code>ã€<code>sorted</code>ã€<code>peek</code> </p><p>å¯¹æµè¿›è¡Œäº†ä¸­é—´æ“ä½œä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åšçº¦ç®€ï¼Œé€šè¿‡<strong>ç»ˆæ­¢æ“ä½œç¬¦</strong>å°†æµè½¬åŒ–ä¸ºå¯ä»¥è¢«ç¨‹åºåˆ©ç”¨çš„éæµå€¼ç»“æœï¼</p><p>1ï¼‰<code>forEach</code>ã€<code>toArray</code>ã€<code>reduce</code></p><p>2ï¼‰<code>collect</code>ã€<code>min max</code>ã€<code>count</code></p><p>3ï¼‰<code>allMatch</code>ã€<code>anyMatch</code>ã€<code>noneMatch</code></p><p>4ï¼‰<code>findFirst</code>ã€<code>findAny</code></p><p><b style="color: blue;">forEachæµçš„éå†</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> alphabet <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span>asList            <span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token string">"D"</span><span class="token punctuation">,</span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token string">"F"</span><span class="token punctuation">,</span><span class="token string">"G"</span><span class="token punctuation">,</span><span class="token string">"H"</span><span class="token punctuation">,</span><span class="token string">"I"</span><span class="token punctuation">,</span><span class="token string">"J"</span><span class="token punctuation">,</span><span class="token string">"K"</span><span class="token punctuation">,</span><span class="token string">"L"</span><span class="token punctuation">,</span><span class="token string">"M"</span><span class="token punctuation">,</span>                    <span class="token string">"N"</span><span class="token punctuation">,</span><span class="token string">"O"</span><span class="token punctuation">,</span><span class="token string">"P"</span><span class="token punctuation">,</span><span class="token string">"Q"</span><span class="token punctuation">,</span><span class="token string">"R"</span><span class="token punctuation">,</span><span class="token string">"S"</span><span class="token punctuation">,</span><span class="token string">"T"</span><span class="token punctuation">,</span><span class="token string">"U"</span><span class="token punctuation">,</span><span class="token string">"V"</span><span class="token punctuation">,</span><span class="token string">"W"</span><span class="token punctuation">,</span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token string">"Y"</span><span class="token punctuation">,</span><span class="token string">"Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    alphabet<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>x<span class="token operator">-&gt;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>x<span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">mapæ˜ å°„</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> alphabet <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span>asList            <span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token string">"D"</span><span class="token punctuation">,</span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token string">"F"</span><span class="token punctuation">,</span><span class="token string">"G"</span><span class="token punctuation">,</span><span class="token string">"H"</span><span class="token punctuation">,</span><span class="token string">"I"</span><span class="token punctuation">,</span><span class="token string">"J"</span><span class="token punctuation">,</span><span class="token string">"K"</span><span class="token punctuation">,</span><span class="token string">"L"</span><span class="token punctuation">,</span><span class="token string">"M"</span><span class="token punctuation">,</span>                    <span class="token string">"N"</span><span class="token punctuation">,</span><span class="token string">"O"</span><span class="token punctuation">,</span><span class="token string">"P"</span><span class="token punctuation">,</span><span class="token string">"Q"</span><span class="token punctuation">,</span><span class="token string">"R"</span><span class="token punctuation">,</span><span class="token string">"S"</span><span class="token punctuation">,</span><span class="token string">"T"</span><span class="token punctuation">,</span><span class="token string">"U"</span><span class="token punctuation">,</span><span class="token string">"V"</span><span class="token punctuation">,</span><span class="token string">"W"</span><span class="token punctuation">,</span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token string">"Y"</span><span class="token punctuation">,</span><span class="token string">"Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lowerCaseAlphabet <span class="token operator">=</span> alphabet<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">toLowerCase</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>lowerCaseAlphabet<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">collectæ”¶é›†</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> alphabet <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span>asList            <span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token string">"D"</span><span class="token punctuation">,</span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token string">"F"</span><span class="token punctuation">,</span><span class="token string">"G"</span><span class="token punctuation">,</span><span class="token string">"H"</span><span class="token punctuation">,</span><span class="token string">"I"</span><span class="token punctuation">,</span><span class="token string">"J"</span><span class="token punctuation">,</span><span class="token string">"K"</span><span class="token punctuation">,</span><span class="token string">"L"</span><span class="token punctuation">,</span><span class="token string">"M"</span><span class="token punctuation">,</span>                    <span class="token string">"N"</span><span class="token punctuation">,</span><span class="token string">"O"</span><span class="token punctuation">,</span><span class="token string">"P"</span><span class="token punctuation">,</span><span class="token string">"Q"</span><span class="token punctuation">,</span><span class="token string">"R"</span><span class="token punctuation">,</span><span class="token string">"S"</span><span class="token punctuation">,</span><span class="token string">"T"</span><span class="token punctuation">,</span><span class="token string">"U"</span><span class="token punctuation">,</span><span class="token string">"V"</span><span class="token punctuation">,</span><span class="token string">"W"</span><span class="token punctuation">,</span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token string">"Y"</span><span class="token punctuation">,</span><span class="token string">"Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> collect <span class="token operator">=</span> alphabet<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>collect<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">filterè¿‡æ»¤</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> alphabet <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span>asList            <span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token string">"D"</span><span class="token punctuation">,</span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token string">"F"</span><span class="token punctuation">,</span><span class="token string">"G"</span><span class="token punctuation">,</span><span class="token string">"H"</span><span class="token punctuation">,</span><span class="token string">"I"</span><span class="token punctuation">,</span><span class="token string">"J"</span><span class="token punctuation">,</span><span class="token string">"K"</span><span class="token punctuation">,</span><span class="token string">"L"</span><span class="token punctuation">,</span><span class="token string">"M"</span><span class="token punctuation">,</span>                    <span class="token string">"N"</span><span class="token punctuation">,</span><span class="token string">"O"</span><span class="token punctuation">,</span><span class="token string">"P"</span><span class="token punctuation">,</span><span class="token string">"Q"</span><span class="token punctuation">,</span><span class="token string">"R"</span><span class="token punctuation">,</span><span class="token string">"S"</span><span class="token punctuation">,</span><span class="token string">"T"</span><span class="token punctuation">,</span><span class="token string">"U"</span><span class="token punctuation">,</span><span class="token string">"V"</span><span class="token punctuation">,</span><span class="token string">"W"</span><span class="token punctuation">,</span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token string">"Y"</span><span class="token punctuation">,</span><span class="token string">"Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> biggerM <span class="token operator">=</span> alphabet<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>x <span class="token operator">-&gt;</span> x<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span><span class="token string">"M"</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>biggerM<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">findFirstæ‰¾å‡ºç¬¬ä¸€ä¸ª</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> alphabet <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span>asList            <span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token string">"D"</span><span class="token punctuation">,</span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token string">"F"</span><span class="token punctuation">,</span><span class="token string">"G"</span><span class="token punctuation">,</span><span class="token string">"H"</span><span class="token punctuation">,</span><span class="token string">"I"</span><span class="token punctuation">,</span><span class="token string">"J"</span><span class="token punctuation">,</span><span class="token string">"K"</span><span class="token punctuation">,</span><span class="token string">"L"</span><span class="token punctuation">,</span><span class="token string">"M"</span><span class="token punctuation">,</span>                    <span class="token string">"N"</span><span class="token punctuation">,</span><span class="token string">"O"</span><span class="token punctuation">,</span><span class="token string">"P"</span><span class="token punctuation">,</span><span class="token string">"Q"</span><span class="token punctuation">,</span><span class="token string">"R"</span><span class="token punctuation">,</span><span class="token string">"S"</span><span class="token punctuation">,</span><span class="token string">"T"</span><span class="token punctuation">,</span><span class="token string">"U"</span><span class="token punctuation">,</span><span class="token string">"V"</span><span class="token punctuation">,</span><span class="token string">"W"</span><span class="token punctuation">,</span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token string">"Y"</span><span class="token punctuation">,</span><span class="token string">"Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> first <span class="token operator">=</span> alphabet<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>first<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">flatmapæ‰å¹³åŒ–</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> words <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span><span class="token string">"matemaster"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> flatMap <span class="token operator">=</span> words<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span>w <span class="token operator">-&gt;</span> <span class="token function">letters</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>flatMap<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">letters</span><span class="token punctuation">(</span><span class="token class-name">String</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> res <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        res<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">countç»Ÿè®¡æµä¸­çš„å…ƒç´ </b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> alphabet <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span>asList            <span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token string">"D"</span><span class="token punctuation">,</span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token string">"F"</span><span class="token punctuation">,</span><span class="token string">"G"</span><span class="token punctuation">,</span><span class="token string">"H"</span><span class="token punctuation">,</span><span class="token string">"I"</span><span class="token punctuation">,</span><span class="token string">"J"</span><span class="token punctuation">,</span><span class="token string">"K"</span><span class="token punctuation">,</span><span class="token string">"L"</span><span class="token punctuation">,</span><span class="token string">"M"</span><span class="token punctuation">,</span>                    <span class="token string">"N"</span><span class="token punctuation">,</span><span class="token string">"O"</span><span class="token punctuation">,</span><span class="token string">"P"</span><span class="token punctuation">,</span><span class="token string">"Q"</span><span class="token punctuation">,</span><span class="token string">"R"</span><span class="token punctuation">,</span><span class="token string">"S"</span><span class="token punctuation">,</span><span class="token string">"T"</span><span class="token punctuation">,</span><span class="token string">"U"</span><span class="token punctuation">,</span><span class="token string">"V"</span><span class="token punctuation">,</span><span class="token string">"W"</span><span class="token punctuation">,</span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token string">"Y"</span><span class="token punctuation">,</span><span class="token string">"Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>alphabet<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">skipè·³è¿‡nä¸ªå…ƒç´ </b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> alphabet <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span>asList        <span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token string">"D"</span><span class="token punctuation">,</span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token string">"F"</span><span class="token punctuation">,</span><span class="token string">"G"</span><span class="token punctuation">,</span><span class="token string">"H"</span><span class="token punctuation">,</span><span class="token string">"I"</span><span class="token punctuation">,</span><span class="token string">"J"</span><span class="token punctuation">,</span><span class="token string">"K"</span><span class="token punctuation">,</span><span class="token string">"L"</span><span class="token punctuation">,</span><span class="token string">"M"</span><span class="token punctuation">,</span>         <span class="token string">"N"</span><span class="token punctuation">,</span><span class="token string">"O"</span><span class="token punctuation">,</span><span class="token string">"P"</span><span class="token punctuation">,</span><span class="token string">"Q"</span><span class="token punctuation">,</span><span class="token string">"R"</span><span class="token punctuation">,</span><span class="token string">"S"</span><span class="token punctuation">,</span><span class="token string">"T"</span><span class="token punctuation">,</span><span class="token string">"U"</span><span class="token punctuation">,</span><span class="token string">"V"</span><span class="token punctuation">,</span><span class="token string">"W"</span><span class="token punctuation">,</span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token string">"Y"</span><span class="token punctuation">,</span><span class="token string">"Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> secondHalfAlphabet <span class="token operator">=</span> alphabet<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>secondHalfAlphabet<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">limité™å®šnä¸ªå…ƒç´ </b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> alphabet <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span>asList            <span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token string">"D"</span><span class="token punctuation">,</span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token string">"F"</span><span class="token punctuation">,</span><span class="token string">"G"</span><span class="token punctuation">,</span><span class="token string">"H"</span><span class="token punctuation">,</span><span class="token string">"I"</span><span class="token punctuation">,</span><span class="token string">"J"</span><span class="token punctuation">,</span><span class="token string">"K"</span><span class="token punctuation">,</span><span class="token string">"L"</span><span class="token punctuation">,</span><span class="token string">"M"</span><span class="token punctuation">,</span>                    <span class="token string">"N"</span><span class="token punctuation">,</span><span class="token string">"O"</span><span class="token punctuation">,</span><span class="token string">"P"</span><span class="token punctuation">,</span><span class="token string">"Q"</span><span class="token punctuation">,</span><span class="token string">"R"</span><span class="token punctuation">,</span><span class="token string">"S"</span><span class="token punctuation">,</span><span class="token string">"T"</span><span class="token punctuation">,</span><span class="token string">"U"</span><span class="token punctuation">,</span><span class="token string">"V"</span><span class="token punctuation">,</span><span class="token string">"W"</span><span class="token punctuation">,</span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token string">"Y"</span><span class="token punctuation">,</span><span class="token string">"Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> firstHalfAlphabet <span class="token operator">=</span> alphabet<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>firstHalfAlphabet<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">sortedæµæ’åº</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> alphabet <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span>asList            <span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token string">"D"</span><span class="token punctuation">,</span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token string">"F"</span><span class="token punctuation">,</span><span class="token string">"G"</span><span class="token punctuation">,</span><span class="token string">"H"</span><span class="token punctuation">,</span><span class="token string">"I"</span><span class="token punctuation">,</span><span class="token string">"J"</span><span class="token punctuation">,</span><span class="token string">"K"</span><span class="token punctuation">,</span><span class="token string">"L"</span><span class="token punctuation">,</span><span class="token string">"M"</span><span class="token punctuation">,</span>                    <span class="token string">"N"</span><span class="token punctuation">,</span><span class="token string">"O"</span><span class="token punctuation">,</span><span class="token string">"P"</span><span class="token punctuation">,</span><span class="token string">"Q"</span><span class="token punctuation">,</span><span class="token string">"R"</span><span class="token punctuation">,</span><span class="token string">"S"</span><span class="token punctuation">,</span><span class="token string">"T"</span><span class="token punctuation">,</span><span class="token string">"U"</span><span class="token punctuation">,</span><span class="token string">"V"</span><span class="token punctuation">,</span><span class="token string">"W"</span><span class="token punctuation">,</span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token string">"Y"</span><span class="token punctuation">,</span><span class="token string">"Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> sortedAlphabet <span class="token operator">=</span> alphabet<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sortedAlphabet<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> alphabet <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span>asList        <span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token string">"D"</span><span class="token punctuation">,</span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token string">"F"</span><span class="token punctuation">,</span><span class="token string">"G"</span><span class="token punctuation">,</span><span class="token string">"H"</span><span class="token punctuation">,</span><span class="token string">"I"</span><span class="token punctuation">,</span><span class="token string">"J"</span><span class="token punctuation">,</span><span class="token string">"K"</span><span class="token punctuation">,</span><span class="token string">"L"</span><span class="token punctuation">,</span><span class="token string">"M"</span><span class="token punctuation">,</span>         <span class="token string">"N"</span><span class="token punctuation">,</span><span class="token string">"O"</span><span class="token punctuation">,</span><span class="token string">"P"</span><span class="token punctuation">,</span><span class="token string">"Q"</span><span class="token punctuation">,</span><span class="token string">"R"</span><span class="token punctuation">,</span><span class="token string">"S"</span><span class="token punctuation">,</span><span class="token string">"T"</span><span class="token punctuation">,</span><span class="token string">"U"</span><span class="token punctuation">,</span><span class="token string">"V"</span><span class="token punctuation">,</span><span class="token string">"W"</span><span class="token punctuation">,</span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token string">"Y"</span><span class="token punctuation">,</span><span class="token string">"Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> sortedAlphabet <span class="token operator">=</span> alphabet<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token operator">-&gt;</span> y<span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>sortedAlphabet<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">min maxæœ€å€¼</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> alphabet <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span>asList            <span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">,</span><span class="token string">"B"</span><span class="token punctuation">,</span><span class="token string">"C"</span><span class="token punctuation">,</span><span class="token string">"D"</span><span class="token punctuation">,</span><span class="token string">"E"</span><span class="token punctuation">,</span><span class="token string">"F"</span><span class="token punctuation">,</span><span class="token string">"G"</span><span class="token punctuation">,</span><span class="token string">"H"</span><span class="token punctuation">,</span><span class="token string">"I"</span><span class="token punctuation">,</span><span class="token string">"J"</span><span class="token punctuation">,</span><span class="token string">"K"</span><span class="token punctuation">,</span><span class="token string">"L"</span><span class="token punctuation">,</span><span class="token string">"M"</span><span class="token punctuation">,</span>                    <span class="token string">"N"</span><span class="token punctuation">,</span><span class="token string">"O"</span><span class="token punctuation">,</span><span class="token string">"P"</span><span class="token punctuation">,</span><span class="token string">"Q"</span><span class="token punctuation">,</span><span class="token string">"R"</span><span class="token punctuation">,</span><span class="token string">"S"</span><span class="token punctuation">,</span><span class="token string">"T"</span><span class="token punctuation">,</span><span class="token string">"U"</span><span class="token punctuation">,</span><span class="token string">"V"</span><span class="token punctuation">,</span><span class="token string">"W"</span><span class="token punctuation">,</span><span class="token string">"X"</span><span class="token punctuation">,</span><span class="token string">"Y"</span><span class="token punctuation">,</span><span class="token string">"Z"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> max <span class="token operator">=</span> alphabet<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">compareTo</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>max<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Optional</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> min <span class="token operator">=</span> alphabet<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">compareTo</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>min<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: blue;">matchåŒ¹é…</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> company <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"Huawei"</span><span class="token punctuation">,</span> <span class="token string">"Alibaba"</span><span class="token punctuation">,</span> <span class="token string">"ByteDance"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">boolean</span> res1 <span class="token operator">=</span> company<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">allMatch</span><span class="token punctuation">(</span>it <span class="token operator">-&gt;</span> it<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">boolean</span> res2 <span class="token operator">=</span> company<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">anyMatch</span><span class="token punctuation">(</span>it <span class="token operator">-&gt;</span> it<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">boolean</span> res3 <span class="token operator">=</span> company<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">noneMatch</span><span class="token punctuation">(</span>it <span class="token operator">-&gt;</span> it<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>res1 <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> res2 <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> res3<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Optional"><a href="#Optional" class="headerlink" title="Optional"></a>Optional</h3><p>é™¤äº†Streamæµåº“ä¸­çš„äº§ç”ŸOptionalçš„æ–¹å¼ï¼Œè¿˜å¯ä»¥è‡ªå·±åˆ©ç”¨Optionalçš„æ–¹æ³•äº§ç”Ÿ</p><p><code>Optional.of</code>ã€<code>Optional.ofNullable</code>ã€<code>Optional.empty</code></p><p><code>Optional&lt;T&gt;</code>åªæ˜¯Tç±»çš„ä¸€ä¸ªåŒ…è£…å™¨ï¼Œ<strong>ä¸»è¦æ˜¯ä¸ºäº†è§£å†³ç©ºæŒ‡é’ˆå¼‚å¸¸è€Œäº§ç”Ÿçš„</strong>ã€‚Optionalè¦ä¹ˆæ˜¯Tçš„ä¸€ä¸ªåŒ…è£…å™¨ï¼Œè¦ä¹ˆå°±æ˜¯ç©ºã€‚æ˜¯ä¸€ç§æ›´å®‰å…¨ä½¿ç”¨Tçš„æ–¹å¼ï¼å¯ä»¥æ›´å¥½çš„è§„é¿ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼</p><p><code>orElse</code>ã€<code>orElseGet</code>ã€<code>orElseThrow</code>ã€<code>get</code>ã€<code>isPresent</code>ã€<code>ifPresent</code>ã€<code>map</code>ã€<code>flatMap</code>ã€<code>filter</code></p><h3 id="æµç»“æœ"><a href="#æµç»“æœ" class="headerlink" title="æµç»“æœ"></a>æµç»“æœ</h3><p>ä¸€èˆ¬æƒ…å†µæˆ‘ä»¬ä¼šå¯¹æµæ“ä½œçš„ç»“æœæ”¶é›†åˆ°æ•°æ®ç»“æ„ä¸­ï¼ </p><p><code>toArray</code>ã€<code>collect</code></p><p><b style="color: deeppink;">æµæ”¶é›†åˆ°æ•°ç»„</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// æ”¶é›†åˆ°ç›¸åº”ç±»å‹çš„æ•°ç»„ä¸­</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> collectToArray <span class="token operator">=</span>  <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"Welcome"</span><span class="token punctuation">,</span> <span class="token string">"to"</span><span class="token punctuation">,</span> <span class="token string">"MasterStudio"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>collectToArray<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: deeppink;">æµæ”¶é›†åˆ°é›†åˆ</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// æµæ”¶é›†åˆ°LinkedHashSet</span><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>    <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> collectToSet <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"Welcome"</span><span class="token punctuation">,</span> <span class="token string">"to"</span><span class="token punctuation">,</span> <span class="token string">"MasterStudio"</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toCollection</span><span class="token punctuation">(</span><span class="token class-name">LinkedHashSet</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>collectToSet<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color: deeppink;">æµæ”¶é›†åˆ°æ˜ å°„è¡¨</b></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>    <span class="token class-name">Company</span> com1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"HUAWEI"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Company</span> com2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"Alibaba"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Company</span> com3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"Apple"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Company</span> com4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"IBM"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Company</span><span class="token punctuation">&gt;</span></span> companies <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>com1<span class="token punctuation">,</span> com2<span class="token punctuation">,</span> com3<span class="token punctuation">,</span> com4<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> collectToMap <span class="token operator">=</span> companies<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toMap</span><span class="token punctuation">(</span><span class="token class-name">Company</span><span class="token operator">::</span><span class="token function">getId</span><span class="token punctuation">,</span> <span class="token class-name">Company</span><span class="token operator">::</span><span class="token function">getName</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>collectToMap<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// å…¬å¸</span><span class="token keyword">class</span> <span class="token class-name">Company</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">Company</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> name<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®Œæˆåˆ†åŒºå’Œåˆ†ç»„</p><p>åˆ†ç»„ï¼šæ ¹æ®å›½å®¶ä»£ç è¿›è¡Œåˆ†ç»„</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Locale</span><span class="token punctuation">&gt;</span></span> locales <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getAvailableLocales</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Locale</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> countryToLocales <span class="token operator">=</span> locales<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>            <span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">groupingBy</span><span class="token punctuation">(</span><span class="token class-name">Locale</span><span class="token operator">::</span><span class="token function">getCountry</span><span class="token punctuation">)</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Locale</span><span class="token punctuation">&gt;</span></span> cn <span class="token operator">=</span> countryToLocales<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"CH"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cn<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ†åŒºï¼šå›½å®¶ä½¿ç”¨è‹±æ–‡å’Œä¸ä½¿ç”¨è‹±æ–‡åˆ†åŒº</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Locale</span><span class="token punctuation">&gt;</span></span> locales <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getAvailableLocales</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Locale</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> en <span class="token operator">=</span> locales<span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span>            <span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">partitioningBy</span><span class="token punctuation">(</span>                    l <span class="token operator">-&gt;</span> l<span class="token punctuation">.</span><span class="token function">getLanguage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"en"</span><span class="token punctuation">)</span>            <span class="token punctuation">)</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// è·å–æ‰€æœ‰ä½¿ç”¨è‹±æ–‡çš„å›½å®¶æˆ–åœ°åŒº</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Locale</span><span class="token punctuation">&gt;</span></span> english <span class="token operator">=</span> en<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>english<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="Javaé«˜çº§ç‰¹æ€§"><a href="#Javaé«˜çº§ç‰¹æ€§" class="headerlink" title="Javaé«˜çº§ç‰¹æ€§"></a>Javaé«˜çº§ç‰¹æ€§</h1><h2 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h2><h2 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h2><h2 id="æ³¨è§£å¤„ç†å’Œåå°„"><a href="#æ³¨è§£å¤„ç†å’Œåå°„" class="headerlink" title="æ³¨è§£å¤„ç†å’Œåå°„"></a>æ³¨è§£å¤„ç†å’Œåå°„</h2><p><b style="font-size:26px">æ³¨è§£çš„ç›¸å…³çŸ¥è¯†</b></p><ol><li>æ³¨è§£è¯­æ³•ï¼š<code>@interface</code>æ ‡æ³¨</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">)</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Limit</span> <span class="token punctuation">{</span>    <span class="token comment">// èµ„æºåç§°ï¼Œç”¨äºæè¿°æ¥å£åŠŸèƒ½</span>    <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token comment">// èµ„æº key</span>    <span class="token class-name">String</span> <span class="token function">key</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token comment">// key prefix</span>    <span class="token class-name">String</span> <span class="token function">prefix</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢å±•ç¤ºçš„æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„æ³¨è§£ï¼ŒåŒ…å«äº†æ³¨è§£çš„<strong>å®šä¹‰è¯­æ³•</strong>ã€<strong>é…ç½®å‚æ•°</strong>ã€<strong>é»˜è®¤å€¼</strong>ï¼Œä»¥åŠ<strong>å…ƒæ³¨è§£</strong>ï¼Œæ¥ä¸‹æ¥å¯ä»¥æ¼”ç¤ºä¸€ä¸‹ï¼Œå¦‚ä½•åœ¨ä»£ç ä¸­åº”ç”¨å®šä¹‰çš„æ³¨è§£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Limit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demoMethod1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token annotation punctuation">@Limit</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demoMethod2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token annotation punctuation">@Limit</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"mate"</span><span class="token punctuation">,</span> key <span class="token operator">=</span> <span class="token string">"master"</span><span class="token punctuation">,</span> prefix <span class="token operator">=</span> <span class="token string">"show"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">demoMethod3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œå±•ç¤ºäº†è¿™ä¸ªè‡ªå®šä¹‰æ³¨è§£@Limitçš„ä½¿ç”¨ã€‚<strong>å¯¹äºå·²ç»å®šä¹‰äº†é»˜è®¤å€¼çš„é…ç½®å‚æ•°ï¼Œæˆ‘ä»¬åœ¨å¼•ç”¨æ³¨è§£æ—¶ï¼Œå¯ä»¥çœç•¥æˆ–è€…æ˜¯é‡æ–°å®šä¹‰å€¼ï¼Œä½†æ˜¯å¦‚æœå­˜åœ¨è‡³å°‘ä¸€ä¸ªæ²¡æœ‰é»˜è®¤å€¼æ—¶ï¼Œæˆ‘ä»¬å°±ä¸èƒ½çœç•¥ï¼Œè‡³å°‘è¦å®šä¹‰æ²¡æœ‰é»˜è®¤å€¼çš„é…ç½®å‚æ•°</strong></p><p>å…³äºæ³¨è§£è¯­æ³•éœ€è¦æ³¨æ„ï¼š</p><p>ï¼ˆ1ï¼‰é…ç½®å‚æ•°çš„ç±»å‹åªèƒ½æ˜¯ä»¥ä¸‹ç±»å‹</p><ul><li>åŸºæœ¬æ•°æ®ç±»å‹</li><li>String</li><li>Class</li><li>enum</li><li>æ³¨è§£ç±»å‹</li><li>ä¸Šè¿°ç±»å‹ç»„æˆçš„æ•°ç»„ç±»å‹</li></ul><p>ï¼ˆ2ï¼‰æ³¨æ„é…ç½®å‚æ•°æœ‰æ— é»˜è®¤å€¼ã€ä»¥åŠç›¸å¯¹åº”çš„ä½¿ç”¨æ–¹å¼</p><p>ï¼ˆ3ï¼‰æ³¨è§£å¯ä»¥å‡ºç°çš„åœ°æ–¹â€”â€”æ³¨è§£çš„é€‚ç”¨åœºåˆ</p><ol start="2"><li>Javaæ ‡å‡†æ³¨è§£æœ‰å“ªäº›ï¼Œè¿™äº›æ³¨è§£çš„ä½œç”¨</li></ol><table><thead><tr><th>æ³¨è§£æ¥å£</th><th>åº”ç”¨ä½ç½®</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>@Deprecated</td><td>å…¨éƒ¨ä½ç½®</td><td>æ ‡è®°è¯¥é¡¹è¿‡æ—¶æˆ–ä¸å»ºè®®ä½¿ç”¨</td></tr><tr><td>@Generated</td><td>å…¨éƒ¨ä½ç½®</td><td></td></tr><tr><td>@SuppressWarnings</td><td>é™¤äº†åŒ…å’Œæ³¨è§£ä¹‹å¤–ä½ç½®</td><td>ç»„ç»‡è­¦å‘Šä¿¡æ¯</td></tr><tr><td>@SafeVarargs</td><td>æ–¹æ³•å’Œæ„é€ å™¨</td><td>æ–­è¨€å‚æ•°varagrså¯å®‰å…¨ä½¿ç”¨</td></tr><tr><td>@Override</td><td>æ–¹æ³•</td><td>æ ‡è®°è¦†ç›–çˆ¶ç±»æ–¹æ³•</td></tr><tr><td>@PostConstruct @PreDestroy</td><td>æ–¹æ³•</td><td>æ ‡è®°çš„æ–¹æ³•åº”è¯¥åœ¨æ„é€ ä¹‹åæˆ–ç§»é™¤ä¹‹å‰è¢«è°ƒç”¨</td></tr><tr><td>@FunctionalInterface</td><td>æ¥å£</td><td>æ ‡è®°æ¥å£ä¸ºå‡½æ•°å¼æ¥å£</td></tr><tr><td>@Resource</td><td>ç±»ã€æ¥å£ã€æ–¹æ³•ã€åŸŸ</td><td>åœ¨ç±»å’Œæ¥å£ï¼šæ ‡è®°éœ€è¦ç”¨åˆ°çš„èµ„æºï¼Œåœ¨æ–¹æ³•å’ŒåŸŸï¼šä¸ºæ³¨å…¥è€Œæ ‡è®°</td></tr><tr><td>@Resources</td><td>ç±»ã€æ¥å£</td><td>èµ„æºæ•°ç»„</td></tr><tr><td><strong>å…ƒæ³¨è§£</strong></td><td></td><td></td></tr><tr><td>@Target</td><td>æ³¨è§£</td><td>è¿™ä¸ªæ³¨è§£å¯ä»¥åº”ç”¨çš„ä½ç½®</td></tr><tr><td>@Retention</td><td>æ³¨è§£</td><td>æ³¨è§£ä¿ç•™çš„æ—¶æœŸ</td></tr><tr><td>@Documented</td><td>æ³¨è§£</td><td>æ ‡è®°çš„æ³¨è§£æ˜¯å¦å‡ºç°Javadocä¸­</td></tr><tr><td>@Inherited</td><td>æ³¨è§£</td><td>æ ‡è®°çš„æ³¨è§£èƒ½å¤Ÿè¢«å­ç±»è‡ªåŠ¨ç»§æ‰¿</td></tr><tr><td>@Repeatable</td><td>æ³¨è§£</td><td>æ ‡è®°çš„æ³¨è§£å¯ä»¥åœ¨åŒä¸€é¡¹ä½ç½®åº”ç”¨å¤šæ¬¡</td></tr></tbody></table><p>å…³äº<code>@Target(value)</code>æ³¨è§£çš„ä½¿ç”¨ï¼Œè¡¨æ˜è¢«æ ‡è®°çš„Demoæ³¨è§£å¯ä»¥åº”ç”¨åœ¨å“ªäº›ä½ç½®</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">)</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>FIELD<span class="token punctuation">)</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>METHOD<span class="token punctuation">)</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>PARAMETER<span class="token punctuation">)</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>CONSTRUCTOR<span class="token punctuation">)</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>LOCAL_VARIABLE<span class="token punctuation">)</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>ANNOTATION_TYPE<span class="token punctuation">)</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>PACKAGE<span class="token punctuation">)</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE_PARAMETER<span class="token punctuation">)</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE_USE<span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…³äº<code>@Retention(value)</code>æ³¨è§£çš„ä½¿ç”¨ï¼Œè¡¨æ˜è¢«æ ‡è®°çš„Diyæ³¨è§£å¯ä»¥ä¿å­˜çš„æ—¶æœŸï¼ˆæ³¨è§£çš„æœ‰æ•ˆæœŸï¼‰</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>SOURCE<span class="token punctuation">)</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>CLASS<span class="token punctuation">)</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Diy</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color:red">æ³¨æ„ï¼š</b>è¿™é‡Œ@Targetå’Œ@Retentionæ³¨è§£éƒ½ä¸èƒ½åœ¨åŒä¸€ä½ç½®é‡å¤ä½¿ç”¨ï¼Œè¿™é‡Œä¸»è¦ä¸ºäº†å®Œå…¨å±•ç¤ºä¸¤ä¸ªæ³¨è§£çš„æ‰€æœ‰ä½¿ç”¨æƒ…å†µã€‚</p><p>ä¸Šé¢ç®€è¿°éƒ½æ˜¯å›´ç»•ç€â€œæ³¨è§£çš„è¯­æ³•â€ã€â€œå¦‚ä½•å®šä¹‰ï¼Œä½¿ç”¨æ³¨è§£â€ï¼Œä¸‹é¢å°±ç®€å•äº†è§£ä¸€ä¸‹ï¼šå¦‚ä½•å¤„ç†æ³¨è§£ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•è®©æ³¨è§£ç”Ÿæ•ˆå‘æŒ¥åº”è¯¥æœ‰çš„ä½œç”¨</p><ol><li><p>å¤„ç†æ³¨è§£çš„ä¸‰ç§æ–¹å¼ï¼š</p><ul><li>åˆ©ç”¨åå°„æœºåˆ¶ã€è¿è¡ŒæœŸå¤„ç†</li><li>æºç çº§å¤„ç†</li><li>å­—èŠ‚ç çº§å¤„ç†</li></ul><p> åªéœ€è¦çŸ¥é“è¿™éƒ¨åˆ†çŸ¥è¯†åªæ˜¯äº†è§£ï¼Œä¹Ÿå°±æ˜¯å…³é”®åœ¨äºç”¨ã€ä¸åœ¨äºè‡ªå·±diyã€‚èƒ½å¤Ÿçœ‹åˆ°å®ƒæ˜¯æ€ä¹ˆå®ç°å¤„ç†çš„å°±å¥½ï¼</p></li></ol><hr><p><b style="font-size:26px">åå°„çš„ç›¸å…³çŸ¥è¯†</b></p><p><b style="color:red">1. Classç±»ç›¸å…³çŸ¥è¯†</b></p><p>ï¼ˆ1ï¼‰è·å–Classå¯¹è±¡å®ä¾‹çš„å‡ ç§æ–¹å¼</p><ul><li>ç±»å.class</li><li>å¯¹è±¡.getClass()</li><li>Class.forName(â€œå…¨ç±»åâ€)</li><li>åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»çš„TYPE</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">{</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Usr</span><span class="token punctuation">&gt;</span></span> clazzU <span class="token operator">=</span> <span class="token class-name">Usr</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>                <span class="token class-name">Developer</span> developer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Developer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">Developer</span><span class="token punctuation">&gt;</span></span> clazzD <span class="token operator">=</span> developer<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> clazzP <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">"reflection.Person"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> clazzI <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Usr</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> age<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Developer</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ2ï¼‰å“ªäº›ç±»å‹å…·æœ‰Classå¯¹è±¡</p><ul><li>ç±»ï¼ˆå„ç§ç±»ï¼‰</li><li>æ¥å£</li><li>æ³¨è§£</li><li>æ•°ç»„</li><li>æšä¸¾</li><li>åŸºæœ¬ç±»å‹</li><li>void</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> c1 <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Comparable</span><span class="token punctuation">&gt;</span></span> c2 <span class="token operator">=</span> <span class="token class-name">Comparable</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Override</span><span class="token punctuation">&gt;</span></span> c3 <span class="token operator">=</span> <span class="token class-name">Override</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>        <span class="token class-name">Class</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> c4 <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ElementType</span><span class="token punctuation">&gt;</span></span> c5 <span class="token operator">=</span> <span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Boolean</span><span class="token punctuation">&gt;</span></span> c6 <span class="token operator">=</span> <span class="token keyword">boolean</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> c7 <span class="token operator">=</span> <span class="token keyword">void</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><b style="color:red">2. ç±»çš„åŠ è½½æœºåˆ¶ä»¥åŠç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰</b></p><p>ï¼ˆ1ï¼‰JVMçš„ç±»åŠ è½½è¿‡ç¨‹</p><ul><li>åŠ è½½</li><li>é“¾æ¥</li><li>åˆå§‹åŒ–</li></ul><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210523190916.svg"></p><p><strong>åŠ è½½</strong>ï¼šå°±æ˜¯å°†ç±»çš„.classæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ï¼Œå¹¶ä¸”ä¸ºç±»ç”Ÿæˆä¸€ä¸ªjava.lang.Classå¯¹è±¡çš„è¿‡ç¨‹ã€‚è¯¥è¿‡ç¨‹ä¸€èˆ¬ç”±ç±»åŠ è½½å™¨å®Œæˆï¼ˆJVMçš„ç±»åŠ è½½å™¨æˆ–è€…å¼€å‘è€…DIYçš„ç±»åŠ è½½å™¨ï¼‰ã€‚</p><p>ä¸åŒçš„ç±»åŠ è½½å™¨ï¼Œç±»çš„äºŒè¿›åˆ¶æ•°æ®çš„æ¥æºä¹Ÿæ˜¯ä¸åŒçš„ï¼Œä¸»è¦æ¥æºï¼š</p><ul><li>æœ¬åœ°æ–‡ä»¶ç³»ç»ŸåŠ è½½.classæ–‡ä»¶</li><li>ä»Jarä¸­åŠ è½½.classæ–‡ä»¶</li><li>ä»ç½‘ç»œèµ„æºä¸­åŠ è½½.classæ–‡ä»¶</li><li>åŠ¨æ€ç¼–è¯‘çš„Javaæºæ–‡ä»¶çš„.class</li></ul><p><strong>é“¾æ¥</strong>ï¼šå°†ç±»çš„äºŒè¿›åˆ¶ä»£ç åˆå¹¶åˆ°JREçš„è¿‡ç¨‹ã€‚ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šéªŒè¯ã€å‡†å¤‡ã€è§£æã€‚</p><ul><li>éªŒè¯ï¼šä¸»è¦é€šè¿‡æ–‡ä»¶æ ¼å¼éªŒè¯ï¼Œå…ƒæ•°æ®éªŒè¯ï¼Œå­—èŠ‚ç éªŒè¯ï¼Œç¬¦å·å¼•ç”¨éªŒè¯è¿™å››ç§éªŒè¯æ–¹å¼ç¡®ä¿ç±»çš„ä¿¡æ¯ç¬¦åˆJVMçš„å®‰å…¨è§„èŒƒã€‚</li><li>å‡†å¤‡ï¼šå°†ç±»çš„staticå˜é‡åˆ†é…å†…å­˜å’Œè®¾ç½®é»˜è®¤å€¼</li><li>è§£æï¼šå°†ç±»çš„äºŒè¿›åˆ¶æ•°æ®ä¸­çš„ç¬¦å·å¼•ç”¨æ›¿æ¢æˆç›´æ¥å¼•ç”¨</li></ul><p>ç¬¦å·å¼•ç”¨ï¼šç¬¦å·å¼•ç”¨æ˜¯ä»¥ä¸€ç»„ç¬¦å·æ¥æè¿°æ‰€å¼•ç”¨çš„ç›®æ ‡ï¼Œç¬¦å·å¯ä»¥æ˜¯ä»»ä½•çš„å­—é¢å½¢å¼çš„å­—é¢é‡ï¼Œåªè¦ä¸ä¼šå‡ºç°å†²çªèƒ½å¤Ÿå®šä½åˆ°å°±è¡Œã€‚å¸ƒå±€å’Œå†…å­˜æ— å…³ã€‚ç›´æ¥å¼•ç”¨ï¼šæ˜¯æŒ‡å‘ç›®æ ‡çš„æŒ‡é’ˆï¼Œåç§»é‡æˆ–è€…èƒ½å¤Ÿç›´æ¥å®šä½çš„å¥æŸ„ã€‚è¯¥å¼•ç”¨æ˜¯å’Œå†…å­˜ä¸­çš„å¸ƒå±€æœ‰å…³çš„ï¼Œå¹¶ä¸”ä¸€å®šåŠ è½½è¿›æ¥çš„ã€‚</p><p><strong>åˆå§‹åŒ–</strong>ï¼š åˆå§‹åŒ–æ˜¯ä¸ºç±»çš„é™æ€å˜é‡èµ‹äºˆæ­£ç¡®çš„åˆå§‹å€¼</p><p>ï¼ˆ2ï¼‰JVMç±»åŠ è½½çš„æ—¶æœºï¼ˆJVMä»€ä¹ˆæ—¶å€™ä¼šåŠ è½½ç±»ï¼Ÿï¼‰</p><ul><li>JVMé¦–å…ˆåˆå§‹åŒ–mainæ–¹æ³•çš„ç±»</li><li>åˆ›å»ºç±»çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯newä¸€ä¸ªå¯¹è±¡</li><li>è®¿é—®æŸä¸ªç±»æˆ–æ¥å£çš„é™æ€å˜é‡ï¼Œæˆ–è€…å¯¹è¯¥é™æ€å˜é‡èµ‹å€¼</li><li>è°ƒç”¨ç±»çš„é™æ€æ–¹æ³•</li><li>åå°„ï¼ˆClass.forName(â€œcn.matemaster.Diyâ€)ï¼‰</li><li>åˆå§‹åŒ–ä¸€ä¸ªç±»çš„å­ç±»ï¼ˆä¼šé¦–å…ˆåˆå§‹åŒ–å­ç±»çš„çˆ¶ç±»ï¼‰</li></ul><p><b style="color:red">æ³¨æ„ï¼š</b>åœ¨å­ç±»è°ƒç”¨çˆ¶ç±»çš„é™æ€æˆå‘˜æˆ–è€…æ–¹æ³•æ—¶ï¼Œå­ç±»ä¸åˆå§‹åŒ–ã€‚å½“å£°æ˜ç±»æ•°ç»„æ—¶ï¼Œä¸å¯¹è¯¥ç±»åˆå§‹åŒ–ã€‚è®¿é—®ç±»çš„é™æ€å¸¸é‡ï¼Œè¯¥ç±»ä¹Ÿä¸åˆå§‹åŒ–ã€‚</p><p>ï¼ˆ3ï¼‰ç±»åŠ è½½å™¨</p><p>Javaç¨‹åºè§£é‡Šè¿è¡Œçš„è¿‡ç¨‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210523194117.svg"></p><p>JVMæä¾›çš„ä¸»è¦åŠ è½½å™¨ä»¥åŠä½œç”¨ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210523200555.svg"></p><p>ç©¿æ’ä¸€å¥ï¼šç±»åŠ è½½å™¨å†³å®šäº†ç±»çš„äºŒè¿›åˆ¶æ•°æ®çš„æ¥æºï¼</p><p>Bootstrapï¼šå¼•å¯¼ç±»åŠ è½½å™¨ï¼Œä¸»è¦è´Ÿè´£åŠ è½½ç³»ç»Ÿç±»<code>rt.jar</code>ï¼Œä¸å¯ç›´æ¥è·å–</p><p>Extensionï¼šæ‹“å±•ç±»åŠ è½½å™¨ï¼Œç”¨äºåŠ è½½<code>jre/lib/ext</code>ç›®å½•ä¸‹çš„jaræ–‡ä»¶ä¸­çš„ç±»</p><p>Systemï¼šç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œç”¨äºåŠ è½½ç±»è·¯å¾„ä¸‹çš„ç±»<code>classpath</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoadDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">ClassLoader</span> system <span class="token operator">=</span> <span class="token class-name">ClassLoader</span><span class="token punctuation">.</span><span class="token function">getSystemClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ClassLoader</span> extension <span class="token operator">=</span> system<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ClassLoader</span> bootstrap <span class="token operator">=</span> extension<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>system<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>extension<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bootstrap<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>çŸ¥æ™“äº†ä¸Šé¢ä¸‰ä¸ªç”±JVMæä¾›çš„ç±»åŠ è½½å™¨ï¼Œæ¥ä¸‹æ¥å°±æ˜¯äº†è§£å¦‚ä½•å®šä¹‰å±äºè‡ªå·±çš„ç±»åŠ è½½å™¨</p><p>DIYï¼šç»§æ‰¿<code>ClassLoader</code>å¹¶ä¸”é‡å†™æ–¹æ³•<code>findClass(String className)</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DiyClassLoader</span> <span class="token keyword">extends</span> <span class="token class-name">ClassLoader</span><span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">findClass</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">findClass</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å­—èŠ‚ç æ ¡éªŒå™¨çš„æ ¡éªŒå†…å®¹ï¼š</p><ul><li>å˜é‡åœ¨ä½¿ç”¨å‰éœ€è¦åˆå§‹åŒ–</li><li>æ–¹æ³•è°ƒç”¨å’Œå¯¹è±¡å¼•ç”¨ç±»å‹è¦åŒ¹é…</li><li>è®¿é—®ç§æœ‰æ•°æ®å’Œæ–¹æ³•çš„è§„åˆ™æ²¡æœ‰è¿å</li><li>å¯¹æœ¬åœ°å˜é‡çš„è®¿é—®éƒ½è½åœ¨è¿è¡Œæ—¶çš„å †æ ˆç»“æ„å†…</li><li>è¿è¡Œæ—¶å †æ ˆæ²¡æœ‰æº¢å‡º</li></ul><p>é™¤äº†ç³»ç»Ÿç±»ä¸åšæ ¡éªŒä¹‹å¤–ï¼Œå…¶ä»–æ‰€æœ‰ç±»éƒ½å¿…é¡»æ»¡è¶³ä¸Šé¢çš„è¦æ±‚ï¼Œä¸ç„¶åŠ è½½ä¸é€šè¿‡ï¼</p><p><b style="color:red">3. åå°„æ“ä½œ</b></p><p>ï¼ˆ1ï¼‰åˆ©ç”¨åå°„å¯¹è±¡å»è·å–è¿è¡Œæ—¶ç±»çš„å®Œæ•´ç»“æ„ä¿¡æ¯</p><ul><li>Filed</li><li>Method</li><li>Constructor</li><li>SuperClass</li><li>Interface</li><li>Annotation</li><li>ClassLoader</li><li>Package</li><li>ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210523220557.svg"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DiyReflectUtil</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printClassInfo</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">{</span>        <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Class</span> superclass <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getSuperclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> modifier <span class="token operator">=</span> <span class="token class-name">Modifier</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>clazz<span class="token punctuation">.</span><span class="token function">getModifiers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>modifier<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>modifier <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"class "</span> <span class="token operator">+</span> className<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>superclass <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> superclass <span class="token operator">!=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"extends "</span> <span class="token operator">+</span> superclass<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">" {"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printConstructor</span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printMethod</span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">printFiled</span><span class="token punctuation">(</span>clazz<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/**æ‰“å°æ‰€æœ‰åŸŸä¿¡æ¯*/</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printFiled</span><span class="token punctuation">(</span><span class="token class-name">Class</span> cl<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> cl<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">Class</span> type <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> name <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> modifier <span class="token operator">=</span> <span class="token class-name">Modifier</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>field<span class="token punctuation">.</span><span class="token function">getModifiers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>modifier<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>modifier <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">/**æ‰“å°æ‰€æœ‰æ„é€ å™¨*/</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printConstructor</span><span class="token punctuation">(</span><span class="token class-name">Class</span> cl<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Constructor</span><span class="token punctuation">[</span><span class="token punctuation">]</span> constructors <span class="token operator">=</span> cl<span class="token punctuation">.</span><span class="token function">getDeclaredConstructors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Constructor</span> constructor <span class="token operator">:</span> constructors<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">String</span> name <span class="token operator">=</span> constructor<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> modifier <span class="token operator">=</span> <span class="token class-name">Modifier</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>constructor<span class="token punctuation">.</span><span class="token function">getModifiers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>modifier<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>modifier <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">" ("</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span> paramTypes <span class="token operator">=</span> constructor<span class="token punctuation">.</span><span class="token function">getParameterTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> paramTypes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>paramTypes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">");"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">/**æ‰“å°æ‰€æœ‰æ–¹æ³•*/</span>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printMethod</span><span class="token punctuation">(</span><span class="token class-name">Class</span> cl<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> cl<span class="token punctuation">.</span><span class="token function">getDeclaredMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">Class</span> returnType <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getReturnType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> name <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">"  "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> modifier <span class="token operator">=</span> <span class="token class-name">Modifier</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getModifiers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>modifier<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>modifier <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>returnType<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">" ("</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token punctuation">]</span> paramTypes <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">getParameterTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> paramTypes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">", "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>paramTypes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">");"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ2ï¼‰åˆ©ç”¨åå°„å¯¹è±¡åŠ¨æ€åœ°æ“ä½œç±»</p><ul><li>åŠ¨æ€åˆ›å»ºå¯¹è±¡</li><li>åŠ¨æ€è°ƒç”¨æ–¹æ³•</li></ul><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InstantiationException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span> <span class="token punctuation">{</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Usr</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token class-name">Usr</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>        <span class="token class-name">Usr</span> usr <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>usr<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶å®åˆ›å»ºå¯¹è±¡æˆ‘ä»¬é™¤äº†å¯ä»¥ç›´æ¥ä½¿ç”¨<code>newInstance</code>æ–¹æ³•ä¹‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€è°ƒç”¨Usrçš„æ„é€ æ–¹æ³•ï¼Œç„¶ååˆ©ç”¨ç›¸åº”çš„æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œè¿™æ ·ä¹Ÿå¯ä»¥é¿å…é»˜è®¤æ„é€ å™¨ä¸å­˜åœ¨æ—¶å¸¦æ¥çš„å¼‚å¸¸ã€‚</p><p>å…¶å®è¿™é‡Œåªæ˜¯Classçš„ç®€å•è¿ç”¨ï¼Œå®ƒçš„å¼ºå¤§ä¹‹å¤„å°±åœ¨äºï¼šä¸ä»…å¯ä»¥è·å–è¿è¡Œæ—¶ç±»çš„å…¨éƒ¨ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥åŠ¨æ€çš„è®¾è®¡ä»£ç ã€‚</p><p><strong>æ¯”å¦‚ï¼šåˆ©ç”¨åå°„çš„æ–¹å¼å»æ‹“å±•ä»»æ„ç±»å‹çš„æ•°ç»„</strong></p><p>é€šè¿‡ä¸‹é¢çš„æ–¹å¼ï¼Œå°†ä»»æ„ç±»å‹çš„æ•°ç»„è½¬åŒ–ä¸ºObjectå¯¹è±¡ï¼Œé‚£ä¹ˆå¯ä»¥åˆ©ç”¨åå°„çš„æ–¹å¼å»å®ç°è¿è¡Œæ—¶å˜åŒ–æ•°ç»„çš„é•¿åº¦ï¼Œå¹¶ä¸”é¿å…äº†Object[]ä¸ä¸€èˆ¬ç±»å‹æ•°ç»„çš„è½¬åŒ–å¼‚å¸¸ï¼š<code>ClassCastException</code></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DiyReflectUtil</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> <span class="token function">goodCopyMethod</span><span class="token punctuation">(</span><span class="token class-name">Object</span> array<span class="token punctuation">,</span> <span class="token keyword">int</span> newLength<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Class</span> clazz <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>clazz<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token comment">/**è·å–è¿è¡Œæ—¶æ•°ç»„å¯¹åº”çš„ç±»å‹ä»¥åŠæ•°ç»„çš„é•¿åº¦*/</span>        <span class="token class-name">Class</span> componentType <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getComponentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Object</span> newArray <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span>componentType<span class="token punctuation">,</span> newLength<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">arraycopy</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>newArray<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> newLength<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> newArray<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ¯”å¦‚ï¼šåˆ©ç”¨åå°„çš„æ–¹å¼å»åˆ†æè¿è¡Œæ—¶å¯¹è±¡çš„ä¿¡æ¯</strong></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DiyReflectUtil</span> <span class="token punctuation">{</span>    <span class="token comment">/**è·å–è¿è¡Œæ—¶å¯¹è±¡çš„ä¿¡æ¯(çŠ¶æ€)*/</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">objectAnalyzer</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">,</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> visited <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token string">"null"</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>visited<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token string">"..."</span><span class="token punctuation">;</span>        visited<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Class</span> clazz <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>clazz <span class="token operator">==</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> obj<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>clazz<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">String</span> str <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getComponentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"[]{"</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> length <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>                    str <span class="token operator">+=</span> <span class="token string">", "</span><span class="token punctuation">;</span>                <span class="token class-name">Object</span> val <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>clazz<span class="token punctuation">.</span><span class="token function">getComponentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isPrimitive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    str <span class="token operator">+=</span> val<span class="token punctuation">;</span>                <span class="token keyword">else</span>                    str <span class="token operator">+=</span> <span class="token function">objectAnalyzer</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> flag<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> str <span class="token operator">+</span> <span class="token string">"}"</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token class-name">String</span> result <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">":"</span><span class="token punctuation">;</span>        <span class="token keyword">do</span> <span class="token punctuation">{</span>            result <span class="token operator">+=</span> <span class="token string">"["</span><span class="token punctuation">;</span>            <span class="token class-name">Field</span><span class="token punctuation">[</span><span class="token punctuation">]</span> fields <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">AccessibleObject</span><span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span>fields<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Field</span> field <span class="token operator">:</span> fields<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token class-name">Modifier</span><span class="token punctuation">.</span><span class="token function">isStatic</span><span class="token punctuation">(</span>field<span class="token punctuation">.</span><span class="token function">getModifiers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"["</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                        result <span class="token operator">+=</span> <span class="token string">","</span><span class="token punctuation">;</span>                    result <span class="token operator">+=</span> field<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"="</span><span class="token punctuation">;</span>                    <span class="token keyword">try</span> <span class="token punctuation">{</span>                        <span class="token class-name">Class</span> type <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token class-name">Object</span> val <span class="token operator">=</span> field<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">isPrimitive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> result <span class="token operator">+=</span> val<span class="token punctuation">;</span>                        <span class="token keyword">else</span>                    result <span class="token operator">+=</span> <span class="token function">objectAnalyzer</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> flag<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IllegalAccessException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            result <span class="token operator">+=</span> <span class="token string">"]"</span><span class="token punctuation">;</span>            clazz <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getSuperclass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token keyword">while</span> <span class="token punctuation">(</span>clazz <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> flag <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> result<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ3ï¼‰åˆ©ç”¨åå°„æ“ä½œæ³›å‹</p><ul><li>ParameterizedTypeï¼šæ³›å‹ç±»æˆ–æ³›å‹æ¥å£</li><li>GenericArrayTypeï¼šæ³›å‹æ•°ç»„</li><li>TypeVariableï¼šç±»å‹å˜é‡</li><li>WildcardTypeï¼šé€šé…ç¬¦</li></ul><p>å› ä¸ºåœ¨JVMä¸­æ³›å‹æ˜¯ç±»å‹æ“¦é™¤çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¾æ—§å¯ä»¥ä¾é åå°„çš„APIå»ç¡®å®šç›¸åº”çš„æ³›å‹ä¿¡æ¯</p><p><img src="https://cdn.jsdelivr.net/gh/matemaster9/imgs-masterstudio/imgs1/20210524121307.svg"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflectDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">Class</span> clazz <span class="token operator">=</span> <span class="token class-name">DiyComparator</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>        <span class="token class-name">Type</span><span class="token punctuation">[</span><span class="token punctuation">]</span> types <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getGenericInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>types<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getTypeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">DiyComparator</span> <span class="token keyword">implements</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">User</span> u1<span class="token punctuation">,</span> <span class="token class-name">User</span> u2<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>u1<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> u2<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">else</span>                              <span class="token keyword">return</span> u1<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> u2<span class="token punctuation">.</span><span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ï¼ˆ4ï¼‰åˆ©ç”¨åå°„æ“ä½œæ³¨è§£</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassDemo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchFieldException</span> <span class="token punctuation">{</span>        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Company</span><span class="token punctuation">&gt;</span></span> clazz <span class="token operator">=</span> <span class="token class-name">Company</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>        <span class="token class-name">Annotation</span><span class="token punctuation">[</span><span class="token punctuation">]</span> annotations <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getAnnotations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>annotations<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Table</span> table <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Table</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>table<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Field</span> founder <span class="token operator">=</span> clazz<span class="token punctuation">.</span><span class="token function">getDeclaredField</span><span class="token punctuation">(</span><span class="token string">"founder"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        founder<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Filed</span> filed <span class="token operator">=</span> founder<span class="token punctuation">.</span><span class="token function">getAnnotation</span><span class="token punctuation">(</span><span class="token class-name">Filed</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>filed<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>filed<span class="token punctuation">.</span><span class="token function">founder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span><span class="token string">"tb_company"</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">Company</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Filed</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"company_name"</span><span class="token punctuation">,</span> founder <span class="token operator">=</span> <span class="token string">"founder_name"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Filed</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"company_name"</span><span class="token punctuation">,</span> founder <span class="token operator">=</span> <span class="token string">"founder_name"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> founder<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">)</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span><span class="token annotation punctuation">@interface</span> <span class="token class-name">Table</span> <span class="token punctuation">{</span>    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>FIELD<span class="token punctuation">)</span><span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span><span class="token annotation punctuation">@interface</span> <span class="token class-name">Filed</span> <span class="token punctuation">{</span>    <span class="token class-name">String</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">String</span> <span class="token function">founder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®‰å…¨"><a href="#å®‰å…¨" class="headerlink" title="å®‰å…¨"></a>å®‰å…¨</h2>]]></content>
      
      
      <categories>
          
          <category> CoreJava </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> åŸåˆ› </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå®¢æ–‡ç« å¯¼èˆª</title>
      <link href="posts/9622.html"/>
      <url>posts/9622.html</url>
      
        <content type="html"><![CDATA[<h1 id="æŠ€æœ¯æ–‡ç« "><a href="#æŠ€æœ¯æ–‡ç« " class="headerlink" title="æŠ€æœ¯æ–‡ç« "></a>æŠ€æœ¯æ–‡ç« </h1><h1 id="æŠ€æœ¯å­¦ä¹ ç¬”è®°"><a href="#æŠ€æœ¯å­¦ä¹ ç¬”è®°" class="headerlink" title="æŠ€æœ¯å­¦ä¹ ç¬”è®°"></a>æŠ€æœ¯å­¦ä¹ ç¬”è®°</h1>]]></content>
      
      
      <categories>
          
          <category> MasterStudio </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŸåˆ› </tag>
            
            <tag> MasterStudio </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
